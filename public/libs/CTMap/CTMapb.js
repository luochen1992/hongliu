!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(2),o=i(r),a="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};a.CTMap?Object.assign(a.CTMap,o.default):a.CTMap=o.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=r(o),s=n(15),l=i(s),u=n(20),c=i(u),h=n(23),f=i(h),p=n(24),d=i(p),g=n(38),m=i(g),v=n(90),y=i(v),_=n(108),x=i(_),w=n(109),b=i(w),C=n(110),S=i(C),M=n(111),E=i(M),I=n(112),T=i(I),P=n(114),L=i(P),D=n(115),A=i(D),k=n(86),N=i(k),O=n(87),R=i(O),F=n(93),z=i(F),B=n(116),V=i(B),G=n(30),H=i(G),j=n(32),U=i(j),W=n(117),q=(i(W),n(118)),Y=(i(q),n(37)),X=i(Y),Z=n(120),J=i(Z),K=n(121),$=i(K),Q=n(122),tt=n(125),et=n(129),nt=n(631),it=i(nt),rt=n(107),ot=i(rt),at=n(632),st=i(at),lt=n(633),ut=i(lt),ct=n(634),ht=i(ct),ft=Cesium;ft.DrawTool=m.default,ft.PluginManager=l.default,ft.Util=a,ft.Widget=c.default,ft.Tool=f.default,ft.Measure=y.default,ft.EnvEffects=z.default,ft.ViewshedAnalyze=N.default,ft.FloodAnalyze=R.default,ft.transformEditor=V.default,ft.LayerType=H.default,ft.LayerStyle=U.default,ft.TerrainLayerList=X.default,ft.Viewer=d.default,ft.KeyboardNavigation=$.default,ft.BaiDuImageryProvider=J.default,ft.MapVLayer=tt.MapVLayer,ft.EchartsLayer=et.EchartsLayer,ft.echarts=et.echarts,ft.Clusterpoint=it.default,ft.MapVOpt=tt.MapVOpt,ft.HeatMapLayer=Q.HeatMapLayer,ft.HeatMapOpt=Q.HeatMapOpt,ft.LatLonGridLayer=ut.default,ft.WaterFacePrimitive=ht.default,ft.tooltip=b.default,ft.commonFunction=S.default,ft.YSTunnel=x.default,ft.HLLgygc=E.default,ft.waterEffects=T.default,ft.wasiEffects=L.default,ft.workPolygonEffects=A.default;try{ft=ot.default.checkLicense()?ft:{}}catch(t){}st.default.greeting(),e.default=ft},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.syncGetJson=e.arrayToStr=e.strToArray=e.getLocation=e.aAToa_a=e.a_aToaA=e.formatURLByHost=e.formatURL=e.formatURL2=e.rename=e.formatString=e.indexOf=e.falseFn=e.createGuid=e.json2xmlAndaAToa_a=e.json2xml=e.xmlToJson=e.strToXml=e.jsonSyncPromise=e.isColor=e.xmlPromise=e.filterUnit=e.isAddUnit=e.isArray=e.isStrNumber=e.isNumber=e.isString=e.getJsonLength=e.toBooleanTrueOrFlse=e.isTrueOrFalse=e.isBoolean=e.isObject=e.isJson=e.math=e.array=e.$=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(4),s=r(a),l=n(7),u=r(l),c=n(8),h=r(c),f=n(9),p=(i(f),n(13)),d=(r(p),e.$=s.default);e.array=h.default,e.math=u.default,e.isJson=function(t){if(!d.isPlainObject(t))return!1;try{return JSON.stringify(t),!0}catch(t){return!1}},e.isObject=function(t){return"object"===("undefined"==typeof t?"undefined":o(t))&&null!==t},e.isBoolean=function(t){return"boolean"==typeof t},e.isTrueOrFalse=function(t){return"boolean"==typeof t||"true"===t||"false"===t},e.toBooleanTrueOrFlse=function(t){return t===!0||"true"===t||"TRUE"===t||t!==!1&&"false"!==t&&"FALSE"!==t&&void 0};"debug"in console||(console.debug=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];console.log.apply(void 0,e)});var g=(e.getJsonLength=function(t){var e=0;for(var n in t)e++;return e},e.isString=function(t){return"string"==typeof t&&t.constructor===String}),m=e.isNumber=function(t){return"number"==typeof t&&t.constructor===Number},v=(e.isStrNumber=function(t){return g(t)?!isNaN(parseFloat(t)):"number"==typeof t&&t.constructor===Number},e.isArray=function(t){return t instanceof Array},e.isAddUnit=function(t){var e=new RegExp(/^(\-|\+)?\d+(m|px)?$/);return e.test(t)},e.filterUnit=function(t){return m(t)?t:Number(t.match(/^(\-|\+)?\d+/)[0])},e.xmlPromise=function(t){return d.ajax({url:t,type:"get",dataType:"xml"})},e.isColor=function(t){var e=new RegExp("^#([0-9a-fA-F]{6}|[0-9a-fA-F]{8})$");return e.test(t)},e.jsonSyncPromise=function(t){return d.ajax({url:t,type:"get",dataType:"json",async:!1})},e.strToXml=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.xmlToJson=function t(e){var n={};if(1===e.nodeType){if(e.attributes.length>0)for(var i=0;i<e.attributes.length;i+=1){var r=e.attributes.item(i);n[r.nodeName]=r.nodeValue}}else 3===e.nodeType&&(n=e.nodeValue);if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o+=1){var a=e.childNodes.item(o),s=a.nodeName;if("undefined"==typeof n[s]){var l=null;"#cdata-section"===s.toLowerCase()?(l=CDATAtoSTR(e.innerHTML),s="value"):l=t(a),"#text"===s&&""===l.replace(/^\s+/g,"")||"#comment"===s||("#text"===s?n=l:n[s]=l)}else{if("undefined"==typeof n[s].length){var u=n[s];n[s]=[],n[s].push(u)}n[s].push(t(a))}}return n},e.json2xml=function t(e,n){var i="";if(e instanceof Array){var r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i+=t(u,n)}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}}else if(e instanceof Object){n&&(i+="<"+n+">");for(var c in e)i+=t(e[c],c);n&&(i+="</"+n+">")}else i+="<"+n+">"+e+"</"+n+">";return i},e.json2xmlAndaAToa_a=function t(e,n){var i="";if(e instanceof Array){var r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i+=t(u,n)}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}}else if(e instanceof Object){n&&(i+="<"+v(n)+">");for(var c in e)i+=t(e[c],c);n&&(i+="</"+v(n)+">")}else i+="<"+v(n)+">"+e+"</"+v(n)+">";return i},e.createGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},e.falseFn=function(){return!1},e.indexOf=function(t,e,n){for(var i in e)if(e[i][n]===t[n])return i;return-1},e.formatString=function(t,e){if(0!==e.length){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=new RegExp("{"+s.k+"}","gm");t=t.replace(l,s.v)}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t}return t},e.rename=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1],n=arguments[2],i=arguments[3],r=0,o=function t(e,n,i,o){for(var a in n){var s=void 0;if(s=i?n[a][i]:n[a],s&&e===s&&n[a]!==o)return t(e+"_"+ ++r,n,i,o)}return e};return o(t,e,n,i)},e.formatURL2=function(t,e){if(e){var n=e.split("/"),i=t;if(!i)return e;i=i.split("/"),i.pop();for(var r="",o=0;o<n.length;o+=1)0===o&&"."===n[o]&&(o+=1),".."===n[o]?i.pop():i.push(n[o]);for(var a=0;a<i.length;a+=1){var s=a===i.length-1?"":"/";r+=i[a]+s}return r}},e.formatURL=function(t){if(t){var e=t.split("/"),n=window.location.href;if(!n)return t;n=n.split("/"),n.pop();for(var i="",r=0;r<e.length;r+=1)0===r&&"."===e[r]&&(r+=1),".."===e[r]?n.pop():n.push(e[r]);for(var o=0;o<n.length;o+=1){var a=o===n.length-1?"":"/";i+=n[o]+a}return i}},e.formatURLByHost=function(t){if(t){var e=window.location.origin;if(!e)return t;for(var n=t.split("/"),i=[e],r="",o=0;o<n.length;o+=1)0===o&&"."===n[o]&&(o+=1),".."===n[o]?o+=1:i.push(n[o]);for(var a=0;a<i.length;a+=1){var s=a===i.length-1?"":"/";r+=i[a]+s}return r}},e.a_aToaA=function(t){return t.replace(/_[a-z]/g,function(t){return t.toUpperCase().charAt(1)})},e.aAToa_a=function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})});e.getLocation=function(t){var e={dir:"",filename:""};new RegExp(/^http:\/\//g).test(t)&&(t=t.substring(6));for(var n=t.split("/"),i=0;i<n.length;i++)i===n.length-1?(e.dir+="/",e.filename=n[i]):null!==n[i]&&""!==n[i]&&(e.dir+="/"+n[i]);return e.dir="http:/"+e.dir,e},e.strToArray=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float",n=[];if("string"!=typeof t)return n;var i=t.split(",");return i?(i instanceof Array||(i=[i]),i.forEach(function(t){if("string"==typeof t){var e=t.split(" ");if(e&&1===e.length)n.push(e[0]);else if(e&&e.length>1){for(var i=[],r=0;r<e.length;r++)i.push(parseFloat(e[r]));n.push(i)}}}),"string"===e||"String"===e||"STRING"===e?n:(n.forEach(function(t,n,i){if(t instanceof Array)t.forEach(function(t,n,i){switch(e){case"float":i[n]=parseFloat(t)}});else switch(e){case"float":i[n]=parseFloat(t)}}),n)):n},e.arrayToStr=function(t){var e="";if(!(t&&t instanceof Array&&0!==t.length))return"";for(var n=0;n<t.length;n++){0!==n&&(e+=",");var i=t[n];if(i instanceof Array)for(var r=0;r<i.length;r++)0!==r&&(e+=" "),e+=""+i[r];else e+=""+i}return e},e.syncGetJson=function(t){var e=d.ajax({async:!1,url:t,dataType:"text"});if(4===e.readyState&&200===e.status)return JSON.parse(e.responseText)}},function(t,e,n){var i,r;(function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e,n){"object"==o(t)&&"object"==o(t.exports)?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:void 0,function(a,s){function l(t,e){e=e||st;var n=e.createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function u(t){var e=!!t&&"length"in t&&t.length,n=xt.type(t);return"function"!==n&&!xt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function c(t,e,n){return xt.isFunction(e)?xt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?xt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?xt.grep(t,function(t){return ft.call(e,t)>-1!==n}):Lt.test(e)?xt.filter(e,t,n):(e=xt.filter(e,t),xt.grep(t,function(t){return ft.call(e,t)>-1!==n&&1===t.nodeType}))}function h(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function f(t){var e={};return xt.each(t.match(Rt)||[],function(t,n){e[n]=!0}),e}function p(t){return t}function d(t){throw t}function g(t,e,n){var i;try{t&&xt.isFunction(i=t.promise)?i.call(t).done(e).fail(n):t&&xt.isFunction(i=t.then)?i.call(t,e,n):e.call(void 0,t)}catch(t){n.call(void 0,t)}}function m(){st.removeEventListener("DOMContentLoaded",m),a.removeEventListener("load",m),xt.ready()}function v(){this.expando=xt.expando+v.uid++}function y(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:jt.test(t)?JSON.parse(t):t)}function _(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Ut,"-$&").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n=y(n)}catch(t){}Ht.set(t,e,n)}else n=void 0;return n}function x(t,e,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return xt.css(t,e,"")},l=s(),u=n&&n[3]||(xt.cssNumber[e]?"":"px"),c=(xt.cssNumber[e]||"px"!==u&&+l)&&qt.exec(xt.css(t,e));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do o=o||".5",c/=o,xt.style(t,e,c+u);while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function w(t){var e,n=t.ownerDocument,i=t.nodeName,r=Jt[i];return r?r:(e=n.body.appendChild(n.createElement(i)),r=xt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Jt[i]=r,r)}function b(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)i=t[o],i.style&&(n=i.style.display,e?("none"===n&&(r[o]=Gt.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&Xt(i)&&(r[o]=w(i))):"none"!==n&&(r[o]="none",Gt.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(t[o].style.display=r[o]);return t}function C(t,e){var n;return n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&xt.nodeName(t,e)?xt.merge([t],n):n}function S(t,e){for(var n=0,i=t.length;n<i;n++)Gt.set(t[n],"globalEval",!e||Gt.get(e[n],"globalEval"))}function M(t,e,n,i,r){for(var o,a,s,l,u,c,h=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if(o=t[p],o||0===o)if("object"===xt.type(o))xt.merge(f,o.nodeType?[o]:o);else if(ee.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=($t.exec(o)||["",""])[1].toLowerCase(),l=te[s]||te._default,a.innerHTML=l[1]+xt.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;xt.merge(f,a.childNodes),a=h.firstChild,a.textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",p=0;o=f[p++];)if(i&&xt.inArray(o,i)>-1)r&&r.push(o);else if(u=xt.contains(o.ownerDocument,o),a=C(h.appendChild(o),"script"),u&&S(a),n)for(c=0;o=a[c++];)Qt.test(o.type||"")&&n.push(o);return h}function E(){return!0}function I(){return!1}function T(){try{return st.activeElement}catch(t){}}function P(t,e,n,i,r,a){var s,l;if("object"==("undefined"==typeof e?"undefined":o(e))){"string"!=typeof n&&(i=i||n,n=void 0);for(l in e)P(t,l,n,i,e[l],a);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=I;else if(!r)return t;return 1===a&&(s=r,r=function(t){return xt().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=xt.guid++)),t.each(function(){xt.event.add(this,e,r,i,n)})}function L(t,e){return xt.nodeName(t,"table")&&xt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t:t}function D(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function A(t){var e=ue.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function k(t,e){var n,i,r,o,a,s,l,u;if(1===e.nodeType){if(Gt.hasData(t)&&(o=Gt.access(t),a=Gt.set(e,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)xt.event.add(e,r,u[r][n])}Ht.hasData(t)&&(s=Ht.access(t),l=xt.extend({},s),Ht.set(e,l))}}function N(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Kt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function O(t,e,n,i){e=ct.apply([],e);var r,o,a,s,u,c,h=0,f=t.length,p=f-1,d=e[0],g=xt.isFunction(d);if(g||f>1&&"string"==typeof d&&!yt.checkClone&&le.test(d))return t.each(function(r){var o=t.eq(r);g&&(e[0]=d.call(this,r,o.html())),O(o,e,n,i)});if(f&&(r=M(e,t[0].ownerDocument,!1,t,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=xt.map(C(r,"script"),D),s=a.length;h<f;h++)u=r,h!==p&&(u=xt.clone(u,!0,!0),s&&xt.merge(a,C(u,"script"))),n.call(t[h],u,h);if(s)for(c=a[a.length-1].ownerDocument,xt.map(a,A),h=0;h<s;h++)u=a[h],Qt.test(u.type||"")&&!Gt.access(u,"globalEval")&&xt.contains(c,u)&&(u.src?xt._evalUrl&&xt._evalUrl(u.src):l(u.textContent.replace(ce,""),c))}return t}function R(t,e,n){for(var i,r=e?xt.filter(e,t):t,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||xt.cleanData(C(i)),i.parentNode&&(n&&xt.contains(i.ownerDocument,i)&&S(C(i,"script")),i.parentNode.removeChild(i));return t}function F(t,e,n){var i,r,o,a,s=t.style;return n=n||pe(t),n&&(a=n.getPropertyValue(e)||n[e],""!==a||xt.contains(t.ownerDocument,t)||(a=xt.style(t,e)),!yt.pixelMarginRight()&&fe.test(a)&&he.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function z(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function B(t){if(t in ye)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ve.length;n--;)if(t=ve[n]+e,t in ye)return t}function V(t,e,n){var i=qt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function G(t,e,n,i,r){var o,a=0;for(o=n===(i?"border":"content")?4:"width"===e?1:0;o<4;o+=2)"margin"===n&&(a+=xt.css(t,n+Yt[o],!0,r)),i?("content"===n&&(a-=xt.css(t,"padding"+Yt[o],!0,r)),"margin"!==n&&(a-=xt.css(t,"border"+Yt[o]+"Width",!0,r))):(a+=xt.css(t,"padding"+Yt[o],!0,r),"padding"!==n&&(a+=xt.css(t,"border"+Yt[o]+"Width",!0,r)));return a}function H(t,e,n){var i,r=!0,o=pe(t),a="border-box"===xt.css(t,"boxSizing",!1,o);if(t.getClientRects().length&&(i=t.getBoundingClientRect()[e]),i<=0||null==i){if(i=F(t,e,o),(i<0||null==i)&&(i=t.style[e]),fe.test(i))return i;r=a&&(yt.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+G(t,e,n||(a?"border":"content"),r,o)+"px"}function j(t,e,n,i,r){return new j.prototype.init(t,e,n,i,r)}function U(){xe&&(a.requestAnimationFrame(U),xt.fx.tick())}function W(){return a.setTimeout(function(){_e=void 0}),_e=xt.now()}function q(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)n=Yt[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function Y(t,e,n){for(var i,r=(J.tweeners[e]||[]).concat(J.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,e,t))return i}function X(t,e,n){var i,r,o,a,s,l,u,c,h="width"in e||"height"in e,f=this,p={},d=t.style,g=t.nodeType&&Xt(t),m=Gt.get(t,"fxshow");n.queue||(a=xt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,xt.queue(t,"fx").length||a.empty.fire()})}));for(i in e)if(r=e[i],we.test(r)){if(delete e[i],o=o||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||xt.style(t,i)}if(l=!xt.isEmptyObject(e),l||!xt.isEmptyObject(p)){h&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=m&&m.display,null==u&&(u=Gt.get(t,"display")),c=xt.css(t,"display"),"none"===c&&(u?c=u:(b([t],!0),u=t.style.display||u,c=xt.css(t,"display"),b([t]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===xt.css(t,"float")&&(l||(f.done(function(){d.display=u}),null==u&&(c=d.display,u="none"===c?"":c)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),l=!1;for(i in p)l||(m?"hidden"in m&&(g=m.hidden):m=Gt.access(t,"fxshow",{display:u}),o&&(m.hidden=!g),g&&b([t],!0),f.done(function(){g||b([t]),Gt.remove(t,"fxshow");for(i in p)xt.style(t,i,p[i])})),l=Y(g?m[i]:0,i,f),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}}function Z(t,e){var n,i,r,o,a;for(n in t)if(i=xt.camelCase(n),r=e[i],o=t[n],xt.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=xt.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function J(t,e,n){var i,r,o=0,a=J.prefilters.length,s=xt.Deferred().always(function(){delete l.elem}),l=function e(){if(r)return!1;for(var n=_e||W(),i=Math.max(0,u.startTime+u.duration-n),o=i/u.duration||0,a=1-o,l=0,e=u.tweens.length;l<e;l++)u.tweens[l].run(a);return s.notifyWith(t,[u,a,i]),a<1&&e?i:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:xt.extend({},e),opts:xt.extend(!0,{specialEasing:{},easing:xt.easing._default},n),originalProperties:e,originalOptions:n,startTime:_e||W(),duration:n.duration,tweens:[],createTween:function(e,n){var i=xt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(Z(c,u.opts.specialEasing);o<a;o++)if(i=J.prefilters[o].call(u,t,c,u.opts))return xt.isFunction(i.stop)&&(xt._queueHooks(u.elem,u.opts.queue).stop=xt.proxy(i.stop,i)),i;return xt.map(c,Y,u),xt.isFunction(u.opts.start)&&u.opts.start.call(t,u),xt.fx.timer(xt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function K(t){var e=t.match(Rt)||[];return e.join(" ")}function $(t){return t.getAttribute&&t.getAttribute("class")||""}function Q(t,e,n,i){var r;if(xt.isArray(e))xt.each(e,function(e,r){n||Ae.test(t)?i(t,r):Q(t+"["+("object"==("undefined"==typeof r?"undefined":o(r))&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==xt.type(e))i(t,e);else for(r in e)Q(t+"["+r+"]",e[r],n,i)}function tt(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(Rt)||[];if(xt.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function et(t,e,n,i){function r(s){var l;return o[s]=!0,xt.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=t===Ue;return r(e.dataTypes[0])||!o["*"]&&r("*")}function nt(t,e){var n,i,r=xt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&xt.extend(!0,t,i),t}function it(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}function rt(t,e,n,i){var r,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function ot(t){return xt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var at=[],st=a.document,lt=Object.getPrototypeOf,ut=at.slice,ct=at.concat,ht=at.push,ft=at.indexOf,pt={},dt=pt.toString,gt=pt.hasOwnProperty,mt=gt.toString,vt=mt.call(Object),yt={},_t="3.1.1",xt=function t(e,n){return new t.fn.init(e,n)},wt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bt=/^-ms-/,Ct=/-([a-z])/g,St=function(t,e){return e.toUpperCase()};xt.fn=xt.prototype={jquery:_t,constructor:xt,length:0,toArray:function(){return ut.call(this)},get:function(t){return null==t?ut.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=xt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return xt.each(this,t)},map:function(t){return this.pushStack(xt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(ut.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ht,sort:at.sort,splice:at.splice},xt.extend=xt.fn.extend=function(){var t,e,n,i,r,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"==("undefined"==typeof s?"undefined":o(s))||xt.isFunction(s)||(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(t=arguments[l]))for(e in t)n=s[e],i=t[e],s!==i&&(c&&i&&(xt.isPlainObject(i)||(r=xt.isArray(i)))?(r?(r=!1,a=n&&xt.isArray(n)?n:[]):a=n&&xt.isPlainObject(n)?n:{},s[e]=xt.extend(c,a,i)):void 0!==i&&(s[e]=i));return s},xt.extend({expando:"jQuery"+(_t+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===xt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=xt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==dt.call(t)||(e=lt(t))&&(n=gt.call(e,"constructor")&&e.constructor,"function"!=typeof n||mt.call(n)!==vt))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==("undefined"==typeof t?"undefined":o(t))||"function"==typeof t?pt[dt.call(t)]||"object":"undefined"==typeof t?"undefined":o(t)},globalEval:function(t){l(t)},camelCase:function(t){return t.replace(bt,"ms-").replace(Ct,St)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var n,i=0;if(u(t))for(n=t.length;i<n&&e.call(t[i],i,t[i])!==!1;i++);else for(i in t)if(e.call(t[i],i,t[i])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(wt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(u(Object(t))?xt.merge(n,"string"==typeof t?[t]:t):ht.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:ft.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;o<a;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,n){var i,r,o=0,a=[];if(u(t))for(i=t.length;o<i;o++)r=e(t[o],o,n),null!=r&&a.push(r);else for(o in t)r=e(t[o],o,n),null!=r&&a.push(r);return ct.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),xt.isFunction(t))return i=ut.call(arguments,2),r=function(){return t.apply(e||this,i.concat(ut.call(arguments)))},r.guid=t.guid=t.guid||xt.guid++,r},now:Date.now,support:yt}),"function"==typeof Symbol&&(xt.fn[Symbol.iterator]=at[Symbol.iterator]),xt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){pt["[object "+e+"]"]=e.toLowerCase()});var Mt=function(t){function e(t,e,n,i){var r,o,a,s,l,u,c,f=e&&e.ownerDocument,d=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==d&&9!==d&&11!==d)return n;if(!i&&((e?e.ownerDocument||e:G)!==k&&A(e),e=e||k,O)){if(11!==d&&(l=vt.exec(t)))if(r=l[1]){if(9===d){if(!(a=e.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(f&&(a=f.getElementById(r))&&B(e,a)&&a.id===r)return n.push(a),n}else{if(l[2])return $.apply(n,e.getElementsByTagName(t)),n;if((r=l[3])&&b.getElementsByClassName&&e.getElementsByClassName)return $.apply(n,e.getElementsByClassName(r)),n}if(b.qsa&&!q[t+" "]&&(!R||!R.test(t))){if(1!==d)f=e,c=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(wt,bt):e.setAttribute("id",s=V),u=E(t),o=u.length;o--;)u[o]="#"+s+" "+p(u[o]);c=u.join(","),f=yt.test(t)&&h(e.parentNode)||e}if(c)try{return $.apply(n,f.querySelectorAll(c)),n}catch(t){}finally{s===V&&e.removeAttribute("id")}}}return T(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>C.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[V]=!0,t}function r(t){var e=k.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return function(e){return"form"in e?e.parentNode&&e.disabled===!1?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&St(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function h(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function f(){}function p(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,r=e.next,o=r||i,a=n&&"parentNode"===o,s=j++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,l){var u,c,h,f=[H,s];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(h=e[V]||(e[V]={}),c=h[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((u=c[o])&&u[0]===H&&u[1]===s)return f[2]=u[2];if(c[o]=f,f[2]=t(e,n,l))return!0}return!1}}function g(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var r=0,o=n.length;r<o;r++)e(t,n[r],i);return i}function v(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;s<l;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),u&&e.push(s)));return a}function y(t,e,n,r,o,a){return r&&!r[V]&&(r=y(r)),o&&!o[V]&&(o=y(o,a)),i(function(i,a,s,l){var u,c,h,f=[],p=[],d=a.length,g=i||m(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?g:v(g,f,t,s,l),_=n?o||(i?t:d||r)?[]:a:y;if(n&&n(y,_,s,l),r)for(u=v(_,p),r(u,[],s,l),c=u.length;c--;)(h=u[c])&&(_[p[c]]=!(y[p[c]]=h));if(i){if(o||t){if(o){for(u=[],c=_.length;c--;)(h=_[c])&&u.push(y[c]=h);o(null,_=[],u,l)}for(c=_.length;c--;)(h=_[c])&&(u=o?tt(i,h):f[c])>-1&&(i[u]=!(a[u]=h))}}else _=v(_===a?_.splice(d,_.length):_),o?o(null,a,_,l):$.apply(a,_)})}function _(t){for(var e,n,i,r=t.length,o=C.relative[t[0].type],a=o||C.relative[" "],s=o?1:0,l=d(function(t){return t===e},a,!0),u=d(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,i){var r=!o&&(i||n!==P)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,r}];s<r;s++)if(n=C.relative[t[s].type])c=[d(g(c),n)];else{if(n=C.filter[t[s].type].apply(null,t[s].matches),n[V]){for(i=++s;i<r&&!C.relative[t[i].type];i++);return y(s>1&&g(c),s>1&&p(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,s<i&&_(t.slice(s,i)),i<r&&_(t=t.slice(i)),i<r&&p(t))}c.push(n)}return g(c)}function x(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var c,h,f,p=0,d="0",g=i&&[],m=[],y=P,_=i||o&&C.find.TAG("*",u),x=H+=null==y?1:Math.random()||.1,w=_.length;for(u&&(P=a===k||a||u);d!==w&&null!=(c=_[d]);d++){if(o&&c){for(h=0,a||c.ownerDocument===k||(A(c),s=!O);f=t[h++];)if(f(c,a||k,s)){l.push(c);break}u&&(H=x)}r&&((c=!f&&c)&&p--,i&&g.push(c))}if(p+=d,r&&d!==p){for(h=0;f=n[h++];)f(g,m,a,s);if(i){if(p>0)for(;d--;)g[d]||m[d]||(m[d]=J.call(l));m=v(m)}$.apply(l,m),u&&!i&&m.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(H=x,P=y),g};return r?i(a):a}var w,b,C,S,M,E,I,T,P,L,D,A,k,N,O,R,F,z,B,V="sizzle"+1*new Date,G=t.document,H=0,j=0,U=n(),W=n(),q=n(),Y=function(t,e){return t===e&&(D=!0),0},X={}.hasOwnProperty,Z=[],J=Z.pop,K=Z.push,$=Z.push,Q=Z.slice,tt=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",ot=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(ot),ft=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),xt=function(t,e,n){
var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},wt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,bt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},Ct=function(){A()},St=d(function(t){return t.disabled===!0&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{$.apply(Z=Q.call(G.childNodes),G.childNodes),Z[G.childNodes.length].nodeType}catch(t){$={apply:Z.length?function(t,e){K.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}b=e.support={},M=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},A=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:G;return i!==k&&9===i.nodeType&&i.documentElement?(k=i,N=k.documentElement,O=!M(k),G!==k&&(n=k.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),b.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=r(function(t){return t.appendChild(k.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=mt.test(k.getElementsByClassName),b.getById=r(function(t){return N.appendChild(t).id=V,!k.getElementsByName||!k.getElementsByName(V).length}),b.getById?(C.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){return t.getAttribute("id")===e}},C.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}}):(C.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},C.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n,i,r,o=e.getElementById(t);if(o){if(n=o.getAttributeNode("id"),n&&n.value===t)return[o];for(r=e.getElementsByName(t),i=0;o=r[i++];)if(n=o.getAttributeNode("id"),n&&n.value===t)return[o]}return[]}}),C.find.TAG=b.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=b.getElementsByClassName&&function(t,e){if("undefined"!=typeof e.getElementsByClassName&&O)return e.getElementsByClassName(t)},F=[],R=[],(b.qsa=mt.test(k.querySelectorAll))&&(r(function(t){N.appendChild(t).innerHTML="<a id='"+V+"'></a><select id='"+V+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+V+"-]").length||R.push("~="),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+V+"+*").length||R.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=k.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+nt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),N.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(b.matchesSelector=mt.test(z=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(t){b.disconnectedMatch=z.call(t,"*"),z.call(t,"[s!='']:x"),F.push("!=",ot)}),R=R.length&&new RegExp(R.join("|")),F=F.length&&new RegExp(F.join("|")),e=mt.test(N.compareDocumentPosition),B=e||mt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!b.sortDetached&&e.compareDocumentPosition(t)===n?t===k||t.ownerDocument===G&&B(G,t)?-1:e===k||e.ownerDocument===G&&B(G,e)?1:L?tt(L,t)-tt(L,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,i=0,r=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!r||!o)return t===k?-1:e===k?1:r?-1:o?1:L?tt(L,t)-tt(L,e):0;if(r===o)return a(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===G?-1:l[i]===G?1:0},k):k},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==k&&A(t),n=n.replace(ct,"='$1']"),b.matchesSelector&&O&&!q[n+" "]&&(!F||!F.test(n))&&(!R||!R.test(n)))try{var i=z.call(t,n);if(i||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,k,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==k&&A(t),B(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==k&&A(t);var n=C.attrHandle[e.toLowerCase()],i=n&&X.call(C.attrHandle,e.toLowerCase())?n(t,e,!O):void 0;return void 0!==i?i:b.attributes||!O?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(wt,bt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!b.detectDuplicates,L=!b.sortStable&&t.slice(0),t.sort(Y),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return L=null,t},S=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=S(e);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,xt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=E(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(at," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,f,p,d,g=o!==a?"nextSibling":"previousSibling",m=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(m){if(o){for(;g;){for(f=e;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;d=g="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&y){for(f=m,h=f[V]||(f[V]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),u=c[t]||[],p=u[0]===H&&u[1],_=p&&u[2],f=p&&m.childNodes[p];f=++p&&f&&f[g]||(_=p=0)||d.pop();)if(1===f.nodeType&&++_&&f===e){c[t]=[H,p,_];break}}else if(y&&(f=e,h=f[V]||(f[V]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),u=c[t]||[],p=u[0]===H&&u[1],_=p),_===!1)for(;(f=++p&&f&&f[g]||(_=p=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++_||(y&&(h=f[V]||(f[V]={}),c=h[f.uniqueID]||(h[f.uniqueID]={}),c[t]=[H,_]),f!==e)););return _-=r,_===i||_%i===0&&_/i>=0}}},PSEUDO:function(t,n){var r,o=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[V]?o(n):o.length>1?(r=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=tt(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=I(t.replace(st,"$1"));return r[V]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(_t,xt),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:i(function(t){return ft.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,xt).toLowerCase(),function(e){var n;do if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[n<0?n+e:n]}),even:c(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return f.prototype=C.filters=C.pseudos,C.setFilters=new f,E=e.tokenize=function(t,n){var i,r,o,a,s,l,u,c=W[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=C.preFilter;s;){i&&!(r=lt.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ut.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(st," ")}),s=s.slice(i.length));for(a in C.filter)!(r=pt[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):W(t,l).slice(0)},I=e.compile=function(t,e){var n,i=[],r=[],o=q[t+" "];if(!o){for(e||(e=E(t)),n=e.length;n--;)o=_(e[n]),o[V]?i.push(o):r.push(o);o=q(t,x(r,i)),o.selector=t}return o},T=e.select=function(t,e,n,i){var r,o,a,s,l,u="function"==typeof t&&t,c=!i&&E(t=u.selector||t);if(n=n||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===e.nodeType&&O&&C.relative[o[1].type]){if(e=(C.find.ID(a.matches[0].replace(_t,xt),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(a=o[r],!C.relative[s=a.type]);)if((l=C.find[s])&&(i=l(a.matches[0].replace(_t,xt),yt.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&p(o),!t)return $.apply(n,i),n;break}}return(u||I(t,c))(i,e,!O,n,!e||yt.test(t)&&h(e.parentNode)||e),n},b.sortStable=V.split("").sort(Y).join("")===V,b.detectDuplicates=!!D,A(),b.sortDetached=r(function(t){return 1&t.compareDocumentPosition(k.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;if(!n)return t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(a);xt.find=Mt,xt.expr=Mt.selectors,xt.expr[":"]=xt.expr.pseudos,xt.uniqueSort=xt.unique=Mt.uniqueSort,xt.text=Mt.getText,xt.isXMLDoc=Mt.isXML,xt.contains=Mt.contains,xt.escapeSelector=Mt.escape;var Et=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&xt(t).is(n))break;i.push(t)}return i},It=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},Tt=xt.expr.match.needsContext,Pt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Lt=/^.[^:#\[\.,]*$/;xt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?xt.find.matchesSelector(i,t)?[i]:[]:xt.find.matches(t,xt.grep(e,function(t){return 1===t.nodeType}))},xt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(xt(t).filter(function(){for(e=0;e<i;e++)if(xt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)xt.find(t,r[e],n);return i>1?xt.uniqueSort(n):n},filter:function(t){return this.pushStack(c(this,t||[],!1))},not:function(t){return this.pushStack(c(this,t||[],!0))},is:function(t){return!!c(this,"string"==typeof t&&Tt.test(t)?xt(t):t||[],!1).length}});var Dt,At=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,kt=xt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||Dt,"string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:At.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof xt?e[0]:e,xt.merge(this,xt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:st,!0)),Pt.test(i[1])&&xt.isPlainObject(e))for(i in e)xt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=st.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):xt.isFunction(t)?void 0!==n.ready?n.ready(t):t(xt):xt.makeArray(t,this)};kt.prototype=xt.fn,Dt=xt(st);var Nt=/^(?:parents|prev(?:Until|All))/,Ot={children:!0,contents:!0,next:!0,prev:!0};xt.fn.extend({has:function(t){var e=xt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(xt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,o=[],a="string"!=typeof t&&xt(t);if(!Tt.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&xt.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?xt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?ft.call(xt(t),this[0]):ft.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(xt.uniqueSort(xt.merge(this.get(),xt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),xt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Et(t,"parentNode")},parentsUntil:function(t,e,n){return Et(t,"parentNode",n)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return Et(t,"nextSibling")},prevAll:function(t){return Et(t,"previousSibling")},nextUntil:function(t,e,n){return Et(t,"nextSibling",n)},prevUntil:function(t,e,n){return Et(t,"previousSibling",n)},siblings:function(t){return It((t.parentNode||{}).firstChild,t)},children:function(t){return It(t.firstChild)},contents:function(t){return t.contentDocument||xt.merge([],t.childNodes)}},function(t,e){xt.fn[t]=function(n,i){var r=xt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=xt.filter(i,r)),this.length>1&&(Ot[t]||xt.uniqueSort(r),Nt.test(t)&&r.reverse()),this.pushStack(r)}});var Rt=/[^\x20\t\r\n\f]+/g;xt.Callbacks=function(t){t="string"==typeof t?f(t):xt.extend({},t);var e,n,i,r,o=[],a=[],s=-1,l=function(){for(r=t.once,i=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)o[s].apply(n[0],n[1])===!1&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},u={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){xt.each(n,function(n,i){xt.isFunction(i)?t.unique&&u.has(i)||o.push(i):i&&i.length&&"string"!==xt.type(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return xt.each(arguments,function(t,e){for(var n;(n=xt.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?xt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||e||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],a.push(n),e||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},xt.extend({Deferred:function(t){var e=[["notify","progress",xt.Callbacks("memory"),xt.Callbacks("memory"),2],["resolve","done",xt.Callbacks("once memory"),xt.Callbacks("once memory"),0,"resolved"],["reject","fail",xt.Callbacks("once memory"),xt.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return xt.Deferred(function(n){xt.each(e,function(e,i){var o=xt.isFunction(t[i[4]])&&t[i[4]];r[i[1]](function(){var t=o&&o.apply(this,arguments);t&&xt.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[t]:arguments)})}),t=null}).promise()},then:function(t,n,i){function r(t,e,n,i){return function(){var l=this,u=arguments,c=function a(){var c,a;if(!(t<s)){if(c=n.apply(l,u),c===e.promise())throw new TypeError("Thenable self-resolution");a=c&&("object"==("undefined"==typeof c?"undefined":o(c))||"function"==typeof c)&&c.then,xt.isFunction(a)?i?a.call(c,r(s,e,p,i),r(s,e,d,i)):(s++,a.call(c,r(s,e,p,i),r(s,e,d,i),r(s,e,p,e.notifyWith))):(n!==p&&(l=void 0,u=[c]),(i||e.resolveWith)(l,u))}},h=i?c:function(){try{c()}catch(i){xt.Deferred.exceptionHook&&xt.Deferred.exceptionHook(i,h.stackTrace),t+1>=s&&(n!==d&&(l=void 0,u=[i]),e.rejectWith(l,u))}};t?h():(xt.Deferred.getStackHook&&(h.stackTrace=xt.Deferred.getStackHook()),a.setTimeout(h))}}var s=0;return xt.Deferred(function(o){e[0][3].add(r(0,o,xt.isFunction(i)?i:p,o.notifyWith)),e[1][3].add(r(0,o,xt.isFunction(t)?t:p)),e[2][3].add(r(0,o,xt.isFunction(n)?n:d))}).promise()},promise:function(t){return null!=t?xt.extend(t,i):i}},r={};return xt.each(e,function(t,o){var a=o[2],s=o[5];i[o[1]]=a.add,s&&a.add(function(){n=s},e[3-t][2].disable,e[0][2].lock),a.add(o[3].fire),r[o[0]]=function(){return r[o[0]+"With"](this===r?void 0:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),r=ut.call(arguments),o=xt.Deferred(),a=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?ut.call(arguments):n,--e||o.resolveWith(i,r)}};if(e<=1&&(g(t,o.done(a(n)).resolve,o.reject),"pending"===o.state()||xt.isFunction(r[n]&&r[n].then)))return o.then();for(;n--;)g(r[n],a(n),o.reject);return o.promise()}});var Ft=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;xt.Deferred.exceptionHook=function(t,e){a.console&&a.console.warn&&t&&Ft.test(t.name)&&a.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},xt.readyException=function(t){a.setTimeout(function(){throw t})};var zt=xt.Deferred();xt.fn.ready=function(t){return zt.then(t).catch(function(t){xt.readyException(t)}),this},xt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?xt.readyWait++:xt.ready(!0)},ready:function(t){(t===!0?--xt.readyWait:xt.isReady)||(xt.isReady=!0,t!==!0&&--xt.readyWait>0||zt.resolveWith(st,[xt]))}}),xt.ready.then=zt.then,"complete"===st.readyState||"loading"!==st.readyState&&!st.documentElement.doScroll?a.setTimeout(xt.ready):(st.addEventListener("DOMContentLoaded",m),a.addEventListener("load",m));var Bt=function t(e,n,i,r,o,a,s){var l=0,u=e.length,c=null==i;if("object"===xt.type(i)){o=!0;for(l in i)t(e,n,l,i[l],!0,a,s)}else if(void 0!==r&&(o=!0,xt.isFunction(r)||(s=!0),c&&(s?(n.call(e,r),n=null):(c=n,n=function(t,e,n){return c.call(xt(t),n)})),n))for(;l<u;l++)n(e[l],i,s?r:r.call(e[l],l,n(e[l],i)));return o?e:c?n.call(e):u?n(e[0],i):a},Vt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};v.uid=1,v.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Vt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[xt.camelCase(e)]=n;else for(i in e)r[xt.camelCase(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][xt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){xt.isArray(e)?e=e.map(xt.camelCase):(e=xt.camelCase(e),e=e in i?[e]:e.match(Rt)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||xt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!xt.isEmptyObject(e)}};var Gt=new v,Ht=new v,jt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ut=/[A-Z]/g;xt.extend({hasData:function(t){return Ht.hasData(t)||Gt.hasData(t)},data:function(t,e,n){return Ht.access(t,e,n)},removeData:function(t,e){Ht.remove(t,e)},_data:function(t,e,n){return Gt.access(t,e,n)},_removeData:function(t,e){Gt.remove(t,e)}}),xt.fn.extend({data:function(t,e){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===t){if(this.length&&(r=Ht.get(a),1===a.nodeType&&!Gt.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=xt.camelCase(i.slice(5)),_(a,i,r[i])));Gt.set(a,"hasDataAttrs",!0)}return r}return"object"==("undefined"==typeof t?"undefined":o(t))?this.each(function(){Ht.set(this,t)}):Bt(this,function(e){var n;if(a&&void 0===e){if(n=Ht.get(a,t),void 0!==n)return n;if(n=_(a,t),void 0!==n)return n}else this.each(function(){Ht.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Ht.remove(this,t)})}}),xt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Gt.get(t,e),n&&(!i||xt.isArray(n)?i=Gt.access(t,e,xt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=xt.queue(t,e),i=n.length,r=n.shift(),o=xt._queueHooks(t,e),a=function(){xt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Gt.get(t,n)||Gt.access(t,n,{empty:xt.Callbacks("once memory").add(function(){Gt.remove(t,[e+"queue",n])})})}}),xt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?xt.queue(this[0],t):void 0===e?this:this.each(function(){var n=xt.queue(this,t,e);xt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&xt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){xt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=xt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=Gt.get(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,qt=new RegExp("^(?:([+-])=|)("+Wt+")([a-z%]*)$","i"),Yt=["Top","Right","Bottom","Left"],Xt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&xt.contains(t.ownerDocument,t)&&"none"===xt.css(t,"display")},Zt=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r},Jt={};xt.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Xt(this)?xt(this).show():xt(this).hide()})}});var Kt=/^(?:checkbox|radio)$/i,$t=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qt=/^$|\/(?:java|ecma)script/i,te={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};te.optgroup=te.option,te.tbody=te.tfoot=te.colgroup=te.caption=te.thead,te.th=te.td;var ee=/<|&#?\w+;/;!function(){var t=st.createDocumentFragment(),e=t.appendChild(st.createElement("div")),n=st.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),yt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",yt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ne=st.documentElement,ie=/^key/,re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oe=/^([^.]*)(?:\.(.+)|)/;xt.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,c,h,f,p,d,g,m=Gt.get(t);if(m)for(n.handler&&(o=n,n=o.handler,r=o.selector),r&&xt.find.matchesSelector(ne,r),n.guid||(n.guid=xt.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return"undefined"!=typeof xt&&xt.event.triggered!==e.type?xt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Rt)||[""],u=e.length;u--;)s=oe.exec(e[u])||[],p=g=s[1],d=(s[2]||"").split(".").sort(),p&&(h=xt.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=xt.event.special[p]||{},c=xt.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&xt.expr.match.needsContext.test(r),namespace:d.join(".")},o),(f=l[p])||(f=l[p]=[],f.delegateCount=0,h.setup&&h.setup.call(t,i,d,a)!==!1||t.addEventListener&&t.addEventListener(p,a)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,c):f.push(c),xt.event.global[p]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,u,c,h,f,p,d,g,m=Gt.hasData(t)&&Gt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(Rt)||[""],u=e.length;u--;)if(s=oe.exec(e[u])||[],p=g=s[1],d=(s[2]||"").split(".").sort(),p){for(h=xt.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,f=l[p]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!r&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));a&&!f.length&&(h.teardown&&h.teardown.call(t,d,m.handle)!==!1||xt.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)xt.event.remove(t,p+e[u],n,i,!0);xt.isEmptyObject(l)&&Gt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,o,a,s=xt.event.fix(t),l=new Array(arguments.length),u=(Gt.get(this,"events")||{})[s.type]||[],c=xt.event.special[s.type]||{};for(l[0]=s,e=1;e<arguments.length;e++)l[e]=arguments[e];if(s.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,s)!==!1){for(a=xt.event.handlers.call(this,s,u),e=0;(r=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,i=((xt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),void 0!==i&&(s.result=i)===!1&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,i,r,o,a,s=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!("click"===t.type&&t.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==t.type||u.disabled!==!0)){for(o=[],a={},n=0;n<l;n++)i=e[n],r=i.selector+" ",void 0===a[r]&&(a[r]=i.needsContext?xt(r,this).index(u)>-1:xt.find(r,this,null,[u]).length),a[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return u=this,l<e.length&&s.push({elem:u,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(xt.Event.prototype,t,{enumerable:!0,configurable:!0,get:xt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[xt.expando]?t:new xt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&xt.nodeName(this,"input"))return this.click(),!1},_default:function(t){return xt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},xt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},xt.Event=function(t,e){return this instanceof xt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?E:I,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&xt.extend(this,e),this.timeStamp=t&&t.timeStamp||xt.now(),void(this[xt.expando]=!0)):new xt.Event(t,e)},xt.Event.prototype={constructor:xt.Event,isDefaultPrevented:I,isPropagationStopped:I,isImmediatePropagationStopped:I,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=E,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=E,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=E,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},xt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&ie.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&re.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},xt.event.addProp),xt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){xt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return r&&(r===i||xt.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),
n}}}),xt.fn.extend({on:function(t,e,n,i){return P(this,t,e,n,i)},one:function(t,e,n,i){return P(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,xt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==("undefined"==typeof t?"undefined":o(t))){for(r in t)this.off(r,e,t[r]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=I),this.each(function(){xt.event.remove(this,t,n,e)})}});var ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,se=/<script|<style|<link/i,le=/checked\s*(?:[^=]|=\s*.checked.)/i,ue=/^true\/(.*)/,ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;xt.extend({htmlPrefilter:function(t){return t.replace(ae,"<$1></$2>")},clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=xt.contains(t.ownerDocument,t);if(!(yt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||xt.isXMLDoc(t)))for(a=C(s),o=C(t),i=0,r=o.length;i<r;i++)N(o[i],a[i]);if(e)if(n)for(o=o||C(t),a=a||C(s),i=0,r=o.length;i<r;i++)k(o[i],a[i]);else k(t,s);return a=C(s,"script"),a.length>0&&S(a,!l&&C(t,"script")),s},cleanData:function(t){for(var e,n,i,r=xt.event.special,o=0;void 0!==(n=t[o]);o++)if(Vt(n)){if(e=n[Gt.expando]){if(e.events)for(i in e.events)r[i]?xt.event.remove(n,i):xt.removeEvent(n,i,e.handle);n[Gt.expando]=void 0}n[Ht.expando]&&(n[Ht.expando]=void 0)}}}),xt.fn.extend({detach:function(t){return R(this,t,!0)},remove:function(t){return R(this,t)},text:function(t){return Bt(this,function(t){return void 0===t?xt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return O(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=L(this,t);e.appendChild(t)}})},prepend:function(){return O(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=L(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return O(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(xt.cleanData(C(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return xt.clone(this,t,e)})},html:function(t){return Bt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!se.test(t)&&!te[($t.exec(t)||["",""])[1].toLowerCase()]){t=xt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(xt.cleanData(C(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return O(this,arguments,function(e){var n=this.parentNode;xt.inArray(this,t)<0&&(xt.cleanData(C(this)),n&&n.replaceChild(e,this))},t)}}),xt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){xt.fn[t]=function(t){for(var n,i=[],r=xt(t),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),xt(r[a])[e](n),ht.apply(i,n.get());return this.pushStack(i)}});var he=/^margin/,fe=new RegExp("^("+Wt+")(?!px)[a-z%]+$","i"),pe=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=a),e.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",ne.appendChild(o);var t=a.getComputedStyle(s);e="1%"!==t.top,r="2px"===t.marginLeft,n="4px"===t.width,s.style.marginRight="50%",i="4px"===t.marginRight,ne.removeChild(o),s=null}}var e,n,i,r,o=st.createElement("div"),s=st.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",yt.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(s),xt.extend(yt,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return t(),n},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),r}}))}();var de=/^(none|table(?!-c[ea]).+)/,ge={position:"absolute",visibility:"hidden",display:"block"},me={letterSpacing:"0",fontWeight:"400"},ve=["Webkit","Moz","ms"],ye=st.createElement("div").style;xt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=F(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,a,s,l=xt.camelCase(e),u=t.style;return e=xt.cssProps[l]||(xt.cssProps[l]=B(l)||l),s=xt.cssHooks[e]||xt.cssHooks[l],void 0===n?s&&"get"in s&&void 0!==(r=s.get(t,!1,i))?r:u[e]:(a="undefined"==typeof n?"undefined":o(n),"string"===a&&(r=qt.exec(n))&&r[1]&&(n=x(t,e,r),a="number"),void(null!=n&&n===n&&("number"===a&&(n+=r&&r[3]||(xt.cssNumber[l]?"":"px")),yt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(u[e]=n))))}},css:function(t,e,n,i){var r,o,a,s=xt.camelCase(e);return e=xt.cssProps[s]||(xt.cssProps[s]=B(s)||s),a=xt.cssHooks[e]||xt.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=F(t,e,i)),"normal"===r&&e in me&&(r=me[e]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),xt.each(["height","width"],function(t,e){xt.cssHooks[e]={get:function(t,n,i){if(n)return!de.test(xt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?H(t,e,i):Zt(t,ge,function(){return H(t,e,i)})},set:function(t,n,i){var r,o=i&&pe(t),a=i&&G(t,e,i,"border-box"===xt.css(t,"boxSizing",!1,o),o);return a&&(r=qt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=xt.css(t,e)),V(t,n,a)}}}),xt.cssHooks.marginLeft=z(yt.reliableMarginLeft,function(t,e){if(e)return(parseFloat(F(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),xt.each({margin:"",padding:"",border:"Width"},function(t,e){xt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+Yt[i]+e]=o[i]||o[i-2]||o[0];return r}},he.test(t)||(xt.cssHooks[t+e].set=V)}),xt.fn.extend({css:function(t,e){return Bt(this,function(t,e,n){var i,r,o={},a=0;if(xt.isArray(e)){for(i=pe(t),r=e.length;a<r;a++)o[e[a]]=xt.css(t,e[a],!1,i);return o}return void 0!==n?xt.style(t,e,n):xt.css(t,e)},t,e,arguments.length>1)}}),xt.Tween=j,j.prototype={constructor:j,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||xt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(xt.cssNumber[n]?"":"px")},cur:function(){var t=j.propHooks[this.prop];return t&&t.get?t.get(this):j.propHooks._default.get(this)},run:function(t){var e,n=j.propHooks[this.prop];return this.options.duration?this.pos=e=xt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=xt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){xt.fx.step[t.prop]?xt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[xt.cssProps[t.prop]]&&!xt.cssHooks[t.prop]?t.elem[t.prop]=t.now:xt.style(t.elem,t.prop,t.now+t.unit)}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},xt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},xt.fx=j.prototype.init,xt.fx.step={};var _e,xe,we=/^(?:toggle|show|hide)$/,be=/queueHooks$/;xt.Animation=xt.extend(J,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return x(n.elem,t,qt.exec(e),n),n}]},tweener:function(t,e){xt.isFunction(t)?(e=t,t=["*"]):t=t.match(Rt);for(var n,i=0,r=t.length;i<r;i++)n=t[i],J.tweeners[n]=J.tweeners[n]||[],J.tweeners[n].unshift(e)},prefilters:[X],prefilter:function(t,e){e?J.prefilters.unshift(t):J.prefilters.push(t)}}),xt.speed=function(t,e,n){var i=t&&"object"==("undefined"==typeof t?"undefined":o(t))?xt.extend({},t):{complete:n||!n&&e||xt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!xt.isFunction(e)&&e};return xt.fx.off||st.hidden?i.duration=0:"number"!=typeof i.duration&&(i.duration in xt.fx.speeds?i.duration=xt.fx.speeds[i.duration]:i.duration=xt.fx.speeds._default),null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){xt.isFunction(i.old)&&i.old.call(this),i.queue&&xt.dequeue(this,i.queue)},i},xt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Xt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=xt.isEmptyObject(t),o=xt.speed(e,n,i),a=function(){var e=J(this,xt.extend({},t),o);(r||Gt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=xt.timers,a=Gt.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&be.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));!e&&n||xt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=Gt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=xt.timers,a=i?i.length:0;for(n.finish=!0,xt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),xt.each(["toggle","show","hide"],function(t,e){var n=xt.fn[e];xt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(q(e,!0),t,i,r)}}),xt.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){xt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),xt.timers=[],xt.fx.tick=function(){var t,e=0,n=xt.timers;for(_e=xt.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||xt.fx.stop(),_e=void 0},xt.fx.timer=function(t){xt.timers.push(t),t()?xt.fx.start():xt.timers.pop()},xt.fx.interval=13,xt.fx.start=function(){xe||(xe=a.requestAnimationFrame?a.requestAnimationFrame(U):a.setInterval(xt.fx.tick,xt.fx.interval))},xt.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame(xe):a.clearInterval(xe),xe=null},xt.fx.speeds={slow:600,fast:200,_default:400},xt.fn.delay=function(t,e){return t=xt.fx?xt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=a.setTimeout(e,t);n.stop=function(){a.clearTimeout(i)}})},function(){var t=st.createElement("input"),e=st.createElement("select"),n=e.appendChild(st.createElement("option"));t.type="checkbox",yt.checkOn=""!==t.value,yt.optSelected=n.selected,t=st.createElement("input"),t.value="t",t.type="radio",yt.radioValue="t"===t.value}();var Ce,Se=xt.expr.attrHandle;xt.fn.extend({attr:function(t,e){return Bt(this,xt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){xt.removeAttr(this,t)})}}),xt.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?xt.prop(t,e,n):(1===o&&xt.isXMLDoc(t)||(r=xt.attrHooks[e.toLowerCase()]||(xt.expr.match.bool.test(e)?Ce:void 0)),void 0!==n?null===n?void xt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=xt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!yt.radioValue&&"radio"===e&&xt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(Rt);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),Ce={set:function(t,e,n){return e===!1?xt.removeAttr(t,n):t.setAttribute(n,n),n}},xt.each(xt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=Se[e]||xt.find.attr;Se[e]=function(t,e,i){var r,o,a=e.toLowerCase();return i||(o=Se[a],Se[a]=r,r=null!=n(t,e,i)?a:null,Se[a]=o),r}});var Me=/^(?:input|select|textarea|button)$/i,Ee=/^(?:a|area)$/i;xt.fn.extend({prop:function(t,e){return Bt(this,xt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[xt.propFix[t]||t]})}}),xt.extend({prop:function(t,e,n){var i,r,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&xt.isXMLDoc(t)||(e=xt.propFix[e]||e,r=xt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=xt.find.attr(t,"tabindex");return e?parseInt(e,10):Me.test(t.nodeName)||Ee.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),yt.optSelected||(xt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),xt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){xt.propFix[this.toLowerCase()]=this}),xt.fn.extend({addClass:function(t){var e,n,i,r,o,a,s,l=0;if(xt.isFunction(t))return this.each(function(e){xt(this).addClass(t.call(this,e,$(this)))});if("string"==typeof t&&t)for(e=t.match(Rt)||[];n=this[l++];)if(r=$(n),i=1===n.nodeType&&" "+K(r)+" "){for(a=0;o=e[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=K(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,i,r,o,a,s,l=0;if(xt.isFunction(t))return this.each(function(e){xt(this).removeClass(t.call(this,e,$(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Rt)||[];n=this[l++];)if(r=$(n),i=1===n.nodeType&&" "+K(r)+" "){for(a=0;o=e[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=K(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n="undefined"==typeof t?"undefined":o(t);return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):xt.isFunction(t)?this.each(function(n){xt(this).toggleClass(t.call(this,n,$(this),e),e)}):this.each(function(){var e,i,r,o;if("string"===n)for(i=0,r=xt(this),o=t.match(Rt)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=$(this),e&&Gt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Gt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+K($(n))+" ").indexOf(e)>-1)return!0;return!1}});var Ie=/\r/g;xt.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=xt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,xt(this).val()):t,null==r?r="":"number"==typeof r?r+="":xt.isArray(r)&&(r=xt.map(r,function(t){return null==t?"":t+""})),e=xt.valHooks[this.type]||xt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=xt.valHooks[r.type]||xt.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(Ie,""):null==n?"":n)):void 0}}),xt.extend({valHooks:{option:{get:function(t){var e=xt.find.attr(t,"value");return null!=e?e:K(xt.text(t))}},select:{get:function(t){var e,n,i,r=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],l=a?o+1:r.length;for(i=o<0?l:a?o:0;i<l;i++)if(n=r[i],(n.selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!xt.nodeName(n.parentNode,"optgroup"))){if(e=xt(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,i,r=t.options,o=xt.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=xt.inArray(xt.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),xt.each(["radio","checkbox"],function(){xt.valHooks[this]={set:function(t,e){if(xt.isArray(e))return t.checked=xt.inArray(xt(t).val(),e)>-1}},yt.checkOn||(xt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Te=/^(?:focusinfocus|focusoutblur)$/;xt.extend(xt.event,{trigger:function(t,e,n,i){var r,s,l,u,c,h,f,p=[n||st],d=gt.call(t,"type")?t.type:t,g=gt.call(t,"namespace")?t.namespace.split("."):[];if(s=l=n=n||st,3!==n.nodeType&&8!==n.nodeType&&!Te.test(d+xt.event.triggered)&&(d.indexOf(".")>-1&&(g=d.split("."),d=g.shift(),g.sort()),c=d.indexOf(":")<0&&"on"+d,t=t[xt.expando]?t:new xt.Event(d,"object"==("undefined"==typeof t?"undefined":o(t))&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:xt.makeArray(e,[t]),f=xt.event.special[d]||{},i||!f.trigger||f.trigger.apply(n,e)!==!1)){if(!i&&!f.noBubble&&!xt.isWindow(n)){for(u=f.delegateType||d,Te.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),l=s;l===(n.ownerDocument||st)&&p.push(l.defaultView||l.parentWindow||a)}for(r=0;(s=p[r++])&&!t.isPropagationStopped();)t.type=r>1?u:f.bindType||d,h=(Gt.get(s,"events")||{})[t.type]&&Gt.get(s,"handle"),h&&h.apply(s,e),h=c&&s[c],h&&h.apply&&Vt(s)&&(t.result=h.apply(s,e),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),e)!==!1||!Vt(n)||c&&xt.isFunction(n[d])&&!xt.isWindow(n)&&(l=n[c],l&&(n[c]=null),xt.event.triggered=d,n[d](),xt.event.triggered=void 0,l&&(n[c]=l)),t.result}},simulate:function(t,e,n){var i=xt.extend(new xt.Event,n,{type:t,isSimulated:!0});xt.event.trigger(i,null,e)}}),xt.fn.extend({trigger:function(t,e){return this.each(function(){xt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return xt.event.trigger(t,e,n,!0)}}),xt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){xt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),xt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),yt.focusin="onfocusin"in a,yt.focusin||xt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){xt.event.simulate(e,t.target,xt.event.fix(t))};xt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Gt.access(i,e);r||i.addEventListener(t,n,!0),Gt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Gt.access(i,e)-1;r?Gt.access(i,e,r):(i.removeEventListener(t,n,!0),Gt.remove(i,e))}}});var Pe=a.location,Le=xt.now(),De=/\?/;xt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new a.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||xt.error("Invalid XML: "+t),e};var Ae=/\[\]$/,ke=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;xt.param=function(t,e){var n,i=[],r=function(t,e){var n=xt.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(xt.isArray(t)||t.jquery&&!xt.isPlainObject(t))xt.each(t,function(){r(this.name,this.value)});else for(n in t)Q(n,t[n],e,r);return i.join("&")},xt.fn.extend({serialize:function(){return xt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=xt.prop(this,"elements");return t?xt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!xt(this).is(":disabled")&&Oe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!Kt.test(t))}).map(function(t,e){var n=xt(this).val();return null==n?null:xt.isArray(n)?xt.map(n,function(t){return{name:e.name,value:t.replace(ke,"\r\n")}}):{name:e.name,value:n.replace(ke,"\r\n")}}).get()}});var Re=/%20/g,Fe=/#.*$/,ze=/([?&])_=[^&]*/,Be=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ve=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ge=/^(?:GET|HEAD)$/,He=/^\/\//,je={},Ue={},We="*/".concat("*"),qe=st.createElement("a");qe.href=Pe.href,xt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pe.href,type:"GET",isLocal:Ve.test(Pe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":xt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?nt(nt(t,xt.ajaxSettings),e):nt(xt.ajaxSettings,t)},ajaxPrefilter:tt(je),ajaxTransport:tt(Ue),ajax:function(t,e){function n(t,e,n,o){var l,c,p,d,w,b=e;h||(h=!0,u&&a.clearTimeout(u),i=void 0,s=o||"",S.readyState=t>0?4:0,l=t>=200&&t<300||304===t,n&&(d=it(g,S,n)),d=rt(g,d,S,l),l?(g.ifModified&&(w=S.getResponseHeader("Last-Modified"),w&&(xt.lastModified[r]=w),w=S.getResponseHeader("etag"),w&&(xt.etag[r]=w)),204===t||"HEAD"===g.type?b="nocontent":304===t?b="notmodified":(b=d.state,c=d.data,p=d.error,l=!p)):(p=b,!t&&b||(b="error",t<0&&(t=0))),S.status=t,S.statusText=(e||b)+"",l?y.resolveWith(m,[c,b,S]):y.rejectWith(m,[S,b,p]),S.statusCode(x),x=void 0,f&&v.trigger(l?"ajaxSuccess":"ajaxError",[S,g,l?c:p]),_.fireWith(m,[S,b]),f&&(v.trigger("ajaxComplete",[S,g]),--xt.active||xt.event.trigger("ajaxStop")))}"object"==("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{};var i,r,s,l,u,c,h,f,p,d,g=xt.ajaxSetup({},e),m=g.context||g,v=g.context&&(m.nodeType||m.jquery)?xt(m):xt.event,y=xt.Deferred(),_=xt.Callbacks("once memory"),x=g.statusCode||{},w={},b={},C="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(h){if(!l)for(l={};e=Be.exec(s);)l[e[1].toLowerCase()]=e[2];e=l[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return h?s:null},setRequestHeader:function(t,e){return null==h&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==h&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)S.always(t[S.status]);else for(e in t)x[e]=[x[e],t[e]];return this},abort:function(t){var e=t||C;return i&&i.abort(e),n(0,e),this}};if(y.promise(S),g.url=((t||g.url||Pe.href)+"").replace(He,Pe.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(Rt)||[""],null==g.crossDomain){c=st.createElement("a");try{c.href=g.url,c.href=c.href,g.crossDomain=qe.protocol+"//"+qe.host!=c.protocol+"//"+c.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=xt.param(g.data,g.traditional)),et(je,g,e,S),h)return S;f=xt.event&&g.global,f&&0===xt.active++&&xt.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Ge.test(g.type),r=g.url.replace(Fe,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Re,"+")):(d=g.url.slice(r.length),g.data&&(r+=(De.test(r)?"&":"?")+g.data,delete g.data),g.cache===!1&&(r=r.replace(ze,"$1"),d=(De.test(r)?"&":"?")+"_="+Le++ +d),g.url=r+d),g.ifModified&&(xt.lastModified[r]&&S.setRequestHeader("If-Modified-Since",xt.lastModified[r]),xt.etag[r]&&S.setRequestHeader("If-None-Match",xt.etag[r])),(g.data&&g.hasContent&&g.contentType!==!1||e.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+We+"; q=0.01":""):g.accepts["*"]);for(p in g.headers)S.setRequestHeader(p,g.headers[p]);if(g.beforeSend&&(g.beforeSend.call(m,S,g)===!1||h))return S.abort();if(C="abort",_.add(g.complete),S.done(g.success),S.fail(g.error),i=et(Ue,g,e,S)){if(S.readyState=1,f&&v.trigger("ajaxSend",[S,g]),h)return S;g.async&&g.timeout>0&&(u=a.setTimeout(function(){S.abort("timeout")},g.timeout));try{h=!1,i.send(w,n)}catch(t){if(h)throw t;n(-1,t)}}else n(-1,"No Transport");return S},getJSON:function(t,e,n){return xt.get(t,e,n,"json")},getScript:function(t,e){return xt.get(t,void 0,e,"script")}}),xt.each(["get","post"],function(t,e){xt[e]=function(t,n,i,r){return xt.isFunction(n)&&(r=r||i,i=n,n=void 0),xt.ajax(xt.extend({url:t,type:e,dataType:r,data:n,success:i},xt.isPlainObject(t)&&t))}}),xt._evalUrl=function(t){return xt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},xt.fn.extend({wrapAll:function(t){var e;return this[0]&&(xt.isFunction(t)&&(t=t.call(this[0])),e=xt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return xt.isFunction(t)?this.each(function(e){xt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=xt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=xt.isFunction(t);return this.each(function(n){xt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){xt(this).replaceWith(this.childNodes)}),this}}),xt.expr.pseudos.hidden=function(t){return!xt.expr.pseudos.visible(t)},xt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},xt.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(t){}};var Ye={0:200,1223:204},Xe=xt.ajaxSettings.xhr();yt.cors=!!Xe&&"withCredentials"in Xe,yt.ajax=Xe=!!Xe,xt.ajaxTransport(function(t){var e,n;if(yt.cors||Xe&&!t.crossDomain)return{send:function(i,r){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)s.setRequestHeader(o,i[o]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(Ye[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&a.setTimeout(function(){e&&n()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),xt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),xt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return xt.globalEval(t),t}}}),xt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),xt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=xt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),st.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ze=[],Je=/(=)\?(?=&|$)|\?\?/;xt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ze.pop()||xt.expando+"_"+Le++;return this[t]=!0,t}}),xt.ajaxPrefilter("json jsonp",function(t,e,n){var i,r,o,s=t.jsonp!==!1&&(Je.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Je.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=xt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Je,"$1"+i):t.jsonp!==!1&&(t.url+=(De.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||xt.error(i+" was not called"),o[0]},t.dataTypes[0]="json",r=a[i],a[i]=function(){o=arguments},n.always(function(){void 0===r?xt(a).removeProp(i):a[i]=r,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ze.push(i)),o&&xt.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),yt.createHTMLDocument=function(){var t=st.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),xt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,r,o;return e||(yt.createHTMLDocument?(e=st.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=st.location.href,e.head.appendChild(i)):e=st),r=Pt.exec(t),o=!n&&[],r?[e.createElement(r[1])]:(r=M([t],e,o),o&&o.length&&xt(o).remove(),xt.merge([],r.childNodes))},xt.fn.load=function(t,e,n){var i,r,a,s=this,l=t.indexOf(" ");return l>-1&&(i=K(t.slice(l)),t=t.slice(0,l)),xt.isFunction(e)?(n=e,e=void 0):e&&"object"==("undefined"==typeof e?"undefined":o(e))&&(r="POST"),s.length>0&&xt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){a=arguments,s.html(i?xt("<div>").append(xt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,a||[t.responseText,e,t])})}),this},xt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){xt.fn[e]=function(t){return this.on(e,t)}}),xt.expr.pseudos.animated=function(t){return xt.grep(xt.timers,function(e){return t===e.elem}).length},xt.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u,c=xt.css(t,"position"),h=xt(t),f={};"static"===c&&(t.style.position="relative"),s=h.offset(),o=xt.css(t,"top"),l=xt.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),xt.isFunction(e)&&(e=e.call(t,n,xt.extend({},s))),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+r),"using"in e?e.using.call(t,f):h.css(f)}},xt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){xt.offset.setOffset(this,t,e)});var e,n,i,r,o=this[0];return o?o.getClientRects().length?(i=o.getBoundingClientRect(),i.width||i.height?(r=o.ownerDocument,n=ot(r),e=r.documentElement,{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===xt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),xt.nodeName(t[0],"html")||(i=t.offset()),i={top:i.top+xt.css(t[0],"borderTopWidth",!0),left:i.left+xt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-xt.css(n,"marginTop",!0),left:e.left-i.left-xt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===xt.css(t,"position");)t=t.offsetParent;return t||ne})}}),xt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;xt.fn[t]=function(i){return Bt(this,function(t,i,r){var o=ot(t);return void 0===r?o?o[e]:t[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):t[i]=r)},t,i,arguments.length)}}),xt.each(["top","left"],function(t,e){xt.cssHooks[e]=z(yt.pixelPosition,function(t,n){if(n)return n=F(t,e),fe.test(n)?xt(t).position()[e]+"px":n})}),xt.each({Height:"height",Width:"width"},function(t,e){
xt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){xt.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||o===!0?"margin":"border");return Bt(this,function(e,n,r){var o;return xt.isWindow(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===r?xt.css(e,n,s):xt.style(e,n,r,s)},e,a?r:void 0,a)}})}),xt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),xt.parseJSON=JSON.parse,n(6)&&(i=[],r=function(){return xt}.apply(e,i),!(void 0!==r&&(t.exports=r)));var Ke=a.jQuery,$e=a.$;return xt.noConflict=function(t){return a.$===xt&&(a.$=$e),t&&a.jQuery===xt&&(a.jQuery=Ke),xt},s||(a.jQuery=a.$=xt),xt})}).call(e,n(5)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};n.lerp=function(t,e,n){return t+n*(e-t)},e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};n.numberSafeCompareFunction=function(t,e){return t>e?1:t<e?-1:0},n.binarySearch=function(t,e,i){for(var r,o,a=i||n.numberSafeCompareFunction,s=0,l=t.length,u=!1;s<l;)r=s+(l-s>>1),o=+a(t[r],e),o<0?s=r+1:(l=r,u=!o);return u?s:~s},n.extend=function(t,e){var n=void 0,i=Array.isArray(e)?e:[e],r=i.length;for(n=0;n<r;n++)t[t.length]=i[n];return 0},e.default=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){for(var n=[],i=void 0,r=void 0,o=0;o<t.length;)if("{"===t.charAt(o))if(i=t.indexOf("}",o+1),i===-1)o++;else if(r=parseInt(t.substring(o+1,i)),!isNaN(r)&&r>=0){var a=t.substring(0,o);""!==a&&n.push(a),n.push(r),o=0,t=t.substring(i+1)}else o=i+1;else o++;if(""!==t&&n.push(t),t=n,1===t.length&&"string"==typeof t[0])return t[0];var s="";if(0===t.length&&e){for(o=0;o<e.length;o++)s+=e[o];return s}for(o=0,i=t.length;o<i;o++)"string"==typeof t[o]?s+=t[o]:e&&t[o]<e.length&&(s+=e[t[o]]);return s}function a(t,e,n){t.type;return t=o(t[u.default.show_language],n),e+":"+t}Object.defineProperty(e,"__esModule",{value:!0}),e.WarnException=void 0;var s=n(10),l=(r(s),n(14)),u=i(l);e.WarnException=function(t){for(var e=void 0,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length>0&&(e=i.shift()),a(t,e,i)}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.syncGetJson=e.arrayToStr=e.strToArray=e.getLocation=e.aAToa_a=e.a_aToaA=e.formatURLByHost=e.formatURL=e.formatURL2=e.rename=e.formatString=e.indexOf=e.falseFn=e.createGuid=e.json2xmlAndaAToa_a=e.json2xml=e.xmlToJson=e.strToXml=e.jsonSyncPromise=e.isColor=e.xmlPromise=e.filterUnit=e.isAddUnit=e.isArray=e.isStrNumber=e.isNumber=e.isString=e.getJsonLength=e.toBooleanTrueOrFlse=e.isTrueOrFalse=e.isBoolean=e.isObject=e.isJson=e.math=e.array=e.$=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(4),s=r(a),l=n(11),u=r(l),c=n(12),h=r(c),f=n(9),p=(i(f),n(13)),d=(r(p),e.$=s.default);e.array=h.default,e.math=u.default,e.isJson=function(t){if(!d.isPlainObject(t))return!1;try{return JSON.stringify(t),!0}catch(t){return!1}},e.isObject=function(t){return"object"===("undefined"==typeof t?"undefined":o(t))&&null!==t},e.isBoolean=function(t){return"boolean"==typeof t},e.isTrueOrFalse=function(t){return"boolean"==typeof t||"true"===t||"false"===t},e.toBooleanTrueOrFlse=function(t){return t===!0||"true"===t||"TRUE"===t||t!==!1&&"false"!==t&&"FALSE"!==t&&void 0};"debug"in console||(console.debug=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];console.log.apply(void 0,e)});var g=(e.getJsonLength=function(t){var e=0;for(var n in t)e++;return e},e.isString=function(t){return"string"==typeof t&&t.constructor===String}),m=e.isNumber=function(t){return"number"==typeof t&&t.constructor===Number},v=(e.isStrNumber=function(t){return g(t)?!isNaN(parseFloat(t)):"number"==typeof t&&t.constructor===Number},e.isArray=function(t){return t instanceof Array},e.isAddUnit=function(t){var e=new RegExp(/^(\-|\+)?\d+(m|px)?$/);return e.test(t)},e.filterUnit=function(t){return m(t)?t:Number(t.match(/^(\-|\+)?\d+/)[0])},e.xmlPromise=function(t){return d.ajax({url:t,type:"get",dataType:"xml"})},e.isColor=function(t){var e=new RegExp("^#([0-9a-fA-F]{6}|[0-9a-fA-F]{8})$");return e.test(t)},e.jsonSyncPromise=function(t){return d.ajax({url:t,type:"get",dataType:"json",async:!1})},e.strToXml=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.xmlToJson=function t(e){var n={};if(1===e.nodeType){if(e.attributes.length>0)for(var i=0;i<e.attributes.length;i+=1){var r=e.attributes.item(i);n[r.nodeName]=r.nodeValue}}else 3===e.nodeType&&(n=e.nodeValue);if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o+=1){var a=e.childNodes.item(o),s=a.nodeName;if("undefined"==typeof n[s]){var l=null;"#cdata-section"===s.toLowerCase()?(l=CDATAtoSTR(e.innerHTML),s="value"):l=t(a),"#text"===s&&""===l.replace(/^\s+/g,"")||"#comment"===s||("#text"===s?n=l:n[s]=l)}else{if("undefined"==typeof n[s].length){var u=n[s];n[s]=[],n[s].push(u)}n[s].push(t(a))}}return n},e.json2xml=function t(e,n){var i="";if(e instanceof Array){var r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i+=t(u,n)}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}}else if(e instanceof Object){n&&(i+="<"+n+">");for(var c in e)i+=t(e[c],c);n&&(i+="</"+n+">")}else i+="<"+n+">"+e+"</"+n+">";return i},e.json2xmlAndaAToa_a=function t(e,n){var i="";if(e instanceof Array){var r=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i+=t(u,n)}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}}else if(e instanceof Object){n&&(i+="<"+v(n)+">");for(var c in e)i+=t(e[c],c);n&&(i+="</"+v(n)+">")}else i+="<"+v(n)+">"+e+"</"+v(n)+">";return i},e.createGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},e.falseFn=function(){return!1},e.indexOf=function(t,e,n){for(var i in e)if(e[i][n]===t[n])return i;return-1},e.formatString=function(t,e){if(0!==e.length){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=new RegExp("{"+s.k+"}","gm");t=t.replace(l,s.v)}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t}return t},e.rename=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1],n=arguments[2],i=arguments[3],r=0,o=function t(e,n,i,o){for(var a in n){var s=void 0;if(s=i?n[a][i]:n[a],s&&e===s&&n[a]!==o)return t(e+"_"+ ++r,n,i,o)}return e};return o(t,e,n,i)},e.formatURL2=function(t,e){if(e){var n=e.split("/"),i=t;if(!i)return e;i=i.split("/"),i.pop();for(var r="",o=0;o<n.length;o+=1)0===o&&"."===n[o]&&(o+=1),".."===n[o]?i.pop():i.push(n[o]);for(var a=0;a<i.length;a+=1){var s=a===i.length-1?"":"/";r+=i[a]+s}return r}},e.formatURL=function(t){if(t){var e=t.split("/"),n=window.location.href;if(!n)return t;n=n.split("/"),n.pop();for(var i="",r=0;r<e.length;r+=1)0===r&&"."===e[r]&&(r+=1),".."===e[r]?n.pop():n.push(e[r]);for(var o=0;o<n.length;o+=1){var a=o===n.length-1?"":"/";i+=n[o]+a}return i}},e.formatURLByHost=function(t){if(t){var e=window.location.origin;if(!e)return t;for(var n=t.split("/"),i=[e],r="",o=0;o<n.length;o+=1)0===o&&"."===n[o]&&(o+=1),".."===n[o]?o+=1:i.push(n[o]);for(var a=0;a<i.length;a+=1){var s=a===i.length-1?"":"/";r+=i[a]+s}return r}},e.a_aToaA=function(t){return t.replace(/_[a-z]/g,function(t){return t.toUpperCase().charAt(1)})},e.aAToa_a=function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})});e.getLocation=function(t){var e={dir:"",filename:""};new RegExp(/^http:\/\//g).test(t)&&(t=t.substring(6));for(var n=t.split("/"),i=0;i<n.length;i++)i===n.length-1?(e.dir+="/",e.filename=n[i]):null!==n[i]&&""!==n[i]&&(e.dir+="/"+n[i]);return e.dir="http:/"+e.dir,e},e.strToArray=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float",n=[];if("string"!=typeof t)return n;var i=t.split(",");return i?(i instanceof Array||(i=[i]),i.forEach(function(t){if("string"==typeof t){var e=t.split(" ");if(e&&1===e.length)n.push(e[0]);else if(e&&e.length>1){for(var i=[],r=0;r<e.length;r++)i.push(parseFloat(e[r]));n.push(i)}}}),"string"===e||"String"===e||"STRING"===e?n:(n.forEach(function(t,n,i){if(t instanceof Array)t.forEach(function(t,n,i){switch(e){case"float":i[n]=parseFloat(t)}});else switch(e){case"float":i[n]=parseFloat(t)}}),n)):n},e.arrayToStr=function(t){var e="";if(!(t&&t instanceof Array&&0!==t.length))return"";for(var n=0;n<t.length;n++){0!==n&&(e+=",");var i=t[n];if(i instanceof Array)for(var r=0;r<i.length;r++)0!==r&&(e+=" "),e+=""+i[r];else e+=""+i}return e},e.syncGetJson=function(t){var e=d.ajax({async:!1,url:t,dataType:"text"});if(4===e.readyState&&200===e.status)return JSON.parse(e.responseText)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};n.lerp=function(t,e,n){return t+n*(e-t)},e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};n.numberSafeCompareFunction=function(t,e){return t>e?1:t<e?-1:0},n.binarySearch=function(t,e,i){for(var r,o,a=i||n.numberSafeCompareFunction,s=0,l=t.length,u=!1;s<l;)r=s+(l-s>>1),o=+a(t[r],e),o<0?s=r+1:(l=r,u=!o);return u?s:~s},n.extend=function(t,e){var n=void 0,i=Array.isArray(e)?e:[e],r=i.length;for(n=0;n<r;n++)t[t.length]=i[n];return 0},e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={show_language:"zh",ERROR_PARAMS:{type:"error",zh:"参数错误"},ERRAR_PARAMS_ONLY:{type:"error",zh:"参数错误,只能是:"},ERROR_GVML_FILE_PARSE:{type:"error",zh:"Uninpho文件解析失败，请检查是否拼写错误。"},ERROR_GVML_FILE_READ:{type:"error",zh:"Uninpho文件读取失败，请检查路径是否错误。"},ERROR_PARAMS_BOOLEAN:{type:"error",zh:"参数必须是布尔类型"},ERROR_PARAMS_FUNCTION:{type:"error",zh:"参数不是一个有效的函数类型"},ERROR_ANIMATE_TYPE:{type:"error",zh:"不是一个有效的动画类型"},UNDEFINED_PARENT_CONTAINER:{type:"error",zh:"父容器未定义"},UNDEFINED_DOM:{type:"error",zh:"页面未包含相应元素"},UNDEFINED_PLUGINPANEL:{type:"error",zh:"未定义插件面板"},UNDEFINED_PLUGIN_TYPE:{type:"error",zh:"未定义插件类型,必须指定,类型查看Uninpho.PluginType"},UNDEFINED_EXCEPTION:{type:"error",zh:"未定义(undefined)异常"},UNDEFINED_PLUGIN:{type:"error",zh:"未定义插件，请检查插件参数是否正确，或者提前注册该插件！"},ERROR_PLUGIN_TYPE:{type:"error",zh:"插件类型指定错误,请检查自己的Uninpho数据是否错误"},ERROR_PLUGIN_URL:{type:"error",zh:"错误插件路径，请检查路径是否指向真实插件路径"},ERROR_IMAGE_SOURCE:{type:"error",zh:"未指定图层数据源或者图层数据源指定错误"},ERROR_BASEIMAGE_DEFINITION:{type:"error",zh:"基础图层定义错误"},ERROR_POLYLINE_LENGTH:{type:"error",zh:"Polyline最少需要2个折点"},ERROR_POLYGON_LENGTH:{type:"error",zh:"多边形最少需要3个折点"},centerMessage:{managerService:{error:{zh:"获取所有服务列表失败"}}},UNDEFINED_CACHE_OPTION_PARAM:{type:"error",zh:'CacheOption的driver设置有误，须为"filesystem"或"leveldb"'},WARN_PARAMS_RANGE:{type:"warn",zh:"参数范围错误:{0}  取值范围:{1} 单位或枚举:{2}, 使用默认参数 {3}"},WARN_PARAMS_RANGE_NONE:{type:"warn",zh:"参数范围错误---参数:{0} 取值范围:{1}, 使用默认参数 {2}"},WARN_PARAMS_RANGE_NONEDEFAULT:{type:"warn",zh:"参数范围错误---参数:{0} 取值范围:{1}"},WARN_PARAMS:{type:"warn",zh:"参数:{0}--参数类型错误 参数类型:{1}, 使用默认参数 {2}"},WARN_PARAMS_NONE:{type:"warn",zh:"参数类型错误---参数:{0} 参数类型:{1}"},WARN_CORLOR:{type:"warn",zh:"参数:{0}--参数类型错误,参数应为十六进制颜色#FFFFFFFF或#FFFFFF,使用默认参数:{1}"},WARN_ARRAY_ELEMENT_TYPE:{type:"warn",zh:"参数类型错误---参数:{0} 数组元素参数类型:{1},{2}元素类型为:{3}"},WARN_ARRAY_ELEMENT_PARAMS:{type:"warn",zh:"参数类型错误---参数:{0} 数组元素取值范围错误"},WARN_ARRAY_LENGHT:{type:"warn",zh:"参数类型错误---参数:{0},数组长度应{1}{2},当前数组长度为{3}"},WARN_ARRAY_LAYER_EXTENT:{type:"warn",zh:"获取图层范围失败!",en:"getExtent failed!"},WARN_CUSTOM:{type:"warn",zh:""},ADDED_PLUGIN:{type:"warn",zh:"插件已经添加过了, 请不要重复添加o(>﹏<)o"},USING_WIDGET:{type:"warn",zh:"挂件已经在使用中！"},IS_WIDGET_NOT_TOOL:{type:"warn",zh:"该插件为widget，请使用usingWidget方法添加!"},USING_PLUGIN_FAIL:{type:"warn",zh:"添加插件{0}失败!"}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={show_language:"zh",ERROR_PARAMS:{type:"error",zh:"参数错误"},ERRAR_PARAMS_ONLY:{type:"error",zh:"参数错误,只能是:"},ERROR_GVML_FILE_PARSE:{type:"error",zh:"Uninpho文件解析失败，请检查是否拼写错误。"},ERROR_GVML_FILE_READ:{type:"error",zh:"Uninpho文件读取失败，请检查路径是否错误。"},ERROR_PARAMS_BOOLEAN:{type:"error",zh:"参数必须是布尔类型"},ERROR_PARAMS_FUNCTION:{type:"error",zh:"参数不是一个有效的函数类型"},ERROR_ANIMATE_TYPE:{type:"error",zh:"不是一个有效的动画类型"},UNDEFINED_PARENT_CONTAINER:{type:"error",zh:"父容器未定义"},UNDEFINED_DOM:{type:"error",zh:"页面未包含相应元素"},UNDEFINED_PLUGINPANEL:{type:"error",zh:"未定义插件面板"},UNDEFINED_PLUGIN_TYPE:{type:"error",zh:"未定义插件类型,必须指定,类型查看Uninpho.PluginType"},UNDEFINED_EXCEPTION:{type:"error",zh:"未定义(undefined)异常"},UNDEFINED_PLUGIN:{type:"error",zh:"未定义插件，请检查插件参数是否正确，或者提前注册该插件！"},ERROR_PLUGIN_TYPE:{type:"error",zh:"插件类型指定错误,请检查自己的Uninpho数据是否错误"},ERROR_PLUGIN_URL:{type:"error",zh:"错误插件路径，请检查路径是否指向真实插件路径"},ERROR_IMAGE_SOURCE:{type:"error",zh:"未指定图层数据源或者图层数据源指定错误"},ERROR_BASEIMAGE_DEFINITION:{type:"error",zh:"基础图层定义错误"},ERROR_POLYLINE_LENGTH:{type:"error",zh:"Polyline最少需要2个折点"},ERROR_POLYGON_LENGTH:{type:"error",zh:"多边形最少需要3个折点"},centerMessage:{managerService:{error:{zh:"获取所有服务列表失败"}}},UNDEFINED_CACHE_OPTION_PARAM:{type:"error",zh:'CacheOption的driver设置有误，须为"filesystem"或"leveldb"'},WARN_PARAMS_RANGE:{type:"warn",zh:"参数范围错误:{0}  取值范围:{1} 单位或枚举:{2}, 使用默认参数 {3}"},WARN_PARAMS_RANGE_NONE:{type:"warn",zh:"参数范围错误---参数:{0} 取值范围:{1}, 使用默认参数 {2}"},WARN_PARAMS_RANGE_NONEDEFAULT:{type:"warn",zh:"参数范围错误---参数:{0} 取值范围:{1}"},WARN_PARAMS:{type:"warn",zh:"参数:{0}--参数类型错误 参数类型:{1}, 使用默认参数 {2}"},WARN_PARAMS_NONE:{type:"warn",zh:"参数类型错误---参数:{0} 参数类型:{1}"},WARN_CORLOR:{type:"warn",zh:"参数:{0}--参数类型错误,参数应为十六进制颜色#FFFFFFFF或#FFFFFF,使用默认参数:{1}"},WARN_ARRAY_ELEMENT_TYPE:{type:"warn",zh:"参数类型错误---参数:{0} 数组元素参数类型:{1},{2}元素类型为:{3}"},WARN_ARRAY_ELEMENT_PARAMS:{type:"warn",zh:"参数类型错误---参数:{0} 数组元素取值范围错误"},WARN_ARRAY_LENGHT:{type:"warn",zh:"参数类型错误---参数:{0},数组长度应{1}{2},当前数组长度为{3}"},WARN_ARRAY_LAYER_EXTENT:{type:"warn",zh:"获取图层范围失败!",en:"getExtent failed!"},WARN_CUSTOM:{type:"warn",zh:""},ADDED_PLUGIN:{type:"warn",zh:"插件已经添加过了, 请不要重复添加o(>﹏<)o"},USING_WIDGET:{type:"warn",zh:"挂件已经在使用中！"},IS_WIDGET_NOT_TOOL:{type:"warn",zh:"该插件为widget，请使用usingWidget方法添加!"},USING_PLUGIN_FAIL:{type:"warn",zh:"添加插件{0}失败!"}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_Exception=__webpack_require__(16),_Exception2=_interopRequireDefault(_Exception),_ExceptionMessage=__webpack_require__(13),_ExceptionMessage2=_interopRequireDefault(_ExceptionMessage),_WarnException=__webpack_require__(17),warn=_interopRequireWildcard(_WarnException),_Event2=__webpack_require__(18),_Event3=_interopRequireDefault(_Event2),_Util=__webpack_require__(10),PluginManager=function(_Event){function PluginManager(t){_classCallCheck(this,PluginManager);var e=_possibleConstructorReturn(this,(PluginManager.__proto__||Object.getPrototypeOf(PluginManager)).call(this));return e._centerPlugins=new Map,e._widgets=new Map,e._tools=new Map,e._currentTool=void 0,e._customUI=void 0,e._toolChanged=void 0,e._earth=t,t.pluginManager=e,e}return _inherits(PluginManager,_Event),_createClass(PluginManager,[{key:"getPluginByName",value:function(t){var e=void 0;return e=this._widgets.get(t),!e&&(e=this._tools.get(t))?e:e}},{key:"getPluginInfoByName",value:function(t){return this._centerPlugins.get(t)}},{key:"getInstalledPlugins",value:function(){var t=[];return this._widgets.forEach(function(e){t.push(e)}),this._tools.forEach(function(e){t.push(e)}),t}},{key:"getAllPlugins",value:function(){return this._centerPlugins}},{key:"addPlugin",value:function addPlugin(plugin){if(console.log("addPlugin: ",plugin),"string"==typeof plugin&&(plugin=this._centerPlugins.get(plugin)),!plugin)throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGIN,_ExceptionMessage2.default.UNDEFINED_PLUGIN.type);var realPlugin=void 0;switch(plugin.type){case"widget":realPlugin=this._widgets.get(plugin.name);break;case"tool":realPlugin=this._tools.get(plugin.name);break;default:throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGIN_TYPE,_ExceptionMessage2.default.UNDEFINED_PLUGIN_TYPE.type)}if(realPlugin)throw new _Exception2.default(_ExceptionMessage2.default.ADDED_PLUGIN,_ExceptionMessage2.default.ADDED_PLUGIN.type);var pluginClass=this._appendScript(plugin.name,plugin.url,plugin.js);if(!pluginClass)throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGIN_TYPE,_ExceptionMessage2.default.UNDEFINED_PLUGIN_TYPE.type);var panel=this._addRootDOM(plugin);if(panel)return realPlugin=new(eval(pluginClass))({name:plugin.name,container:panel,url:plugin.url,js:plugin.js,type:plugin.type,img:plugin.img,earth:this._earth,language:plugin.language,parms:plugin.parms}),this._add(realPlugin),realPlugin}},{key:"removePlugin",value:function(t){var e=void 0;if(!t)throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGIN,_ExceptionMessage2.default.UNDEFINED_PLUGIN.type);if("string"==typeof t)e=t;else{if(void 0===t.name)throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGIN,_ExceptionMessage2.default.UNDEFINED_PLUGIN.type);e=t.name}var n=this._widgets.get(e);if(n||(n=this._tools.get(e)),!n)throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGIN,_ExceptionMessage2.default.UNDEFINED_PLUGIN.type);console.log("remove: ",n),this._remove(n),this._removeRootDOM(n)}},{key:"openWidget",value:function(t){if(t){var e=void 0;e="string"==typeof t?t:t.name;var n=this._widgets.get(e);return n?n.isUsing===!1?(n._init(),n.isUsing=!0):console.warn(warn.WarnException(_ExceptionMessage2.default.USING_WIDGET)):(n=this.addPlugin(e),n&&(n=this.usingWidget(n))),n}}},{key:"closeWidget",value:function(t){if(t){var e=void 0;e="string"==typeof t?t:t.name;var n=this._widgets.get(e);n&&(n._remove(),n.isUsing=!1)}}},{key:"_setCurrentTool",value:function(t){this.fire("setCurrentTool",t);var e=void 0;if(!t)return this._turnOffTools(),void(this._toolChanged&&this._toolChanged(void 0));e="string"==typeof t?t:t.name;var n=this._tools.get(e);if(n)this._currentTool&&(this._currentTool._remove(),this._currentTool.isCurrentTool=!1),n._init(),this._toolChanged&&this._toolChanged(n);else{if(this._widgets.get(e))return void console.warn(warn.WarnException(_ExceptionMessage2.default.IS_WIDGET_NOT_TOOL));n=this.addPlugin(e),n&&(n=this._setCurrentTool(n))}return n&&(n.isCurrentTool=!0),n}},{key:"_initCenter",value:function(t){if(t){var e=(0,_Util.jsonSyncPromise)(t).responseJSON;if(e){var n=e.results;this._centerPlugins=new Map;for(var i in n)this._centerPlugins.set(n[i].name,n[i]);this._data=n}}}},{key:"_initPlugins",value:function(t){var e=this,n=[],i=this._centerPlugins;t.tool&&t.tool.constructor===Array?t.tool.forEach(function(t){n.push({id:t.id,type:"tool"})}):t.tool&&n.push({id:t.tool.id,type:"tool"}),t.widget&&t.widget.constructor===Array?t.widget.forEach(function(t){n.push({id:t.id,type:"widget"})}):t.widget&&n.push({id:t.widget.id,type:"widget"}),n.forEach(function(t){var n=i.get(t.id);if(!n)throw new _Exception2.default(t.id+" : "+_ExceptionMessage2.default.UNDEFINED_PLUGIN);if(t.type!==n.type)throw new _Exception2.default(_ExceptionMessage2.default.ERROR_PLUGIN_TYPE);e.addPlugin(n),"widget"===n.type&&e.usingWidget(n)})}},{key:"_addRootDOM",value:function(t){var e=t.name,n=null;if(t.customUI){if(!this._customUI)throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGINPANEL);n=this._customUI}else n=this._earth.container;var i=function(t){if(!n.hasChildNodes()){for(var e=n.childNodes,i=0;i<e.length;i+=1)if(e[i].id===t)return!0;return!1}},r=this._earth.container.id+"_of_"+e;if(i(r)!==!0){var o=document.createElement("div");return o.id=r,t.customUI||(o.style.position="relative"),o.style.top="-100%",o.style.height="0",n.appendChild(o),o}}},{key:"_removeRootDOM",value:function(t){var e=t.name,n=null,i=this._earth.container.id;if(t.customUI){if(!this._customUI)throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGINPANEL);n=this._customUI}else n=document.getElementById(i);var r=document.getElementById(i+"_of_"+e);n.removeChild(r)}},{key:"_appendScript",value:function(t,e,n){var i=(this._earth.container,function(t){for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n+=1)if(e[n].getAttribute("pluginId")===t)return!0;return!1}),r=document.createElement("script");if(r.setAttribute("pluginId",t),i(t)!==!1)return n;var o=_Util.$.ajax({async:!1,url:""+e+n+".js",dataType:"text"});return 4===o.readyState&&200===o.status?(document.head.appendChild(r),r.innerHTML=o.responseText.replace("<br>","\n"),n):void 0}},{key:"_removeScript",value:function(t){var e=function(t){for(var e=document.getElementsByTagName("script"),n=0;n<e.length;n+=1)if(e[n].getAttribute("pluginId")===t)return e[n]},n=e(t);return n&&document.head.removeChild(n),this}},{key:"_turnOffTools",value:function(){this._currentTool&&(this._currentTool._remove(),this._currentTool.isCurrentTool=!1),this._currentTool=void 0}},{key:"_add",value:function(t){if(t){switch(t.type){case"widget":this._addToMap(t,this._widgets);break;case"tool":this._addToMap(t,this._tools);break;default:throw new _Exception2.default(_ExceptionMessage2.default.UNDEFINED_PLUGIN_TYPE,_ExceptionMessage2.default.UNDEFINED_PLUGIN_TYPE.type)}t._manager=this}}},{key:"_remove",value:function(t){if(t){switch(t.type){case"widget":this._removeFormMap(t,this._widgets);break;case"tool":this._removeFormMap(t,this._tools)}t._remove()}}},{key:"_removeFormMap",value:function(t,e){return e.has(t.key)&&e.delete(t.key),this}},{key:"_addToMap",value:function(t,e){if(e.has(t.key))throw new _Exception2.default(_ExceptionMessage2.default.ADDED_PLUGIN,_ExceptionMessage2.default.ADDED_PLUGIN.type);return e.set(t.key,t),this}},{key:"toTags",value:function(){var t="",e="";return this._widgets.forEach(function(e){e&&(t+="<widget><id>"+e.key+"</id></widget>")}),this._tools.forEach(function(t){t&&(e+="<tool><id>"+t.key+"</id></tool>")}),"<plugins>"+t+e+"</plugins>"}},{key:"toJson",value:function(){var t=[];return this._widgets.forEach(function(e){e&&t.push({widget:{id:e.key}})}),this._tools.forEach(function(e){e&&t.push({tool:{id:e.key}})}),t}},{key:"currentTool",set:function(t){this._currentTool=this._setCurrentTool(t)},get:function(){return this._currentTool}},{key:"toolChanged",set:function(t){this._toolChanged=t}},{key:"customUI",set:function(t){var e=void 0;e="string"==typeof t?document.getElementById(t):t,this._customUI=e}}]),PluginManager}(_Event3.default);exports.default=PluginManager},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(10),l=(r(s),n(13)),u=i(l),c=function(){function t(e){o(this,t);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.length>0&&(this.type=i.shift()),this.showMessage(e,i)}return a(t,[{key:"formatMessage",value:function(t,e){for(var n=[],i=void 0,r=void 0,o=0;o<t.length;)if("{"===t.charAt(o))if(i=t.indexOf("}",o+1),i===-1)o++;else if(r=parseInt(t.substring(o+1,i)),!isNaN(r)&&r>=0){var a=t.substring(0,o);""!==a&&n.push(a),n.push(r),o=0,t=t.substring(i+1)}else o=i+1;else o++;if(""!==t&&n.push(t),t=n,0===t.length)return"";if(1===t.length&&"string"==typeof t[0])return t[0];var s="";for(o=0,i=t.length;o<i;o++)"string"==typeof t[o]?s+=t[o]:e&&t[o]<e.length&&(s+=e[t[o]]);return s}},{key:"showMessage",value:function(t,e){var n=t.type;switch(t=this.formatMessage(t[u.default.show_language],e),n){case"error":console.error(this.type+":"+t);break;case"warn":console.warn(this.type+":"+t);break;case"info":console.info(this.type+":"+t)}}},{key:"type",set:function(t){this._type=t||"Exception"},get:function(){return this._type}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){for(var n=[],i=void 0,r=void 0,o=0;o<t.length;)if("{"===t.charAt(o))if(i=t.indexOf("}",o+1),i===-1)o++;else if(r=parseInt(t.substring(o+1,i)),!isNaN(r)&&r>=0){var a=t.substring(0,o);""!==a&&n.push(a),n.push(r),o=0,t=t.substring(i+1)}else o=i+1;else o++;if(""!==t&&n.push(t),t=n,1===t.length&&"string"==typeof t[0])return t[0];var s="";if(0===t.length&&e){for(o=0;o<e.length;o++)s+=e[o];return s}for(o=0,i=t.length;o<i;o++)"string"==typeof t[o]?s+=t[o]:e&&t[o]<e.length&&(s+=e[t[o]]);return s}function a(t,e,n){t.type;return t=o(t[u.default.show_language],n),e+":"+t}Object.defineProperty(e,"__esModule",{value:!0}),e.WarnException=void 0;var s=n(10),l=(r(s),n(13)),u=i(l);e.WarnException=function(t){for(var e=void 0,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.length>0&&(e=i.shift()),a(t,e,i)}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(3),h=r(c),f=n(19),p=i(f),d=function(t){function e(){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),u(e,[{key:"on",value:function(t,e,n){if(h.isJson(t))for(var i in t)this._on(i,t[i],e);else this._on(t,e,n);return this}},{key:"_on",value:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(r)}},{key:"off",value:function(t,e,n){if(t)if("object"===("undefined"==typeof t?"undefined":l(t)))for(var i in t)this._off(i,t[i],e);else this._off(t,e,n);else delete this._events;return this}},{key:"_off",value:function(t,e,n){if(this._events){var i=this._events[t];if(i){if(e){for(var r=0,o=i.length;r<o;r++)i[r].fn=h.falseFn;return void delete this._events[t]}n===this&&(n=void 0);for(var a=0,s=i.length;a<s;a++){var l=i[a];if(l.ctx===n&&l.fn===e)return l.fn=h.falseFn,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(a,1)}}}}},{key:"fire",value:function(t,e){if(!this.listens(t))return this;if(this._events){var n=this._events[t];if(n){this._firingCount=this._firingCount+1||1;for(var i=0,r=n.length;i<r;i++){var o=n[i];o.fn.call(o.ctx||this,e)}this._firingCount--}}return this}},{key:"listens",value:function(t){var e=this._events&&this._events[t];return!!(e&&e.length>0)}}]),e}(p.default);e.default=d},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(3),l=i(s),u=function(){function t(e){o(this,t),e&&l.isJson(e)&&(this._uuid=e.uuid,this._parseJson(e)),this._uuid=this._uuid||l.createGuid()}return a(t,[{key:"_parseJson",value:function(t,e){}},{key:"bindCallback",value:function(t){var e=null;this.map?e=this.map._messageManager:this._messageManager&&(e=this._messageManager),null!=e&&e.bindCallback(this.id,t,this)}},{key:"setMap",value:function(t){this.map=t,this._callBack&&l.$.isFunction(this._callBack)&&this.bindCallback(this._callBack)}},{key:"setProps",value:function(t){for(var e in t)this[e]=t[e]}},{key:"postMessage",value:function(t,e,n){var i=null;this.map?(i=this.map._messageManager,i.postMessage(this.id,t,e,n)):this._messageManager&&(i=this._messageManager,i.postMessage(t,e,n))}},{key:"toXml",value:function(){return this._toXml()}},{key:"_toXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l.replaceXmlSpace("<"+this.tag+"><uuid>"+this.id+"</uuid>"+t+"</"+this.tag+">")}},{key:"_toJson",value:function(t){var e={uuid:this.id};if(t)for(var n in t)e[n]=t[n];return r({},this.tag,e)}},{key:"uuid",set:function(t){this._uuid||(this._uuid=t)}},{key:"id",get:function(){return this._uuid}
},{key:"tag",get:function(){return"Class"}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(21),u=i(l),c=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._type="widget",n._isUsing=!1,n}return a(e,t),s(e,[{key:"type",set:function(t){this._type="widget"},get:function(){return this._type}},{key:"isUsing",set:function(t){this._isUsing=t},get:function(){return this._isUsing}},{key:"registerName",set:function(t){this._registerName=t,this.earth&&this._registerName}}]),e}(u.default);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(18),u=i(l),c=n(10),h=n(22),f=i(h),p=/\\?\{\{([^{}]+)\}\}/g,d=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));for(var i in t)t[i]&&"uuid"!==i&&(n[i]=t[i]);return n._loadLanguage(),n}return a(e,t),s(e,[{key:"_loadLanguage",value:function(){if(this.language){var t={path:this.url,name:this.language,mode:"map",language:"zh"};f.default.properties(t)}}},{key:"_loadLanguageCallback",value:function(){this._isLoadLanguageOk=!0}},{key:"getValue",value:function(t){return f.default.prop(t)}},{key:"_init",value:function(){if(this.reference){this.reference();var t=!1;this.html&&(this.loadHtml(this.html),t=!0),this.css&&(this.loadCss(this.css),t=!0),this.script?this.synLoadScript(this.script):this.init()}else this.init()}},{key:"init",value:function(){}},{key:"_remove",value:function(){this.remove(),this._removeUI()}},{key:"remove",value:function(){}},{key:"loadCss",value:function(t){var e=this;"string"==typeof t&&(t=[t]);var n=document.getElementsByTagName("head")[0],i=!0,r=!1,o=void 0;try{for(var a,s=function(){var t=a.value,i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e.formatURL(t);var r=c.$.ajax({async:!1,url:i.href});r.done(function(){n.appendChild(i),e.link||(e.link=[]),e.link.push(i)}),r.fail(function(t){console.error(t)})},l=t[Symbol.iterator]();!(i=(a=l.next()).done);i=!0)s()}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}}},{key:"loadScript",value:function(t){var e=this;"string"==typeof t&&(t=[t]);var n=document.getElementsByTagName("head")[0],i=!0,r=!1,o=void 0;try{for(var a,s=function(){var i=a.value,r=document.createElement("script");r.src=e.formatURL(i),n.appendChild(r),r.onload=function(){e.scripts||(e.scripts=[]),e.scripts.push(r),t.length===e.scripts.length&&e.init()}},l=t[Symbol.iterator]();!(i=(a=l.next()).done);i=!0)s()}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}}},{key:"synLoadScript",value:function(t){var e=void 0;if("string"==typeof t)e=[t];else{e=[];var n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.push(s)}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}this._synLoadScript(e)}},{key:"_synLoadScript",value:function(t){var e=this,n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.src=this.formatURL(t[0]),n.insertBefore(i,n.childNodes[0]),i.onload=function(){t.splice(0,1),t[0]?(e.scripts||(e.scripts=[]),e.scripts.push(i),e.synLoadScript(t)):e.init()}}},{key:"loadHtml",value:function(t){var e=this;t instanceof Array&&(t=t[0],console.warn("暂不支持一个插件包含多个界面"));var n=c.$.ajax({url:this.formatURL(t),dataType:"html",async:!1}),i=n.responseText.indexOf("<body>")+6,r=n.responseText.indexOf("</body>");if(!(i<6||i>r)){var o=n.responseText.substring(i,r);if(o=o.replace(/src=".\/\S*"/g,function(t){var n=e.formatURL(t.substring(5,t.length-1));return'src="'+n+'"'}),o=o.replace(/url\(('|"){0,1}.\/\S*('|"){0,1}\)/g,function(t){return/^url\(('|")/.test(t)?"url("+e.formatURL(t.substring(5,t.length-2))+")":"url("+e.formatURL(t.substring(4,t.length-1))+")"})){o=this._formatMessage(o);var a=c.$.parseHTML(o,!0),s=!0,l=!1,u=void 0;try{for(var h,f=a[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var p=h.value;(0,c.$)(p).attr("src")?(0,c.$)(p).attr("src",this.formatURL((0,c.$)(p).attr("src"))):(0,c.$)(p).attr("href")&&(0,c.$)(p).attr("href",this.formatURL((0,c.$)(p).attr("href")))}}catch(t){l=!0,u=t}finally{try{!s&&f.return&&f.return()}finally{if(l)throw u}}(0,c.$)(this.container).append(a)}}}},{key:"_formatMessage",value:function(t){var e=this;return t.replace(p,function(t,n){return e.getValue(n.replace(/(^\s*)|(\s*$)/g,""))})}},{key:"_removeUI",value:function(){if(this.container)for(var t=this.container.childNodes;t.length>0;)this.container.removeChild(t[t.length-1]);var e=document.getElementsByTagName("head")[0];if(this.link&&this.link.length>0){for(var n=0;n<this.link.length;n++)this.link[n]&&e.removeChild(this.link[n]);this.link=[]}if(this.scripts&&this.scripts.length>0){for(var i=0;i<this.scripts.length;i++)this.scripts[i]&&e.removeChild(this.scripts[i]);this.scripts=[]}}},{key:"formatURL",value:function(t){if(t.startsWith("https:"))return t;if(!this.url||null===this.url)return t;var e=t.split("/"),n=this.url.split("/");""===n[n.length-1]&&n.pop();for(var i="",r=0;r<e.length;r+=1)0===r&&"."===e[r]&&(r+=1),".."===e[r]?n.pop():n.push(e[r]);for(var o=0;o<n.length;o+=1){var a=o===n.length-1?"":"/";i+=n[o]+a}return i}},{key:"formatHostURL",value:function(t){return window.location.origin?window.location.origin+this.formatURL(t):this.formatURL(t)}},{key:"display",value:function(t){if(t===!1)this.container.style.display="none";else{var e=this.container.id;(0,c.$)("#"+e).attr("style","")}}},{key:"type",get:function(){return this.type}},{key:"key",get:function(){return this.name}},{key:"transition",set:function(t){t===!0&&(this.container.className="transition_left"),this._transition=t},get:function(){return!!this._transition&&this._transition}},{key:"setting",get:function(){var t=this.url+"setting.json",e=c.$.ajax({async:!1,url:t});if(/^Cannot/.test(e.responseText)!==!0&&""!==e.responseText){try{JSON.parse(e.responseText)}catch(t){return}return JSON.parse(e.responseText)[this.name]?JSON.parse(e.responseText)[this.name]:JSON.parse(e.responseText)}}}]),e}(u.default);e.default=d},function(module,exports){"use strict";function callbackIfComplete(t){t.debug&&(debug("callbackIfComplete()"),debug("totalFiles: "+t.totalFiles),debug("filesLoaded: "+t.filesLoaded)),t.async&&t.filesLoaded===t.totalFiles&&t.callback&&t.callback()}function loadAndParseFiles(t,e){e.debug&&debug("loadAndParseFiles"),null!==t&&t.length>0?loadAndParseFile(t[0],e,function(){t.shift(),loadAndParseFiles(t,e)}):callbackIfComplete(e)}function loadAndParseFile(t,e,n){e.debug&&(debug("loadAndParseFile('"+t+"')"),debug("totalFiles: "+e.totalFiles),debug("filesLoaded: "+e.filesLoaded)),null!==t&&"undefined"!=typeof t&&$.ajax({url:t,async:e.async,cache:e.cache,dataType:"text",success:function(i,r){e.debug&&(debug("Succeeded in downloading "+t+"."),debug(i)),parseData(i,e),n()},error:function(i,r,o){e.debug&&debug("Failed to download or parse "+t+". errorThrown: "+o),404===i.status&&(e.totalFiles-=1),n()}})}function parseData(data,settings){var parsed="",lines=data.split(/\n/),regPlaceHolder=/(\{\d+})/g,regRepPlaceHolder=/\{(\d+)}/g,unicodeRE=/(\\u.{4})/gi;lines.forEach(function(t,e){if(t=t.trim(),t.length>0&&"#"!=t.match("^#")){var n=t.split("=");if(n.length>0){for(var i=decodeURI(n[0]).trim(),r=1==n.length?"":n[1];"\\"===r.match(/\\$/);)r=r.substring(0,r.length-1),r+=lines[++e].trimRight();for(var o=2;o<n.length;o++)r+="="+n[o];if(r=r.trim(),"map"==settings.mode||"both"==settings.mode){var a=r.match(unicodeRE);a&&a.forEach(function(t){r=r.replace(t,unescapeUnicode(t))}),i18n.map[i]=r}if("vars"==settings.mode||"both"==settings.mode)if(r=r.replace(/"/g,'\\"'),checkKeyNamespace(i),regPlaceHolder.test(r)){var s=r.split(regPlaceHolder),l=!0,u="",c=[];s.forEach(function(t){!regPlaceHolder.test(t)||0!==c.length&&c.indexOf(t)!=-1||(l||(u+=","),u+=t.replace(regRepPlaceHolder,"v$1"),c.push(t),l=!1)}),parsed+=i+"=function("+u+"){";var h='"'+r.replace(regRepPlaceHolder,'"+v$1+"')+'"';parsed+="return "+h+";};"}else parsed+=i+'="'+r+'";'}}}),eval(parsed),settings.filesLoaded+=1}function checkKeyNamespace(key){var regDot=/\./;if(regDot.test(key)){var fullname="",names=key.split(/\./);names.forEach(function(name,i){i>0&&(fullname+="."),fullname+=name,eval("typeof "+fullname+' == "undefined"')&&eval(fullname+"={};")})}}function unescapeUnicode(t){var e=[],n=parseInt(t.substr(2),16);return n>=0&&n<Math.pow(2,16)&&e.push(n),e.reduce(function(t,e){return t+String.fromCharCode(e)},"")}Object.defineProperty(exports,"__esModule",{value:!0});var i18n={};i18n.map={};var debug=function(t){console.log("i18n::"+t)};i18n.properties=function(t){var e={name:"Messages",language:"",path:"",mode:"vars",cache:!1,debug:!1,encoding:"UTF-8",async:!1,callback:null};t=$.extend(e,t),t.path.match(/\/$/)||(t.path+="/"),t.language=this.normaliseLanguageCode(t.language);var n=t.name&&t.name.constructor===Array?t.name:[t.name];t.totalFiles=2*n.length+(t.language.length>=5?n.length:0),t.debug&&debug("totalFiles: "+t.totalFiles),t.filesLoaded=0,n.forEach(function(e){var n,i,r;n=t.path+e+".properties";var o=t.language.substring(0,2);if(i=t.path+e+"_"+o+".properties",t.language.length>=5){var a=t.language.substring(0,5);r=t.path+e+"_"+a+".properties"}loadAndParseFiles([n,i,r],t)}),t.callback&&!t.async&&t.callback()},i18n.prop=function(t){var e=i18n.map[t];if(null===e)return"["+t+"]";if("undefined"==typeof e)return t;var n;2==arguments.length&&$.isArray(arguments[1])&&(n=arguments[1]);var i;if("string"==typeof e){for(i=0;(i=e.indexOf("\\",i))!=-1;)e="t"==e.charAt(i+1)?e.substring(0,i)+"\t"+e.substring(i++ +2):"r"==e.charAt(i+1)?e.substring(0,i)+"\r"+e.substring(i++ +2):"n"==e.charAt(i+1)?e.substring(0,i)+"\n"+e.substring(i++ +2):"f"==e.charAt(i+1)?e.substring(0,i)+"\f"+e.substring(i++ +2):"\\"==e.charAt(i+1)?e.substring(0,i)+"\\"+e.substring(i++ +2):e.substring(0,i)+e.substring(i+1);var r,o,a=[];for(i=0;i<e.length;)if("'"==e.charAt(i))if(i==e.length-1)e=e.substring(0,i);else if("'"==e.charAt(i+1))e=e.substring(0,i)+e.substring(++i);else{for(r=i+2;(r=e.indexOf("'",r))!=-1;){if(r==e.length-1||"'"!=e.charAt(r+1)){e=e.substring(0,i)+e.substring(i+1,r)+e.substring(r+1),i=r-1;break}e=e.substring(0,r)+e.substring(++r)}r==-1&&(e=e.substring(0,i)+e.substring(i+1))}else if("{"==e.charAt(i))if(r=e.indexOf("}",i+1),r==-1)i++;else if(o=parseInt(e.substring(i+1,r)),!isNaN(o)&&o>=0){var s=e.substring(0,i);""!==s&&a.push(s),a.push(o),i=0,e=e.substring(r+1)}else i=r+1;else i++;""!==e&&a.push(e),e=a,i18n.map[t]=a}if(0===e.length)return"";if(1==e.length&&"string"==typeof e[0])return e[0];var l="";for(i=0,r=e.length;i<r;i++)l+="string"==typeof e[i]?e[i]:n&&e[i]<n.length?n[e[i]]:!n&&e[i]+1<arguments.length?arguments[e[i]+1]:"{"+e[i]+"}";return l},i18n.normaliseLanguageCode=function(t){return(!t||t.length<2)&&(t=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||"en"),t=t.toLowerCase(),t=t.replace(/-/,"_"),t.length>3&&(t=t.substring(0,3)+t.substring(3).toUpperCase()),t},exports.default=i18n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(21),u=i(l),c=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._type="tool",n._isCurrentTool=!1,n}return a(e,t),s(e,[{key:"type",set:function(t){this._type="tool"},get:function(){return this._type}},{key:"isCurrentTool",set:function(t){this._isCurrentTool=t},get:function(){return this._isCurrentTool}},{key:"active",set:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._active=t,"boolean"==typeof t&&t&&this._manager&&this._manager._activeTool(this)},get:function(){return this._active}}]),e}(u.default);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(25),u=i(l),c=n(69),h=(i(c),n(70)),f=i(h),p=n(78),d=i(p),g=n(79),m=i(g),v=n(38),y=i(v),_=n(26),x=i(_),w=n(80),b=i(w),C=n(93),S=i(C),M=n(106),E=i(M),I=n(15),T=i(I),P=n(107),L=i(P),D=function(t){function e(t,n){r(this,e);var i={shouldAnimate:!0,animation:!1,baseLayerPicker:!1,fullscreenButton:!1,vrButton:!1,geocoder:!1,homeButton:!1,infoBox:!1,sceneModePicker:!1,navigation:!0,timeline:!1,navigationHelpButton:!1,navigationInstructionsInitiallyVisible:!1,contextOptions:{webgl:{alpha:!0,depth:!1,stencil:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,failIfMajorPerformanceCaveat:!0},allowTextureFilterAnisotropic:!0}};if(n)for(var a in i)Cesium.defined(n[a])||(n[a]=i[a]);else n=i;1==n.globe&&(n.imageryProvider=new Cesium.SingleTileImageryProvider({url:x.default.baseMapUrl()}),Cesium.Camera.DEFAULT_VIEW_RECTANGLE=Cesium.Rectangle.fromDegrees(73,13,135,53));var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),l=L.default.checkLicense();if(!l)return s.destroy(),o(s);var c={};return c.defaultResetView=Cesium.Rectangle.fromDegrees(80,22,130,50),c.enableCompass=!0,c.enableZoomControls=!0,c.enableDistanceLegend=!0,c.enableCompassOuterRing=!0,s._container=Cesium.getElement(t),s._drawTool=new y.default(s),s._navigation=new f.default(s),s._pluginManager=new T.default(s),s._project=new u.default(s),s._layerManager=s._project._layerManager,s._graphicLayer=new m.default(s),s._analysis=new b.default(s),s._envEffects=new S.default(s),s._recorder=null,s._Config=new x.default(s),s._init(),s}return a(e,t),s(e,[{key:"_init",value:function(){var t=this;this.camera.changed.addEventListener(function(){Cesium.GlobeSurfaceOption&&Cesium.GlobeSurfaceOption.underGround.enabled||t.camera._suspendTerrainAdjustment&&t.scene.mode===Cesium.SceneMode.SCENE3D&&(t.camera._suspendTerrainAdjustment=!1,t.camera._adjustHeightForTerrain())}),document.getElementsByClassName("cesium-viewer-bottom")[0].style.display="none";var e=new d.default(this);e.registHotKey()}},{key:"fullScreen",value:function(){this._navigation.ViewPort.fullScreen()}},{key:"exitFullScreen",value:function(){this._navigation.ViewPort.exitFullScreen()}},{key:"exportImage",value:function(t,e){return this._navigation.ViewPort.exportImage(t,e)}},{key:"trackPolygon",value:function(t,e){return this._graphicLayer.trackPolygon(t,e)}},{key:"trackPolyline",value:function(t,e){return this._graphicLayer.trackPolyline(t,e)}},{key:"clearGraphic",value:function(){return this._graphicLayer.clear()}},{key:"addPlugin",value:function(t){if(this._pluginManager)return this._pluginManager.addPlugin(t)}},{key:"removePlugin",value:function(t){if(this._pluginManager)return this._pluginManager.removePlugin(t)}},{key:"removePlugin",value:function(t){if(this._pluginManager)return this._pluginManager.removePlugin(t)}},{key:"openWidget",value:function(t){if(this._pluginManager)return this._pluginManager.usingWidget(t)}},{key:"closeWidget",value:function(t){if(this._pluginManager)return this._pluginManager.unusingWidget(t)}},{key:"setCurrentTool",value:function(t){if(this._pluginManager)return this._pluginManager.currentTool=t,this._pluginManager.fire("setCurrenTool",t),this._toolChanged&&this._toolChanged(t),this._pluginManager.currentTool}},{key:"getCurrentTool",value:function(){return this._pluginManager?this._pluginManager.currentTool:void 0}},{key:"getInstalledPlugins",value:function(){if(this._pluginManager)return this._pluginManager.getInstalledPlugins()}},{key:"getPluginByName",value:function(t){if(this._pluginManager)return this._pluginManager.getPluginByName(t)}},{key:"goto",value:function(t,e,n,i){return this._navigation.goto(t,e,n,i)}},{key:"loadProject",value:function(t,e){return this.project.load(t,e)}},{key:"saveProject",value:function(){return this.project.save()}},{key:"createProject",value:function(){return this.project.create()}},{key:"setBaseImage",value:function(t){this.project._layerManager.setBaseImage(t)}},{key:"FPS",get:function(){return this.scene.debugShowFramesPerSecond},set:function(t){this.scene.debugShowFramesPerSecond=t}},{key:"wireframe",get:function(){return this.scene.globe._surface.tileProvider._debug.wireframe},set:function(t){this.scene.globe._surface.tileProvider._debug.wireframe=t,this.scene.requestRender()}},{key:"recorder",get:function(){return this._recorder||(this._recorder=new E.default(this.canvas)),this._recorder}},{key:"navigation",get:function(){return this._navigation}},{key:"envEffects",get:function(){return this._envEffects}},{key:"viewPort",get:function(){return this._navigation.ViewPort}},{key:"mousePosition",get:function(){return this._navigation.mousePosition}},{key:"project",get:function(){return this._project}},{key:"analysis",get:function(){return this._analysis}},{key:"drawTool",get:function(){return this._drawTool}},{key:"layerManager",get:function(){return this._layerManager}},{key:"pluginManager",get:function(){return this._pluginManager},set:function(t){return this._pluginManager=t}},{key:"currentToolChanged",set:function(t){this._toolChanged=t}},{key:"container",get:function(){return this._container}}]),e}(Cesium.Viewer);e.default=D},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),s=i(a),l=n(28),u=i(l),c=n(38),h=(i(c),n(67)),f=i(h),p=n(68),d=i(p),g=function(){function t(e){r(this,t),this.viewer=e,this._layerManager=new u.default(this.viewer),this._drawTool=this.viewer.drawTool,this._flyManager=new f.default(this.viewer),this._config=new s.default(this.viewer),this._bookmarkManager=new d.default(this.viewer),this._prjData={}}return o(t,[{key:"_getPrjInfo",value:function(t){return{version:"V1.0",id:Cesium.createGuid(),classify:{},name:t,description:"",tags:[],author:"管理员",thumbnail:"缩图路径",date:(new Date).getTime(),view:{},layers:{},bookmarks:{},plottings:{},sceneConfig:{}}}},{key:"load",value:function(t,e){var n=t;("string"==typeof t||t instanceof Cesium.Resource)&&(t=Cesium.Resource.createIfNeeded(t),n=t.fetchJson());var i=this;return Cesium.when(n,function(t){return i._loadPrjData(i,t,e)}).otherwise(function(t){e&&e(t)})}},{key:"_loadPrjData",value:function(t,e,n){t._prjData=e;var i=e;return t._config.fromJSON(i.sceneConfig),t._layerManager.fromJSON(i.layers),t._drawTool.fromJSON(i.plottings,!0),t._bookmarkManager.fromJSON(i.bookmarks),t.viewer.viewPort.fromJSON(i.view),n&&n("ok"),!0}},{key:"save",value:function(t){var e=this._getPrjInfo(t);return e.view=this.viewer.viewPort.toJSON(),e.sceneConfig=this._config.toJSON(),e.layers=this._layerManager.toJSON(),e.bookmarks=this._bookmarkManager.toJSON(),e.plottings=this._drawTool.toJSON(),e.flyPaths={},e}},{key:"create",value:function(){this._layerManager.removeAll(),this._bookmarkManager.removeAll(),this._drawTool.removeAll(),this.viewer.navigation.ViewPort.gotoHome()}},{key:"bookmarkManager",get:function(){return this._bookmarkManager}},{key:"userData",get:function(){return this._prjData.userData},set:function(t){this._prjData.userData=t}},{key:"version",get:function(){return this._prjData.version}},{key:"name",get:function(){return this._prjData.name},set:function(t){this._prjData.name=t}},{key:"description",get:function(){return this._prjData.description},set:function(t){this._prjData.description=t}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(27),s=i(a),l=/((?:.*\/)|^)CTMap[\w-]*\.js(?:\W|$)/i,u=function(){function t(e){r(this,t),this.viewer=e,this.Skybox=new s.default(e)}return o(t,[{key:"fromJSON",value:function(t){if(this.viewer.scene.mode=Cesium.defaultValue(t.sceneMode,Cesium.SceneMode.SCENE3D),this.viewer.scene.debugShowFramesPerSecond=Cesium.defaultValue(t.fps,!1),this.viewer.scene.screenSpaceCameraController.maximumZoomDistance=Cesium.defaultValue(t.maximumZoomDistance,Number.POSITIVE_INFINITY),this.viewer.scene.screenSpaceCameraController.minimumZoomDistance=Cesium.defaultValue(t.minimumZoomDistance,1),this.viewer.mousePosition.show=Cesium.defaultValue(t.mousePosition,!1),t.bloomOpt){var e=this.viewer.scene.postProcessStages.bloom;e.enabled=t.bloomOpt.enabled;var n=t.bloomOpt.uniforms;e.uniforms.glowOnly=Boolean(n.glowOnly),e.uniforms.contrast=Number(n.contrast),e.uniforms.brightness=Number(n.brightness),e.uniforms.delta=Number(n.delta),e.uniforms.sigma=Number(n.sigma),e.uniforms.stepSize=Number(n.stepSize)}this.viewer.scene.postProcessStages.fxaa.enabled=Cesium.defaultValue(t.fxaa,!1),this.viewer.scene.highDynamicRange=Cesium.defaultValue(t.highDynamicRange,!0),this.viewer.scene.globe.depthTestAgainstTerrain=Cesium.defaultValue(t.depthTestAgainstTerrain,!0)}},{key:"toJSON",value:function(){var t={};t.sceneMode=this.viewer.scene.mode,t.fps=this.viewer.scene.debugShowFramesPerSecond,t.maximumZoomDistance=this.viewer.scene.screenSpaceCameraController.maximumZoomDistance,t.minimumZoomDistance=this.viewer.scene.screenSpaceCameraController.minimumZoomDistance,t.mousePosition=this.viewer.mousePosition.show,t.fxaa=this.viewer.scene.postProcessStages.fxaa.enabled,t.highDynamicRange=this.viewer.scene.highDynamicRange;var e=this.viewer.scene.postProcessStages.bloom,n={glowOnly:e.uniforms.glowOnly,contrast:e.uniforms.contrast,brightness:e.uniforms.brightness,delta:e.uniforms.delta,sigma:e.uniforms.sigma,stepSize:e.uniforms.stepSize};return t.bloomOpt={enabled:e.enabled,uniforms:n},t.depthTestAgainstTerrain=this.viewer.scene.globe.depthTestAgainstTerrain,t}}],[{key:"getBaseUrlFromCesiumScript",value:function(){for(var t=document.getElementsByTagName("script"),e=0,n=t.length;e<n;++e){var i=t[e].getAttribute("src"),r=l.exec(i);if(null!==r)return r[1]}}},{key:"baseMapUrl",value:function(){return this.getResource("Assets/Images/baseMap/globe.jpg")}},{key:"getResource",value:function(t){var e=this.getBaseUrlFromCesiumScript();return e+"/"+t}},{key:"zoomDuration",value:function(){return 1}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),s=i(a),l=function(){function t(e){r(this,t),this.viewer=e}return o(t,[{key:"_setSkyBox",value:function(){var t=this,e=this.viewer,n=s.default.getResource("Assets/Images/skybox/lantian/");this.lantianSkybox=new Cesium.SkyBox({nearGround:!0,sources:{positiveX:n+"posx.jpg",negativeX:n+"negx.jpg",positiveY:n+"posy.jpg",negativeY:n+"negy.jpg",positiveZ:n+"posz.jpg",negativeZ:n+"negz.jpg"}}),this.defaultSkybox=e.scene.skyBox,e.scene.postRender.addEventListener(function(){var n=e.camera.position;Cesium.Cartographic.fromCartesian(n).height<23e4?(t.lantianSkybox&&(e.scene.skyBox=t.lantianSkybox),e.scene.skyAtmosphere.show=!1):(t.defaultSkybox&&(e.scene.skyBox=t.defaultSkybox),e.scene.skyAtmosphere.show=!0)})}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(29),l=i(s),u=n(33),c=i(u),h=n(34),f=i(h),p=n(35),d=i(p),g=n(30),m=i(g),v=n(36),y=i(v),_=n(37),x=i(_),w=function(){function t(e){r(this,t),this.earth=e,this._layerDataSet=new Map,this._rootGroup=[{id:"userLayers",name:"用户图层",show:!0,type:m.default.Group,children:[]},{id:"modelLayers",name:"模型图层",show:!0,type:m.default.Group,children:[]},{id:"vectorLayers",name:"矢量图层",show:!0,type:m.default.Group,children:[]},{id:"imageLayers",name:"基础影像",show:!0,type:m.default.Group,children:[]},{id:"terrainLayers",name:"地形图层",show:!0,type:m.default.Group,children:[]}],this._layerList=Cesium.clone(this._rootGroup,!0),this.imageryLayers=this.earth.imageryLayers,this.dataSources=this.earth.dataSources,this.primitives=this.earth.scene.primitives,this._terrainLayerList=null}return a(t,[{key:"addRoot",value:function(t){if(t){var e=new l.default(t).config;return this._layerList.push(e),e}}},{key:"addLayer",value:function(t,e){var n=this._findItem(t);if(n){var i=this._initLayer(e);if(i)return n.children.push(i.config),this._layerDataSet.set(i.id,i),i.config}else console.log("无法找到父节点")}},{key:"getAllLayer",value:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,o=this._layerList[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,s=this._recurrenceLayer(a,[]);t=t.concat(s)}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t}},{key:"removeLayer",value:function(t){var e=this._findParent(t);if(e){var n=this._findItem(t);n&&this._removeLayer(e.id,t)}else consloe.log("父节点不存在!")}},{key:"getLayerVisible",value:function(t){var e=this.getLayerDataByID(t);return!!e&&e.show}},{key:"setLayerVisible",value:function(t,e){var n=this.getLayerDataByID(t);n&&(n.show=e);var i=this._layerDataSet.get(t);i.type==m.default.CesiumTerrain&&(this.earth.terrainProvider=n.show?n.dataLayer:new Cesium.EllipsoidTerrainProvider)}},{key:"getLayerName",value:function(t){var e=this._layerDataSet.get(t);if(e)return e.name}},{key:"setLayerName",value:function(t,e){var n=this._layerDataSet.get(t);n&&(n.name=e)}},{key:"layerExist",value:function(t){var e=this.getLayerDataByID(t);return!!e}},{key:"getLayerConfig",value:function(t){return this.getLayerDataByID(t)}},{key:"setLayerStyle",value:function(t,e){var n=this.getLayerDataByID(t);n&&n.update(e)}},{key:"getLayerStyle",value:function(t){var e=this.getLayerDataByID(t);if(e)return e.config.style}},{key:"getLayer",value:function(t){var e=this.getLayerDataByID(t);if(e)return e}},{key:"getParent",value:function(t){var e=this.getLayerDataByID(t);if(e){var n=this._findParent(t);if(n)return n;console.log("父节点为空")}}},{key:"flyToLayer",value:function(t){var e=this.getLayerDataByID(t);e&&this.earth.flyTo(e.dataLayer)}},{key:"addGroup",value:function(t,e){var n=this._findItem(t);if(n){var i=new l.default(e).config;return n.children.push(i),i}}},{key:"removeGroup",value:function(t){var e=this,n=this._findItem(t);if(n.type!==m.default.Group)return void console.log("节点不是图层组");var i=this._findParent(t);if(!i)return void console.log("父节点为空");var r=this._recurrenceLayer(n,[]);return r.map(function(t){return e._removeLayerData(t.id)}),this._removeLayerConfig(i.id,t),i}},{key:"setGroupName",value:function(t,e){var n=this._findItem(t);n&&(n.name=e)}},{key:"getGroupName",value:function(t){var e=this._findItem(t);if(e)return e.name}},{key:"setGroupVisible",value:function(t,e){this._setGroupVisible(t,e)}},{key:"getGroupVisible",value:function(t){var e=this._findItem(t);if(e)return e.show}},{key:"removeAll",value:function(){this.earth.terrainProvider=new Cesium.EllipsoidTerrainProvider;var t=!0,e=!1,n=void 0;try{for(var i,r=this._layerDataSet[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value,a=o[1],s=this._getLayerType(a.type),l=a.dataLayer;switch(s){case"terrian":break;case"image":this.imageryLayers.remove(l);break;case"vector":this.dataSources.remove(l);break;case"model":this.primitives.remove(l)}}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}this._layerDataSet=new Map,
this._layerList=Cesium.clone(this._rootGroup,!0)}},{key:"fromJSON",value:function(t){this.removeAll(),this._layerList=Cesium.clone(t,!0),this._addLayers(this._layerList)}},{key:"toJSON",value:function(){return this._layerList}},{key:"getLayerDataByID",value:function(t){var e=void 0,n=!0,i=!1,r=void 0;try{for(var a,s=this._layerDataSet[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=o(a.value,2),u=(l[0],l[1]);if(u.id==t){e=u;break}}}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return e}},{key:"_setGroupVisible",value:function(t,e){var n=this._findItem(t);if(n.type==m.default.Group){var i=!0,r=!1,o=void 0;try{for(var a,s=n.children[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;this._setGroupVisible(l.id,e)}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}n.show=e}else n.show=e}},{key:"_removeLayerConfig",value:function(t,e){var n=this._findItem(t);if(n)for(var i=0;i<n.children.length;i++){var r=n.children[i];if(e==r.id){n.children.splice(i,1);break}}}},{key:"_removeLayerData",value:function(t){var e=this._layerDataSet.get(t),n=this._getLayerType(e.type);if(e&&n!=m.default.Group){var i=e.dataLayer;switch(n){case"terrian":break;case"image":this.imageryLayers.remove(i);break;case"vector":this.dataSources.remove(i);break;case"model":this.primitives.remove(i)}this._layerDataSet.delete(t)}}},{key:"_removeLayer",value:function(t,e){this._removeLayerData(e),this._removeLayerConfig(t,e)}},{key:"_getAllLayernodes",value:function(){for(var t=[],e=0;e<this._layerList.length;e++){var n=this._recurrenceLayer(this._layerList[e],[]);t=t.concat(n)}return t}},{key:"_recurrenceLayer",value:function(t,e){if(t.type!=m.default.Group)e.push(t);else if(t.children)for(var n=0;n<t.children.length;n++)this._recurrenceLayer(t.children[n],e);return e}},{key:"_recurrenceItem",value:function(t,e){if(t.id==e)return t;if(t.children)for(var n=0;n<t.children.length;n++){var i=this._recurrenceItem(t.children[n],e);if(i)return i}}},{key:"_findItem",value:function(t){for(var e=void 0,n=0;n<this._layerList.length&&!(e=this._recurrenceItem(this._layerList[n],t));n++);return e}},{key:"_findParent",value:function(t){for(var e=[],n=0;n<this._layerList.length;n++)this._recurrenceParent(this._layerList[n],t,e);return e.length>0?e[0]:void 0}},{key:"_recurrenceParent",value:function(t,e,n){if(t.type==m.default.Group){var i=!0,r=!1,o=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.id==e){n.push(t);break}if(l.type==m.default.Group){var u=!0,c=!1,h=void 0;try{for(var f,p=t.children[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var d=f.value;this._recurrenceParent(d,e,n)}}catch(t){c=!0,h=t}finally{try{!u&&p.return&&p.return()}finally{if(c)throw h}}}else if(l.id==e){n.push(t);break}}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}}},{key:"_getLayerType",value:function(t){var e="";switch(t){case m.default.CesiumTerrain:case m.default.VRWTerrain:case m.default.ArcGISTerrain:e="terrian";break;case m.default.WMS:case m.default.WMTS:case m.default.TMS:case m.default.SingleImage:case m.default.UrlTemplate:case m.default.TileGrid:case m.default.ArcGIS:e="image";break;case m.default.CZML:case m.default.GeoJSON:case m.default.KML:case m.default.VectorTile:case m.default.SHP:e="vector";break;case m.default.Cesium3DTile:case m.default.Custom3DTile:case m.default.GLTF:e="model";break;case m.default.Group:e="group"}return e}},{key:"_addImageLayer",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],new c.default(t)),n=e.initLayer();if(n)return this.imageryLayers.add(n),e}},{key:"_addVectorLayer",value:function(t){var e=new f.default(t),n=e.initLayer();if(n)return this.earth.dataSources.add(n),e}},{key:"_add3DModelLayer",value:function(t){var e=new d.default(t),n=e.initLayer();if(n)return this.primitives.add(n),e}},{key:"_addTerrainLayer",value:function(t){var e=new y.default(t),n=e.initLayer();if(n)return this._terrainLayerList||(this._terrainLayerList=new x.default(this.earth)),this._terrainLayerList.add(e),e}},{key:"_initLayer",value:function(t){var e=this._getLayerType(t.type),n=void 0;switch(e){case m.default.Group:break;case"terrian":n=this._addTerrainLayer(t);break;case"image":n=this._addImageLayer(t);break;case"vector":n=this._addVectorLayer(t);break;case"model":n=this._add3DModelLayer(t)}return n}},{key:"_addLayers",value:function(t){var e=this,n=this._getAllLayernodes(t);n.map(function(t){var n=e._initLayer(t);e._layerDataSet.set(n.id,n)})}},{key:"rootGroup",get:function(){return Cesium.clone(this._rootGroup,!0)},set:function(t){this._rootGroup=t,this.removeAll()}},{key:"layerList",get:function(){return Cesium.clone(this._layerList,!0)}}]),t}();e.default=w},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(30),u=i(l),c=n(31),h=i(c),f=function(t){function e(t){r(this,e);var n={name:t,type:u.default.Group,children:[]};return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n))}return a(e,t),s(e,[{key:"addLayer",value:function(){}}]),e}(h.default);e.default=f},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function t(){n(this,t)};i.Group="Group",i.CesiumTerrain="CesiumTerrain",i.VRWTerrain="VRWTerrain",i.ArcGISTerrain="ArcGISTerrain",i.WMS="WMS",i.WMTS="WMTS",i.TMS="TMS",i.SingleImage="SingleImage",i.UrlTemplate="UrlTemplate",i.TileGrid="TileGrid",i.ArcGIS="ArcGIS",i.CZML="CZML",i.GeoJSON="GeoJSON",i.KML="KML",i.VectorTile="VectorTile",i.SHP="SHP",i.Cesium3DTile="Cesium3DTile",i.Custom3DTile="Custom3DTile",i.GLTF="GLTF",e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(32),s=i(a),l=Cesium.defaultValue,u=function(){function t(e){r(this,t),e.id=l(e.id,Cesium.createGuid()),e.name=l(e.name,"未命名"),e.show=l(e.show,!0),e.style=l(e.style,{}),this._config=e,this.dataLayer=null}return o(t,[{key:"initLayer",value:function(){}},{key:"_checkDefStyles",value:function(t){var e=s.default.getDefStyle(this.type),n=Cesium.clone(e,!0);for(var i in n)Cesium.defined(t[i])||(t[i]=n[i])}},{key:"id",get:function(){return this._config.id}},{key:"name",get:function(){return this._config.name},set:function(t){this._config.name=t}},{key:"show",get:function(){return this._config.show},set:function(t){this.dataLayer.show=t,this._config.show=t}},{key:"type",get:function(){return this._config.type}},{key:"config",get:function(){return this._config}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(30),s=i(a),l=function(){function t(){r(this,t)}return o(t,null,[{key:"defImageStyle",value:function(){return{alpha:1,brightness:Cesium.ImageryLayer.DEFAULT_BRIGHTNESS,contrast:Cesium.ImageryLayer.DEFAULT_CONTRAST,hue:Cesium.ImageryLayer.DEFAULT_HUE,saturation:Cesium.ImageryLayer.DEFAULT_SATURATION,gamma:Cesium.ImageryLayer.DEFAULT_GAMMA,colorToAlpha:void 0,colorToAlphaThreshold:Cesium.ImageryLayer.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD}}},{key:"defModelStyle",value:function(){return{maximumScreenSpaceError:16,maximumMemoryUsage:512,debugColorizeTiles:!1,debugWireframe:!1,debugShowBoundingVolume:!1,debugShowUrl:!1}}},{key:"getDefStyle",value:function(e){var n=t._getType(e);return"image"==n?t.defImageStyle():"model"==n?t.defModelStyle():null}},{key:"_getType",value:function(t){var e="";switch(t){case s.default.CesiumTerrain:case s.default.VRWTerrain:case s.default.ArcGISTerrain:e="terrian";break;case s.default.WMS:case s.default.WMTS:case s.default.TMS:case s.default.SingleImage:case s.default.UrlTemplate:case s.default.TileGrid:case s.default.ArcGIS:e="image";break;case s.default.CZML:case s.default.GeoJSON:case s.default.KML:case s.default.VectorTile:case s.default.SHP:e="vector";break;case s.default.Cesium3DTile:case s.default.Custom3DTile:case s.default.GLTF:e="model";break;case s.default.Group:e="group"}return e}}]),t}();e.default=l,l.Image_Dark={}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(30),u=i(l),c=n(31),h=i(c),f=n(16),p=i(f),d=n(13),g=i(d),m=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"initLayer",value:function(){var t=this.config.type,e=this.config.options,n=this.config.style;if(this._checkDefStyles(n),!e.url)throw new p.default(g.default.ERROR_PARAMS);switch(t){case u.default.WMS:if(!e.url||!e.layers)throw new p.default(g.default.ERROR_PARAMS);e.parameters=Cesium.defaultValue(e.parameters,{});var i=e.parameters;i.format||(i.format="image/png"),i.transparent||(i.transparent=!0);var r=new Cesium.WebMapServiceImageryProvider(e);this.dataLayer=new Cesium.ImageryLayer(r,n);break;case u.default.WMTS:var o=new Cesium.WebMapTileServiceImageryProvider(e);this.dataLayer=new Cesium.ImageryLayer(o,n);break;case u.default.TMS:var a=new Cesium.WebMapTileServiceImageryProvider(e);this.dataLayer=new Cesium.ImageryLayer(a,n);break;case u.default.SingleImage:var s;e.rectangle&&4==e.rectangle.length&&(s=Cesium.Rectangle.fromDegrees(e.rectangle[0],e.rectangle[1],e.rectangle[2],e.rectangle[3]));var l=new Cesium.SingleTileImageryProvider({url:e.url,rectangle:s});this.dataLayer=new Cesium.ImageryLayer(l,n);break;case u.default.UrlTemplate:var c=new Cesium.UrlTemplateImageryProvider(e);this.dataLayer=new Cesium.ImageryLayer(c,n);break;case u.default.TileGrid:case u.default.ArcGIS:var h=new Cesium.ArcGisMapServerImageryProvider(e);this.dataLayer=new Cesium.ImageryLayer(h,n)}return this.dataLayer}},{key:"update",value:function(t){if(this.dataLayer)for(var e in t)this.config.style[e]=t[e],this.dataLayer[e]=t[e]}}]),e}(h.default);e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(30),u=i(l),c=n(31),h=i(c),f=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"initLayer",value:function(){var t=void 0,e=this.config.type,n=this.config.params,i=this.config.options;switch(e){case u.default.CZML:var r=new Cesium.CzmlDataSource;t=r.load(n.url,i);break;case u.default.GeoJSON:var o=new Cesium.GeoJsonDataSource;t=o.load(n.url,i);break;case u.default.KML:var a=new Cesium.KmlDataSource;t=a.load(n.url,i);break;case u.default.VectorTile:break;case u.default.SHP:}return t}}]),e}(h.default);e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(30),u=i(l),c=n(31),h=i(c),f=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"initLayer",value:function(){var t=this.config.type,e=this.config.style;this._checkDefStyles(e);var n=this.config.options;switch(t){case u.default.Cesium3DTile:this.dataLayer=new Cesium.Cesium3DTileset(n);break;case u.default.Custom3DTile:}return this.update(e),this.dataLayer}},{key:"update",value:function(t){if(this.dataLayer)for(var e in t)"url"!=e&&(this.config.style[e]=t[e],this.dataLayer[e]=t[e])}}]),e}(h.default);e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(30),u=i(l),c=n(31),h=i(c),f=function(t){function e(t){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),s(e,[{key:"initLayer",value:function(){var t=this.config.type,e=this.config.options;switch(t){case u.default.CesiumTerrain:this.dataLayer=new Cesium.CesiumTerrainProvider(e);break;case u.default.VRWTerrain:this.dataLayer=new Cesium.VRTheWorldTerrainProvider(e);break;case u.default.ArcGISTerrain:}return this.dataLayer}}]),e}(h.default);e.default=f},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this._terrainLayers=new Map,this._show=!0,this._baseProvider=new Cesium.EllipsoidTerrainProvider,this.earth=e,this._initBaseTerrain(this._baseProvider),this.earth.terrainProvider=this._baseProvider}return i(t,[{key:"_initBaseTerrain",value:function(t){var e=this;t.requestTileGeometry=function(t,n,i,r){return e._getTerrainData(t,n,i,r)}}},{key:"_getTerrainData",value:function(t,e,n,i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=this._terrainLayers[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,h=c[1].show;if(h){var f=c[1].dataLayer.getTileDataAvailable(t,e,n);f&&r.push(c)}}}catch(t){a=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}var p=r.sort(function(t,e){return e[1].index-t[1].index});return p.length>0?p[0][1].dataLayer.requestTileGeometry(t,e,n,i):null}},{key:"_reloadTerain",value:function(){this.earth.terrainProvider=this._baseProvider}},{key:"add",value:function(t){return this._terrainLayers.set(t.id,t),t}},{key:"remove",value:function(t){var e=this._terrainLayers.get(t);return this._terrainLayers.delete(t),e[1]}},{key:"removeAll",value:function(){this._terrainLayers=new Map}},{key:"show",get:function(){return this._show},set:function(t){this._show=t;var e=!0,n=!1,i=void 0;try{for(var r,o=this._terrainLayers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;a[1].show=t}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}}}]),t}();e.default=r},function(t,n,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(39),l=r(s),u=i(40),c=r(u),h=i(43),f=r(h),p=i(45),d=(r(p),i(47)),g=r(d),m=i(50),v=r(m),y=i(51),_=r(y),x=i(52),w=r(x),b=i(54),C=r(b),S=i(57),M=r(S),E=i(59),I=r(E),T=i(61),P=r(T),L=i(63),D=r(L),A=i(65),k=r(A),N=i(26),O=r(N),R=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),this.control={billboard:c.default,label:_.default,ellipse:I.default,polyline:f.default,polylineVolume:M.default,polygon:g.default,ellipsoid:P.default,wall:w.default,point:c.default,rectangle:C.default,model:v.default},this.defDragIcon=Cesium.defaultValue(n.dragIcon,O.default.getResource("Assets/Images/plotIcon/marker/dragIcon.png")),this._onStopDrawing=n.onStopDrawing,this.onStartEditing=n.onStartEditing,this._onStopEditing=n.onStopEditing,this._onChangeEditing=n.onChangeEditing,this._onChangeDrawing=n.onChangeDrawing,this._onMoveDrawing=n.onMoveDrawing,this.options=n,this.viewer=e,this.scene=this.viewer.scene,this.dragIcon=this.defDragIcon,this.dataSource=new Cesium.CustomDataSource,this.viewer.dataSources.add(this.dataSource),this.currentEntity=null,this.arrEntity=[],this.eventCortol=new D.default(this.viewer),this._hasEdit=!1,this.hasEdit(n.hasEdit)}return a(t,[{key:"hasEdit",value:function(t){if(null==this._hasEdit||this._hasEdit!=t){this._onStopEditing;this._hasEdit=t;var e=this,n=this.eventCortol;t?(n.createEditSelectHandler(function(t){e.currentEntity&&e.currentEntity.inProgress||(t!==e.currentEntity?(e.currentEntity&&e.currentEntity.stopEditing&&(e.currentEntity.stopEditing(),e.currentEntity=null),e.currentEntity=t,e.currentEntity&&e.currentEntity.startEditing&&e.currentEntity.startEditing()):e._onStopEditing&&"function"==typeof e._onStopEditing&&e._onStopEditing(t))}),n.createEditDraggerHandler()):(this.stopDraw(),n.destroyEditHandler())}}},{key:"stopDraw",value:function(t){var e=this.currentEntity,n=this.arrEntity,i=this.dataSource;return this.eventCortol.destroyDrawHandler(),e&&e.inProgress&&(e.stopDrawing(t),i.entities.remove(e),this.removeArrayOne(n,e)),e&&e.stopEditing&&(e.stopEditing(t),e=null),this}},{key:"startDraw",value:function(t){if(this.stopDraw(),null==t||null==t.type)throw"请传入需要绘制的类型参数";t.style=t.style||{},t.attr=t.attr||{};var e=t.type,n=this.control,i=this.eventCortol,r=this.dataSource;if(null==n[e])throw"传入的["+e+"]类型参数有误";var o=n[e].startDraw(r,t);switch(o.uid=o.id,e){case"label":case"point":case"billboard":case"model":case"ellipse":case"ellipsoid":i.createDrawPointHandler(o);break;case"polyline":case"polylineEx":case"polylineVolume":i.createDrawPolylineHandler(o,n[e].getPositions(o));break;case"polygon":i.createDrawPolygonHandler(o,n[e].getPositions(o));break;case"rectangle":case"extrudedRectangle":case"measureHeight":i.createTwoPointsModelHandler(o,n[e].getPositions(o));break;case"wall":var a=n[e].getPositions(o),s=n[e].getMinimumHeights(o),l=n[e].getMaximumHeights(o);i.createDrawWallHandler(o,a,s,l)}return this.extendEntity(o),this.arrEntity.push(o),o.startDrawing(),this.currentEntity=o,o}},{key:"fromJSON",value:function(t,e,n){if(t){var i=this.control,r=t;try{k.default.isString(t)&&(r=JSON.parse(t))}catch(t){return void console.error(t.name+": "+t.message+" \n请确认json文件格式正确!!!")}e&&this.removeAll();var o=[],a=r.features;if(a){for(var s=0;s<a.length;s++){var u=a[s];if(!u.properties||!u.properties.type)switch(u.properties=u.properties||{},u.geometry.type){case"MultiPolygon":case"Polygon":u.properties.type="polygon";break;case"MultiLineString":case"LineString":u.properties.type="polyline";break;case"MultiPoint":case"Point":u.properties.type="point"}var c=u.properties.type;if(null==i[c])throw"数据无法识别或者数据的["+c+"]类型参数有误";u.properties.style=u.properties.style||{};var h=i[c].startDraw(this.dataSource,u.properties);h.uid=u.properties.id;var f=l.default.getPositionsFromJson(u.geometry);i[c].setPositions(h,f),this.extendEntity(h),this.arrEntity.push(h),o.push(h)}return n&&this.viewer.flyTo(o),o}}}},{key:"toJSON",value:function(t){var e=this.arrEntity,n=this.control;if(null==t){if(0==e.length)return null;for(var i=[],r=0;r<e.length;r++){var t=e[r],o=t.attribute.type,a=n[o].toGeoJSON(t);a.properties.id=t.uid,i.push(a)}var a={type:"FeatureCollection",features:i};return a}var o=t.attribute.type,a=n[o].toGeoJSON(t);return a.properties.id=t.id,a}},{key:"markersInfoToEntity",value:function(t,n,i){var r=t;try{k.default.isString(t)&&(r=JSON.parse(t))}catch(t){return void console.error(t.name+": "+t.message+" \n请确认json文件格式正确!!!")}if(!(r instanceof Array))return void console.error("请确认json文件格式正确!!!");i&&removeAll();for(var o=0;o<r.length;o++){var a=r[o];if(!a.x||!a.y)return void console.error(e.name+": "+e.message+" \n请确认json文件格式正确!!!");var s={id:a.id||a.ID||"",name:a.name||a.NAME||"",remark:a.remark||a.REMA||""},l={type:n.type||"billboard",attr:s,style:n.style},u=Cesium.Cartesian3.fromDegrees(a.x,a.y,a.z||0),c=this.control[l.type].startDraw(this.dataSource,l);this.control[l.type].setPositions(c,u),this.extendEntity(c),this.arrEntity.push(c)}return this.arrEntity}},{key:"getCurrentEntity",value:function(){return this.currentEntity}},{key:"getEntitys",value:function(){return this.arrEntity}},{key:"getEntityById",value:function(t){for(var e=0;e<this.arrEntity.length;e++){var n=this.arrEntity[e];if(t==n.uid)return n}return null}},{key:"removeAll",value:function(){this.stopDraw(),this.dataSource.entities.removeAll(),this.arrEntity=[]}},{key:"setVisible",value:function(t){var e=this.dataSource,n=this.arrEntity;n.forEach(function(n,i){t?e.entities.contains(i)||e.entities.add(i):e.entities.contains(i)&&e.entities.remove(i)})}},{key:"deleteEntity",value:function(t){null!=t&&(t.stopEditing(!0),this.removeArrayOne(this.arrEntity,t),this.dataSource.entities.remove(t))}},{key:"hasDraw",value:function(){return this.arrEntity.length>0}},{key:"getDataSource",value:function(){return this.dataSource}},{key:"getCoordinates",value:function(t){var e=t.attribute.type,n=this.control[e].getCoordinates(t);return n}},{key:"getPositions",value:function(t){var e=t.attribute.type,n=this.control[e].getPositions(t);return n}},{key:"setPositions",value:function(t,e){var n=t.attribute.type;this.control[n].setPositions(t,e)}},{key:"deleteCurrentEntity",value:function(){var t=this.currentEntity,e=this.dataSource;t&&(t.stopEditing(!0),this.removeArrayOne(this.arrEntity,t),e.entities.remove(t),t=null)}},{key:"updateAttribute",value:function(t,e){var n=this.control,i=this.currentEntity;if(null!=e&&(i=e),null!=i&&null!=t){t.style=t.style||{},t.attr=t.attr||{};var r=i.attribute.type;return n[r].attribute2Entity(t,i[r]),"model"==r&&n[r].attribute2Model(t,i),i.attribute=t,"ellipse"!=r&&"polygon"!=r&&"wall"!=r&&"rectangle"!=r||i.editor.updateDraggers(),i}}},{key:"updateGeometry",value:function(t,e){var n=this.dragIcon,i=this.control;if(null==e&&(e=this.currentEntity),null!=e&&null!=t){var r=e.attribute.type;if(i[r].setPositions(e,t),e.editor&&e.editor.destroy){e.editor.destroy();var o=e.attribute.type;e.editor=i[o].getEditor(dataSource,e,{dragIcon:n})}return e}}},{key:"extendEntity",value:function(t){var e=this.control,n=(this._hasEdit,this.dataSource),i=this,r=this.dragIcon;t.startDrawing=function(){var t=this;i._onStartDrawing&&"function"==typeof i._onStartDrawing&&i._onStartDrawing(t)},t.changeDrawing=function(){var t=this;i._onChangeDrawing&&"function"==typeof i._onChangeDrawing&&i._onChangeDrawing(t)},t.moveDrawing=function(){var t=this;i._onMoveDrawing&&"function"==typeof i._onMoveDrawing&&i._onMoveDrawing(t)},t.stopDrawing=function(){var t=this;i._onStopDrawing&&"function"==typeof i._onStopDrawing&&i._onStopDrawing(t)},t.startEditing=function(){if(i._hasEdit){var t=this;if(i.currentEntity=t,null==t.editor){var o=t.attribute.type;t.editor=e[o].getEditor(n,t,{dragIcon:r})}i._onStartEditing&&"function"==typeof i._onStartEditing&&i._onStartEditing(t)}},t.stopEditing=function(t){var e=this;e.editor&&(e.editor.destroy(),e.editor=null),!t&&i._onStopEditing&&"function"==typeof i._onStopEditing&&i._onStopEditing(e)},t.changeEditing=function(){var t=this;i._onChangeEditing&&"function"==typeof i._onChangeEditing&&i._onChangeEditing(t)},t.updatePositions=function(t){var n=this,r=n.attribute.type;if("ellipse"==r){var o=Cesium.Cartographic.fromCartesian(t).height;if(n.attribute.style.height=Number(o.toFixed(2)),n.ellipse.height?n.ellipse.height._value=n.attribute.style.height:n.ellipse.height=n.attribute.style.height,n.attribute.style.extrudedHeight){var a=Number(o)+Number(n.attribute.style.extrudedHeight);n.ellipse.extrudedHeight._value=Number(a.toFixed(2)),n.attribute.style.extrudedHeight=Number(a.toFixed(2))}}e[r].setPositions(i.currentEntity,t)}}},{key:"removeArrayOne",value:function(t,e){for(var n=0;n<t.length;n++)if(t[n]==e){t.splice(n,1);break}}},{key:"onChangeDrawing",set:function(t){this._onChangeDrawing=t}},{key:"onMoveDrawing",set:function(t){this._onMoveDrawing=t}},{key:"onStopDrawing",set:function(t){this._onStopDrawing=t}},{key:"onStartEditing",set:function(t){this._onStartEditing=t}},{key:"onStopEditing",set:function(t){this._onStopEditing=t}},{key:"onChangeEditing",set:function(t){this._onChangeEditing=t}}]),t}();n.default=R},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t)}return i(t,null,[{key:"createDragger",value:function(t,e){var n;if(e.dragger)n=e.dragger;else{var i=Cesium.defaultValue(e.position,Cesium.Cartesian3.ZERO),r=Cesium.defaultValue(e.dragIcon,"dragIcon.png");n=t.entities.add({position:i,billboard:{scale:1,heightReference:e.heightReference?Cesium.HeightReference.CLAMP_TO_GROUND:Cesium.HeightReference.NONE,image:r}})}return n._isDragger=!0,n.onDrag=Cesium.defaultValue(e.onDrag,null),n.horizontal=Cesium.defaultValue(e.horizontal,!0),n.vertical=Cesium.defaultValue(e.vertical,!1),n.verticalCtrl=Cesium.defaultValue(e.vertical,!1),n}},{key:"getCoordinates",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=Cesium.Cartographic.fromCartesian(t[n]),r=Number(Cesium.Math.toDegrees(i.longitude).toFixed(6)),o=Number(Cesium.Math.toDegrees(i.latitude).toFixed(6)),a=Number(i.height.toFixed(1));e.push([r,o,a])}return e}},{key:"getMaxHeightForPositions",value:function(t,e){null==e&&(e=0);var n=-3e4;if(null==t||0==t.length)return e;for(var i=(t[0],0);i<t.length;i++){var r=Cesium.Cartographic.fromCartesian(t[i]);r.height>n&&(n=r.height)}return n}},{key:"getPositionsWithHeight",value:function(t,e){if(t instanceof Array){for(var n=[],i=0;i<t.length;i++){var r=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t[i]),o={lon:Cesium.Math.toDegrees(r.longitude),lat:Cesium.Math.toDegrees(r.latitude),hgt:Math.ceil(Number(r.height)+Number(e))},a=[o.lon,o.lat,o.hgt];n=n.concat(a)}return Cesium.Cartesian3.fromDegreesArrayHeights(n)}var r=Cesium.Ellipsoid.WGS84.cartesianToCartographic(t),s=Cesium.Math.toDegrees(r.longitude),l=Cesium.Math.toDegrees(r.latitude);return Cesium.Cartesian3.fromDegrees(s,l,Number(r.height)+Number(e))}},{key:"getZHeightPosition",value:function(t,e){var n=Cesium.Cartographic.fromCartesian(t),i=Number(Cesium.Math.toDegrees(n.longitude)),r=Number(Cesium.Math.toDegrees(n.latitude)),o=Number(n.height.toFixed(2)),a=Cesium.Cartographic.fromCartesian(e),s=Number(Cesium.Math.toDegrees(a.longitude)),l=Number(Cesium.Math.toDegrees(a.latitude)),u=Number(a.height.toFixed(2));return o>u?Cesium.Cartesian3.fromDegrees(s,l,o):Cesium.Cartesian3.fromDegrees(i,r,u)}},{key:"getHDistance",value:function(t,e){var n=this.getZHeightPosition(t,e),i=Cesium.Cartographic.fromCartesian(e),r=Cesium.Cartographic.fromCartesian(n),o=Cesium.Cartesian3.distance(t,n);return Math.abs(Number(r.height)-Number(i.height))<.01&&(o=Cesium.Cartesian3.distance(e,n)),o}},{key:"getMidPosition",value:function(t,e){var n=Cesium.Cartographic.fromCartesian(t),i=Number(Cesium.Math.toDegrees(n.longitude)),r=Number(Cesium.Math.toDegrees(n.latitude)),o=Number(n.height.toFixed(2)),a=Cesium.Cartographic.fromCartesian(e),s=Number(Cesium.Math.toDegrees(a.longitude)),l=Number(Cesium.Math.toDegrees(a.latitude)),u=Number(a.height.toFixed(2)),c=(i+s)/2,h=(r+l)/2,f=(o+u)/2;return Cesium.Cartesian3.fromDegrees(c,h,f)}},{key:"getPositionsFromJson",value:function(t){if(!t)return null;switch(t.type){case"Point":return this.lonLatToCartesian(t.coordinates[0]);case"MultiPoint":return this.lonLatsToCartesians(t.coordinates);case"LineString":return this.lonLatsToCartesians(t.coordinates);case"MultiLineString":return this.lonLatsToCartesians(t.coordinates[0]);case"Polygon":return this.lonLatsToCartesians(t.coordinates[0]);
case"MultiPolygon":return this.lonLatsToCartesians(t.coordinates[0][0]);default:throw new Error("Invalid GeoJSON object.")}}},{key:"lonLatToCartesian",value:function(t){return Cesium.Cartesian3.fromDegrees(Number(t[0]),Number(t[1]),Number(t[2]||0))}},{key:"lonLatsToCartesians",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=[Number(t[n][0]),Number(t[n][1]),Number(t[n][2]||0)];e=e.concat(i)}return Cesium.Cartesian3.fromDegreesArrayHeights(e)}},{key:"normalizeJsonData",value:function(t){var e={};e.type="FeatureCollection",e.features=[];var n;if(n="string"==typeof t?JSON.parse(t):t,n instanceof Array){for(var i=0;i<n.length;i++){var r={type:"Feature"};r.properties=n[i].properties||n[i].PROPERTIES,r.geometry=n[i].geometry||n[i].GEOMETRY,e.features.push(r)}return JSON.stringify(e)}if(t.features&&t.features instanceof Array)return t}},{key:"normalizeBusinessData",value:function(t){var e={};try{e=JSON.parse(t)}catch(t){return void haoutil.alert(t.name+": "+t.message+" \n请确认json文件格式正确!!!")}for(var n=e.features,i=[],r=0;r<n.length;r++){var o=n[r],a={dataID:o.properties.attr.id,dataType:o.properties.attr.type,properties:o.properties,geometry:o.geometry};i.push(a)}return JSON.stringify(i)}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(41),s=i(a),l=n(39),u=i(l),c=n(42),h=i(c),f=function(){function t(e){r(this,t),this.typename="billboard"}return o(t,null,[{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({billboard:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={scale:1,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"scaleByDistance_near":case"scaleByDistance_nearValue":case"scaleByDistance_far":case"scaleByDistance_farValue":case"distanceDisplayCondition_far":case"distanceDisplayCondition_near":break;case"opacity":e.color=new Cesium.Color.fromCssColorString("#FFFFFF").withAlpha(Number(i||1));break;case"rotation":e.rotation=Cesium.Math.toRadians(i);break;case"scaleByDistance":i?e.scaleByDistance=new Cesium.NearFarScalar(Number(t.style.scaleByDistance_near||1e3),Number(t.style.scaleByDistance_nearValue||1),Number(t.style.scaleByDistance_far||1e6),Number(t.style.scaleByDistance_farValue||.1)):e.scaleByDistance=null;break;case"distanceDisplayCondition":i?e.distanceDisplayCondition=new Cesium.DistanceDisplayCondition(Number(t.style.distanceDisplayCondition_near||0),Number(t.style.distanceDisplayCondition_far||1e5)):e.distanceDisplayCondition=null}}return e}},{key:"getEditor",value:function(t,e,n){return new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.position=new s.default(e)}},{key:"getPositions",value:function(t){return[t.position._value]}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=u.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"Point",coordinates:e}}}}]),t}();e.default=f},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this._value=void 0,this._hasClone=!1,this._hasEquals=!1,this._definitionChanged=new Cesium.Event,this._constant=!1,this.setValue(e)}return i(t,[{key:"getValue",value:function(t,e){return this._hasClone?this._value.clone(e):this._value}},{key:"setValue",value:function(t){var e=this._value;if(e!==t){var n=Cesium.defined(t),i=n&&"function"==typeof t.clone,r=n&&"function"==typeof t.equals;this._hasClone=i,this._hasEquals=r;var o=!r||!t.equals(e);o&&(this._value=i?t.clone():t,this._definitionChanged.raiseEvent(this))}}},{key:"equals",value:function(e){return this===e||e instanceof t&&(!this._hasEquals&&this._value===e._value||this._hasEquals&&this._value.equals(e._value))}},{key:"valueOf",value:function(t){return this._value}},{key:"toString",value:function(t){return String(this._value)}},{key:"isConstant",get:function(){return this._constant},set:function(t){this._constant!==t&&(this._constant=t,this._definitionChanged.raiseEvent(this))}},{key:"definitionChanged",get:function(){return this._definitionChanged}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[];s.default.createDragger(this.dataSource,{dragger:n,onDrag:function(t,e){var i=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(e,n.position._value,i),n.position._value=e,n.changeEditing()}})}return o(t,[{key:"destroy",value:function(){this.draggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(41),s=i(a),l=n(39),u=i(l),c=n(44),h=i(c),f=function(){function t(){r(this,t)}return o(t,null,[{key:"typename",value:function(){return"polyline"}},{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({polyline:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={followSurface:!0,positions:new s.default([])});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"lineType":case"color":case"opacity":case"outline":case"outlineWidth":case"outlineColor":case"outlineOpacity":}}var r=new Cesium.Color.fromCssColorString(t.style.color||"#FFFF00").withAlpha(Number(t.style.opacity||1));switch(t.style.lineType){default:case"solid":t.style.outline?e.material=new Cesium.PolylineOutlineMaterialProperty({color:r,outlineWidth:Number(t.style.outlineWidth||1),outlineColor:new Cesium.Color.fromCssColorString(t.style.outlineColor||"#FFFF00").withAlpha(Number(t.style.outlineOpacity||t.style.opacity||1))}):e.material=r;break;case"dash":e.material=new Cesium.PolylineDashMaterialProperty({color:r})}if(t.style.material){var o=t.style.material,a=o.reverse||!1,l=.001;e.material=new Cesium.StripeMaterialProperty({evenColor:new Cesium.Color.fromCssColorString(o.evenColor||"#000000").withAlpha(Number(t.style.opacity||1)),oddColor:new Cesium.Color.fromCssColorString(o.oddColor||"#FFFFFF").withAlpha(Number(t.style.opacity||1)),repeat:Number(o.repeat||20),orientation:Cesium.StripeOrientation.VERTICAL,offset:new Cesium.CallbackProperty(function(){return a?l+=.001:l-=.001,l},!1)})}return e}},{key:"getEditor",value:function(t,e,n){return new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.polyline.positions.setValue(e)}},{key:"getPositions",value:function(t){return t.polyline.positions._value}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=u.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"LineString",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[];for(var o=n.polyline.positions._value,a=0;a<o.length;a++){var l=o[a],u=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:l,onDrag:function(t,e){o[t.index]=e,n.polyline.positions=o,n.changeEditing()}});u.index=a,this.draggers.push(u)}}return o(t,[{key:"updateDraggers",value:function(){for(var t=this.entity.polyline.positions.getValue(),e=0;e<this.draggers.length;e++){var n=t[e];this.draggers[e].position=n}}},{key:"destroy",value:function(){for(var t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);this.draggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(41),s=i(a),l=n(39),u=i(l),c=n(46),h=i(c),f=function(){function t(){r(this,t)}return o(t,null,[{key:"typename",value:function(){return"polylineEx"}},{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({polyline:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={followSurface:!0,positions:new s.default([])});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"lineType":case"color":case"opacity":case"outline":case"outlineWidth":case"outlineColor":case"outlineOpacity":}}var r=new Cesium.Color.fromCssColorString(t.style.color||"#FFFF00").withAlpha(Number(t.style.opacity||1));if(t.style.material){var o=t.style.material,a=o.reverse||!1,l=.001;e.material=new Cesium.StripeMaterialProperty({evenColor:new Cesium.Color.fromCssColorString(o.evenColor||"#FFFF00").withAlpha(Number(o.evenColorOpacity||1)),oddColor:new Cesium.Color.fromCssColorString(o.oddColor||"#FFFFFF").withAlpha(Number(o.oddColorOpacity||1)),repeat:Number(o.repeat||20),orientation:Cesium.StripeOrientation.VERTICAL,offset:new Cesium.CallbackProperty(function(){return a?l+=.001:l-=.001,l},!1)})}else t.style.outline?e.material=new Cesium.PolylineOutlineMaterialProperty({color:r,outlineWidth:Number(t.style.outlineWidth||1),outlineColor:new Cesium.Color.fromCssColorString(t.style.outlineColor||"#FFFF00").withAlpha(Number(t.style.outlineOpacity||t.style.opacity||1))}):e.material=r;return e}},{key:"getEditor",value:function(t,e,n){return new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.polyline.positions.setValue(e)}},{key:"getPositions",value:function(t){return t.polyline.positions._value}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=u.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"LineString",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[];for(var o=n.polyline.positions._value,a=0;a<o.length;a++){var l=o[a],u=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:l,onDrag:function(t,e){o[t.index]=e,n.polyline.positions=o,n.changeEditing()}});u.index=a,this.draggers.push(u)}}return o(t,[{key:"updateDraggers",value:function(){for(var t=this.entity.polyline.positions.getValue(),e=0;e<this.draggers.length;e++){var n=t[e];this.draggers[e].position=n}}},{key:"destroy",value:function(){for(var t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);this.draggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(39),l=i(s),u=n(48),c=i(u),h=n(49),f=i(h),p=n(41),d=i(p),g=function(){function t(e){r(this,t),this.typename="polygon"}return a(t,null,[{key:"typename",value:function(){return"polygon"}},{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({polygon:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={fill:!0,classificationType:Cesium.ClassificationType.BOTH,hierarchy:Cesium.Cartesian3.fromDegreesArray([])});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"opacity":case"outlineOpacity":break;case"outlineColor":e.outlineColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(t.style.outlineOpacity||t.style.opacity||1);break;case"color":e.material=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1));break;case"extrudedHeight":var r=l.default.getMaxHeightForPositions(e.hierarchy._value);e.extrudedHeight=Number(i)+r;break;case"clampToGround":e.perPositionHeight=!i}}return null==t.style.color&&(e.material=Cesium.Color.fromRandom({minimumGreen:.75,maximumBlue:.75,alpha:Number(t.style.opacity||1)})),e}},{key:"getEditor",value:function(t,e,n){return e.polygon.extrudedHeight?new c.default(t,e,n):new f.default(t,e,n)}},{key:"setPositions",value:function(t,e){if(t.polygon.hierarchy=new d.default(e),t.attribute.style.extrudedHeight){var n=l.default.getMaxHeightForPositions(e);t.polygon.extrudedHeight=n+Number(t.attribute.style.extrudedHeight)}}},{key:"getPositions",value:function(t){var e=t.polygon.hierarchy._value;return e.positions&&this.isArray(e.positions)?e.positions:e}},{key:"isArray",value:function(t){return"object"==("undefined"==typeof t?"undefined":o(t))&&t.constructor==Array}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=l.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);if(e.length>0){var n=e[0],i=e[e.length-1];n[0]==i[0]&&n[1]==i[1]&&n[2]==i[2]||e.push(n)}return{type:"Feature",properties:t.attribute,geometry:{type:"Polygon",coordinates:[e]}}}}]),t}();e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[],this.heightDraggers=[];var o=this,a=0,l=n.polygon.hierarchy._value;for(a=0;a<l.length;a++){var u=l[a];if(void 0!=n.polygon.height){var c=Cesium.Cartographic.fromCartesian(u);c.height+=n.polygon.height._value,u=Cesium.Cartesian3.fromRadians(c.longitude,c.latitude,c.height)}var h=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:u,onDrag:function(t,e){t.positions[t.index]=e;for(var i=n.polygon.hierarchy._value,r=i[0],a=1;a<i.length;a++){var s=Cesium.Cartographic.fromCartesian(r),l=Cesium.Cartographic.fromCartesian(i[a]);Number(l.height)>Number(s.height)&&(r=i[a])}var u=Number(n.polygon.extrudedHeight)-Number(Cesium.Cartographic.fromCartesian(r).height);n.attribute.style.extrudedHeight=Number(u).toFixed(2),o.updateDraggers(),n.changeEditing()}});h.index=a,h.positions=l,this.draggers.push(h)}if(n.polygon.extrudedHeight)for(a=0;a<l.length;a++){var f=l[a],p=Cesium.Cartographic.fromCartesian(f);p.height=n.polygon.extrudedHeight._value;var d=Cesium.Cartesian3.fromRadians(p.longitude,p.latitude,p.height),h=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:d,onDrag:function(t,e){for(var i=o.entity.polygon.hierarchy._value,r=i[0],a=1;a<i.length;a++){var s=Cesium.Cartographic.fromCartesian(r),l=Cesium.Cartographic.fromCartesian(i[a]);Number(l.height)>Number(s.height)&&(r=i[a])}var u=Cesium.Cartographic.fromCartesian(e);n.polygon.extrudedHeight=new Cesium.ConstantProperty(Number(u.height));var c=Number(u.height)-Number(Cesium.Cartographic.fromCartesian(r).height);n.attribute.style.extrudedHeight=Number(c).toFixed(2),o.updateDraggers(),n.changeEditing()},vertical:!0,horizontal:!1});h.index=a,this.heightDraggers.push(h)}}return o(t,[{key:"updateDraggers",value:function(){var t=this.entity.polygon.hierarchy._value,e=this.entity.polygon.extrudedHeight._value,n=0;void 0!=this.entity.polygon.height&&(n=this.entity.polygon.height._value);for(var i=0;i<this.heightDraggers.length;i++){var r=t[i],o=this.heightDraggers[i],a=Cesium.Cartographic.fromCartesian(r);a.height=e;var s=Cesium.Cartesian3.fromRadians(a.longitude,a.latitude,a.height);o.position=s;var l=this.draggers[i],u=Cesium.Cartographic.fromCartesian(r);u.height+=n,s=Cesium.Cartesian3.fromRadians(u.longitude,u.latitude,u.height),l.position=s}}},{key:"destroy",value:function(){var t=0;for(t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);for(this.draggers=[],t=0;t<this.heightDraggers.length;t++)this.dataSource.entities.remove(this.heightDraggers[t]);this.heightDraggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[];for(var o=n.polygon.hierarchy._value.positions,a=0;a<o.length;a++){var l=o[a],u=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:l,heightReference:!n.attribute.style.perPositionHeight,onDrag:function(t,e){t.positions[t.index]=e,n.polygon.hierarchy=t.positions,n.changeEditing()}});u.index=a,u.positions=o,this.draggers.push(u)}}return o(t,[{key:"updateDraggers",value:function(){for(var t=this.entity.polygon.hierarchy._value,e=0;e<this.draggers.length;e++){var n=t[e];this.draggers[e].position=n}}},{key:"destroy",value:function(){for(var t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);this.draggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=n(42),u=i(l),c=n(41),h=i(c),f=function(){function t(e){r(this,t),this.typename="model"}return o(t,null,[{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({model:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"silhouette":case"silhouetteColor":case"silhouetteAlpha":case"silhouetteSize":case"fill":case"color":case"opacity":break;case"modelUrl":e.uri=i}}return t.style.silhouette?(e.silhouetteColor=new Cesium.Color.fromCssColorString(t.style.silhouetteColor||"#FFFFFF").withAlpha(Number(t.style.silhouetteAlpha||1)),e.silhouetteSize=Number(t.style.silhouetteSize||1)):e.silhouetteSize=0,t.style.fill?e.color=new Cesium.Color.fromCssColorString(t.style.color||"#FFFFFF").withAlpha(Number(t.style.opacity||1)):e.color=new Cesium.Color.fromCssColorString("#FFFFFF").withAlpha(Number(t.style.opacity||1)),e}},{key:"attribute2Model",value:function(t,e){var n=Cesium.Math.toRadians(Number(e.attribute.style.heading||0)),i=Cesium.Math.toRadians(Number(e.attribute.style.pitch||0)),r=Cesium.Math.toRadians(Number(e.attribute.style.roll||0)),o=new Cesium.HeadingPitchRoll(n,i,r);e.orientation&&(e.orientation=Cesium.Transforms.headingPitchRollQuaternion(e.position._value,o))}},{key:"getEditor",value:function(t,e,n){return new u.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.position=new h.default(e);var n=Cesium.Math.toRadians(Number(t.attribute.style.heading||0)),i=Cesium.Math.toRadians(Number(t.attribute.style.pitch||0)),r=Cesium.Math.toRadians(Number(t.attribute.style.roll||0)),o=new Cesium.HeadingPitchRoll(n,i,r);t.orientation=Cesium.Transforms.headingPitchRollQuaternion(t.position._value,o)}},{key:"getPositions",value:function(t){return[t.position._value]}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=s.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"Point",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=n(42),u=i(l),c=n(41),h=i(c),f=function(){function t(e){r(this,t),this.typename="label"}return o(t,null,[{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({label:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={scale:1,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"font_style":case"font_weight":case"font_size":case"font_family":case"text":case"scaleByDistance_near":case"scaleByDistance_nearValue":case"scaleByDistance_far":case"scaleByDistance_farValue":case"distanceDisplayCondition_far":case"distanceDisplayCondition_near":break;case"color":e.fillColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1));break;case"border":e.style=i?Cesium.LabelStyle.FILL_AND_OUTLINE:Cesium.LabelStyle.FILL;break;case"border_color":e.outlineColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1));break;case"border_width":e.outlineWidth=i;break;case"background":e.showBackground=i;break;case"background_color":e.backgroundColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1));break;case"pixelOffset":e.pixelOffset=new Cesium.Cartesian2(t.style.pixelOffset[0],t.style.pixelOffset[1]);break;case"scaleByDistance":i?e.scaleByDistance=new Cesium.NearFarScalar(Number(t.style.scaleByDistance_near||1e3),Number(t.style.scaleByDistance_nearValue||1),Number(t.style.scaleByDistance_far||1e6),Number(t.style.scaleByDistance_farValue||.1)):e.scaleByDistance=null;break;case"distanceDisplayCondition":i?e.distanceDisplayCondition=new Cesium.DistanceDisplayCondition(Number(t.style.distanceDisplayCondition_near||0),Number(t.style.distanceDisplayCondition_far||1e5)):e.distanceDisplayCondition=null}}e.text=t.style.text||"文字";var r=(t.style.font_style||"normal")+" "+(t.style.font_weight||"normal")+" "+(t.style.font_size||"30")+"px "+(t.style.font_family||"微软雅黑");return e.font=r,e}},{key:"getEditor",value:function(t,e,n){return new u.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.position=new h.default(e)}},{key:"getPositions",value:function(t){return[t.position._value]}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=s.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"Point",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(41),s=i(a),l=n(39),u=i(l),c=n(53),h=i(c),f=function(){function t(){r(this,t)}return o(t,null,[{key:"typename",value:function(){return"wall"}},{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({wall:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},e||(e={fill:!0,minimumHeights:[],maximumHeights:[],positions:new s.default([])});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"opacity":case"outlineOpacity":break;case"outlineColor":e.outlineColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(t.style.outlineOpacity||t.style.opacity||1);break;case"color":e.material=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1))}}return null==e.material&&(e.material=Cesium.Color.fromRandom({minimumGreen:.75,maximumBlue:.75,alpha:Number(t.style.opacity||1)})),e}},{key:"getEditor",value:function(t,e,n){return new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){if(t.wall.positions=new s.default(e),t.wall.maximumHeights&&t.wall.minimumHeights)for(var n=0;n<e.length;n++){var i=Cesium.Cartographic.fromCartesian(e[n]);t.wall.minimumHeights._value[n]=Number(i.height),t.wall.maximumHeights._value[n]=Number(i.height)+Number(t.attribute.style.extrudedHeight)}}},{key:"getPositions",value:function(t){return t.wall.positions._value}},{key:"setMaximumHeights",value:function(t,e){t.wall.maximumHeights=new s.default(e)}},{key:"getMaximumHeights",value:function(t){return t.wall.maximumHeights._value}},{key:"setMinimumHeights",value:function(t,e){t.wall.minimumHeights=new s.default(e)}},{key:"getMinimumHeights",value:function(t){return t.wall.minimumHeights._value}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=u.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"LineString",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[],this.heightDraggers=[];var o=this,a=0,s=n.wall.positions._value;for(a=0;a<s.length;a++){var l=s[a],u=_drawutils.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:l,onDrag:function(t,e){t.positions[t.index]=e,o.updateDraggers(),n.changeEditing()}});u.index=a,u.positions=s,this.draggers.push(u)}if(n.wall.maximumHeights)for(a=0;a<s.length;a++){var c=s[a],h=Cesium.Cartographic.fromCartesian(c.clone());h.height=n.wall.maximumHeights._value[a];var l=Cesium.Cartesian3.fromRadians(h.longitude,h.latitude,h.height),u=_drawutils.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:l,onDrag:function(t,e){var i=Cesium.Cartographic.fromCartesian(e),r=o.entity.wall.minimumHeights._value,a=Number(i.height)-Number(r[t.index]);n.attribute.style.extrudedHeight=a.toFixed(2),o.updateDraggers(),n.changeEditing()},vertical:!0,horizontal:!1});u.index=a,this.heightDraggers.push(u)}}return o(t,[{key:"updateDraggers",value:function(){for(var t=this.entity.wall.positions._value,e=this.entity.wall.minimumHeights._value,n=this.entity.wall.maximumHeights._value,i=0;i<this.heightDraggers.length;i++){var r=t[i].clone(),o=this.heightDraggers[i],a=Cesium.Cartographic.fromCartesian(r);e[i]=a.height,n[i]=Number(a.height)+Number(this.entity.attribute.style.extrudedHeight),o.position=s.default.getPositionsWithHeight(r,this.entity.attribute.style.extrudedHeight),this.draggers[i].position=r}}},{key:"destroy",value:function(){var t=0;for(t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);for(this.draggers=[],t=0;t<this.heightDraggers.length;t++)this.dataSource.entities.remove(this.heightDraggers[t]);this.heightDraggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=n(55),u=i(l),c=n(56),h=i(c),f=function(){function t(e){r(this,t),this.typename="rectangle"}return o(t,null,[{key:"typename",value:function(){return"rectangle"}},{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({rectangle:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){if(t=t||{},t.style=t.style||{},!e){var n=Cesium.Rectangle.fromDegrees(78.654473,34.878143,78.654673,34.878316);e={fill:!0,closeTop:!0,closeBottom:!0,coordinates:n}}for(var i in t.style){var r=t.style[i];switch(i){default:e[i]=r;break;case"opacity":case"outlineOpacity":break;case"outlineColor":e.outlineColor=new Cesium.Color.fromCssColorString(r||"#FFFF00").withAlpha(t.style.outlineOpacity||t.style.opacity||1);
break;case"height":e.height=Number(r),e.extrudedHeight=Number(t.style.extrudedHeight)+Number(r);break;case"extrudedHeight":e.extrudedHeight=Number(e.height)+Number(r);break;case"color":e.material=new Cesium.Color.fromCssColorString(r||"#FFFF00").withAlpha(Number(t.style.opacity||1));break;case"image":e.material=t.style.image;break;case"rotation":e.rotation=Cesium.Math.toRadians(r),t.style.stRotation||(e.stRotation=Cesium.Math.toRadians(r));break;case"stRotation":e.stRotation=Cesium.Math.toRadians(r)}}return null==e.material&&(e.material=Cesium.Color.fromRandom({minimumGreen:.75,maximumBlue:.75,alpha:Number(t.style.opacity||1)})),e}},{key:"getEditor",value:function(t,e,n){return e.rectangle.extrudedHeight?new u.default(t,e,n):new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){e instanceof Array&&(e=Cesium.Rectangle.fromCartesianArray(e)),t.rectangle.coordinates.setValue(e)}},{key:"getPositions",value:function(t){return t.rectangle.coordinates}},{key:"getCoordinates",value:function(t){var e=this.getDiagonalPositions(t),n=s.default.getCoordinates(e);return n}},{key:"getDiagonalPositions",value:function(t){var e=t.rectangle.coordinates._value,n=Cesium.Rectangle.northwest(e),i=Cesium.Rectangle.southeast(e);return Cesium.Cartesian3.fromRadiansArray([n.longitude,n.latitude,i.longitude,i.latitude])}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"MultiPoint",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[],this.heightDraggers=[];var o=this,a=0,l=this.getDraggersPositions();for(a=0;a<l.length;a++){var u=l[a];if(void 0!=n.rectangle.height){var c=Cesium.Cartographic.fromCartesian(u);c.height+=n.rectangle.height._value,u=Cesium.Cartesian3.fromRadians(c.longitude,c.latitude,c.height)}var h=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:u,onDrag:function(t,e){t.positions[t.index]=e;var i;i=0==t.index?Cesium.Rectangle.fromCartesianArray([e,t.positions[1]]):Cesium.Rectangle.fromCartesianArray([e,t.positions[0]]),n.rectangle.coordinates.setValue(i),o.updateDraggers(),n.changeEditing()}});h.index=a,h.positions=l,this.draggers.push(h)}if(n.rectangle.extrudedHeight)for(a=0;a<l.length;a++){var f=l[a],c=Cesium.Cartographic.fromCartesian(f);c.height+=n.rectangle.extrudedHeight._value;var u=Cesium.Cartesian3.fromRadians(c.longitude,c.latitude,c.height),h=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:u,onDrag:function(t,e){var i=Cesium.Cartographic.fromCartesian(e);n.rectangle.extrudedHeight=new Cesium.ConstantProperty(i.height);var r=Number(i.height)-Number(n.rectangle.height);n.attribute.style.extrudedHeight=Number(r).toFixed(2),o.updateDraggers(),n.changeEditing()},vertical:!0,horizontal:!1});h.index=a,this.heightDraggers.push(h)}}return o(t,[{key:"getDraggersPositions",value:function(){var t=this.entity.rectangle.coordinates._value,e=Cesium.Rectangle.northwest(t),n=Cesium.Rectangle.southeast(t);return Cesium.Cartesian3.fromRadiansArray([e.longitude,e.latitude,n.longitude,n.latitude])}},{key:"updateDraggers",value:function(){var t=this.getDraggersPositions(),e=this.entity.rectangle.extrudedHeight._value,n=0;void 0!=this.entity.rectangle.height&&(n=this.entity.rectangle.height._value);for(var i=0;i<this.heightDraggers.length;i++){var r=t[i],o=this.heightDraggers[i],a=Cesium.Cartographic.fromCartesian(r);a.height+=e;var s=Cesium.Cartesian3.fromRadians(a.longitude,a.latitude,a.height);o.position=s;var l=this.draggers[i],u=Cesium.Cartographic.fromCartesian(r);u.height+=n,s=Cesium.Cartesian3.fromRadians(u.longitude,u.latitude,u.height),l.position=s}}},{key:"destroy",value:function(){var t=0;for(t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);for(this.draggers=[],t=0;t<this.heightDraggers.length;t++)this.dataSource.entities.remove(this.heightDraggers[t]);this.heightDraggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[];for(var o=this.getDraggersPositions(),a=0;a<o.length;a++){var l=o[a],u=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:l,heightReference:!n.attribute.style.perPositionHeight,onDrag:function(t,e){t.positions[t.index]=e;var i;i=0==t.index?Cesium.Rectangle.fromCartesianArray([e,t.positions[1]]):Cesium.Rectangle.fromCartesianArray([e,t.positions[0]]),n.rectangle.coordinates.setValue(i),n.changeEditing()}});u.index=a,u.positions=o,this.draggers.push(u)}}return o(t,[{key:"getDraggersPositions",value:function(){var t=this.entity.rectangle.coordinates._value,e=Cesium.Rectangle.northwest(t),n=Cesium.Rectangle.southeast(t);return Cesium.Cartesian3.fromRadiansArray([e.longitude,e.latitude,n.longitude,n.latitude])}},{key:"updateDraggers",value:function(){for(var t=this.getDraggersPositions(),e=0;e<this.draggers.length;e++){var n=t[e];this.draggers[e].position=n}}},{key:"destroy",value:function(){for(var t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);this.draggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(41),s=i(a),l=n(39),u=i(l),c=n(58),h=i(c),f=function(){function t(){r(this,t)}return o(t,null,[{key:"typename",value:function(){return"polylineVolume"}},{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({polylineVolume:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={positions:new s.default([])});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"opacity":case"outlineOpacity":case"radius":case"shape":break;case"outlineColor":e.outlineColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(t.style.outlineOpacity||t.style.opacity||1);break;case"color":e.material=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1))}}switch(t.style.radius=t.style.radius||10,t.style.shape){default:case"pipeline":e.shape=this._getCorridorShape1(t.style.radius);break;case"circle":e.shape=this._getCorridorShape2(t.style.radius);break;case"star":e.shape=this._getCorridorShape3(t.style.radius)}return e}},{key:"_getCorridorShape1",value:function(t){for(var e=t/3,n=0,i=360,r=[],o=n;o<=i;o++){var a=Cesium.Math.toRadians(o);r.push(new Cesium.Cartesian2(t*Math.cos(a),t*Math.sin(a)))}for(var o=i;o>=n;o--){var a=Cesium.Math.toRadians(o);r.push(new Cesium.Cartesian2((t-e)*Math.cos(a),(t-e)*Math.sin(a)))}return r}},{key:"_getCorridorShape2",value:function(t){for(var e=0,n=360,i=[],r=e;r<=n;r++){var o=Cesium.Math.toRadians(r);i.push(new Cesium.Cartesian2(t*Math.cos(o),t*Math.sin(o)))}return i}},{key:"_getCorridorShape3",value:function(t,e){for(var e=e||6,n=Math.PI/e,i=2*e,r=new Array(i),o=0;o<i;o++){var a=o%2===0?t:t/3;r[o]=new Cesium.Cartesian2(Math.cos(o*n)*a,Math.sin(o*n)*a)}return r}},{key:"getEditor",value:function(t,e,n){return new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.polylineVolume.positions=e}},{key:"getPositions",value:function(t){return t.polylineVolume.positions._value}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=u.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"LineString",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.draggers=[];for(var o=n.polylineVolume.positions.getValue(),a=0;a<o.length;a++){var l=o[a],u=s.default.createDragger(this.dataSource,{dragIcon:i.dragIcon,position:l,onDrag:function(t,e){o[t.index]=e,n.polylineVolume.positions=o,n.changeEditing()}});u.index=a,this.draggers.push(u)}}return o(t,[{key:"updateDraggers",value:function(){for(var t=this.entity.polylineVolume.positions.getValue(),e=0;e<this.draggers.length;e++){var n=t[e];this.draggers[e].position=n}}},{key:"destroy",value:function(){for(var t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);this.draggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(41),s=i(a),l=n(39),u=i(l),c=n(60),h=i(c),f=function(){function t(e){r(this,t),this.typename="ellipse"}return o(t,null,[{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({ellipse:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={fill:!0});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"opacity":case"outlineOpacity":break;case"outlineColor":e.outlineColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(t.style.outlineOpacity||t.style.opacity||1);break;case"color":e.material=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1));break;case"rotation":e.rotation=Cesium.Math.toRadians(i);break;case"radius":e.semiMinorAxis=i,e.semiMajorAxis=i}}return e}},{key:"getEditor",value:function(t,e,n){return new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.position=new s.default(e)}},{key:"getPositions",value:function(t){return[t.position._value]}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=u.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"Point",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.options=i,this.draggers=[],this.heightDraggers=[],this.initDraggers()}return o(t,[{key:"initDraggers",value:function(){var t=this,e=s.default.createDragger(this.dataSource,{dragIcon:this.options.dragIcon,position:this.entity.position._value,onDrag:function(e,n){var i=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(n,t.entity.position._value,i);var r=Cesium.Cartographic.fromCartesian(n),o=Number(r.height).toFixed(2);t.entity.ellipse.height=new Cesium.ConstantProperty(r.height),t.entity.attribute.style.height=o,t.entity.position._value=n;var a=new Cesium.Cartesian3;Cesium.Cartesian3.add(e.majorDragger.position._value,i,a),e.majorDragger.position=new Cesium.ConstantProperty(a),Cesium.Cartesian3.add(e.minorDragger.position._value,i,a),e.minorDragger.position=new Cesium.ConstantProperty(a),void 0!=t.entity.attribute.style.extrudedHeight&&t.updateHeightDraggers(),t.entity.changeEditing()}});this.draggers.push(e);var n=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:this.entity.position._value,semiMinorAxis:this.entity.ellipse.semiMinorAxis._value,semiMajorAxis:this.entity.ellipse.semiMajorAxis._value,rotation:Cesium.Math.toRadians(Number(this.entity.attribute.style.rotation||0)),granularity:2},!0,!1),i=new Cesium.Cartesian3(n.positions[0],n.positions[1],n.positions[2]),r=s.default.createDragger(this.dataSource,{dragIcon:this.options.dragIcon,position:i,onDrag:function(e,n){var i=Cesium.Cartesian3.distance(t.entity.position._value,n),r=Number(i.toFixed(2));t.entity.ellipse.semiMajorAxis=new Cesium.ConstantProperty(r),t.entity.attribute.style.radius?(t.entity.attribute.style.radius=r,t.entity.ellipse.semiMinorAxis=new Cesium.ConstantProperty(r)):t.entity.attribute.style.semiMajorAxis=r,void 0!=t.entity.attribute.style.extrudedHeight&&t.updateHeightDraggers(),t.entity.changeEditing()}});e.majorDragger=r,this.draggers.push(r);var o=new Cesium.Cartesian3(n.positions[3],n.positions[4],n.positions[5]),a=s.default.createDragger(this.dataSource,{dragIcon:this.options.dragIcon,position:o,onDrag:function(e,n){var i=Cesium.Cartesian3.distance(t.entity.position._value,n),r=Number(i.toFixed(2));t.entity.ellipse.semiMinorAxis=new Cesium.ConstantProperty(r),t.entity.attribute.style.radius?(t.entity.attribute.style.radius=r,t.entity.ellipse.semiMajorAxis=new Cesium.ConstantProperty(r)):t.entity.attribute.style.semiMinorAxis=r,void 0!=t.entity.attribute.style.extrudedHeight&&t.updateHeightDraggers(),t.entity.changeEditing()}});e.minorDragger=a,this.draggers.push(a),void 0!=this.entity.attribute.style.extrudedHeight&&this.initHeightDraggers()}},{key:"initHeightDraggers",value:function(){var t=this,e=Number(this.entity.attribute.style.extrudedHeight)-Number(this.entity.attribute.style.height),n=s.default.createDragger(this.dataSource,{dragIcon:this.options.dragIcon,position:s.default.getPositionsWithHeight(this.entity.position._value,e),onDrag:function(n,i){var r=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(i,t.entity.position._value,r);var o=Cesium.Cartographic.fromCartesian(i),a=Number(o.height).toFixed(2);t.entity.position._value=i,t.entity.ellipse.extrudedHeight=new Cesium.ConstantProperty(Number(a)+Number(e)),t.entity.ellipse.height=new Cesium.ConstantProperty(o.height),t.entity.attribute.style.extrudedHeight=Number(a)+Number(e),t.entity.attribute.style.height=a,t.updateDraggers(),t.entity.changeEditing()}});this.heightDraggers.push(n);var i=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:this.entity.position._value,semiMinorAxis:this.entity.ellipse.semiMinorAxis._value,semiMajorAxis:this.entity.ellipse.semiMajorAxis._value,rotation:Cesium.Math.toRadians(Number(this.entity.attribute.style.rotation||0)),granularity:2},!0,!1),r=new Cesium.Cartesian3(i.positions[0],i.positions[1],i.positions[2]),o=s.default.createDragger(this.dataSource,{dragIcon:this.options.dragIcon,position:s.default.getPositionsWithHeight(r,e),onDrag:function(e,n){var i=Cesium.Cartographic.fromCartesian(n);t.entity.ellipse.extrudedHeight=new Cesium.ConstantProperty(i.height),t.entity.attribute.style.extrudedHeight=Number(i.height).toFixed(2),t.updateHeightDraggers(),t.entity.changeEditing()},vertical:!0,horizontal:!1});this.heightDraggers.push(o);var a=new Cesium.Cartesian3(i.positions[3],i.positions[4],i.positions[5]),l=s.default.createDragger(this.dataSource,{dragIcon:this.options.dragIcon,position:s.default.getPositionsWithHeight(a,e),onDrag:function(e,n){var i=Cesium.Cartographic.fromCartesian(n);t.entity.ellipse.extrudedHeight=new Cesium.ConstantProperty(i.height),t.entity.attribute.style.extrudedHeight=Number(i.height).toFixed(2),t.updateHeightDraggers(),t.entity.changeEditing()},vertical:!0,horizontal:!1});this.heightDraggers.push(l)}},{key:"updateDraggers",value:function(){this.destroy(),this.initDraggers()}},{key:"updateHeightDraggers",value:function(){for(var t=0;t<this.heightDraggers.length;t++)this.dataSource.entities.remove(this.heightDraggers[t]);this.heightDraggers=[],this.initHeightDraggers()}},{key:"destroy",value:function(){var t=0;for(t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);if(this.draggers=[],void 0!=this.entity.attribute.style.extrudedHeight){for(t=0;t<this.heightDraggers.length;t++)this.dataSource.entities.remove(this.heightDraggers[t]);this.heightDraggers=[]}}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(41),s=i(a),l=n(39),u=i(l),c=n(62),h=i(c),f=function(){function t(){r(this,t)}return o(t,null,[{key:"typename",value:function(){return"ellipsoid"}},{key:"startDraw",value:function(t,e){var n=this.attribute2Entity(e),i=t.entities.add({ellipsoid:n,attribute:e});return i}},{key:"attribute2Entity",value:function(t,e){t=t||{},t.style=t.style||{},null==e&&(e={fill:!0});for(var n in t.style){var i=t.style[n];switch(n){default:e[n]=i;break;case"opacity":case"outlineOpacity":case"widthRadii":case"heightRadii":break;case"outlineColor":e.outlineColor=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(t.style.outlineOpacity||t.style.opacity||1);break;case"color":e.material=new Cesium.Color.fromCssColorString(i||"#FFFF00").withAlpha(Number(t.style.opacity||1));break;case"extentRadii":var r=t.style.extentRadii||100,o=t.style.widthRadii||100,a=t.style.heightRadii||100;e.radii=new Cesium.Cartesian3(r,o,a)}}return e}},{key:"getEditor",value:function(t,e,n){return new h.default(t,e,n)}},{key:"setPositions",value:function(t,e){t.position=new s.default(e)}},{key:"getPositions",value:function(t){return[t.position._value]}},{key:"getCoordinates",value:function(t){var e=this.getPositions(t),n=u.default.getCoordinates(e);return n}},{key:"toGeoJSON",value:function(t){var e=this.getCoordinates(t);return{type:"Feature",properties:t.attribute,geometry:{type:"Point",coordinates:e}}}}]),t}();e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=function(){function t(e,n,i){r(this,t),this.dataSource=e,this.entity=n,this.options=i,this.draggers=[],this.initDraggers()}return o(t,[{key:"initDraggers",value:function(){var t=this,e=this.entity.position._value,n=Number(this.entity.attribute.style.heightRadii)||0,i=Cesium.Cartographic.fromCartesian(e);i.height+=n;var r=Cesium.Cartesian3.fromRadians(i.longitude,i.latitude,i.height),o=s.default.createDragger(this.dataSource,{dragIcon:this.options.dragIcon,position:r,onDrag:function(e,n){var i=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(n,t.entity.position._value,i);var r=Cesium.Cartographic.fromCartesian(n),o=Number(t.entity.attribute.style.heightRadii)||0;r.height-=o;var a=Cesium.Cartesian3.fromRadians(r.longitude,r.latitude,r.height);t.entity.position._value=a,t.entity.changeEditing()}});this.draggers.push(o)}},{key:"updateDraggers",value:function(){this.destroy(),this.initDraggers()}},{key:"destroy",value:function(){for(var t=0;t<this.draggers.length;t++)this.dataSource.entities.remove(this.draggers[t]);this.draggers=[]}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(39),s=i(a),l=n(64),u=i(l),c=function(){function t(e){r(this,t),this.viewer=e,e.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),e.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK)}return o(t,[{key:"setCursor",value:function(t){document.getElementById(this.viewer._container.id).style.cursor=t||""}},{key:"createDrawPointHandler",value:function(t){this.setCursor("crosshair");var e=this;t.inProgress=!0;var n=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);return n.setInputAction(function(i){var r=u.default.getCurrentMousePosition(e.viewer.scene,i.position);r&&(e.setCursor(),t.updatePositions(r),t.inProgress=!1,t.stopDrawing(),t.startEditing(),n.destroy(),e.drawHandler=null)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.drawHandler=n,n}},{key:"createDrawPolylineHandler",value:function(t,e){this.setCursor("crosshair");var n=this;t.inProgress=!0;var i=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);return i.lastPointTemporary=!1,i.setInputAction(function(r){var o=u.default.getCurrentMousePosition(n.viewer.scene,r.position);o&&(i.lastPointTemporary&&e.pop(),t.attribute&&t.attribute.addHeight&&(o=s.default.getPositionsWithHeight(o,t.attribute.addHeight)),e.push(o),i.lastPointTemporary=!1,t.attribute&&t.attribute.minMaxPoints&&(e.length==t.attribute.minMaxPoints.min&&e.length==t.attribute.minMaxPoints.max||t.attribute.minMaxPoints.isSuper&&4==e.length)&&(t.inProgress=!1,i.destroy(),n.drawHandler=null,t.stopDrawing(),t.startEditing(),n.setCursor()),t.changeDrawing())},Cesium.ScreenSpaceEventType.LEFT_CLICK),i.setInputAction(function(r){if(r.endPosition){var o=u.default.getCurrentMousePosition(n.viewer.scene,r.endPosition);o&&(i.lastPointTemporary&&e.pop(),e.push(o),i.lastPointTemporary=!0,t.moveDrawing())}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),i.setInputAction(function(r){t.inProgress=!1,i.destroy(),n.drawHandler=null,e.pop(),t.stopDrawing(),t.startEditing(),n.setCursor()},Cesium.ScreenSpaceEventType.RIGHT_CLICK),this.drawHandler=i,i}},{key:"createDrawPolygonHandler",value:function(t,e){this.setCursor("crosshair");var n=this;t.inProgress=!0;var i=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);return i.lastPointTemporary=!1,i.setInputAction(function(r){var o=u.default.getCurrentMousePosition(n.viewer.scene,r.position);if(o){if(i.lastPointTemporary&&e.pop(),e.push(o),t.polygon.hierarchy=e,t.attribute.style.extrudedHeight){var a=s.default.getMaxHeightForPositions(e);t.polygon.extrudedHeight=a+Number(t.attribute.style.extrudedHeight)}i.lastPointTemporary=!1,t.changeDrawing()}},Cesium.ScreenSpaceEventType.LEFT_CLICK),i.setInputAction(function(r){if(r.endPosition){var o=u.default.getCurrentMousePosition(n.viewer.scene,r.endPosition);if(o){if(i.lastPointTemporary&&e.pop(),e.push(o),t.polygon.hierarchy=e,t.attribute.style.extrudedHeight){var a=s.default.getMaxHeightForPositions(e);t.polygon.extrudedHeight=a+Number(t.attribute.style.extrudedHeight)}i.lastPointTemporary=!0,t.moveDrawing()}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),i.setInputAction(function(r){t.inProgress=!1,i.destroy(),n.drawHandler=null,e.pop(),t.polygon.hierarchy=e,t.stopDrawing(),t.startEditing(),n.setCursor()},Cesium.ScreenSpaceEventType.RIGHT_CLICK),this.drawHandler=i,i}},{key:"createTwoPointsModelHandler",value:function(t,e){this.setCursor("crosshair");var n=this;t.inProgress=!0;var i=[],r=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);return r.lastPointTemporary=!1,r.setInputAction(function(o){var a=u.default.getCurrentMousePosition(n.viewer.scene,o.position);if(a){if(r.lastPointTemporary&&i.pop(),i.push(a),1==i.length&&t.attribute.style.extrudedHeight){var s=Number(Cesium.Cartographic.fromCartesian(a).height).toFixed(2);t.rectangle.height=Number(s),t.rectangle.extrudedHeight=Number(s)+Number(t.attribute.style.extrudedHeight),t.attribute.style.height=Number(s)}if(2==i.length){var l=Cesium.Rectangle.fromCartesianArray(i);e.setValue(l)}r.lastPointTemporary=!1,t.changeDrawing(),2==i.length&&(t.inProgress=!1,r.destroy(),n.drawHandler=null,t.stopDrawing(),t.startEditing(),n.setCursor())}},Cesium.ScreenSpaceEventType.LEFT_CLICK),r.setInputAction(function(o){if(o.endPosition){var a=u.default.getCurrentMousePosition(n.viewer.scene,o.endPosition);if(a){if(r.lastPointTemporary&&i.pop(),i.push(a),2==i.length){var s=Cesium.Rectangle.fromCartesianArray(i);e.setValue(s)}r.lastPointTemporary=!0,t.moveDrawing()}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.drawHandler=r,r}},{key:"createDrawWallHandler",value:function(t,e,n,i){this.setCursor("crosshair");var r=this;t.inProgress=!0;var o=new Cesium.ScreenSpaceEventHandler(this.viewer.scene.canvas);return o.lastPointTemporary=!1,o.setInputAction(function(a){var s=u.default.getCurrentMousePosition(r.viewer.scene,a.position);if(s){o.lastPointTemporary&&(e.pop(),n.pop(),i.pop()),e.push(s);var l=Cesium.Cartographic.fromCartesian(s),c=Number(l.height).toFixed(2),h=Number(c)+Number(t.attribute.style.extrudedHeight);n.push(c),i.push(h),o.lastPointTemporary=!1,t.changeDrawing()}},Cesium.ScreenSpaceEventType.LEFT_CLICK),o.setInputAction(function(a){if(a.endPosition){var s=u.default.getCurrentMousePosition(r.viewer.scene,a.endPosition);if(s){o.lastPointTemporary&&(e.pop(),n.pop(),i.pop()),e.push(s);var l=Cesium.Cartographic.fromCartesian(s),c=Number(l.height).toFixed(2),h=Number(c)+Number(t.attribute.style.extrudedHeight);n.push(c),i.push(h),o.lastPointTemporary=!0,t.moveDrawing()}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),o.setInputAction(function(a){t.inProgress=!1,o.destroy(),r.drawHandler=null,e.pop(),n.pop(),i.pop(),t.stopDrawing(),t.startEditing(),r.setCursor()},Cesium.ScreenSpaceEventType.RIGHT_CLICK),this.drawHandler=o,o}},{key:"destroyDrawHandler",value:function(){this.setCursor(),this.drawHandler&&(this.setCursor(),this.drawHandler.destroy(),this.drawHandler=null)}},{key:"createEditSelectHandler",value:function(t){var e=this,n=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas);n.setInputAction(function(n){var i=e.viewer.scene.pick(n.position),r=null;if(Cesium.defined(i)){var o=Cesium.defaultValue(i.id,i.primitive.id);if(o instanceof Cesium.Entity){var a=Cesium.defaultValue(o.inProgress,!1);a||(r=o)}}t(r)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.selectHandler=n}},{key:"createEditDraggerHandler",value:function(){var t=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas);t.dragger=null;var e=this;t.setInputAction(function(n){var i=e.viewer.scene.pick(n.position);if(Cesium.defined(i)){var r=i.id;r&&Cesium.defaultValue(r._isDragger,!1)&&(r.point&&(r.point.color=Cesium.Color.RED,r.point.pixelSize=10),t.dragger=r,e.viewer.scene.screenSpaceCameraController.enableRotate=!1,e.viewer.scene.screenSpaceCameraController.enableTilt=!1,e.viewer.scene.screenSpaceCameraController.enableTranslate=!1)}},Cesium.ScreenSpaceEventType.LEFT_DOWN),t.setInputAction(function(n){var i=e.viewer.scene.pick(n.position);if(Cesium.defined(i)){var r=i.id;r&&Cesium.defaultValue(r._isDragger,!1)&&(r.billboard&&(r.billboard.scale_src=r.billboard.scale._value,r.billboard.scale._value=1.2*r.billboard.scale_src),t.dragger=r,e.viewer.scene.screenSpaceCameraController.enableRotate=!1,e.viewer.scene.screenSpaceCameraController.enableTilt=!1,e.viewer.scene.screenSpaceCameraController.enableTranslate=!1)}},Cesium.ScreenSpaceEventType.LEFT_DOWN,Cesium.KeyboardEventModifier.CTRL),t.setInputAction(function(i){if(t.dragger){if(t.dragger.horizontal){var r;if(t.dragger.model){var o=e.viewer.scene,a=o.pick(i.endPosition);if(Cesium.defined(a)&&a.id==t.dragger){var s=o.camera.getPickRay(i.endPosition);r=o.globe.pick(s,o)}}null==r&&(r=u.default.getCurrentMousePosition(e.viewer.scene,i.endPosition)),r&&(t.dragger.position=r,t.dragger.onDrag&&t.dragger.onDrag(t.dragger,r))}if(t.dragger.vertical){var l=i.endPosition.y-i.startPosition.y,c=t.dragger.position._value,h=new Cesium.EllipsoidTangentPlane(c);n.center=c,n.radius=1;var f=e.viewer.scene.frameState.camera.getPixelSize(n,e.viewer.scene.frameState.context.drawingBufferWidth,e.viewer.scene.frameState.context.drawingBufferHeight),p=new Cesium.Cartesian3;Cesium.Cartesian3.multiplyByScalar(h.zAxis,-l*f,p);var d=Cesium.Cartesian3.clone(c);Cesium.Cartesian3.add(c,p,d),t.dragger.position=d,t.dragger.onDrag&&t.dragger.onDrag(t.dragger,d)}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE);var n=new Cesium.BoundingSphere;t.setInputAction(function(i){if(t.dragger&&t.dragger.verticalCtrl){var r=i.endPosition.y-i.startPosition.y,o=t.dragger.position._value,a=new Cesium.EllipsoidTangentPlane(o);n.center=o,n.radius=1;var s=e.viewer.scene.frameState.camera.getPixelSize(n,e.viewer.scene.frameState.context.drawingBufferWidth,e.viewer.scene.frameState.context.drawingBufferHeight),l=new Cesium.Cartesian3;Cesium.Cartesian3.multiplyByScalar(a.zAxis,-r*s,l);var u=Cesium.Cartesian3.clone(o);Cesium.Cartesian3.add(o,l,u),t.dragger.position=u,t.dragger.onDrag&&t.dragger.onDrag(t.dragger,u)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE,Cesium.KeyboardEventModifier.CTRL),t.setInputAction(function(){t.dragger&&((t.dragger.billboard||t.dragger.model||t.dragger.label)&&(t.dragger.billboard?t.dragger.billboard.scale._value=t.dragger.billboard.scale_src:t.dragger.model||t.dragger.label,t.dragger._isDragger=!1),t.dragger=null,e.viewer.scene.screenSpaceCameraController.enableRotate=!0,e.viewer.scene.screenSpaceCameraController.enableTilt=!0,e.viewer.scene.screenSpaceCameraController.enableTranslate=!0)},Cesium.ScreenSpaceEventType.LEFT_UP),t.setInputAction(function(){t.dragger&&((t.dragger.billboard||t.dragger.model||t.dragger.label)&&(t.dragger.billboard?t.dragger.billboard.scale._value=t.dragger.billboard.scale_src:t.dragger.model||t.dragger.label,t.dragger._isDragger=!1),t.dragger=null,e.viewer.scene.screenSpaceCameraController.enableRotate=!0,e.viewer.scene.screenSpaceCameraController.enableTilt=!0,e.viewer.scene.screenSpaceCameraController.enableTranslate=!0)},Cesium.ScreenSpaceEventType.LEFT_UP,Cesium.KeyboardEventModifier.CTRL),this.draggerHandler=t}},{key:"destroyEditHandler",value:function(){this.selectHandler&&(this.selectHandler.destroy(),this.selectHandler=null),this.draggerHandler&&(this.draggerHandler.destroy(),this.draggerHandler=null)}}]),t}();e.default=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0
});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t)}return i(t,null,[{key:"formatPositon",value:function(t){var e=Cesium.Cartographic.fromCartesian(t),n={};return n.y=Number(Cesium.Math.toDegrees(e.latitude).toFixed(6)),n.x=Number(Cesium.Math.toDegrees(e.longitude).toFixed(6)),n.z=Number(e.height.toFixed(1)),n}},{key:"getCurrentMousePosition",value:function(t,e){var n,i=t.pick(e);if(t.pickPositionSupported&&Cesium.defined(i)&&(n=t.pickPosition(e),Cesium.defined(n))){var r=Cesium.Cartographic.fromCartesian(n),o=r.height;if(o>=0)return n;if(!Cesium.defined(i.id)&&o>=-2e3)return n}if(t.mode===Cesium.SceneMode.SCENE3D){var a=t.camera.getPickRay(e);n=t.globe.pick(a,t)}else n=t.camera.pickEllipsoid(e,t.globe.ellipsoid);return n}},{key:"getCenter",value:function(t,e){var n=t.scene,i=pickCenterPoint(n),r=i;if(!r){var o=n.globe,a=n.camera.positionCartographic.clone(),s=o.getHeight(a);a.height=s||0,r=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a)}var l=formatPositon(r);return e&&(l=t.mars.point2wgs(l)),l}},{key:"pickCenterPoint",value:function(t){var e=t.canvas,n=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight/2),i=t.camera.getPickRay(n),r=t.globe.pick(i,t);return r||t.camera.pickEllipsoid(n)}},{key:"getExtent",value:function(t,e){var n={xmin:70,xmax:140,ymin:0,ymax:55},i=t.scene,r=i.globe.ellipsoid,o=i.canvas,a=t.camera.pickEllipsoid(new Cesium.Cartesian2(0,0),r);if(a){var s=r.cartesianToCartographic(a);n.xmin=Cesium.Math.toDegrees(s.longitude),n.ymax=Cesium.Math.toDegrees(s.latitude)}else{for(var l,u=o.width/2,c=o.height/2,h=0;h<=c;h+=10){var f=h<=u?h:u;if(l=t.camera.pickEllipsoid(new Cesium.Cartesian2(f,h),r))break}if(l){var s=r.cartesianToCartographic(l);n.xmin=Cesium.Math.toDegrees(s.longitude),n.ymax=Cesium.Math.toDegrees(s.latitude)}}var p=t.camera.pickEllipsoid(new Cesium.Cartesian2(o.width,o.height),r);if(p){var d=r.cartesianToCartographic(p);n.xmax=Cesium.Math.toDegrees(d.longitude),n.ymin=Cesium.Math.toDegrees(d.latitude)}else{for(var g,u=o.width/2,c=o.height/2,h=o.height;h>=c;h-=10){var f=h>=u?h:u;if(g=t.camera.pickEllipsoid(new Cesium.Cartesian2(f,h),r))break}if(g){var d=r.cartesianToCartographic(g);n.xmax=Cesium.Math.toDegrees(d.longitude),n.ymin=Cesium.Math.toDegrees(d.latitude)}}if(e){var m=t.mars.point2wgs({x:n.xmin,y:n.ymin});n.xmin=m.x,n.ymin=m.y;var v=t.mars.point2wgs({x:n.xmax,y:n.ymax});n.xmax=v.x,n.ymax=v.y}return n}},{key:"getCameraView",value:function(t,e){var n=t.camera,i=n.positionCartographic,r={};return r.y=Number(Cesium.Math.toDegrees(i.latitude).toFixed(6)),r.x=Number(Cesium.Math.toDegrees(i.longitude).toFixed(6)),r.z=Number(i.height.toFixed(1)),r.heading=Number(Cesium.Math.toDegrees(n.heading).toFixed(1)),r.pitch=Number(Cesium.Math.toDegrees(n.pitch).toFixed(1)),r.roll=Number(Cesium.Math.toDegrees(n.roll).toFixed(1)),e&&(r=t.mars.point2wgs(r)),r}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(66),l=i(s),u=function(){function t(){r(this,t)}return a(t,null,[{key:"isNumber",value:function(t){return"number"==typeof t&&t.constructor==Number}},{key:"isString",value:function(t){return"string"==typeof t&&t.constructor==String}},{key:"getRequest",value:function(){var t=location.search,e=new Object;if(t.indexOf("?")!=-1)for(var n=t.substr(1),i=n.split("&"),r=0;r<i.length;r++)e[i[r].split("=")[0]]=decodeURI(i[r].split("=")[1]);return e}},{key:"getRequestByName",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?decodeURI(n[2]):null}},{key:"clone",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){if(null==t||"object"!=("undefined"==typeof t?"undefined":o(t)))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array){for(var e=[],n=0,i=t.length;n<i;++n)e[n]=clone(t[n]);return e}if("object"===("undefined"==typeof t?"undefined":o(t))){var e={};for(var r in t)"_layer"!=r&&"_layers"!=r&&"_parent"!=r&&t.hasOwnProperty(r)&&(e[r]=clone(t[r]));return e}return t})},{key:"isPCBroswer",value:function(){var t=navigator.userAgent.toLowerCase(),e="ipad"==t.match(/ipad/i),n="iphone"==t.match(/iphone/i),i="midp"==t.match(/midp/i),r="rv:1.2.3.4"==t.match(/rv:1.2.3.4/i),o="ucweb"==t.match(/ucweb/i),a="android"==t.match(/android/i),s="windows ce"==t.match(/windows ce/i),l="windows mobile"==t.match(/windows mobile/i);return!(e||n||i||r||o||a||s||l)}},{key:"webglreport",value:function(){var t=haoutil.system.getExplorerInfo();if("IE"==t.type&&t.version<11)return!1;try{var e,n=document.createElement("canvas"),i="undefined"!=typeof WebGL2RenderingContext;if(i&&(e=n.getContext("webgl2")||n.getContext("experimental-webgl2")||void 0),null==e&&(e=n.getContext("webgl")||n.getContext("experimental-webgl")||void 0),null==e)return!1}catch(t){return!1}return!0}},{key:"terrainPolyline",value:function(t){var e=t.viewer,n=t.positions;if(null==n||0==n.length)return void(t.calback&&t.calback(n));for(var i=Cesium.PolylinePipeline.generateArc({positions:n,granularity:t.granularity||1e-5}),r=[],o=e.scene.globe.ellipsoid,a=0;a<i.length;a+=3){var s=Cesium.Cartesian3.unpack(i,a);r.push(o.cartesianToCartographic(s))}var l=Cesium.Cartographic.fromCartesian(n[0]).height;Cesium.when(Cesium.sampleTerrainMostDetailed(e.terrainProvider,r),function(i){for(var r=!1,a=t.offset||2,s=0;s<i.length;++s)null==i[s].height?(r=!0,i[s].height=l):i[s].height=a+i[s].height*e.scene._terrainExaggeration;var u=o.cartographicArrayToCartesianArray(i);t.calback?t.calback(u,r):n.setValue&&n.setValue(u)})}},{key:"createModel",value:function(t,e){t=e.mars.point2map(t);var n=Cesium.Cartesian3.fromDegrees(t.x,t.y,t.z||0),i=Cesium.Math.toRadians(t.heading||0),r=Cesium.Math.toRadians(t.pitch||0),o=Cesium.Math.toRadians(t.roll||0),a=new Cesium.HeadingPitchRoll(i,r,o),s=Cesium.Transforms.headingPitchRollQuaternion(n,a),l=e.entities.add({name:t.name||"",position:n,orientation:s,model:t,tooltip:t.tooltip,popup:t.popup});return l}},{key:"toLatLon",value:function(t){var e=Cesium.Cartographic.fromCartesian(t);return[Cesium.Math.toDegrees(e.longitude),Cesium.Math.toDegrees(e.latitude),e.height]}},{key:"cartesians2lonlats",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=t.toLatLon(e[i]);n.push(o)}return n}},{key:"getArea",value:function(e){var n=t.cartesians2lonlats(e);return n.push(n[0]),l.area({type:"Feature",geometry:{type:"Polygon",coordinates:[n]}})}}]),t}();e.default=u},function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&M(i),r&&E(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");r&&M(r);var a;switch(t){case"Point":a=i(e).geometry;break;case"LineString":a=s(e).geometry;break;case"Polygon":a=o(e).geometry;break;case"MultiPoint":a=h(e).geometry;break;case"MultiLineString":a=c(e).geometry;break;case"MultiPolygon":a=f(e).geometry;break;default:throw new Error(t+" is invalid")}return r&&(a.bbox=r),a}function i(t,n,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(t[0])||!C(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,i)}function r(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return u(t.map(function(t){return i(t,e)}),n)}function o(t,n,i){if(!t)throw new Error("coordinates is required");for(var r=0;r<t.length;r++){var o=t[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===r&&0===a&&!C(o[0][0])||!C(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,i)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return u(t.map(function(t){return o(t,e)}),n)}function s(t,n,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!C(t[0][1])||!C(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,i)}function l(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return u(t.map(function(t){return s(t,e)}),n)}function u(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&M(n),i&&E(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}function c(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,i)}function h(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,i)}function f(t,n,i){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,i)}function p(t,n,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,i)}function d(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function g(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Fo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function m(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Fo[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function v(t,e){return _(m(t,e))}function y(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function _(t){if(null===t||void 0===t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function x(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function w(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return g(m(t,e),n||"kilometers")}function b(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var i=Bo[e||"meters"];if(!i)throw new Error("invalid original units");var r=Bo[n||"kilometers"];if(!r)throw new Error("invalid final units");return t/i*r}function C(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function S(t){return!!t&&t.constructor===Object}function M(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!C(t))throw new Error("bbox must only contain numbers")})}function E(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function I(t,e,n){if(null!==t)for(var i,r,o,a,s,l,u,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,m=d?t.features.length:1,v=0;v<m;v++){s=(c=!!(u=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<s;y++){var _=0,x=0;if(null!==(a=c?u.geometries[y]:u)){l=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(l,f,v,_,x),f++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++)e(l[i],f,v,_,x),f++,"MultiPoint"===w&&_++;"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++)e(l[i][r],f,v,_,x),f++;"MultiLineString"===w&&_++,"Polygon"===w&&x++}"Polygon"===w&&_++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for("MultiPolygon"===w&&(x=0),r=0;r<l[i].length;r++){for(o=0;o<l[i][r].length-h;o++)e(l[i][r][o],f,v,_,x),f++;x++}_++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)I(a.geometries[i],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function T(t,e,n,i){var r=n;return I(t,function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)},i),r}function P(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function L(t,e,n){var i=n;return P(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function D(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function A(t,e,n){var i=n;return D(t,function(t,r){i=0===r&&void 0===n?t:e(i,t,r)}),i}function k(t){var e=[];return I(t,function(t){e.push(t)}),e}function N(t,e){var n,i,r,o,a,s,l,u,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,f,u,c,h);break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)e(o.geometries[i],f,u,c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,f,u,c,h);f++}}function O(t,e,n){var i=n;return N(t,function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),i}function R(t,n){N(t,function(t,i,r,o,a){var s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,r,{bbox:o,id:a}),i,0)}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon"}t.coordinates.forEach(function(t,o){n(e({type:l,coordinates:t},r),i,o)})})}function F(t,e,n){var i=n;return R(t,function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)}),i}function z(t,e){R(t,function(t,n,i){var r=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&T(t,function(o,a,l,u,c,h){var f=s([o,a],t.properties);return e(f,n,i,h,r),r++,a})}})}function B(t,e,n){var i=n,r=!1;return z(t,function(t,o,a,s,l){i=!1===r&&void 0===n?t:e(i,t,o,a,s,l),r=!0}),i}function V(t,e){if(!t)throw new Error("geojson is required");R(t,function(t,n,i){if(null!==t.geometry){var r=t.geometry.type,o=t.geometry.coordinates;switch(r){case"LineString":e(t,n,i,0,0);break;case"Polygon":for(var a=0;a<o.length;a++)e(s(o[a],t.properties),n,i,a)}}})}function G(t,e,n){var i=n;return V(t,function(t,r,o,a){i=0===r&&void 0===n?t:e(i,t,r,o,a)}),i}function H(t){var e=[1/0,1/0,-1/0,-1/0];return I(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function j(t){if(!t)throw new Error("obj is required");var e=U(t);if(e.length>1&&C(e[0])&&C(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function U(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return W(e),e;throw new Error("No valid coordinates")}function W(t){if(t.length>1&&C(t[0])&&C(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return W(t[0]);throw new Error("coordinates must only contain numbers")}function q(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function Y(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function X(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}}function Z(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function J(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function K(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function $(t,e,n){n=n||{};for(var i=Object.keys(jo),r=0;r<i.length;r++){var o=i[r],a=n[o];a=void 0!==a&&null!==a?a:jo[o],Uo[o]=a}Uo.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.rows,t.cols,t.cells.forEach(function(i,r){i.forEach(function(i,o){if(void 0!==i&&!function(t){return 5===t.cval||10===t.cval}(i)&&!tt(i)){var a=function(t,e,n){var i,r,o,a=t.length,s=[],l=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=(t[e][n],t[e][n]),f=h.cval,p=nt(h,o=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][f]);s.push([n+p[0],e+p[1]]),p=nt(h,o=c[f]),s.push([n+p[0],e+p[1]]),et(h);for(var d=n+l[f],g=e+u[f],m=f;d>=0&&g>=0&&g<a&&(d!=n||g!=e)&&void 0!==(h=t[g][d]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};o=c[f],i=l[f],r=u[f],5!==f&&10!==f||(5===f?h.flipped?-1===u[m]?(o="left",i=-1,r=0):(o="right",i=1,r=0):-1===l[m]&&(o="bottom",i=0,r=-1):10===f&&(h.flipped?-1===l[m]?(o="top",i=0,r=1):(o="bottom",i=0,r=-1):1===u[m]&&(o="left",i=-1,r=0))),p=nt(h,o),s.push([d+p[0],g+p[1]]),et(h),d+=i,g+=r,m=f}return{path:s,info:"closed"}}(t.cells,r,o),s=!1;if("mergeable"===a.info)for(var l=a.path[a.path.length-1][0],u=a.path[a.path.length-1][1],c=n-1;c>=0;c--)if(Math.abs(e[c][0][0]-l)<=1e-7&&Math.abs(e[c][0][1]-u)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[c].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}})}),e}(function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[];for(var a=0;a<i;++a){var s=0,l=t[o+1][a],u=t[o+1][a+1],c=t[o][a+1],h=t[o][a];if(!(isNaN(l)||isNaN(u)||isNaN(c)||isNaN(h))){s|=l>=e?8:0,s|=u>=e?4:0,s|=c>=e?2:0;var f=!1;if(5===(s|=h>=e?1:0)||10===s){var p=(l+u+c+h)/4;5===s&&p<e?(s=10,f=!0):10===s&&p<e&&(s=5,f=!0)}if(0!==s&&15!==s){var d,g,m,v;d=g=m=v=.5,1===s?(m=1-Q(e,l,h),g=1-Q(e,c,h)):2===s?(g=Q(e,h,c),v=1-Q(e,u,c)):3===s?(m=1-Q(e,l,h),v=1-Q(e,u,c)):4===s?(d=Q(e,l,u),v=Q(e,c,u)):5===s?(d=Q(e,l,u),v=Q(e,c,u),g=1-Q(e,c,h),m=1-Q(e,l,h)):6===s?(g=Q(e,h,c),d=Q(e,l,u)):7===s?(m=1-Q(e,l,h),d=Q(e,l,u)):8===s?(m=Q(e,h,l),d=1-Q(e,u,l)):9===s?(g=1-Q(e,c,h),d=1-Q(e,u,l)):10===s?(d=1-Q(e,u,l),v=1-Q(e,u,c),g=Q(e,h,c),m=Q(e,h,l)):11===s?(d=1-Q(e,u,l),v=1-Q(e,u,c)):12===s?(m=Q(e,h,l),v=Q(e,c,u)):13===s?(g=1-Q(e,c,h),v=Q(e,c,u)):14===s?(m=Q(e,h,l),g=Q(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),r.cells[o][a]={cval:s,flipped:f,top:d,right:v,bottom:g,left:m}}}}}return r}(t,e));return"function"==typeof Uo.successCallback&&Uo.successCallback(s),s}function Q(t,e,n){return(t-e)/(n-e)}function tt(t){return 0===t.cval||15===t.cval}function et(t){tt(t)||5===t.cval||10===t.cval||(t.cval=15)}function nt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function it(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;X(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){var e=n[t],i=e.sort(function(t,e){return U(t)[0]-U(e)[0]});return i}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,i),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===r&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}function rt(t,e,n,i,r){for(n=n||0,i=i||t.length-1,r=r||function(t,e){return t<e?-1:t>e?1:0};i>n;){if(i-n>600){var o=i-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);rt(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(i,Math.floor(e+(o-a)*l/o+u)),r)}var c=t[e],h=n,f=i;for(ot(t,n,e),r(t[i],c)>0&&ot(t,n,i);h<f;){for(ot(t,h,f),h++,f--;r(t[h],c)<0;)h++;for(;r(t[f],c)>0;)f--}0===r(t[n],c)?ot(t,n,f):ot(t,++f,i),f<=e&&(n=f+1),e<=f&&(i=f-1)}}function ot(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function at(t,e){return this instanceof at?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear(),void 0):new at(t,e)}function st(t,e){lt(t,0,t.children.length,e,t)}function lt(t,e,n,i,r){r||(r=mt(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],ut(r,t.leaf?i(o):o);return r}function ut(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ct(t,e){return t.minX-e.minX}function ht(t,e){return t.minY-e.minY}function ft(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function pt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function gt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function mt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vt(t,e,n,i,r){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,Wo(t,o,e,n,r),a.push(e,o,o,n))}function yt(t,e){return e={exports:{}},t(e,e.exports),e.exports}function _t(t,e){if(!(this instanceof _t))return new _t(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||function(t,e){return t<e?-1:t>e?1:0},this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function xt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var i,r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var s=[e,n,i,r],l=s.slice();for(o=0;o<t.length;o++)ra(t[o],s)||l.push(t[o]);var u=ta(l),c=[];for(o=0;o<u.length;o++)c.push(l[u[o]]);return c}(t),o=qo(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<r.length;s++){var l=r[s];o.remove(l),i=Mt(l,i),a.push(i)}var u=qo(16);for(s=0;s<a.length;s++)u.insert(St(a[s]));for(var c=e*e,h=n*n;a.length;){var f=a.shift(),p=f.p,d=f.next.p,g=Et(p,d);if(!(g<h)){var m=g/c;(l=function(t,e,n,i,r,o,a){for(var s=new na(null,wt),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],h=l.leaf?It(c,n,i):function(t,e,n){if(bt(t,n)||bt(e,n))return 0;var i=Tt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=Tt(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=Tt(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=Tt(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,o,a)}(n,i,c);h>o||s.push({node:c,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),p=f.node,d=It(p,e,n),g=It(p,i,r);if(f.dist<d&&f.dist<g&&Ct(n,p,a)&&Ct(i,p,a))return p}(l=s.pop())&&(l=l.node)}return null}(o,f.prev.p,p,d,f.next.next.p,m,u))&&Math.min(Et(l,p),Et(l,d))<=m&&(a.push(f),a.push(Mt(l,f)),o.remove(l),u.remove(f),u.insert(St(f)),u.insert(St(f.next)))}}f=i;var v=[];do v.push(f.p),f=f.next;while(f!==i);return v.push(f.p),v}function wt(t,e){return t.dist-e.dist}function bt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Ct(t,e,n){for(var i=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),s=n.search({minX:i,minY:r,maxX:o,maxY:a}),l=0;l<s.length;l++)if(function(t,e,n,i){return t!==i&&e!==n&&oa(t,e,n)>0!=oa(t,e,i)>0&&oa(n,i,t)>0!=oa(n,i,e)>0}(s[l].p,s[l].next.p,t,e))return!1;return!0}function St(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Mt(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Et(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function It(t,e,n){var i=e[0],r=e[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var s=((t[0]-i)*o+(t[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return o=t[0]-i,a=t[1]-r,o*o+a*a}function Tt(t,e,n,i,r,o,a,s){var l,u,c,h,f=n-t,p=i-e,d=a-r,g=s-o,m=t-r,v=e-o,y=f*f+p*p,_=f*d+p*g,x=d*d+g*g,w=f*m+p*v,b=d*m+g*v,C=y*x-_*_,S=C,M=C;0===C?(u=0,S=1,h=b,M=x):(h=y*b-_*w,(u=_*b-x*w)<0?(u=0,h=b,M=x):u>S&&(u=S,h=b+_,M=x)),h<0?(h=0,-w<0?u=0:-w>y?u=S:(u=-w,S=y)):h>M&&(h=M,-w+_<0?u=0:-w+_>y?u=S:(u=-w+_,S=y)),l=0===u?0:u/S;var E=(1-(c=0===h?0:h/M))*r+c*a-((1-l)*t+l*n),I=(1-c)*o+c*s-((1-l)*e+l*i);return E*E+I*I}function Pt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.concavity||1/0,i=[];if(I(t,function(t){i.push([t[0],t[1]])}),!i.length)return null;var r=aa(i,n);return r.length>3?o([r]):null}function Lt(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=j(t),o=U(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===a&&(o=[o]);for(var l=0,u=!1;l<o.length&&!u;l++)if(Dt(r,o[l][0],i)){for(var c=!1,h=1;h<o[l].length&&!c;)Dt(r,o[l][h],!i)&&(c=!0),h++;c||(u=!0)}return u}function Dt(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],s=e[r][1],l=e[o][0],u=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+u*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!=u>t[1]&&t[0]<(l-a)*(t[1]-s)/(u-s)+a&&(i=!i)}return i}function At(t,e){var n=[];return N(e,function(e){D(t,function(t){Lt(t,e)&&n.push(t)})}),u(n)}function kt(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return u(function(t){if(t.length<3)return[];t.sort(Ot);for(var e,n,i,r,o,a,s=t.length-1,l=t[s].x,u=t[0].x,c=t[s].y,h=c;s--;)t[s].y<c&&(c=t[s].y),t[s].y>h&&(h=t[s].y);var f,p=u-l,d=h-c,g=p>d?p:d,m=.5*(u+l),v=.5*(h+c),y=[new Nt({x:m-20*g,y:v-g,__sentinel:!0},{x:m,y:v+20*g,__sentinel:!0},{x:m+20*g,y:v-g,__sentinel:!0})],_=[],x=[];for(s=t.length;s--;){for(x.length=0,f=y.length;f--;)(p=t[s].x-y[f].x)>0&&p*p>y[f].r?(_.push(y[f]),y.splice(f,1)):(d=t[s].y-y[f].y,p*p+d*d>y[f].r||(x.push(y[f].a,y[f].b,y[f].b,y[f].c,y[f].c,y[f].a),y.splice(f,1)));for(Rt(x),f=x.length;f;)n=x[--f],e=x[--f],i=t[s],r=n.x-e.x,o=n.y-e.y,a=2*(r*(i.y-n.y)-o*(i.x-n.x)),Math.abs(a)>1e-12&&y.push(new Nt(e,n,i))}for(Array.prototype.push.apply(_,y),s=_.length;s--;)(_[s].a.__sentinel||_[s].b.__sentinel||_[s].c.__sentinel)&&_.splice(s,1);return _}(t.features.map(function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i})).map(function(t){var e=[t.a.x,t.a.y],i=[t.b.x,t.b.y],r=[t.c.x,t.c.y],a={};return n?(e.push(t.a.z),i.push(t.b.z),r.push(t.c.z)):a={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,i,r,e]],a)}))}function Nt(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+a*(t.y+e.y),c=s*(t.x+n.x)+l*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(l*u-a*c)/h,this.y=(o*c-s*u)/h,i=this.x-t.x,r=this.y-t.y,this.r=i*i+r*r}function Ot(t,e){return e.x-t.x}function Rt(t){var e,n,i,r,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],i=a;i;)if(o=t[--i],r=t[--i],e===r&&n===o||e===o&&n===r){t.splice(a,2),t.splice(i,2),a-=2;continue t}}function Ft(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.units,r=j(t),o=j(e),a=x(o[1]-r[1]),s=x(o[0]-r[0]),l=x(r[1]),u=x(o[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(l)*Math.cos(u);return g(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i)}function zt(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Bt(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return Bt(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Gt(t);default:throw new Error("unknown GeoJSON type")}}function Bt(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=Vt(t.properties),e.geometry=Gt(t.geometry),e}function Vt(t){var e={};return t?(Object.keys(t).forEach(function(n){var i=t[n];"object"==typeof i?null===i?e[n]=null:i.length?e[n]=i.map(function(t){return t}):e[n]=Vt(i):e[n]=i}),e):e}function Gt(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Gt(t)}),e):(e.coordinates=Ht(t.coordinates),e)}function Ht(t){return"object"!=typeof t[0]?t.slice():t.map(function(t){return Ht(t)})}function jt(t,e){function n(t,e){e.length&&e.pop();for(var n=u[t<0?~t:t],i=0,r=n.length;i<r;++i)e.push(l(n[i],i));t<0&&ca(e,r)}function i(t){return l(t)}function r(t){for(var e=[],i=0,r=t.length;i<r;++i)n(t[i],e);
return e.length<2&&e.push(e[0]),e}function o(t){for(var e=r(t);e.length<4;)e.push(e[0]);return e}function a(t){return t.map(o)}function s(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(s)};case"Point":e=i(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(i);break;case"LineString":e=r(t.arcs);break;case"MultiLineString":e=t.arcs.map(r);break;case"Polygon":e=a(t.arcs);break;case"MultiPolygon":e=t.arcs.map(a);break;default:return null}return{type:n,coordinates:e}}var l=ua(t.transform),u=t.arcs;return s(e)}function Ut(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}}function i(t){t.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)})}),a.push(t)}function r(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0];return Math.abs(o)}(jt(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},a=[],s=[];return e.forEach(n),a.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,s.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),a.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:s.map(function(e){var n,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&i.push(t)})})}),i=ha(t,i),(n=i.length)>1)for(var a,s,l=1,u=r(i[0]);l<n;++l)(a=r(i[l]))>u&&(s=i[0],i[0]=i[l],i[l]=s,u=a);return i})}}function Wt(t,e,n){for(var i,r=e+(n-- -e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function qt(t){return null==t?{type:null}:("FeatureCollection"===t.type?function(t){var e={type:"GeometryCollection",geometries:t.features.map(Yt)};return null!=t.bbox&&(e.bbox=t.bbox),e}:"Feature"===t.type?Yt:Xt)(t)}function Yt(t){var e,n=Xt(t.geometry);null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox);for(e in t.properties){n.properties=t.properties;break}return n}function Xt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Xt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Zt(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function Jt(t,e){var n,i=t[0],r=t[1],o=e[0],a=e[1];return r<i&&(n=i,i=r,r=n),a<o&&(n=o,o=a,a=n),i===o&&r===a}function Kt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=zt(t));var i=[],r=G(t,function(t,e){var n=function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,o=$t(i[0]),a=$t(i[i.length-1]),l=$t(r[0]),u=$t(r[r.length-1]);if(o===u)n=r.concat(i.slice(1));else if(l===a)n=i.concat(r.slice(1));else if(o===l)n=i.slice(1).reverse().concat(r);else{if(a!==u)return null;n=i.concat(r.reverse().slice(1))}return s(n)}(t,e);return n||(i.push(t),e)});return r&&i.push(r),i.length?1===i.length?i[0]:c(i.map(function(t){return t.coordinates})):null}function $t(t){return t[0].toString()+","+t[1].toString()}function Qt(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=zt(t));var i=function(t){var e={};R(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");switch(i){case"LineString":return Kt(t,e);case"Polygon":return function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==K(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=zt(t));var i=[];R(t,function(t){i.push(t.geometry)});var r=ba({geoms:p(i).geometry});return fa(r,r.objects.geoms.geometries)}(t,e);default:throw new Error(i+" is not supported")}}function te(t,n){var i="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var r=K(t),o=[];switch(r){case"LineString":o=ee(t);break;case"MultiLineString":case"Polygon":U(t).forEach(function(t){o.push(ee(t))});break;case"MultiPolygon":U(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(ee(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var a={};U(t).forEach(function(t){var e=t.join("-");a.hasOwnProperty(e)||(o.push(t),a[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===i?(t.coordinates=o,t):{type:r,coordinates:o}:!0===i?(t.geometry.coordinates=o,t):e({type:r,coordinates:o},t.properties,t.bbox,t.id)}function ee(t){var e=U(t);if(2===e.length&&!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(e[0],e[1]))return e;var n,i,r,o=[],a=e.length-1;o.push(e[0]);for(var s=1;s<a;s++)n=e[s-1],i=e[s],function(t,e,n){var i=n[0],r=n[1],o=t[0],a=t[1],s=e[0],l=e[1],u=s-o,c=l-a;return(i-o)*c-(r-a)*u==0&&(Math.abs(u)>=Math.abs(c)?u>0?o<=i&&i<=s:s<=i&&i<=o:c>0?a<=r&&r<=l:l<=r&&r<=a)}(n,r=e[s+1],i)||o.push(i);return o.push(r),o}function ne(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function ie(t,e,n){var i=e.x,r=e.y,o=n.x-i,a=n.y-r;if(0!==o||0!==a){var s=((t.x-i)*o+(t.y-r)*a)/(o*o+a*a);s>1?(i=n.x,r=n.y):s>0&&(i+=o*s,r+=a*s)}return o=t.x-i,a=t.y-r,o*o+a*a}function re(t,e,n,i,r){for(var o,a=i,s=e+1;s<n;s++){var l=ie(t[s],t[e],t[n]);l>a&&(o=s,a=l)}a>i&&(o-e>1&&re(t,e,o,i,r),r.push(t[o]),n-o>1&&re(t,o,n,i,r))}function oe(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,i=t[0],r=[i],o=1,a=t.length;o<a;o++)ne(n=t[o],i)>e&&(r.push(n),i=n);return i!==n&&r.push(n),r}(t,i),t=function(t,e){var n=t.length-1,i=[t[0]];return re(t,0,n,e,i),i.push(t[n]),i}(t,i)}function ae(t,e,n){return oe(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function se(t,e,n){return t.map(function(t){var i=t.map(function(t){return{x:t[0],y:t[1]}});if(i.length<4)throw new Error("invalid polygon");for(var r=oe(i,e,n).map(function(t){return[t.x,t.y]});!function(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}(r);)r=oe(i,e-=.01*e,n).map(function(t){return[t.x,t.y]});return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r})}function le(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.resolution||1e4,i=e.sharpness||.85;if(!t)throw new Error("line is required");if(!C(n))throw new Error("resolution must be an number");if(!C(i))throw new Error("sharpness must be an number");for(var r=[],o=new Ca({points:Z(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:i}),a=0;a<o.duration;a+=10){var l=o.pos(a);Math.floor(a/100)%2==0&&r.push([l.x,l.y])}return s(r,t.properties)}function ue(t){M(t);var e=Number(t[0]),n=Number(t[1]),i=Number(t[2]),r=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[e,n];return o([[a,[i,n],[i,r],[e,r],a]])}function ce(t){return ue(H(t))}function he(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(Ft(t.slice(0,2),[i,n])>=Ft(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var a=(e+i)/2;return[a-(r-n)/2,n,a+(r-n)/2,r]}function fe(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var o=r.units,a=r.properties,s=j(t),l=x(s[0]),u=x(s[1]),c=x(n),h=m(e,o),f=Math.asin(Math.sin(u)*Math.cos(h)+Math.cos(u)*Math.sin(h)*Math.cos(c));return i([_(l+Math.atan2(Math.sin(c)*Math.sin(h)*Math.cos(u),Math.cos(h)-Math.sin(u)*Math.sin(f))),_(f)],a)}function pe(t,e,n){var i=(n=n||{}).steps||64,r=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be a number");i=i||64,r=r||t.properties||{};for(var a=[],s=0;s<i;s++)a.push(fe(t,e,-360*s/i,n).geometry.coordinates);return a.push(a[0]),o([a],r)}function de(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!0===n.final)return function(t,e){var n=de(e,t);return n=(n+180)%360}(t,e);var i=j(t),r=j(e),o=x(i[0]),a=x(r[0]),s=x(i[1]),l=x(r[1]),u=Math.sin(a-o)*Math.cos(l),c=Math.cos(s)*Math.sin(l)-Math.sin(s)*Math.cos(l)*Math.cos(a-o);return _(Math.atan2(u,c))}function ge(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=H(t);return i([(r[0]+r[2])/2,(r[1]+r[3])/2],n)}function me(t,e){var n=0,r=0,o=0;return I(t,function(t){n+=t[0],r+=t[1],o++},!0),i([n/o,r/o],e)}function ve(t,e){switch(K(t)){case"Point":return t;case"Polygon":var n=[];I(t,function(t){n.push(t)});var r,o,a,s,l,u,c,h,f=me(t,e),p=f.geometry.coordinates,d=0,g=0,m=0,v=n.map(function(t){return[t[0]-p[0],t[1]-p[1]]});for(r=0;r<n.length-1;r++)s=(o=v[r])[0],u=o[1],l=(a=v[r+1])[0],m+=h=s*(c=a[1])-l*u,d+=(s+l)*h,g+=(u+c)*h;if(0===m)return f;var y=1/(6*(.5*m));return i([p[0]+y*d,p[1]+y*g],e);default:var _=Pt(t);return _?ve(_,e):me(t,e)}}function ye(t){var e=[];return"FeatureCollection"===t.type?D(t,function(t){I(t,function(n){e.push(i(n,t.properties))})}):I(t,function(n){e.push(i(n,t.properties))}),u(e)}function _e(t,e,n){n=n||2;var i=e&&e.length,r=i?e[0]*n:t.length,o=xe(t,0,r,n,!0),a=[];if(!o)return a;var s,l,u,c,h,f,p;if(i&&(o=function(t,e,n,i){var r,o,a,s,l,u=[];for(r=0,o=e.length;r<o;r++)a=e[r]*i,s=r<o-1?e[r+1]*i:t.length,(l=xe(t,a,s,i,!1))===l.next&&(l.steiner=!0),u.push(function(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}(l));for(u.sort(Ce),r=0;r<u.length;r++)!function(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&Me(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<f||l===f&&i.x>n.x)&&Pe(i,t)&&(n=i,f=l),i=i.next;return n}(t,e)){var n=Le(e,t);we(n,n.next)}}(u[r],n),n=we(n,n.next);return n}(t,e,o,n)),t.length>80*n){s=u=t[0],l=c=t[1];for(var d=n;d<r;d+=n)h=t[d],f=t[d+1],h<s&&(s=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);p=0!==(p=Math.max(u-s,c-l))?1/p:0}return be(o,a,n,s,l,p),a}function xe(t,e,n,i,r){var o,a;if(r===Ne(t,e,n,i)>0)for(o=e;o<n;o+=i)a=De(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=De(o,t[o],t[o+1],a);return a&&Ie(a,a.next)&&(Ae(a),a=a.next),a}function we(t,e){if(!t)return t;e||(e=t);var n,i=t;do if(n=!1,i.steiner||!Ie(i,i.next)&&0!==Ee(i.prev,i,i.next))i=i.next;else{if(Ae(i),(i=e=i.prev)===i.next)break;n=!0}while(n||i!==e);return e}function be(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do null===r.z&&(r.z=Se(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(a>1)}(r)}(t,i,r,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?function(t,e,n,i){var r=t.prev,o=t,a=t.next;if(Ee(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,u=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=Se(s,l,e,n,i),f=Se(u,c,e,n,i),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&Me(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ee(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Me(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Ee(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}(t,i,r,o):function(t){var e=t.prev,n=t,i=t.next;if(Ee(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Me(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Ee(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Ae(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?be(t=function(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!Ie(r,o)&&Te(r,i,i.next,o)&&Pe(r,o)&&Pe(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Ae(i),Ae(i.next),i=t=o),i=i.next}while(i!==t);return i}(t,e,n),e,n,i,r,o,2):2===a&&function(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Te(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Pe(t,e)&&Pe(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}(t,e)}(a,s)){var l=Le(a,s);return a=we(a,a.next),l=we(l,l.next),be(a,e,n,i,r,o),void be(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}(t,e,n,i,r,o):be(we(t),e,n,i,r,o,1);break}}}function Ce(t,e){return t.x-e.x}function Se(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Me(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function Ee(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ie(t,e){return t.x===e.x&&t.y===e.y}function Te(t,e,n,i){return!!(Ie(t,e)&&Ie(n,i)||Ie(t,i)&&Ie(n,e))||Ee(t,e,n)>0!=Ee(t,e,i)>0&&Ee(n,i,t)>0!=Ee(n,i,e)>0}function Pe(t,e){return Ee(t.prev,t,t.next)<0?Ee(t,e,t.next)>=0&&Ee(t,t.prev,e)>=0:Ee(t,e,t.prev)<0||Ee(t,t.next,e)<0}function Le(t,e){var n=new ke(t.i,t.x,t.y),i=new ke(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function De(t,e,n,i){var r=new ke(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ae(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ke(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ne(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Oe(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=Sa(e.vertices,e.holes,2),i=[],r=[];n.forEach(function(t,i){var o=n[i];r.push([e.vertices[2*o],e.vertices[2*o+1]])});for(var a=0;a<r.length;a+=3){var s=r.slice(a,a+3);s.push(r[a]),i.push(o([s]))}return i}function Re(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0;return D(e,function(e,r){var o=Ft(t,e);o<i&&((n=zt(e)).properties.featureIndex=r,n.properties.distanceToPoint=o,i=o)}),n}function Fe(t,e,n,i,r){ze(t,e,n||0,i||t.length-1,r||function(t,e){return t<e?-1:t>e?1:0})}function ze(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ze(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(i,Math.floor(e+(o-a)*l/o+u)),r)}var c=t[e],h=n,f=i;for(Be(t,n,e),r(t[i],c)>0&&Be(t,n,i);h<f;){for(Be(t,h,f),h++,f--;r(t[h],c)<0;)h++;for(;r(t[f],c)>0;)f--}0===r(t[n],c)?Be(t,n,f):Be(t,++f,i),f<=e&&(n=f+1),e<=f&&(i=f-1)}}function Be(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Ve(t,e){return this instanceof Ve?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear(),void 0):new Ve(t,e)}function Ge(t,e){He(t,0,t.children.length,e,t)}function He(t,e,n,i,r){r||(r=Je(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],je(r,t.leaf?i(o):o);return r}function je(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Ue(t,e){return t.minX-e.minX}function We(t,e){return t.minY-e.minY}function qe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ye(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Xe(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ze(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Je(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ke(t,e,n,i,r){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(Fe(t,o=e+Math.ceil((n-e)/i/2)*i,e,n,r),a.push(e,o,o,n))}function $e(t){var e=Ve(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Qe(e)).bbox=e}else t.bbox=t.bbox?t.bbox:tn(t);return Ve.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=Qe(t);n.bbox=t,e.push(n)}):D(t,function(t){t.bbox=t.bbox?t.bbox:tn(t),e.push(t)}),Ve.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Qe(e)).bbox=e}return Ve.prototype.remove.call(this,t)},e.clear=function(){return Ve.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Ve.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Ve.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Ve.prototype.all.call(this)}},e.toJSON=function(){return Ve.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ve.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:tn(t),{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Qe(t){var e=[t[0],t[1]],n=[t[0],t[3]],i=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],i,n,e]]}}}function tn(t){var e=[1/0,1/0,-1/0,-1/0];return I(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function en(t){if(!t)throw new Error("geojson is required");var e=[];return R(t,function(t){!function(t,e){var n=[],i=t.geometry;switch(i.type){case"Polygon":n=U(i);break;case"LineString":n=[U(i)]}n.forEach(function(n){var i=function(t,e){var n=[];return t.reduce(function(t,i){var r=s([t,i],e);return r.bbox=function(t,e){var n=t[0],i=t[1],r=e[0],o=e[1];return[n<r?n:r,i<o?i:o,n>r?n:r,i>o?i:o]}(t,i),n.push(r),i}),n}(n,t.properties);i.forEach(function(t){t.id=e.length,e.push(t)})})}(t,e)}),u(e)}function nn(t,n){var i={},r=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=rn(t,n);return o&&r.push(o),u(r)}var a=$e();return a.load(en(n)),D(en(t),function(t){D(a.search(t),function(e){var n=rn(t,e);if(n){var o=U(n).join(",");i[o]||(i[o]=!0,r.push(n))}})}),u(r)}function rn(t,e){var n=U(t),r=U(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],a=n[0][1],s=n[1][0],l=n[1][1],u=r[0][0],c=r[0][1],h=r[1][0],f=r[1][1],p=(f-c)*(s-o)-(h-u)*(l-a),d=(h-u)*(a-c)-(f-c)*(o-u),g=(s-o)*(a-c)-(l-a)*(o-u);if(0===p)return null;var m=d/p,v=g/p;return m>=0&&m<=1&&v>=0&&v<=1?i([o+m*(s-o),a+m*(l-a)]):null}function on(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=t.geometry?t.geometry.type:t.type;if("LineString"!==r&&"MultiLineString"!==r)throw new Error("lines must be LineString or MultiLineString");var o=i([1/0,1/0],{dist:1/0}),a=0;return R(t,function(t){for(var r=U(t),l=0;l<r.length-1;l++){var u=i(r[l]);u.properties.dist=Ft(e,u,n);var c=i(r[l+1]);c.properties.dist=Ft(e,c,n);var h=Ft(u,c,n),f=Math.max(u.properties.dist,c.properties.dist),p=de(u,c),d=fe(e,f,p+90,n),g=fe(e,f,p-90,n),m=nn(s([d.geometry.coordinates,g.geometry.coordinates]),s([u.geometry.coordinates,c.geometry.coordinates])),v=null;m.features.length>0&&((v=m.features[0]).properties.dist=Ft(e,v,n),v.properties.location=a+Ft(u,v,n)),u.properties.dist<o.properties.dist&&((o=u).properties.index=l,o.properties.location=a),c.properties.dist<o.properties.dist&&((o=c).properties.index=l+1,o.properties.location=a+h),v&&v.properties.dist<o.properties.dist&&((o=v).properties.index=l),a+=h}}),o}function an(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");var r;return(r=i?sn(j(e),j(t)):sn(j(t),j(e)))>180?-(360-r):r}function sn(t,e){var n=x(t[1]),i=x(e[1]),r=x(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(_(Math.atan2(r,o))+360)%360}function ln(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var r=j(t),o=j(e);return o[0]+=o[0]-r[0]>180?-360:r[0]-o[0]>180?360:0,w(function(t,e,n){var i=n=void 0===n?Ro:Number(n),r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,a=o-r,s=Math.abs(e[0]-t[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var l=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),u=Math.abs(l)>1e-11?a/l:Math.cos(r);return Math.sqrt(a*a+u*u*s*s)*i}(r,o),"meters",i)}function un(t,e){return hn(t,"mercator",e)}function cn(t,e){return hn(t,"wgs84",e)}function hn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&C(t[0])?t="mercator"===e?fn(t):pn(t):(!0!==i&&(t=zt(t)),I(t,function(t){var n="mercator"===e?fn(t):pn(t);t[0]=n[0],t[1]=n[1]})),t}function fn(t){var e=Math.PI/180,n=20037508.342789244,i=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>n&&(i[0]=n),i[0]<-n&&(i[0]=-n),i[1]>n&&(i[1]=n),i[1]<-n&&(i[1]=-n),i}function pn(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function dn(t,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=i(t):"Point"===t.type?t=e(t):Y(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=s(n):"LineString"===n.type?n=e(n):Y(n,"LineString","line");var o=1/0,a=t.geometry.coordinates;return z(n,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],s=function(t,e,n,r){var o=r.mercator,a=!0!==o?Ft(e,t,r):gn(e,t,r),s=y(!0!==o?de(e,t):an(e,t)),l=y(!0!==o?de(e,n):an(e,n)),u=Math.abs(s-l);if(u>90)return a;var c=(l+180)%360,h=y(!0!==o?de(n,t):an(n,t)),f=Math.abs(h-c);return f>180&&(f=Math.abs(f-360)),f>90?!0!==o?Ft(t,n,r):gn(t,n,r):!0!==o?a*Math.sin(x(u)):function(t,e,n,r){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var a=i(n),s=un([t[0]+o,t[1]]),l=un([e[0]+o,e[1]]),u=un([n[0]+o,n[1]]),c=cn(function(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1],s=n[0],l=n[1],u=o-i,c=a-r,h=((s-i)*u+(l-r)*c)/(u*u+c*c);return[i+h*u,r+h*c]}(s,l,u));return 0!==o&&(c[0]-=o),ln(a,c,r)}(e,n,t,r)}(a,e,n,r);o>s&&(o=s)}),o}function gn(t,e,n){var i=n.units,r=0;Math.abs(t[0])>=180&&(r=t[0]>0?-180:180),Math.abs(e[0])>=180&&(r=e[0]>0?-180:180);var o=un([t[0]+r,t[1]]),a=un([e[0]+r,e[1]]),s=function(t){return t*t},l=s(o[0]-a[0])+s(o[1]-a[1]);return w(Math.sqrt(l),"meters",i)}function mn(t){for(var n=function(t){return"FeatureCollection"!==t.type?u("Feature"!==t.type?[e(t)]:[t]):t}(t),r=ge(n),o=!1,a=0;!o&&a<n.features.length;){var s,l=n.features[a].geometry,c=!1;if("Point"===l.type)r.geometry.coordinates[0]===l.coordinates[0]&&r.geometry.coordinates[1]===l.coordinates[1]&&(o=!0);else if("MultiPoint"===l.type){var h=!1;for(s=0;!h&&s<l.coordinates.length;)r.geometry.coordinates[0]===l.coordinates[s][0]&&r.geometry.coordinates[1]===l.coordinates[s][1]&&(o=!0,h=!0),s++}else if("LineString"===l.type)for(s=0;!c&&s<l.coordinates.length-1;)vn(r.geometry.coordinates[0],r.geometry.coordinates[1],l.coordinates[s][0],l.coordinates[s][1],l.coordinates[s+1][0],l.coordinates[s+1][1])&&(c=!0,o=!0),s++;else if("MultiLineString"===l.type)for(var f=0;f<l.coordinates.length;){c=!1,s=0;for(var p=l.coordinates[f];!c&&s<p.length-1;)vn(r.geometry.coordinates[0],r.geometry.coordinates[1],p[s][0],p[s][1],p[s+1][0],p[s+1][1])&&(c=!0,o=!0),s++;f++}else"Polygon"!==l.type&&"MultiPolygon"!==l.type||Lt(r,l)&&(o=!0);a++}if(o)return r;var d=u([]);for(a=0;a<n.features.length;a++)d.features=d.features.concat(ye(n.features[a]).features);return i(Re(r,d).geometry.coordinates)}function vn(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}function yn(t){return O(t,function(t,e){return t+_n(e)},0)}function _n(t){var e,n=0;switch(t.type){case"Polygon":return xn(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=xn(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=_n(t.geometries[e]);return n}}function xn(t){var e=0;if(t&&t.length>0){e+=Math.abs(wn(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(wn(t[n]))}return e}function wn(t){var e,n,i,r,o,a,s=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(i=l-2,r=l-1,o=0):a===l-1?(i=l-1,r=0,o=1):(i=a,r=a+1,o=a+2),e=t[i],n=t[r],s+=(bn(t[o][0])-bn(e[0]))*Math.sin(bn(n[1]));s=s*Ia*Ia/2}return s}function bn(t){return t*Math.PI/180}function Cn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return B(t,function(t,n){var i=n.geometry.coordinates;return t+Ft(i[0],i[1],e)},0)}function Sn(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var a,l,u,c=0,h=0;h<r.length&&!(e>=c&&h===r.length-1);h++){if(c>e&&0===o.length){if(!(a=e-c))return o.push(r[h]),s(o);l=de(r[h],r[h-1])-180,u=fe(r[h],a,l,i),o.push(u.geometry.coordinates)}if(c>=n)return(a=n-c)?(l=de(r[h],r[h-1])-180,u=fe(r[h],a,l,i),o.push(u.geometry.coordinates),s(o)):(o.push(r[h]),s(o));if(c>=e&&o.push(r[h]),h===r.length-1)return s(o);c+=Ft(r[h],r[h+1],i)}return s(r[r.length-1])}function Mn(t,e,n){var i=(n=n||{}).ignoreEndVertices;if(!S(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var r=j(t),o=U(e),a=0;a<o.length-1;a++){var s=!1;if(i&&(0===a&&(s="start"),a===o.length-2&&(s="end"),0===a&&a+1===o.length-1&&(s="both")),function(t,e,n,i){var r=n[0],o=n[1],a=t[0],s=t[1],l=e[0],u=e[1],c=n[0]-a,h=n[1]-s,f=l-a,p=u-s;return c*p-h*f==0&&(i?"start"===i?Math.abs(f)>=Math.abs(p)?f>0?a<r&&r<=l:l<=r&&r<a:p>0?s<o&&o<=u:u<=o&&o<s:"end"===i?Math.abs(f)>=Math.abs(p)?f>0?a<=r&&r<l:l<r&&r<=a:p>0?s<=o&&o<u:u<o&&o<=s:"both"===i?Math.abs(f)>=Math.abs(p)?f>0?a<r&&r<l:l<r&&r<a:p>0?s<o&&o<u:u<o&&o<s:void 0:Math.abs(f)>=Math.abs(p)?f>0?a<=r&&r<=l:l<=r&&r<=a:p>0?s<=o&&o<=u:u<=o&&o<=s)}(o[a],o[a+1],r,s))return!0}return!1}function En(t,e){var n=K(t),i=K(e),r=Z(t),o=Z(e);switch(n){case"Point":switch(i){case"MultiPoint":return function(t,e){var n,i=!1;for(n=0;n<e.coordinates.length;n++)if(Tn(e.coordinates[n],t.coordinates)){i=!0;break}return i}(r,o);case"LineString":return Mn(r,o,{ignoreEndVertices:!0});case"Polygon":return Lt(r,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)Tn(t.coordinates[n],e.coordinates[r])&&(i=!0);if(!i)return!1}return!0}(r,o);case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!Mn(t.coordinates[i],e))return!1;n||(n=Mn(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(r,o);case"Polygon":return function(t,e){for(var n=!0,i=0;i<t.coordinates.length;i++){var r=Lt(t.coordinates[1],e);if(!r){n=!1;break}r=Lt(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Mn(t.coordinates[n],e))return!1;return!0}(r,o);case"Polygon":return function(t,e){var n=H(e),i=H(t);if(!In(n,i))return!1;for(var r=!1,o=0;o<t.coordinates.length-1;o++){if(!Lt(t.coordinates[o],e))return!1;if(r||(r=Lt(t.coordinates[o],e,{ignoreBoundary:!0})),!r){var a=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(t.coordinates[o],t.coordinates[o+1]);r=Lt(a,e,{ignoreBoundary:!0})}}return r}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Polygon":return function(t,e){var n=H(t);if(!In(H(e),n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!Lt(t.coordinates[0][i],e))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function In(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Tn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Pn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r=n.mask,o=n.properties,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(K(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],l=t[1],c=t[2],h=t[3],f=e/Ft([s,l],[c,l],n)*(c-s),p=e/Ft([s,l],[s,h],n)*(h-l),d=c-s,g=h-l,m=Math.floor(d/f),v=(g-Math.floor(g/p)*p)/2,y=s+(d-m*f)/2;y<=c;){for(var _=l+v;_<=h;){var x=i([y,_],o);r?En(x,r)&&a.push(x):a.push(x),_+=p}y+=f}return u(a)}function Ln(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.precision,i=e.coordinates,r=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,i=void 0===i||null===i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return I(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,o,i)}),t}function Dn(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Dn(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function An(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function kn(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!kn(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Nn(t,e){var n=[],i=$e();return R(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var r=i.search(e);if(r.features.length){var o=Rn(e,r);n=n.filter(function(t){return t.id!==o.id}),i.remove(o),D(On(o,e),function(t){n.push(t),i.insert(t)})}}else(n=On(t,e).features).forEach(function(t){
t.bbox||(t.bbox=he(H(t)))}),i.load(u(n))}),u(n)}function On(t,e){var n=[],i=U(t)[0],r=U(t)[t.geometry.coordinates.length-1];if(Fn(i,j(e))||Fn(r,j(e)))return u([t]);var o=$e(),a=en(t);o.load(a);var l=o.search(e);if(!l.features.length)return u([t]);var c=Rn(e,l),h=A(a,function(t,i,r){var o=U(i)[1],a=j(e);return r===c.id?(t.push(a),n.push(s(t)),Fn(a,o)?[a]:[a,o]):(t.push(o),t)},[i]);return h.length>1&&n.push(s(h)),u(n)}function Rn(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return D(e,function(e){var r=on(e,t).properties.dist;r<i&&(n=e,i=r)}),n}function Fn(t,e){return t[0]===e[0]&&t[1]===e[1]}function zn(t,e,n,i,r){if(r=r||{},!S(r))throw new Error("options is invalid");var o=r.steps,a=r.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===i||null===i)throw new Error("bearing2 is required");if("object"!=typeof r)throw new Error("options must be an object");o=o||64;var l=Bn(n),u=Bn(i),c=t.properties;if(l===u)return s(pe(t,e,r).geometry.coordinates[0],c);for(var h=l,f=l<u?u:u+360,p=h,d=[],g=0;p<f;)d.push(fe(t,e,p,a).geometry.coordinates),p=h+360*++g/o;return p>f&&d.push(fe(t,e,f,a).geometry.coordinates),s(d,c)}function Bn(t){var e=t%360;return e<0&&(e+=360),e}function Vn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,i=K(t),r=U(t);if(n=n||t.properties||{},!r.length)throw new Error("polygon must contain coordinates");switch(i){case"Polygon":return Gn(r,n);case"MultiPolygon":var o=[];return r.forEach(function(t){o.push(Gn(t,n))}),u(o);default:throw new Error("geom "+i+" not supported")}}function Gn(t,e){return t.length>1?c(t,e):s(t[0],e)}function Hn(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,i=e.autoComplete,r=e.orderCoords;if(!t)throw new Error("lines is required");switch(i=void 0===i||i,r=void 0===r||r,K(t)){case"FeatureCollection":case"GeometryCollection":var o=[];return(t.features?t.features:t.geometries).forEach(function(t){o.push(U(jn(t,{},i,r)))}),f(o,n)}return jn(t,n,i,r)}function jn(t,e,n,i){e=e||t.properties||{};var r=U(t),a=K(t);if(!r.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(r=Un(r)),o([r],e);case"MultiLineString":var l=[],u=0;return r.forEach(function(t){if(n&&(t=Un(t)),i){var e=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.abs(e-i)*Math.abs(n-r)}(H(s(t)));e>u?(l.unshift(t),u=e):l.push(t)}else l.push(t)}),o(l,e);default:throw new Error("geometry type "+a+" is not supported")}}function Un(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],a=r[1];return n===o&&i===a||t.push(e),t}function Wn(t,e,n){var i,r,o,a,s,l=t.length,u=Yn(t[0],e),c=[];for(n||(n=[]),i=1;i<l;i++){for(r=t[i-1],a=s=Yn(o=t[i],e);;){if(!(u|a)){c.push(r),a!==s?(c.push(o),i<l-1&&(n.push(c),c=[])):i===l-1&&c.push(o);break}if(u&a)break;u?u=Yn(r=qn(r,o,u,e),e):a=Yn(o=qn(r,o,a,e),e)}u=s}return c.length&&n.push(c),n}function qn(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function Yn(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Xn(t,e){for(var n=[],i=0;i<t.length;i++){var r=za.polygon(t[i],e);r.length>0&&(r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]||r.push(r[0]),r.length>=4&&n.push(r))}return n}function Zn(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function Jn(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?(n.strict,t===e):function(t,e,n){var i,r;if(Kn(t)||Kn(e))return!1;if(t.prototype!==e.prototype)return!1;if(Zn(t))return!!Zn(e)&&(t=Ba.call(t),e=Ba.call(e),Jn(t,e,n));if($n(t)){if(!$n(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=Object.keys(t),a=Object.keys(e)}catch(t){return!1}if(o.length!==a.length)return!1;for(o.sort(),a.sort(),i=o.length-1;i>=0;i--)if(o[i]!==a[i])return!1;for(i=o.length-1;i>=0;i--)if(r=o[i],!Jn(t[r],e[r],n))return!1;return typeof t==typeof e}(t,e,n))}function Kn(t){return null===t||void 0===t}function $n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function Qn(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.tolerance||0,r=[],o=$e();o.load(en(t));var a;return z(e,function(t){var e=!1;D(o.search(t),function(n){if(!1===e){var r=U(t).sort(),o=U(n).sort();Jn(r,o)?(e=!0,a=a?ti(a,t):t):(0===i?Mn(r[0],n)&&Mn(r[1],n):on(n,r[0]).properties.dist<=i&&on(n,r[1]).properties.dist<=i)?(e=!0,a=a?ti(a,t):t):(0===i?Mn(o[0],t)&&Mn(o[1],t):on(t,o[0]).properties.dist<=i&&on(t,o[1]).properties.dist<=i)&&(a=a?ti(a,n):n)}}),!1===e&&a&&(r.push(a),a=void 0)}),a&&r.push(a),u(r)}function ti(t,e){var n=U(e),i=U(t),r=i[0],o=i[i.length-1],a=t.geometry.coordinates;return Jn(n[0],r)?a.unshift(n[1]):Jn(n[0],o)?a.push(n[1]):Jn(n[1],r)?a.unshift(n[0]):Jn(n[1],o)&&a.push(n[0]),t}function ei(t){var e=t%360;return e<0&&(e+=360),e}function ni(t,e,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var o=r.units,a=r.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var s=w(e,o,"meters"),l=j(t),u=function(t,e,n,i){i=void 0===i?Ro:Number(i);var r=e/i,o=t[0]*Math.PI/180,a=x(t[1]),s=x(n),l=r*Math.cos(s),u=a+l;Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u);var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),h=Math.abs(c)>1e-11?l/c:Math.cos(a),f=r*Math.sin(s)/h;return[(180*(o+f)/Math.PI+540)%360-180,180*u/Math.PI]}(l,s,n);return u[0]+=u[0]-l[0]>180?-360:l[0]-u[0]>180?360:0,i(u,a)}function ii(t,e,n,i,r,o){for(var a=0;a<t.length;a++){var s=t[a],l=t[a+1];a===t.length-1&&(l=t[0]),i=ri(s,l,e),n<=0&&i>0?function(t,e,n){return ri(t,e,n)<0}(e,s,r)||(r=s):n>0&&i<=0&&(function(t,e,n){return ri(t,e,n)>0}(e,s,o)||(o=s)),n=i}return[r,o]}function ri(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function oi(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,i,r=U(t),o=0,a=1;a<r.length;)n=i||r[0],o+=((i=r[a])[0]-n[0])*(i[1]+n[1]),a++;return o>0}function ai(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return N(t,function(t){ai(t,e)}),t;case"LineString":return si(U(t),e),t;case"Polygon":return li(U(t),e),t;case"MultiLineString":return U(t).forEach(function(t){si(t,e)}),t;case"MultiPolygon":return U(t).forEach(function(t){li(t,e)}),t;case"Point":case"MultiPoint":return t}}function si(t,e){oi(t)===e&&t.reverse()}function li(t,e){oi(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)oi(t[n])===e&&t[n].reverse()}function ui(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;X(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,function(t){var e=U(t)[1];n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).map(function(t){var e=n[t],i=e.sort(function(t,e){return U(t)[0]-U(e)[0]});return i}).sort(function(t,n){return e?U(t[0])[1]-U(n[0])[1]:U(n[0])[1]-U(t[0])[1]})}(t,i),a=[],s=0;s<o.length;s++){for(var l=o[s],u=[],c=0;c<l.length;c++){var h=l[c];h.properties[n]?u.push(h.properties[n]):u.push(0),!0===r&&(h.properties.matrixPosition=[s,c])}a.push(u)}return a}function ci(t,e,n,i){i=i||{};for(var r=Object.keys(Va),o=0;o<r.length;o++){var a=r[o],s=i[a];s=void 0!==s&&null!==s?s:Va[a],Ga[a]=s}Ga.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var l,u=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},a=e+Math.abs(n),s=0;s<i;++s){o.cells[s]=[];for(var l=0;l<r;++l){var u=0,c=t[s+1][l],h=t[s+1][l+1],f=t[s][l+1],p=t[s][l];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){u|=c<e?0:c>a?128:64,u|=h<e?0:h>a?32:16,u|=f<e?0:f>a?8:4;var d=+(u|=p<e?0:p>a?2:1),g=0;if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var m=(c+h+f+p)/4;g=m>a?2:m<e?0:1,34===u?1===g?u=35:0===g&&(u=136):136===u?1===g?(u=35,g=4):0===g&&(u=34):17===u?1===g?(u=155,g=4):0===g&&(u=153):68===u?1===g?(u=103,g=4):0===g&&(u=102):153===u?1===g&&(u=155):102===u?1===g&&(u=103):152===u?g<2&&(u=156,g=1):137===u?g<2&&(u=139,g=1):98===u?g<2&&(u=99,g=1):38===u?g<2&&(u=39,g=1):18===u?g>0?(u=156,g=4):u=152:33===u?g>0?(u=139,g=4):u=137:72===u?g>0?(u=99,g=4):u=98:132===u&&(g>0?(u=39,g=4):u=38)}if(0!=u&&170!=u){var v,y,_,x,w,b,C,S;v=y=_=x=w=b=C=S=.5;var M=[];1===u?(_=1-hi(e,f,p),S=1-hi(e,c,p),M.push(Is[u])):169===u?(_=hi(a,p,f),S=hi(a,p,c),M.push(Is[u])):4===u?(b=1-hi(e,h,f),x=hi(e,p,f),M.push(Ms[u])):166===u?(b=hi(a,f,h),x=1-hi(a,f,p),M.push(Ms[u])):16===u?(w=hi(e,f,h),y=hi(e,c,h),M.push(Ss[u])):154===u?(w=1-hi(a,h,f),y=1-hi(a,h,c),M.push(Ss[u])):64===u?(C=hi(e,p,c),v=1-hi(e,h,c),M.push(Ps[u])):106===u?(C=1-hi(a,c,p),v=hi(a,c,h),M.push(Ps[u])):168===u?(x=hi(a,p,f),_=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),M.push(Es[u]),M.push(Is[u])):2===u?(x=1-hi(e,f,p),_=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),M.push(Es[u]),M.push(Is[u])):162===u?(w=hi(a,f,h),b=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),M.push(Es[u]),M.push(Is[u])):8===u?(w=1-hi(e,h,f),b=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),M.push(Ss[u]),M.push(Ms[u])):138===u?(w=1-hi(e,h,f),b=1-hi(a,h,f),v=1-hi(a,h,c),y=1-hi(e,h,c),M.push(Ss[u]),M.push(Ms[u])):32===u?(w=hi(a,f,h),b=hi(e,f,h),v=hi(e,c,h),y=hi(a,c,h),M.push(Ss[u]),M.push(Ms[u])):42===u?(S=1-hi(a,c,p),C=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h),M.push(Ts[u]),M.push(Ps[u])):128===u&&(S=hi(e,p,c),C=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c),M.push(Ts[u]),M.push(Ps[u])),5===u?(b=1-hi(e,h,f),S=1-hi(e,c,p),M.push(Ms[u])):165===u?(b=hi(a,f,h),S=hi(a,p,c),M.push(Ms[u])):20===u?(x=hi(e,p,f),y=hi(e,c,h),M.push(Es[u])):150===u?(x=1-hi(a,f,p),y=1-hi(a,h,c),M.push(Es[u])):80===u?(w=hi(e,f,h),C=hi(e,p,c),M.push(Ss[u])):90===u?(w=1-hi(a,h,f),C=1-hi(a,c,p),M.push(Ss[u])):65===u?(_=1-hi(e,f,p),v=1-hi(e,h,c),M.push(Is[u])):105===u?(_=hi(a,p,f),v=hi(a,c,h),M.push(Is[u])):160===u?(w=hi(a,f,h),b=hi(e,f,h),S=hi(e,p,c),C=hi(a,p,c),M.push(Ss[u]),M.push(Ms[u])):10===u?(w=1-hi(e,h,f),b=1-hi(a,h,f),S=1-hi(a,c,p),C=1-hi(e,c,p),M.push(Ss[u]),M.push(Ms[u])):130===u?(x=1-hi(e,f,p),_=1-hi(a,f,p),v=1-hi(a,h,c),y=1-hi(e,h,c),M.push(Es[u]),M.push(Is[u])):40===u?(x=hi(a,p,f),_=hi(e,p,f),v=hi(e,c,h),y=hi(a,c,h),M.push(Es[u]),M.push(Is[u])):101===u?(b=hi(a,f,h),v=hi(a,c,h),M.push(Ms[u])):69===u?(b=1-hi(e,h,f),v=1-hi(e,h,c),M.push(Ms[u])):149===u?(S=hi(a,p,c),y=1-hi(a,h,c),M.push(Ts[u])):21===u?(S=1-hi(e,c,p),y=hi(e,c,h),M.push(Ts[u])):86===u?(x=1-hi(a,f,p),C=1-hi(a,c,p),M.push(Es[u])):84===u?(x=hi(e,p,f),C=hi(e,p,c),M.push(Es[u])):89===u?(w=1-hi(a,h,f),_=hi(a,p,f),M.push(Is[u])):81===u?(w=hi(e,f,h),_=1-hi(e,f,p),M.push(Is[u])):96===u?(w=hi(a,f,h),b=hi(e,f,h),C=hi(e,p,c),v=hi(a,c,h),M.push(Ss[u]),M.push(Ms[u])):74===u?(w=1-hi(e,h,f),b=1-hi(a,h,f),C=1-hi(a,c,p),v=1-hi(e,h,c),M.push(Ss[u]),M.push(Ms[u])):24===u?(w=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),y=hi(e,c,h),M.push(Ss[u]),M.push(Is[u])):146===u?(w=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),y=1-hi(a,h,c),M.push(Ss[u]),M.push(Is[u])):6===u?(b=1-hi(e,h,f),x=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),M.push(Ms[u]),M.push(Es[u])):164===u?(b=hi(a,f,h),x=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),M.push(Ms[u]),M.push(Es[u])):129===u?(_=1-hi(e,f,p),S=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c),M.push(Is[u]),M.push(Ts[u])):41===u?(_=hi(a,p,f),S=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h),M.push(Is[u]),M.push(Ts[u])):66===u?(x=1-hi(e,f,p),_=1-hi(a,f,p),C=1-hi(a,c,p),v=1-hi(e,h,c),M.push(Es[u]),M.push(Is[u])):104===u?(x=hi(a,p,f),_=hi(e,p,f),C=hi(e,p,c),v=hi(a,c,h),M.push(Is[u]),M.push(Ls[u])):144===u?(w=hi(e,f,h),S=hi(e,p,c),C=hi(a,p,c),y=1-hi(a,h,c),M.push(Ss[u]),M.push(Ps[u])):26===u?(w=1-hi(a,h,f),S=1-hi(a,c,p),C=1-hi(e,c,p),y=hi(e,c,h),M.push(Ss[u]),M.push(Ps[u])):36===u?(b=hi(a,f,h),x=hi(e,p,f),v=hi(e,c,h),y=hi(a,c,h),M.push(Ms[u]),M.push(Es[u])):134===u?(b=1-hi(e,h,f),x=1-hi(a,f,p),v=1-hi(a,h,c),y=1-hi(e,h,c),M.push(Ms[u]),M.push(Es[u])):9===u?(w=1-hi(e,h,f),b=1-hi(a,h,f),_=hi(a,p,f),S=1-hi(e,c,p),M.push(Ss[u]),M.push(Ms[u])):161===u?(w=hi(a,f,h),b=hi(e,f,h),_=1-hi(e,f,p),S=hi(a,p,c),M.push(Ss[u]),M.push(Ms[u])):37===u?(b=hi(a,f,h),S=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h),M.push(Ms[u]),M.push(Ts[u])):133===u?(b=1-hi(e,h,f),S=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c),M.push(Ms[u]),M.push(Ts[u])):148===u?(x=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),y=1-hi(a,h,c),M.push(Es[u]),M.push(Ps[u])):22===u?(x=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),y=hi(e,c,h),M.push(Es[u]),M.push(Ps[u])):82===u?(w=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),C=1-hi(a,c,p),M.push(Ss[u]),M.push(Is[u])):88===u?(w=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),C=hi(e,p,c),M.push(Ss[u]),M.push(Is[u])):73===u?(w=1-hi(e,h,f),b=1-hi(a,h,f),_=hi(a,p,f),v=1-hi(e,h,c),M.push(Ss[u]),M.push(Ms[u])):97===u?(w=hi(a,f,h),b=hi(e,f,h),_=1-hi(e,f,p),v=hi(a,c,h),M.push(Ss[u]),M.push(Ms[u])):145===u?(w=hi(e,f,h),_=1-hi(e,f,p),S=hi(a,p,c),y=1-hi(a,h,c),M.push(Ss[u]),M.push(Ts[u])):25===u?(w=1-hi(a,h,f),_=hi(a,p,f),S=1-hi(e,c,p),y=hi(e,c,h),M.push(Ss[u]),M.push(Ts[u])):70===u?(b=1-hi(e,h,f),x=1-hi(a,f,p),C=1-hi(a,c,p),v=1-hi(e,h,c),M.push(Ms[u]),M.push(Es[u])):100===u?(b=hi(a,f,h),x=hi(e,p,f),C=hi(e,p,c),v=hi(a,c,h),M.push(Ms[u]),M.push(Es[u])):34===u?(0===g?(w=1-hi(e,h,f),b=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c)):(w=hi(a,f,h),b=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h)),M.push(Ss[u]),M.push(Ms[u]),M.push(Ts[u]),M.push(Ps[u])):35===u?(4===g?(w=1-hi(e,h,f),b=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c)):(w=hi(a,f,h),b=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h)),M.push(Ss[u]),M.push(Ms[u]),M.push(Is[u]),M.push(Ps[u])):136===u?(0===g?(w=hi(a,f,h),b=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h)):(w=1-hi(e,h,f),b=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c)),M.push(Ss[u]),M.push(Ms[u]),M.push(Ts[u]),M.push(Ps[u])):153===u?(0===g?(w=hi(e,f,h),_=1-hi(e,f,p),S=1-hi(e,c,p),y=hi(e,c,h)):(w=1-hi(a,h,f),_=hi(a,p,f),S=hi(a,p,c),y=1-hi(a,h,c)),M.push(Ss[u]),M.push(Is[u])):102===u?(0===g?(b=1-hi(e,h,f),x=hi(e,p,f),C=hi(e,p,c),v=1-hi(e,h,c)):(b=hi(a,f,h),x=1-hi(a,f,p),C=1-hi(a,c,p),v=hi(a,c,h)),M.push(Ms[u]),M.push(Ps[u])):155===u?(4===g?(w=hi(e,f,h),_=1-hi(e,f,p),S=1-hi(e,c,p),y=hi(e,c,h)):(w=1-hi(a,h,f),_=hi(a,p,f),S=hi(a,p,c),y=1-hi(a,h,c)),M.push(Ss[u]),M.push(Ts[u])):103===u?(4===g?(b=1-hi(e,h,f),x=hi(e,p,f),C=hi(e,p,c),v=1-hi(e,h,c)):(b=hi(a,f,h),x=1-hi(a,f,p),C=1-hi(a,c,p),v=hi(a,c,h)),M.push(Ms[u]),M.push(Es[u])):152===u?(0===g?(w=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),y=hi(e,c,h)):(w=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),y=1-hi(a,h,c)),M.push(Ss[u]),M.push(Es[u]),M.push(Is[u])):156===u?(4===g?(w=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),y=hi(e,c,h)):(w=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),y=1-hi(a,h,c)),M.push(Ss[u]),M.push(Is[u]),M.push(Ps[u])):137===u?(0===g?(w=hi(a,f,h),b=hi(e,f,h),_=1-hi(e,f,p),S=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h)):(w=1-hi(e,h,f),b=1-hi(a,h,f),_=hi(a,p,f),S=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c)),M.push(Ss[u]),M.push(Ms[u]),M.push(Is[u])):139===u?(4===g?(w=hi(a,f,h),b=hi(e,f,h),_=1-hi(e,f,p),S=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h)):(w=1-hi(e,h,f),b=1-hi(a,h,f),_=hi(a,p,f),S=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c)),M.push(Ss[u]),M.push(Ms[u]),M.push(Ts[u])):98===u?(0===g?(w=1-hi(e,h,f),b=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),C=hi(e,p,c),v=1-hi(e,h,c)):(w=hi(a,f,h),b=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),C=1-hi(a,c,p),v=hi(a,c,h)),M.push(Ss[u]),M.push(Ms[u]),M.push(Ps[u])):99===u?(4===g?(w=1-hi(e,h,f),b=1-hi(a,h,f),x=hi(a,p,f),_=hi(e,p,f),C=hi(e,p,c),v=1-hi(e,h,c)):(w=hi(a,f,h),b=hi(e,f,h),x=1-hi(e,f,p),_=1-hi(a,f,p),C=1-hi(a,c,p),v=hi(a,c,h)),M.push(Ss[u]),M.push(Ms[u]),M.push(Is[u])):38===u?(0===g?(b=1-hi(e,h,f),x=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c)):(b=hi(a,f,h),x=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h)),M.push(Ms[u]),M.push(Ts[u]),M.push(Ps[u])):39===u?(4===g?(b=1-hi(e,h,f),x=hi(e,p,f),S=hi(e,p,c),C=hi(a,p,c),v=1-hi(a,h,c),y=1-hi(e,h,c)):(b=hi(a,f,h),x=1-hi(a,f,p),S=1-hi(a,c,p),C=1-hi(e,c,p),v=hi(e,c,h),y=hi(a,c,h)),M.push(Ms[u]),M.push(Es[u]),M.push(Ps[u])):85===u&&(w=1,b=0,x=1,_=0,S=0,C=1,v=0,y=1),(v<0||v>1||y<0||y>1||w<0||w>1||x<0||x>1||S<0||S>1||C<0||C>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+d+" "+c+","+h+","+f+","+p+" "+g+" "+v+" "+y+" "+w+" "+b+" "+x+" "+_+" "+S+" "+C),o.cells[s][l]={cval:u,cval_real:d,flipped:g,topleft:v,topright:y,righttop:w,rightbottom:b,bottomright:x,bottomleft:_,leftbottom:S,lefttop:C,edges:M}}}}}return o}(t,e,n);return Ga.polygons?(Ga.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0;return t.cells.forEach(function(t,i){t.forEach(function(t,r){if(void 0!==t){var o=As[t.cval](t);"object"==typeof o&&fi(o)?"object"==typeof o[0]&&fi(o[0])?"object"==typeof o[0][0]&&fi(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=r,t[1]+=i}),e[n++]=t}):(o.forEach(function(t){t[0]+=r,t[1]+=i}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}(u)):(Ga.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var a=0;a<i;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=t.cells[o][a],l=function(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&ja?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&Ua?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&Ua?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&Wa?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&ja?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&Ua?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&Ua?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&Wa?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&Ua?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&Wa?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&Wa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Ha?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&Ua?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&Wa?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&Wa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Ha?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&Ua?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Ha?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&Wa?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Ha?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Ha?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&ja?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Ha?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&ja?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}(s),u=null,c=a,h=o;null!==l&&r.push([l.p[0]+c,l.p[1]+h]);do{if(null===(u=function(t,e,n,i){var r,o,a,s,l,u=t.cval;switch(e){case-1:switch(i){case 0:r=Ms[u],a=es[u],s=ns[u],l=is[u];break;default:r=Ss[u],a=$a[u],s=Qa[u],l=ts[u]}break;case 1:switch(i){case 0:r=Ts[u],a=ps[u],s=ds[u],l=gs[u];break;default:r=Ps[u],a=cs[u],s=hs[u],l=fs[u]}break;default:switch(n){case-1:switch(i){case 0:r=Ls[u],a=qa[u],s=Ya[u],l=Xa[u];break;default:r=Ds[u],a=Za[u],s=Ja[u],l=Ka[u]}break;case 1:switch(i){case 0:r=Is[u],a=rs[u],s=os[u],l=as[u];break;default:r=Es[u],a=ss[u],s=ls[u],l=us[u]}}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(!function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),u=t.cval_real,r){case 0:u&ja?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:u&Ua?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:u&Ua?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:u&Wa?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:u&ja?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:u&Ua?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:u&Ua?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:u&Wa?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:u&Ua?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:u&Wa?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:u&Wa?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:u&Ha?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:u&Ua?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:u&Wa?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:u&Wa?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:u&Ha?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:u&Ua?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:u&Ha?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:u&Wa?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:u&Ha?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:u&Ha?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:u&ja?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:u&Ha?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:u&ja?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+l)),{p:[e,n],x:a,y:s,o:l}}(t.cells[h][c],l.x,l.y,l.o)))break;if(r.push([u.p[0]+c,u.p[1]+h]),c+=u.x,h+=u.y,l=u,h<0||h>=n||c<0||c>=i||void 0===t.cells[h][c]){c-=u.x,h-=u.y;var f=function(t,e,n,i,r,o){for(var a=t.cells[n][e],s=a.cval_real,l=e+i,u=n+r,c=[],h=!1;!h;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(u-=r,l-=i,a=t.cells[u][l],s=a.cval_real,-1===r)if(0===o)if(s&Wa)c.push([l,u]),i=-1,r=0,o=0;else{if(!(s&Ua)){c.push([l+a.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l+1,u]),i=1,r=0,o=0}else{if(!(s&Wa)){if(s&Ua){c.push([l+a.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l+a.bottomleft,u]),i=0,r=1,o=0,h=!0;break}c.push([l,u]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(s&ja)){if(s&Ha){c.push([l+a.topleft,u+1]),i=0,r=-1,o=0,h=!0;break}c.push([l+a.topright,u+1]),i=0,r=-1,o=1,h=!0;break}c.push([l+1,u+1]),i=1,r=0,o=1}else c.push([l+1,u+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(s&Ha)){if(s&Wa){c.push([l,u+a.leftbottom]),i=1,r=0,o=0,h=!0;break}c.push([l,u+a.lefttop]),i=1,r=0,o=1,h=!0;break}c.push([l,u+1]),i=0,r=1,o=0}else{if(!(s&Ha)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([l,u+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(s&Ua)){c.push([l+1,u+a.rightbottom]),i=-1,r=0,o=0,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}else{if(!(s&Ua)){if(s&ja){c.push([l+1,u+a.righttop]),i=-1,r=0,o=1;break}c.push([l+1,u+a.rightbottom]),i=-1,r=0,o=0,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}}else if(a=t.cells[u][l],s=a.cval_real,-1===i)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])i=0,r=-1,o=1;else{if(!(s&Wa)){c.push([l+a.bottomright,u]),i=0,r=1,o=1,h=!0;break}c.push([l,u])}else{if(!(s&Ha)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])i=0,r=1,o=0;else{if(!(s&ja)){c.push([l+a.topleft,u+1]),i=0,r=-1,o=0,h=!0;break}c.push([l+1,u+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l+1])i=1,r=0,o=1;else{if(!(s&Ua)){c.push([l+1,u+a.righttop]),i=-1,r=0,o=1,h=!0;break}c.push([l+1,u]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[u][l-1])i=-1,r=0,o=0;else{if(!(s&Ha)){c.push([l,u+a.leftbottom]),i=1,r=0,o=0,h=!0;break}c.push([l,u+1]),i=0,r=1,o=0}}if(l+=i,u+=r,l===e&&u===n)break}return{path:c,i:l,j:u,x:i,y:r,o:o}}(t,c,h,u.x,u.y,u.o);if(null===f)break;f.path.forEach(function(t){r.push(t)}),c=f.i,h=f.j,l=f}}while(void 0!==t.cells[h][c]&&t.cells[h][c].edges.length>0);e.push(r),r=[],t.cells[o][a].edges.length>0&&a--}return e}(u)),"function"==typeof Ga.successCallback&&Ga.successCallback(l),l}function hi(t,e,n){return(t-e)/(n-e)}function fi(t){return t.constructor.toString().indexOf("Array")>-1}function pi(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e?t:(i||(i=me(t)),!1!==r&&void 0!==r||(t=zt(t)),I(t,function(t){var n=an(i,t)+e,r=ln(i,t),o=U(ni(i,r,n));t[0]=o[0],t[1]=o[1]}),t)}function di(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=zt(t)),"FeatureCollection"!==t.type||o?gi(t,e,i):(D(t,function(n,r){t.features[r]=gi(n,e,i)}),t)}function gi(t,e,n){var r="Point"===K(t);return n=function(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return j(e);var n=t.bbox?t.bbox:H(t),r=n[0],o=n[1],a=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return i([r,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return i([a,o]);case"nw":case"northwest":case"westnorth":case"topleft":return i([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return i([a,s]);case"center":return ge(t);case void 0:case null:case"centroid":return me(t);default:throw new Error("invalid origin")}}(t,n),1===e||r?t:(I(t,function(t){var i=ln(n,t),r=an(n,t),o=U(ni(n,i*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)}),t)}function mi(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function vi(t,e){return t[0]*e[1]-e[0]*t[1]}function yi(t,e){return!function(t,e){return 0===vi(mi(t),mi(e))}(t,e)&&function(t,e){var n=t[0],i=mi(t),r=e[0],o=mi(e),a=vi(i,o);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(n,function(t,e){return[t*e[0],t*e[1]]}(vi(function(t,e){return[t[0]-e[0],t[1]-e[1]]}(r,n),o)/a,i))}(t,e)}function _i(t,e,n){var i=[],r=v(e,n),o=U(t),a=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=function(t,e,n){var i=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),r=t[0]+n*(e[1]-t[1])/i,o=e[0]+n*(e[1]-t[1])/i,a=t[1]+n*(t[0]-e[0])/i,s=e[1]+n*(t[0]-e[0])/i;return[[r,a],[o,s]]}(t,o[e+1],r);if(i.push(n),e>0){var s=i[e-1],l=yi(n,s);!1!==l&&(s[1]=l,n[0]=l),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}}),s(a,t.properties)}function xi(t,e,n){var i=e[0]-t[0],r=e[1]-t[1],o=n[0]-e[0],a=n[1]-e[1];return Math.sign(i*a-o*r)}function wi(t,e){return e.geometry.coordinates[0].every(function(e){return Lt(i(e),t)})}function bi(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(function(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return i*a-r*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Ci(t,e){return nn(e,Vn(t)).features.length>0}function Si(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Mi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ei(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),Pi(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:i=!0}o++}return n&&i}function Ii(t,e){return nn(t,Vn(e)).features.length>0}function Ti(t,e){for(var n=!1,r=!1,o=t.coordinates[0].length,a=0;a<o&&n&&r;)Lt(i(t.coordinates[0][a]),e)?n=!0:r=!0,a++;return r&&r}function Pi(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==r*s-o*a&&(i?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Li(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Di(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Ai(t,e){return Vs(t,e,{strict:!0})}function ki(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=K(t);if(n!==K(e))throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");if(new Hs({precision:6}).compare(t,e))return!1;var i=0;switch(n){case"MultiPoint":var r=k(t),o=k(e);r.forEach(function(t){o.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&i++})});break;case"LineString":case"MultiLineString":z(t,function(t){z(e,function(e){Qn(t,e).features.length&&i++})});break;case"Polygon":case"MultiPolygon":z(t,function(t){z(e,function(e){nn(t,e).features.length&&i++})})}return i>0}function Ni(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}function Oi(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Ri(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Fi(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new zi(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function zi(t,e,n){this.x=t,this.y=e,this.weight=n}function Bi(t){this.content=[],this.scoreFunction=t}function Vi(t){return t[0]}function Gi(t){return t[1]}function Hi(){this._=null}function ji(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ui(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Wi(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function qi(t){for(;t.L;)t=t.L;return t}function Yi(t,e,n,i){var r=[null,null],o=ll.push(r)-1;return r.left=t,r.right=e,n&&Zi(r,t,e,n),i&&Zi(r,e,t,i),al[t.index].halfedges.push(o),al[e.index].halfedges.push(o),r}function Xi(t,e,n){var i=[e,n];
return i.left=t,i}function Zi(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Ji(t,e,n,i,r){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,f=s[0]-l,p=s[1]-u;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*f,u+c*p]),h<1&&(t[1]=[l+h*f,u+h*p]),!0)}}}}}function Ki(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],f=u[1],p=c[0],d=c[1],g=(h+p)/2,m=(f+d)/2;if(d===f){if(g<e||g>=i)return;if(h>p){if(l){if(l[1]>=r)return}else l=[g,n];o=[g,r]}else{if(l){if(l[1]<n)return}else l=[g,r];o=[g,n]}}else if(a=(h-p)/(d-f),s=m-a*g,a<-1||a>1)if(h>p){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(f<d){if(l){if(l[0]>=i)return}else l=[e,a*e+s];o=[i,a*i+s]}else{if(l){if(l[0]<e)return}else l=[i,a*i+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function $i(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Qi(t,e){return e[+(e.left!==t.site)]}function tr(t,e){return e[+(e.left===t.site)]}function er(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,u=i[1]-s,c=o[0]-a,h=o[1]-s,f=2*(l*h-u*c);if(!(f>=-fl)){var p=l*l+u*u,d=c*c+h*h,g=(h*p-u*d)/f,m=(l*d-c*p)/f,v=ul.pop()||new function(){ji(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=r,v.x=g+a,v.y=(v.cy=m+s)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,_=sl._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}sl.insert(y,v),y||(rl=v)}}}}function nr(t){var e=t.circle;e&&(e.P||(rl=e.N),sl.remove(e),ul.push(e),ji(e),t.circle=null)}function ir(t){var e=cl.pop()||new function(){ji(this),this.edge=this.site=this.circle=null};return e.site=t,e}function rr(t){nr(t),ol.remove(t),cl.push(t),ji(t)}function or(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];rr(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<hl&&Math.abs(i-l.circle.cy)<hl;)o=l.P,s.unshift(l),rr(l),l=o;s.unshift(l),nr(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<hl&&Math.abs(i-u.circle.cy)<hl;)a=u.N,s.push(u),rr(u),u=a;s.push(u),nr(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],Zi(u.edge,l.site,u.site,r);l=s[0],(u=s[h-1]).edge=Yi(l.site,u.site,null,r),er(l),er(u)}function ar(t){for(var e,n,i,r,o=t[0],a=t[1],s=ol._;s;)if((i=sr(s,a)-o)>hl)s=s.L;else{if(!((r=o-function(t,e){var n=t.N;if(n)return sr(n,e);var i=t.site;return i[1]===e?i[0]:1/0}(s,a))>hl)){i>-hl?(e=s.P,n=s):r>-hl?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){al[t.index]={site:t,halfedges:[]}}(t);var l=ir(t);if(ol.insert(e,l),e||n){if(e===n)return nr(e),n=ir(e.site),ol.insert(l,n),l.edge=n.edge=Yi(e.site,l.site),er(e),void er(n);if(n){nr(e),nr(n);var u=e.site,c=u[0],h=u[1],f=t[0]-c,p=t[1]-h,d=n.site,g=d[0]-c,m=d[1]-h,v=2*(f*m-p*g),y=f*f+p*p,_=g*g+m*m,x=[(m*y-p*_)/v+c,(f*_-g*y)/v+h];Zi(n.edge,u,d,x),l.edge=Yi(u,t,null,x),n.edge=Yi(t,d,null,x),er(e),er(n)}else l.edge=Yi(e.site,l.site)}}function sr(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-i,h=1/o-1/u,f=c/u;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+s)/2}function lr(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function ur(t,e){return e[1]-t[1]||e[0]-t[0]}function cr(t,e){var n,i,r,o=t.sort(ur).pop();for(ll=[],al=new Array(t.length),ol=new Hi,sl=new Hi;;)if(r=rl,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(ar(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;or(r.arc)}if(function(){for(var t,e,n,i,r=0,o=al.length;r<o;++r)if((t=al[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=$i(t,ll[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];!function(t,e,n,i){for(var r,o=ll.length;o--;)Ki(r=ll[o],t,e,n,i)&&Ji(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>hl||Math.abs(r[0][1]-r[1][1])>hl)||delete ll[o]}(a,s,l,u),function(t,e,n,i){var r,o,a,s,l,u,c,h,f,p,d,g,m=al.length,v=!0;for(r=0;r<m;++r)if(o=al[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)ll[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)d=(p=tr(o,ll[l[s]]))[0],g=p[1],h=(c=Qi(o,ll[l[++s%u]]))[0],f=c[1],(Math.abs(d-h)>hl||Math.abs(g-f)>hl)&&(l.splice(s,0,ll.push(Xi(a,p,Math.abs(d-t)<hl&&i-g>hl?[t,Math.abs(h-t)<hl?f:i]:Math.abs(g-i)<hl&&n-d>hl?[Math.abs(f-i)<hl?h:n,i]:Math.abs(d-n)<hl&&g-e>hl?[n,Math.abs(h-n)<hl?f:e]:Math.abs(g-e)<hl&&d-t>hl?[Math.abs(f-e)<hl?h:t,e]:null))-1),++u);u&&(v=!1)}if(v){var y,_,x,w=1/0;for(r=0,v=null;r<m;++r)(o=al[r])&&(x=(y=(a=o.site)[0]-t)*y+(_=a[1]-e)*_)<w&&(w=x,v=o);if(v){var b=[t,e],C=[t,i],S=[n,i],M=[n,e];v.halfedges.push(ll.push(Xi(a=v.site,b,C))-1,ll.push(Xi(a,C,S))-1,ll.push(Xi(a,S,M))-1,ll.push(Xi(a,M,b))-1)}}for(r=0;r<m;++r)(o=al[r])&&(o.halfedges.length||delete al[r])}(a,s,l,u)}this.edges=ll,this.cells=al,ol=sl=ll=al=null}function hr(t){return(t=t.slice()).push(t[0]),o([t])}function fr(t,e,n,i){var r=(i=i||{}).steps||64,a=i.units||"kilometers",s=i.angle||0,l=i.pivot||t,u=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!S(i))throw new Error("options must be an object");if(!C(r))throw new Error("steps must be a number");if(!C(s))throw new Error("angle must be a number");var c=j(t);if("degrees"===a)var h=x(s);else e=ni(t,e,90,{units:a}),n=ni(t,n,0,{units:a}),e=j(e)[0]-c[0],n=j(n)[1]-c[1];for(var f=[],p=0;p<r;p+=1){var d=-360*p/r,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(pr(d),2)),m=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(pr(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(m=-m),"degrees"===a){var v=g*Math.cos(h)+m*Math.sin(h),y=m*Math.cos(h)-g*Math.sin(h);g=v,m=y}f.push([g+c[0],m+c[1]])}return f.push(f[0]),"degrees"===a?o([f],u):pi(o([f],u),s,{pivot:l})}function pr(t){var e=t*Math.PI/180;return Math.tan(e)}function dr(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.properties,r=e.weight;if(!t)throw new Error("geojson is required");var o=0,a=0,s=0;return N(t,function(t,e,n){var i=n[r];if(i=void 0===i||null===i?1:i,!C(i))throw new Error("weight value must be a number for feature index "+e);(i=Number(i))>0&&I(t,function(t){o+=t[0]*i,a+=t[1]*i,s+=i})}),i([o/s,a/s],n)}function gr(t,e,n,r){var o=n.properties.tolerance||.001,a=0,s=0,l=0,u=0;if(D(n,function(e){var n=e.properties.weight,i=void 0===n||null===n?1:n;if(i=Number(i),!C(i))throw new Error("weight value must be a number");if(i>0){u+=1;var r=i*Ft(e,t);0===r&&(r=1);var o=i/r;a+=e.geometry.coordinates[0]*o,s+=e.geometry.coordinates[1]*o,l+=o}}),u<1)throw new Error("no features to measure");var c=a/l,h=s/l;return 1===u||0===r||Math.abs(c-e[0])<o&&Math.abs(h-e[1])<o?i([c,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([c,h]),gr([c,h],t,n,r-1))}function mr(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function vr(t){if(S(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[360*wr(),180*wr()]}function yr(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var r=[],o=0;o<t;o++)r.push(i(vr(n)));return u(r)}function _r(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_radial_length;void 0!==t&&null!==t||(t=1),C(i)||(i=10),C(r)||(r=10);for(var a=[],s=0;s<t;s++){var l=[],c=Array.apply(null,new Array(i+1)).map(Math.random);c.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),c.forEach(function(t){t=2*t*Math.PI/c[c.length-1];var e=Math.random();l.push([e*r*Math.sin(t),e*r*Math.cos(t)])}),l[l.length-1]=l[0],l=l.map(function(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}(vr(n))),a.push(o([l]))}return u(a)}function xr(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!C(i)||i<2)&&(i=10),C(r)||(r=1e-4),C(o)||(o=Math.PI/8);for(var a=[],l=0;l<t;l++){for(var c=[vr(n)],h=0;h<i-1;h++){var f=(0===h?2*Math.random()*Math.PI:Math.tan((c[h][1]-c[h-1][1])/(c[h][0]-c[h-1][0])))+(Math.random()-.5)*o*2,p=Math.random()*r;c.push([c[h][0]+p*Math.cos(f),c[h][1]+p*Math.sin(f)])}a.push(s(c))}return u(a)}function wr(){return Math.random()-.5}function br(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return D(t,function(t){Er(t.properties,e)&&n.push(t)}),u(n)}function Cr(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var i=Mr(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var a=r[o],s=i[a],l=[],c=0;c<s.length;c++)l.push(t.features[s[c]]);n(u(l),a,o)}}function Sr(t,e,n,i){var r=i;return Cr(t,e,function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)}),r}function Mr(t,e){var n={};return D(t,function(t,i){var r=t.properties||{};if(r.hasOwnProperty(e)){var o=r[e];n.hasOwnProperty(o)?n[o].push(i):n[o]=[i]}}),n}function Er(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!Er(t,e[i]))return!1;return!0}return Ir(t,e)}function Ir(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function Tr(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];t.hasOwnProperty(r)&&(n[r]=t[r])}return n}function Pr(){}function Lr(t){this.message=t||""}function Dr(t){this.message=t||""}function Ar(){}function kr(t){return null===t?Nu:t.color}function Nr(t){return null===t?null:t.parent}function Or(t,e){null!==t&&(t.color=e)}function Rr(t){return null===t?null:t.left}function Fr(t){return null===t?null:t.right}function zr(){this.root_=null,this.size_=0}function Br(){}function Vr(){this.array_=[],arguments[0]instanceof _u&&this.addAll(arguments[0])}function Gr(){}function Hr(t){this.message=t||""}function jr(){this.array_=[]}function Ur(t){switch(t.type){case"Polygon":return yn(t)>1?t:null;case"MultiPolygon":var e=[];if(R(t,function(t){yn(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Wr(){this.reset()}function qr(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}function Yr(t){return t>1?Vp:t<-1?-Vp:Math.asin(t)}function Xr(){}function Zr(t,e){t&&ed.hasOwnProperty(t.type)&&ed[t.type](t,e)}function Jr(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Kr(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Jr(t[n],e,1);e.polygonEnd()}function $r(t){return[Yp(t[1],t[0]),Yr(t[2])]}function Qr(t){var e=t[0],n=t[1],i=Xp(n);return[i*Xp(e),i*Kp(e),Kp(n)]}function to(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function eo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function no(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function io(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ro(t){var e=$p(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function oo(t,e){return[t>Bp?t-Hp:t<-Bp?t+Hp:t,e]}function ao(t,e,n){return(t%=Hp)?e||n?id(lo(t),uo(e,n)):lo(t):e||n?uo(e,n):oo}function so(t){return function(e,n){return e+=t,[e>Bp?e-Hp:e<-Bp?e+Hp:e,n]}}function lo(t){var e=so(t);return e.invert=so(-t),e}function uo(t,e){function n(t,e){var n=Xp(e),s=Xp(t)*n,l=Kp(t)*n,u=Kp(e),c=u*i+s*r;return[Yp(l*o-c*a,s*i-u*r),Yr(c*o+l*a)]}var i=Xp(t),r=Kp(t),o=Xp(e),a=Kp(e);return n.invert=function(t,e){var n=Xp(e),s=Xp(t)*n,l=Kp(t)*n,u=Kp(e),c=u*o-l*a;return[Yp(l*o+u*a,s*i+c*r),Yr(c*i-s*r)]},n}function co(t,e){(e=Qr(e))[0]-=t,ro(e);var n=function(t){return t>1?0:t<-1?Bp:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+Hp-zp)%Hp}function ho(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function fo(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function po(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,s,u){var c=0,h=0;if(null==r||(c=a(r,s))!==(h=a(o,s))||l(r,o)<0^s>0){do u.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+s+4)%4)!==h)}else u.point(o[0],o[1])}function a(i,r){return Wp(i[0]-t)<zp?r>0?0:3:Wp(i[0]-n)<zp?r>0?2:1:Wp(i[1]-e)<zp?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function l(t,e){r(t,e)&&w.point(t,e)}function u(o,a){var s=r(o,a);if(h&&f.push([o,a]),_)p=o,d=a,g=s,_=!1,s&&(w.lineStart(),w.point(o,a));else if(s&&y)w.point(o,a);else{var l=[m=Math.max(fd,Math.min(hd,m)),v=Math.max(fd,Math.min(hd,v))],u=[o=Math.max(fd,Math.min(hd,o)),a=Math.max(fd,Math.min(hd,a))];ad(l,u,t,e,n,i)?(y||(w.lineStart(),w.point(l[0],l[1])),w.point(u[0],u[1]),s||w.lineEnd(),x=!1):s&&(w.lineStart(),w.point(o,a),x=!1)}m=o,v=a,y=s}var c,h,f,p,d,g,m,v,y,_,x,w=a,b=od(),C={point:l,lineStart:function(){C.point=u,h&&h.push(f=[]),_=!0,y=!1,m=v=NaN},lineEnd:function(){c&&(u(p,d),g&&y&&b.rejoin(),c.push(b.result())),C.point=l,y&&w.lineEnd()},polygonStart:function(){w=b,c=[],h=[],x=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=h.length;n<r;++n)for(var o,a,s=h[n],l=1,u=s.length,c=s[0],f=c[0],p=c[1];l<u;++l)o=f,a=p,f=(c=s[l])[0],p=c[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(t-o)&&++e:p<=i&&(f-o)*(i-a)<(p-a)*(t-o)&&--e;return e}(),n=x&&e,r=(c=cd(c)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&ld(c,s,e,o,a),a.polygonEnd()),w=a,c=h=f=null}};return C}}function go(t){return t.length>1}function mo(t,e){return((t=t.x)[0]<0?t[1]-Vp-zp:Vp-t[1])-((e=e.x)[0]<0?e[1]-Vp-zp:Vp-e[1])}function vo(t){return function(e){var n=new yo;for(var i in t)n[i]=t[i];return n.stream=e,n}}function yo(){}function _o(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),nd(n,t.stream(_d));var a=_d.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+e[0][0]+(i-s*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,u])}function xo(t){return function(t){function e(t){return t=u(t[0]*Up,t[1]*Up),[t[0]*g+a,s-t[1]*g]}function n(t,e){return t=o(t,e),[t[0]*g+a,s-t[1]*g]}function i(){u=id(l=ao(x,w,b),o);var t=o(y,_);return a=m-t[0]*g,s=v+t[1]*g,r()}function r(){return p=d=null,e}var o,a,s,l,u,c,h,f,p,d,g=150,m=480,v=250,y=0,_=0,x=0,w=0,b=0,C=null,S=wd,M=null,E=dd,I=.5,T=Md(n,I);return e.stream=function(t){return p&&d===t?p:p=Ed(S(l,T(E(d=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?bd(C=t*Up,6*Up):(C=null,wd),r()):C*jp},e.clipExtent=function(t){return arguments.length?(E=null==t?(M=c=h=f=null,dd):po(M=+t[0][0],c=+t[0][1],h=+t[1][0],f=+t[1][1]),r()):null==M?null:[[M,c],[h,f]]},e.scale=function(t){return arguments.length?(g=+t,i()):g},e.translate=function(t){return arguments.length?(m=+t[0],v=+t[1],i()):[m,v]},e.center=function(t){return arguments.length?(y=t[0]%360*Up,_=t[1]%360*Up,i()):[y*jp,_*jp]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Up,w=t[1]%360*Up,b=t.length>2?t[2]%360*Up:0,i()):[x*jp,w*jp,b*jp]},e.precision=function(t){return arguments.length?(T=Md(n,I=t*t),r()):$p(I)},e.fitExtent=function(t,n){return _o(e,t,n)},e.fitSize=function(t,n){return function(t,e,n){return _o(t,[[0,0],e],n)}(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&function(t){return(t=u.invert((t[0]-a)/g,(s-t[1])/g))&&[t[0]*jp,t[1]*jp]},i()}}(function(){return t})()}function wo(t,e){return[t,Jp(Qp((Vp+e)/2))]}function bo(t,e){return[Jp(Qp((Vp+e)/2)),-t]}function Co(t,n,i,r){var o=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var s=[];return N(t,function(t){var e=Co(t,n,i,r);e&&s.push(e)}),u(s)}var l,c=H(t),h=c[1]>50&&c[3]>50;l=h?{type:a.type,coordinates:Mo(a.coordinates,Io(a))}:un(a);var f=(new Cc).read(l),p=g(m(n,i),"meters"),d=gf.bufferOp(f,p);if(d=(new Sc).write(d),!So(d.coordinates)){var v;return(v=h?{type:d.type,coordinates:Eo(d.coordinates,Io(a))}:cn(d)).geometry?v:e(v,o)}}function So(t){return Array.isArray(t[0])?So(t[0]):isNaN(t[0])}function Mo(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return Mo(t,e)})}function Eo(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return Eo(t,e)})}function Io(t){var e=ge(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return Id().center(e).rotate(n).scale(Ro)}function To(){for(var t=new Cc,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Op.union(e,t.read(JSON.stringify(arguments[n].geometry)));return e=(new Sc).write(e),{type:"Feature",geometry:e,properties:arguments[0].properties}}function Po(t,n){var i=Z(t),r=Z(n);if(te(Ln(r,{precision:4})).coordinates[0].length<4)return null;if(te(Ln(i,{precision:4})).coordinates[0].length<4)return null;var o=new Cc,a=o.read(Ln(i)),s=o.read(Ln(r)),l=Ep.intersection(a,s);return l.isEmpty()?null:e((new Sc).write(l))}function Lo(t,e){return function(t,e,n){var i,r;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,o){var a=n(e,t);a>=0&&(void 0===r||a<r)&&(r=a,i=o)}),i}(t,e,function(t,e){return t-e})}function Do(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.properties||{},r=n.triangles,a=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(a&&-1===["Polygon","MultiPolygon"].indexOf(K(a)))throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],l=t[1],c=t[2],h=t[3],f=(l+h)/2,p=(s+c)/2,d=2*e/Ft([s,f],[c,f],n)*(c-s),g=2*e/Ft([p,l],[p,h],n)*(h-l),m=d/2,v=2*m,y=Math.sqrt(3)/2*g,_=c-s,x=h-l,w=.75*v,b=y,M=(_-v)/(v-m/2),E=Math.floor(M),I=(E*w-m/2-_)/2-m/2+w/2,T=Math.floor((x-y)/y),P=(x-T*y)/2,L=T*y-x>y/2;L&&(P-=y/4);for(var D=[],A=[],k=0;k<6;k++){var N=2*Math.PI/6*k;D.push(Math.cos(N)),A.push(Math.sin(N))}for(var O=[],R=0;R<=E;R++)for(var F=0;F<=T;F++){var z=R%2==1;if(!(0===F&&z||0===F&&L)){var B=R*w+s-I,V=F*b+l+P;if(z&&(V-=y/2),!0===r)(function(t,e,n,i,r,a){for(var s=[],l=0;l<6;l++){var u=[];u.push(t),u.push([t[0]+e*r[l],t[1]+n*a[l]]),u.push([t[0]+e*r[(l+1)%6],t[1]+n*a[(l+1)%6]]),u.push(t),s.push(o([u],i))}return s})([B,V],d/2,g/2,i,D,A).forEach(function(t){a?Po(a,t)&&O.push(t):O.push(t)});else{var G=function(t,e,n,i,r,a){for(var s=[],l=0;l<6;l++){var u=t[0]+e*r[l],c=t[1]+n*a[l];s.push([u,c])}return s.push(s[0].slice()),o([s],i)}([B,V],d/2,g/2,i,D,A);a?Po(a,G)&&O.push(G):O.push(G)}}}return u(O)}function Ao(t){if(t.features.length<=1)return t;var e=function(t){var e=qo(),n=[];return R(t,function(t,e){var i=H(t);n.push({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3],geojson:t,index:e})}),e.load(n),e}(t),n=[],i={};return R(t,function(t,r){if(i[r])return!0;for(e.remove({index:r},ko),i[r]=!0;;){var o=H(t),a=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(a.length>0){var s=a.map(function(t){return i[t.index]=!0,e.remove({index:t.index},ko),t.geojson});s.push(t),t=To.apply(this,s)}if(0===a.length)break}n.push(t)}),u(n)}function ko(t,e){return t.index===e.index}function No(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.properties,r=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(K(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=t[0],l=t[1],c=t[2],h=t[3],f=e/Ft([s,l],[c,l],n)*(c-s),p=e/Ft([s,l],[s,h],n)*(h-l),d=c-s,g=h-l,m=Math.floor(d/f),v=Math.floor(g/p),y=(g-v*p)/2,_=s+(d-m*f)/2,x=0;x<m;x++){for(var w=l+y,b=0;b<v;b++){var M=o([[[_,w],[_,w+p],[_+f,w+p],[_+f,w],[_,w]]],i);r?Po(r,M)&&a.push(M):a.push(M),w+=p}_+=f}return u(a)}function Oo(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.properties,r=n.mask,a=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!C(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(r&&-1===["Polygon","MultiPolygon"].indexOf(K(r)))throw new Error("options.mask must be a (Multi)Polygon");for(var s=e/Ft([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),l=e/Ft([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),c=0,h=t[0];h<=t[2];){for(var f=0,p=t[1];p<=t[3];){var d=null,g=null;c%2==0&&f%2==0?(d=o([[[h,p],[h,p+l],[h+s,p],[h,p]]],i),g=o([[[h,p+l],[h+s,p+l],[h+s,p],[h,p+l]]],i)):c%2==0&&f%2==1?(d=o([[[h,p],[h+s,p+l],[h+s,p],[h,p]]],i),g=o([[[h,p],[h,p+l],[h+s,p+l],[h,p]]],i)):f%2==0&&c%2==1?(d=o([[[h,p],[h,p+l],[h+s,p+l],[h,p]]],i),g=o([[[h,p],[h+s,p+l],[h+s,p],[h,p]]],i)):f%2==1&&c%2==1&&(d=o([[[h,p],[h,p+l],[h+s,p],[h,p]]],i),g=o([[[h,p+l],[h+s,p+l],[h+s,p],[h,p+l]]],i)),r?(Po(r,d)&&a.push(d),Po(r,g)&&a.push(g)):(a.push(d),a.push(g)),p+=l,f++}c++,h+=s}return u(a)}var Ro=6371008.8,Fo={meters:Ro,metres:Ro,millimeters:1e3*Ro,millimetres:1e3*Ro,centimeters:100*Ro,centimetres:100*Ro,kilometers:Ro/1e3,kilometres:Ro/1e3,miles:Ro/1609.344,nauticalmiles:Ro/1852,inches:39.37*Ro,yards:Ro/1.0936,feet:3.28084*Ro,radians:1,degrees:Ro/111325},zo={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/Ro,degrees:1/111325},Bo={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Vo=Object.freeze({earthRadius:Ro,factors:Fo,unitsFactors:zo,areaFactors:Bo,feature:e,geometry:n,point:i,points:r,polygon:o,polygons:a,lineString:s,lineStrings:l,featureCollection:u,multiLineString:c,multiPoint:h,multiPolygon:f,geometryCollection:p,round:d,radiansToLength:g,lengthToRadians:m,lengthToDegrees:v,bearingToAzimuth:y,radiansToDegrees:_,degreesToRadians:x,convertLength:w,convertArea:b,isNumber:C,isObject:S,validateBBox:M,validateId:E,radians2degrees:function(){throw new Error("method has been renamed to `radiansToDegrees`")},degrees2radians:function(){throw new Error("method has been renamed to `degreesToRadians`")},distanceToDegrees:function(){throw new Error("method has been renamed to `lengthToDegrees`")},distanceToRadians:function(){throw new Error("method has been renamed to `lengthToRadians`")},radiansToDistance:function(){throw new Error("method has been renamed to `radiansToLength`")},bearingToAngle:function(){throw new Error("method has been renamed to `bearingToAzimuth`")},convertDistance:function(){throw new Error("method has been renamed to `convertLength`")}}),Go=Object.freeze({coordEach:I,coordReduce:T,propEach:P,propReduce:L,featureEach:D,featureReduce:A,coordAll:k,geomEach:N,geomReduce:O,flattenEach:R,flattenReduce:F,segmentEach:z,segmentReduce:B,lineEach:V,lineReduce:G}),Ho=Object.freeze({getCoord:j,getCoords:U,containsNumber:W,geojsonType:q,featureOf:Y,collectionOf:X,getGeom:Z,getGeomType:J,getType:K}),jo={successCallback:null,verbose:!1},Uo={},Wo=rt,qo=at;at.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!gt(t,e))return n;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],gt(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):dt(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!gt(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],a=e.leaf?n(o):o,gt(t,a)){if(e.leaf||dt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=mt([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!dt(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:ct,compareMinY:ht,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return r=mt(t.slice(e,n+1)),st(r,this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=mt([])).leaf=!1,r.height=i;var s,l,u,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(vt(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(vt(t,s,u=Math.min(s+f-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),r.children.push(this._build(t,l,c,i-1));return st(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,l,u,c,h;i.push(e),!e.leaf&&i.length-1!==n;){for(c=h=1/0,r=0,o=e.children.length;r<o;r++)l=ft(a=e.children[r]),(u=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),ut(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=mt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,st(n,this.toBBox),st(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=mt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,st(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,s,l,u,c;for(l=u=1/0,i=e;i<=n-e;i++)a=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=lt(t,0,i,this.toBBox),o=lt(t,i,n,this.toBBox)),s=ft(r)+ft(o),a<l?(l=a,c=i,u=s<u?s:u):a===l&&s<u&&(u=s,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:ct,r=t.leaf?this.compareMinY:ht;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,s=lt(t,0,e,a),l=lt(t,n-e,n,a),u=pt(s)+pt(l);for(r=e;r<n-e;r++)o=t.children[r],ut(s,t.leaf?a(o):o),u+=pt(s);for(r=n-e-1;r>=e;r--)o=t.children[r],ut(l,t.leaf?a(o):o),u+=pt(l);return u},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)ut(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():st(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Yo=function(t,e,n){var i=t*e,r=Xo*t,o=r-(r-t),a=t-o,s=Xo*e,l=s-(s-e),u=e-l,c=a*u-(i-o*l-a*l-o*u);return n?(n[0]=c,n[1]=i,n):[c,i]},Xo=+(Math.pow(2,27)+1),Zo=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,a=n+i,s=new Array(a),l=0,u=0,c=0,h=Math.abs,f=t[u],p=h(f),d=e[c],g=h(d);p<g?(o=f,(u+=1)<n&&(p=h(f=t[u]))):(o=d,(c+=1)<i&&(g=h(d=e[c]))),u<n&&p<g||c>=i?(r=f,(u+=1)<n&&(p=h(f=t[u]))):(r=d,(c+=1)<i&&(g=h(d=e[c])));for(var m,v,y=r+o,_=y-r,x=o-_,w=x,b=y;u<n&&c<i;)p<g?(r=f,(u+=1)<n&&(p=h(f=t[u]))):(r=d,(c+=1)<i&&(g=h(d=e[c]))),(x=(o=w)-(_=(y=r+o)-r))&&(s[l++]=x),w=b-((m=b+y)-(v=m-b))+(y-v),b=m;for(;u<n;)(x=(o=w)-(_=(y=(r=f)+o)-r))&&(s[l++]=x),w=b-((m=b+y)-(v=m-b))+(y-v),b=m,(u+=1)<n&&(f=t[u]);for(;c<i;)(x=(o=w)-(_=(y=(r=d)+o)-r))&&(s[l++]=x),w=b-((m=b+y)-(v=m-b))+(y-v),b=m,(c+=1)<i&&(d=e[c]);return w&&(s[l++]=w),b&&(s[l++]=b),l||(s[l++]=0),s.length=l,s},Jo=function(t,e,n){var i=t+e,r=i-t,o=e-r,a=t-(i-r);return n?(n[0]=a+o,n[1]=i,n):[a+o,i]},Ko=function(t,e){var n=t.length;if(1===n){var i=Yo(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Yo(t[0],e,o),o[0]&&(r[s++]=o[0]);for(var l=1;l<n;++l){Yo(t[l],e,a);var u=o[1];Jo(u,a[0],o),o[0]&&(r[s++]=o[0]);var c=a[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(r[s++]=p)}return o[1]&&(r[s++]=o[1]),0===s&&(r[s++]=0),r.length=s,r},$o=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,a=n+i,s=new Array(a),l=0,u=0,c=0,h=Math.abs,f=t[u],p=h(f),d=-e[c],g=h(d);p<g?(o=f,(u+=1)<n&&(p=h(f=t[u]))):(o=d,(c+=1)<i&&(g=h(d=-e[c]))),u<n&&p<g||c>=i?(r=f,(u+=1)<n&&(p=h(f=t[u]))):(r=d,(c+=1)<i&&(g=h(d=-e[c])));for(var m,v,y=r+o,_=y-r,x=o-_,w=x,b=y;u<n&&c<i;)p<g?(r=f,(u+=1)<n&&(p=h(f=t[u]))):(r=d,(c+=1)<i&&(g=h(d=-e[c]))),(x=(o=w)-(_=(y=r+o)-r))&&(s[l++]=x),w=b-((m=b+y)-(v=m-b))+(y-v),b=m;for(;u<n;)(x=(o=w)-(_=(y=(r=f)+o)-r))&&(s[l++]=x),w=b-((m=b+y)-(v=m-b))+(y-v),b=m,(u+=1)<n&&(f=t[u]);for(;c<i;)(x=(o=w)-(_=(y=(r=d)+o)-r))&&(s[l++]=x),w=b-((m=b+y)-(v=m-b))+(y-v),b=m,(c+=1)<i&&(d=-e[c]);return w&&(s[l++]=w),b&&(s[l++]=b),l||(s[l++]=0),s.length=l,s},Qo=yt(function(t){function e(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(r[a++]=t[i][o]);return n}function n(t){return 1&t?"-":""}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",i(t.slice(0,e)),",",i(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var o=[],a=0;a<t.length;++a)o.push(["scale(",i(r(e(t,a))),",",n(a),t[0][a],")"].join(""));return o}function o(t){for(var n=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),s=[],l=0;l<t;++l)0==(1&l)?n.push.apply(n,r(e(a,l))):o.push.apply(o,r(e(a,l))),s.push("m"+l);var u=i(n),c=i(o),h="orientation"+t+"Exact",f=["function ",h,"(",s.join(),"){var p=",u,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");
return new Function("sum","prod","scale","sub",f)(Zo,Yo,Ko,$o)}var a=5,s=o(3),l=o(4),u=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=r-o;if(r>0){if(o<=0)return a;i=r+o}else{if(!(r<0))return a;if(o>=0)return a;i=-(r+o)}var l=3.3306690738754716e-16*i;return a>=l||a<=-l?a:s(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],a=n[0]-i[0],s=t[1]-i[1],u=e[1]-i[1],c=n[1]-i[1],h=t[2]-i[2],f=e[2]-i[2],p=n[2]-i[2],d=o*c,g=a*u,m=a*s,v=r*c,y=r*u,_=o*s,x=h*(d-g)+f*(m-v)+p*(y-_),w=7.771561172376103e-16*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(m)+Math.abs(v))*Math.abs(f)+(Math.abs(y)+Math.abs(_))*Math.abs(p));return x>w||-x>w?x:l(t,e,n,i)}];!function(){for(;u.length<=a;)u.push(o(u.length));for(var e=[],n=["slow"],i=0;i<=a;++i)e.push("a"+i),n.push("o"+i);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=a;++i)r.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[function(t){var e=u[t.length];return e||(e=u[t.length]=o(t.length)),e.apply(void 0,t)}].concat(u)),i=0;i<=a;++i)t.exports[i]=u[i]}()}),ta=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var r=new Array(e);for(i=0;i<e;++i)r[i]=i;r.sort(function(e,n){var i=t[e][0]-t[n][0];return i||t[e][1]-t[n][1]});var o=[r[0],r[1]],a=[r[0],r[1]];for(i=2;i<e;++i){for(var s=r[i],l=t[s],u=o.length;u>1&&ea(t[o[u-2]],t[o[u-1]],l)<=0;)u-=1,o.pop();for(o.push(s),u=a.length;u>1&&ea(t[a[u-2]],t[a[u-1]],l)>=0;)u-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var c=0,h=(i=0,o.length);i<h;++i)n[c++]=o[i];for(var f=a.length-2;f>0;--f)n[c++]=a[f];return n},ea=Qo[3],na=_t,ia=_t;_t.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,r)>=0)break;e[t]=s,t=o}e[t]=r}},na.default=ia;var ra=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],l=e[o][1],u=e[a][0],c=e[a][1];l>i!=c>i&&n<(u-s)*(i-l)/(c-l)+s&&(r=!r)}return r},oa=Qo[3],aa=xt,sa=xt;aa.default=sa;var la=function(t){return t},ua=function(t){if(null==t)return la;var e,n,i=t.scale[0],r=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*i+o,c[1]=(n+=t[1])*r+a;l<u;)c[l]=t[l],++l;return c}},ca=function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n},ha=function(t,e){function n(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),a.push(r)}}var i={},r={},o={},a=[],s=-1;return e.forEach(function(n,i){var r,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)}),e.forEach(function(e){var n,i,a=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),s=a[0],l=a[1];if(n=o[s])if(delete o[n.end],n.push(e),n.end=l,i=r[l]){delete r[i.start];var u=i===n?n:n.concat(i);r[u.start=n.start]=o[u.end=i.end]=u}else r[n.start]=o[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=s,i=o[s]){delete o[i.end];var c=i===n?n:i.concat(n);r[c.start=i.start]=o[c.end=n.end]=c}else r[n.start]=o[n.end]=n;else r[(n=[e]).start=s]=o[n.end=l]=n}),n(o,r),n(r,o),e.forEach(function(t){i[t<0?~t:t]||a.push([t])}),a},fa=function(t){return jt(t,Ut.apply(this,arguments))},pa=function(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var a=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),l=t-1,u=0;u<t;++u)a[u]=r;return{set:function(i,o){for(var u=e(i)&l,c=a[u],h=0;c!=r;){if(n(c,i))return s[u]=o;if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=i,s[u]=o,o},maybeSet:function(i,o){for(var u=e(i)&l,c=a[u],h=0;c!=r;){if(n(c,i))return s[u];if(++h>=t)throw new Error("full hashmap");c=a[u=u+1&l]}return a[u]=i,s[u]=o,o},get:function(i,o){for(var u=e(i)&l,c=a[u],h=0;c!=r;){if(n(c,i))return s[u];if(++h>=t)break;c=a[u=u+1&l]}return o},keys:function(){for(var t=[],e=0,n=a.length;e<n;++e){var i=a[e];i!=r&&t.push(i)}return t}}},da=function(t,e){return t[0]===e[0]&&t[1]===e[1]},ga=new ArrayBuffer(16),ma=new Float64Array(ga),va=new Uint32Array(ga),ya=function(t){ma[0]=t[0],ma[1]=t[1];var e=va[0]^va[1];return 2147483647&(e=e<<5^e>>7^va[2]^va[3])},_a=function(t){function e(t,e,n,i){if(f[n]!==t){f[n]=t;var r=p[n];if(r>=0){var o=d[n];r===e&&o===i||r===i&&o===e||(++m,g[n]=1)}else p[n]=e,d[n]=i}}function n(t){return ya(l[t])}function i(t,e){return da(l[t],l[e])}var r,o,a,s,l=t.coordinates,u=t.lines,c=t.rings,h=function(){for(var t=pa(1.4*l.length,n,i,Int32Array,-1,Int32Array),e=new Int32Array(l.length),r=0,o=l.length;r<o;++r)e[r]=t.maybeSet(r,r);return e}(),f=new Int32Array(l.length),p=new Int32Array(l.length),d=new Int32Array(l.length),g=new Int8Array(l.length),m=0;for(r=0,o=l.length;r<o;++r)f[r]=p[r]=d[r]=-1;for(r=0,o=u.length;r<o;++r){var v=u[r],y=v[0],_=v[1];for(a=h[y],s=h[++y],++m,g[a]=1;++y<=_;)e(r,a,a=s,s=h[y]);++m,g[s]=1}for(r=0,o=l.length;r<o;++r)f[r]=-1;for(r=0,o=c.length;r<o;++r){var x=c[r],w=x[0]+1,b=x[1];for(e(r,h[b-1],a=h[w-1],s=h[w]);++w<=b;)e(r,a,a=s,s=h[w])}f=p=d=null;var C,S=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null);for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=r;return{add:function(i){for(var s=e(i)&a,l=o[s],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)throw new Error("full hashset");l=o[s=s+1&a]}return o[s]=i,!0},has:function(i){for(var s=e(i)&a,l=o[s],u=0;l!=r;){if(n(l,i))return!0;if(++u>=t)break;l=o[s=s+1&a]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e];i!=r&&t.push(i)}return t}}}(1.4*m,ya,da);for(r=0,o=l.length;r<o;++r)g[C=h[r]]&&S.add(l[C]);return S},xa=function(t){var e,n,i,r=_a(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,i=a.length;n<i;++n)for(var l=a[n],u=l[0],c=l[1];++u<c;)r.has(o[u])&&(e={0:u,1:l[1]},l[1]=u,l=l.next=e);for(n=0,i=s.length;n<i;++n)for(var h=s[n],f=h[0],p=f,d=h[1],g=r.has(o[f]);++p<d;)r.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(!function(t,e,n,i){Wt(t,e,n),Wt(t,e,e+i),Wt(t,e+i,n)}(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t},wa=function(t){function e(t){var e,n,i,r,o,a,s,l;if(i=p.get(e=u[t[0]]))for(s=0,l=i.length;s<l;++s)if(r=i[s],function(t,e){var n=t[0],i=e[0],r=t[1],o=e[1];if(n-r!=i-o)return!1;for(;n<=r;++n,++i)if(!da(u[n],u[i]))return!1;return!0}(r,t))return t[0]=r[0],void(t[1]=r[1]);if(o=p.get(n=u[t[1]]))for(s=0,l=o.length;s<l;++s)if(a=o[s],function(t,e){var n=t[0],i=e[0],r=t[1],o=e[1];if(n-r!=i-o)return!1;for(;n<=r;++n,--o)if(!da(u[n],u[o]))return!1;return!0}(a,t))return t[1]=a[0],void(t[0]=a[1]);i?i.push(t):p.set(e,[t]),o?o.push(t):p.set(n,[t]),d.push(t)}function n(t,e){var n=t[0],i=e[0],o=t[1]-n;if(o!==e[1]-i)return!1;for(var a=r(t),s=r(e),l=0;l<o;++l)if(!da(u[n+(l+a)%o],u[i+(l+s)%o]))return!1;return!0}function i(t,e){var n=t[0],i=e[0],o=t[1],a=e[1],s=o-n;if(s!==a-i)return!1;for(var l=r(t),c=s-r(e),h=0;h<s;++h)if(!da(u[n+(h+l)%s],u[a-(h+c)%s]))return!1;return!0}function r(t){for(var e=t[0],n=t[1],i=e,r=i,o=u[i];++i<n;){var a=u[i];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(r=i,o=a)}return r-e}var o,a,s,l,u=t.coordinates,c=t.lines,h=t.rings,f=c.length+h.length;for(delete t.lines,delete t.rings,s=0,l=c.length;s<l;++s)for(o=c[s];o=o.next;)++f;for(s=0,l=h.length;s<l;++s)for(a=h[s];a=a.next;)++f;var p=pa(2*f*1.4,ya,da),d=t.arcs=[];for(s=0,l=c.length;s<l;++s){o=c[s];do e(o);while(o=o.next)}for(s=0,l=h.length;s<l;++s)if((a=h[s]).next){do e(a);while(a=a.next)}else!function(t){var e,o,a,s,l;if(o=p.get(e=u[t[0]]))for(s=0,l=o.length;s<l;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(i(a,t))return t[0]=a[1],void(t[1]=a[0])}if(o=p.get(e=u[t[0]+r(t)]))for(s=0,l=o.length;s<l;++s){if(a=o[s],n(a,t))return t[0]=a[0],void(t[1]=a[1]);if(i(a,t))return t[0]=a[1],void(t[1]=a[0])}o?o.push(t):p.set(e,[t]),d.push(t)}(a);return t},ba=function(t,e){function n(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function i(t){var e=[];do{var n=u.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function r(t){return t.map(i)}var o=function(t){function e(t){null!=t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>s&&(s=e),n<a&&(a=n),n>l&&(l=n)}function i(t){t.forEach(n)}function r(t){t.forEach(i)}var o=1/0,a=1/0,s=-1/0,l=-1/0,u={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){i(t.arcs)},MultiLineString:function(t){t.arcs.forEach(i)},Polygon:function(t){t.arcs.forEach(i)},MultiPolygon:function(t){t.arcs.forEach(r)}};for(var c in t)e(t[c]);return s>=o&&l>=a?[o,a,s,l]:void 0}(t=function(t){var e,n={};for(e in t)n[e]=qt(t[e]);return n}(t)),a=e>0&&o&&function(t,e,n){function i(t){return[Math.round((t[0]-u)*p),Math.round((t[1]-c)*d)]}function r(t,e){for(var n,i,r,o,a,s=-1,l=0,h=t.length,f=new Array(h);++s<h;)n=t[s],o=Math.round((n[0]-u)*p),a=Math.round((n[1]-c)*d),o===i&&a===r||(f[l++]=[i=o,r=a]);for(f.length=l;l<e;)l=f.push([f[0][0],f[0][1]]);return f}function o(t){return r(t,2)}function a(t){return r(t,4)}function s(t){return t.map(a)}function l(t){null!=t&&g.hasOwnProperty(t.type)&&g[t.type](t)}var u=e[0],c=e[1],h=e[2],f=e[3],p=h-u?(n-1)/(h-u):1,d=f-c?(n-1)/(f-c):1,g={GeometryCollection:function(t){t.geometries.forEach(l)},Point:function(t){t.coordinates=i(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(i)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=s(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(s)}};for(var m in t)l(t[m]);return{scale:[1/p,1/d],translate:[u,c]}}(t,o,e),s=wa(xa(function(t){function e(t){t&&u.hasOwnProperty(t.type)&&u[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)l[++o]=t[e];var i={0:o-n+1,1:o};return a.push(i),i}function i(t){for(var e=0,n=t.length;e<n;++e)l[++o]=t[e];var i={0:o-n+1,1:o};return s.push(i),i}function r(t){return t.map(i)}var o=-1,a=[],s=[],l=[],u={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var c in t)e(t[c]);return{type:"Topology",coordinates:l,lines:a,rings:s,objects:t}}(t))),l=s.coordinates,u=pa(1.4*s.arcs.length,Zt,Jt);t=s.objects,s.bbox=o,s.arcs=s.arcs.map(function(t,e){return u.set(t,e),l.slice(t[0],t[1]+1)}),delete s.coordinates,l=null;var c={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=i(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(i)},Polygon:function(t){t.arcs=t.arcs.map(i)},MultiPolygon:function(t){t.arcs=t.arcs.map(r)}};for(var h in t)n(t[h]);return a&&(s.transform=a,s.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,o=t[e],a=0,s=1,l=o.length,u=o[0],c=u[0],h=u[1];++a<l;)i=(u=o[a])[0],r=u[1],i===c&&r===h||(o[s++]=[i-c,r-h],c=i,h=r);1===s&&(o[s++]=[0,0]),o.length=s}return t}(s.arcs)),s},Ca=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],i=this.centers[e+1];var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Ca.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},Ca.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Ca.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])};var Sa=_e,Ma=_e;_e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(Ne(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(Ne(t,u,c,n))}var h=0;for(s=0;s<i.length;s+=3){var f=i[s]*n,p=i[s+1]*n,d=i[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},_e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},Sa.default=Ma,Ve.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!Ze(t,e))return n;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],Ze(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):Xe(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ze(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],a=e.leaf?n(o):o,Ze(t,a)){if(e.leaf||Xe(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Je([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=u.pop(),o=!0),a.leaf&&-1!==(r=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;o||a.leaf||!Xe(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(l.push(a),u.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Ue,compareMinY:We,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return r=Je(t.slice(e,n+1)),Ge(r,this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=Je([])).leaf=!1,r.height=i;var s,l,u,c,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(Ke(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(Ke(t,s,u=Math.min(s+f-1,n),h,this.compareMinY),l=s;l<=u;l+=h)c=Math.min(l+h-1,u),r.children.push(this._build(t,l,c,i-1));return Ge(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,l,u,c,h;i.push(e),!e.leaf&&i.length-1!==n;){for(c=h=1/0,r=0,o=e.children.length;r<o;r++)l=qe(a=e.children[r]),(u=function(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}(t,a)-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),je(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=Je(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ge(n,this.toBBox),Ge(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Je([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ge(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,s,l,u,c;for(l=u=1/0,i=e;i<=n-e;i++)a=function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,o-i)}(r=He(t,0,i,this.toBBox),o=He(t,i,n,this.toBBox)),s=qe(r)+qe(o),a<l?(l=a,c=i,u=s<u?s:u):a===l&&s<u&&(u=s,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Ue,r=t.leaf?this.compareMinY:We;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,s=He(t,0,e,a),l=He(t,n-e,n,a),u=Ye(s)+Ye(l);for(r=e;r<n-e;r++)o=t.children[r],je(s,t.leaf?a(o):o),u+=Ye(s);for(r=n-e-1;r>=e;r--)o=t.children[r],je(l,t.leaf?a(o):o),u+=Ye(l);return u},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)je(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ge(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Ea=Object.freeze({toMercator:un,toWgs84:cn}),Ia=6378137,Ta=function(t,e,n){function i(t,n,i,r){var l=o[t][n],u=o[t][n+1],c=o[i][r],h=o[i][r+1],f=function(t,e,n,i){if(Dn(t,n)||Dn(t,i)||Dn(e,n)||Dn(i,n))return null;var r=t[0],o=t[1],a=e[0],s=e[1],l=n[0],u=n[1],c=i[0],h=i[1],f=(r-a)*(u-h)-(o-s)*(l-c);return 0===f?null:[((r*s-o*a)*(l-c)-(r-a)*(l*h-u*c))/f,((r*s-o*a)*(u-h)-(o-s)*(l*h-u*c))/f]}(l,u,c,h);if(null!==f){var p,d;if(p=u[0]!==l[0]?(f[0]-l[0])/(u[0]-l[0]):(f[1]-l[1])/(u[1]-l[1]),d=h[0]!==c[0]?(f[0]-c[0])/(h[0]-c[0]):(f[1]-c[1])/(h[1]-c[1]),!(p>=1||p<=0||d>=1||d<=0)){var g=f,m=!s[g];m&&(s[g]=!0),e?a.push(e(f,t,n,l,u,p,i,r,c,h,d,m)):a.push(f)}}}function r(t,e){var n,i,r,a,s=o[t][e],l=o[t][e+1];return s[0]<l[0]?(n=s[0],i=l[0]):(n=l[0],i=s[0]),s[1]<l[1]?(r=s[1],a=l[1]):(r=l[1],a=s[1]),{minX:n,minY:r,maxX:i,maxY:a,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,a=[],s={};if(n){for(var l=[],u=0;u<o.length;u++)for(var c=0;c<o[u].length-1;c++)l.push(r(u,c));var h=qo();h.load(l)}for(var f=0;f<o.length;f++)for(var p=0;p<o[f].length-1;p++)if(n)h.search(r(f,p)).forEach(function(t){var e=t.ring,n=t.edge;i(f,p,e,n)});else for(var d=0;d<o.length;d++)for(var g=0;g<o[d].length-1;g++)i(f,p,d,g);return e||(a={type:"Feature",geometry:{type:"MultiPoint",coordinates:a}}),a},Pa=function(t){function e(){for(var t=[],e=0;e<d.features.length;e++)-1==d.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=0;i<d.features.length;i++)t[e]!=i&&Lt(d.features[t[e]].geometry.coordinates[0][0],d.features[i],{ignoreBoundary:!0})&&yn(d.features[i])<1/0&&(n=i);d.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<d.features.length;t++)if(-1==d.features[t].properties.parent){var e=d.features[t].properties.winding;d.features[t].properties.netWinding=e,i(t,e)}}function i(t,e){for(var n=0;n<d.features.length;n++)if(d.features[n].properties.parent==t){var r=e+d.features[n].properties.winding;d.features[n].properties.netWinding=r,i(n,r)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var r=t.geometry.coordinates.length,a=[],s=0;s<r;s++){var l=t.geometry.coordinates[s];kn(l[0],l[l.length-1])||l.push(l[0]),a.push.apply(a,l.slice(0,l.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(e.hasOwnProperty(t[i])){n=0;break}e[t[i]]=1}return n}(a))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var c=a.length,h=Ta(t,function(t,e,n,i,r,o,a,s,l,u,c,h){return[t,e,n,i,r,o,a,s,l,u,c,h]}),f=h.length;if(0==f){var p=[];for(s=0;s<r;s++)p.push(o([t.geometry.coordinates[s]],{parent:-1,winding:function(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(An([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var i=1;else i=-1;return i}(t.geometry.coordinates[s])}));var d=u(p);return e(),n(),d}var g=[],m=[];for(s=0;s<r;s++){g.push([]);for(var v=0;v<t.geometry.coordinates[s].length-1;v++)g[s].push([new La(t.geometry.coordinates[s][(v+1).modulo(t.geometry.coordinates[s].length-1)],1,[s,v],[s,(v+1).modulo(t.geometry.coordinates[s].length-1)],void 0)]),m.push(new Da(t.geometry.coordinates[s][v],[s,(v-1).modulo(t.geometry.coordinates[s].length-1)],[s,v],void 0,void 0,!1,!0))}for(s=0;s<f;s++)g[h[s][1]][h[s][2]].push(new La(h[s][0],h[s][5],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0)),h[s][11]&&m.push(new Da(h[s][0],[h[s][1],h[s][2]],[h[s][6],h[s][7]],void 0,void 0,!0,!0));var y=m.length;for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)g[s][v].sort(function(t,e){return t.param<e.param?-1:1});var _=[];for(s=0;s<y;s++)_.push({minX:m[s].coord[0],minY:m[s].coord[1],maxX:m[s].coord[0],maxY:m[s].coord[1],index:s});var x=qo();for(x.load(_),s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(var w=0;w<g[s][v].length;w++){C=w==g[s][v].length-1?g[s][(v+1).modulo(t.geometry.coordinates[s].length-1)][0].coord:g[s][v][w+1].coord;var b=x.search({minX:C[0],minY:C[1],maxX:C[0],maxY:C[1]})[0];g[s][v][w].nxtIsectAlongEdgeIn=b.index}for(s=0;s<g.length;s++)for(v=0;v<g[s].length;v++)for(w=0;w<g[s][v].length;w++){var C=g[s][v][w].coord,S=(b=x.search({minX:C[0],minY:C[1],maxX:C[0],maxY:C[1]})[0]).index;S<c?m[S].nxtIsectAlongRingAndEdge2=g[s][v][w].nxtIsectAlongEdgeIn:kn(m[S].ringAndEdge1,g[s][v][w].ringAndEdgeIn)?m[S].nxtIsectAlongRingAndEdge1=g[s][v][w].nxtIsectAlongEdgeIn:m[S].nxtIsectAlongRingAndEdge2=g[s][v][w].nxtIsectAlongEdgeIn}var M=[];for(s=0,v=0;v<r;v++){var E=s;for(w=0;w<t.geometry.coordinates[v].length-1;w++)m[s].coord[0]<m[E].coord[0]&&(E=s),s++;var I=m[E].nxtIsectAlongRingAndEdge2;for(w=0;w<m.length;w++)if(m[w].nxtIsectAlongRingAndEdge1==E||m[w].nxtIsectAlongRingAndEdge2==E){var T=w;break}var P=An([m[T].coord,m[E].coord,m[I].coord],!0)?1:-1;M.push({isect:E,parent:-1,winding:P})}for(M.sort(function(t,e){return m[t.isect].coord>m[e.isect].coord?-1:1}),p=[];M.length>0;){var L=M.pop(),D=L.isect,A=L.parent,k=L.winding,N=p.length,O=[m[D].coord],R=D;if(m[D].ringAndEdge1Walkable)var F=m[D].ringAndEdge1,z=m[D].nxtIsectAlongRingAndEdge1;else F=m[D].ringAndEdge2,z=m[D].nxtIsectAlongRingAndEdge2;for(;!kn(m[D].coord,m[z].coord);){O.push(m[z].coord);var B=void 0;for(s=0;s<M.length;s++)if(M[s].isect==z){B=s;break}if(void 0!=B&&M.splice(B,1),kn(F,m[z].ringAndEdge1)){if(F=m[z].ringAndEdge2,m[z].ringAndEdge2Walkable=!1,m[z].ringAndEdge1Walkable){var V={isect:z};An([m[R].coord,m[z].coord,m[m[z].nxtIsectAlongRingAndEdge2].coord],1==k)?(V.parent=A,V.winding=-k):(V.parent=N,V.winding=k),M.push(V)}R=z,z=m[z].nxtIsectAlongRingAndEdge2}else F=m[z].ringAndEdge1,m[z].ringAndEdge1Walkable=!1,m[z].ringAndEdge2Walkable&&(V={isect:z},An([m[R].coord,m[z].coord,m[m[z].nxtIsectAlongRingAndEdge1].coord],1==k)?(V.parent=A,V.winding=-k):(V.parent=N,V.winding=k),M.push(V)),R=z,z=m[z].nxtIsectAlongRingAndEdge1}O.push(m[z].coord),p.push(o([O],{index:N,parent:A,winding:k,netWinding:void 0}))}return d=u(p),e(),n(),d},La=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},Da=function(t,e,n,i,r,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};Number.prototype.modulo=function(t){return(this%t+t)%t};var Aa=Math.PI/180,ka=180/Math.PI,Na=function(t,e){this.lon=t,this.lat=e,this.x=Aa*t,this.y=Aa*e};Na.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Na.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Na(e,t)};var Oa=function(){this.coords=[],this.length=0};Oa.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Ra=function(t){this.properties=t||{},this.geometries=[]};Ra.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Ra.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Fa=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Na(t.x,t.y),this.end=new Na(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};Fa.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=ka*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[ka*Math.atan2(r,i),a]},Fa.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,u=e&&e.offset?e.offset:10,c=180-u,h=-180+u,f=360-u,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],m=Math.abs(g-d);m>f&&(g>c&&d<h||d>c&&g<h)?s=!0:m>l&&(l=m)}var v=[];if(s&&l<u){var y=[];v.push(y);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>f){var w=parseFloat(n[_-1][0]),b=parseFloat(n[_-1][1]),C=parseFloat(n[_][0]),S=parseFloat(n[_][1]);if(w>-180&&w<h&&180===C&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){y.push([-180,n[_][1]]),_++,y.push([n[_][0],n[_][1]]);continue}if(w>c&&w<180&&-180===C&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){y.push([180,n[_][1]]),_++,y.push([n[_][0],n[_][1]]);continue}if(w<h&&C>c){var M=w;w=C,C=M;var E=b;b=S,S=E}if(w>c&&C<h&&(C+=360),w<=180&&C>=180&&w<C){var I=(180-w)/(C-w),T=I*S+(1-I)*b;y.push([n[_-1][0]>c?180:-180,T]),(y=[]).push([n[_-1][0]>c?-180:180,T]),v.push(y)}else y=[],v.push(y);y.push([x,n[_][1]])}else y.push([n[_][0],n[_][1]])}}else{var P=[];v.push(P);for(var L=0;L<n.length;++L)P.push([n[L][0],n[L][1]])}for(var D=new Ra(this.properties),A=0;A<v.length;++A){var k=new Oa;D.geometries.push(k);for(var N=v[A],O=0;O<N.length;++O)k.move_to(N[O])}return D};var za=Wn;Wn.polyline=Wn,Wn.polygon=function(t,e){var n,i,r,o,a,s,l;for(i=1;i<=8;i*=2){for(n=[],o=!(Yn(r=t[t.length-1],e)&i),a=0;a<t.length;a++)(l=!(Yn(s=t[a],e)&i))!==o&&n.push(qn(r,s,i,e)),l&&n.push(s),r=s,o=l;if(!(t=n).length)break}return n};var Ba=Array.prototype.slice,Va={successCallback:null,verbose:!1,polygons:!1},Ga={},Ha=64,ja=16,Ua=4,Wa=1,qa=[],Ya=[],Xa=[],Za=[],Ja=[],Ka=[],$a=[],Qa=[],ts=[],es=[],ns=[],is=[],rs=[],os=[],as=[],ss=[],ls=[],us=[],cs=[],hs=[],fs=[],ps=[],ds=[],gs=[];$a[85]=es[85]=-1,Qa[85]=ns[85]=0,ts[85]=is[85]=1,cs[85]=ps[85]=1,hs[85]=ds[85]=0,fs[85]=gs[85]=1,qa[85]=Za[85]=0,Ya[85]=Ja[85]=-1,Xa[85]=as[85]=0,ss[85]=rs[85]=0,ls[85]=os[85]=1,Ka[85]=us[85]=1,ps[1]=ps[169]=0,ds[1]=ds[169]=-1,gs[1]=gs[169]=0,rs[1]=rs[169]=-1,os[1]=os[169]=0,as[1]=as[169]=0,es[4]=es[166]=0,ns[4]=ns[166]=-1,is[4]=is[166]=1,ss[4]=ss[166]=1,ls[4]=ls[166]=0,us[4]=us[166]=0,$a[16]=$a[154]=0,Qa[16]=Qa[154]=1,ts[16]=ts[154]=1,Za[16]=Za[154]=1,Ja[16]=Ja[154]=0,Ka[16]=Ka[154]=1,cs[64]=cs[106]=0,hs[64]=hs[106]=1,fs[64]=fs[106]=0,qa[64]=qa[106]=-1,Ya[64]=Ya[106]=0,Xa[64]=Xa[106]=1,cs[2]=cs[168]=0,hs[2]=hs[168]=-1,fs[2]=fs[168]=1,ps[2]=ps[168]=0,ds[2]=ds[168]=-1,gs[2]=gs[168]=0,rs[2]=rs[168]=-1,os[2]=os[168]=0,as[2]=as[168]=0,ss[2]=ss[168]=-1,ls[2]=ls[168]=0,us[2]=us[168]=1,$a[8]=$a[162]=0,Qa[8]=Qa[162]=-1,ts[8]=ts[162]=0,es[8]=es[162]=0,ns[8]=ns[162]=-1,is[8]=is[162]=1,rs[8]=rs[162]=1,os[8]=os[162]=0,as[8]=as[162]=1,ss[8]=ss[162]=1,ls[8]=ls[162]=0,us[8]=us[162]=0,$a[32]=$a[138]=0,Qa[32]=Qa[138]=1,ts[32]=ts[138]=1,es[32]=es[138]=0,ns[32]=ns[138]=1,is[32]=is[138]=0,qa[32]=qa[138]=1,Ya[32]=Ya[138]=0,Xa[32]=Xa[138]=0,Za[32]=Za[138]=1,Ja[32]=Ja[138]=0,Ka[32]=Ka[138]=1,ps[128]=ps[42]=0,ds[128]=ds[42]=1,gs[128]=gs[42]=1,cs[128]=cs[42]=0,hs[128]=hs[42]=1,fs[128]=fs[42]=0,qa[128]=qa[42]=-1,Ya[128]=Ya[42]=0,Xa[128]=Xa[42]=1,Za[128]=Za[42]=-1,Ja[128]=Ja[42]=0,Ka[128]=Ka[42]=0,es[5]=es[165]=-1,ns[5]=ns[165]=0,is[5]=is[165]=0,ps[5]=ps[165]=1,ds[5]=ds[165]=0,gs[5]=gs[165]=0,ss[20]=ss[150]=0,ls[20]=ls[150]=1,us[20]=us[150]=1,Za[20]=Za[150]=0,Ja[20]=Ja[150]=-1,Ka[20]=Ka[150]=1,$a[80]=$a[90]=-1,Qa[80]=Qa[90]=0,ts[80]=ts[90]=1,cs[80]=cs[90]=1,hs[80]=hs[90]=0,
fs[80]=fs[90]=1,rs[65]=rs[105]=0,os[65]=os[105]=1,as[65]=as[105]=0,qa[65]=qa[105]=0,Ya[65]=Ya[105]=-1,Xa[65]=Xa[105]=0,$a[160]=$a[10]=-1,Qa[160]=Qa[10]=0,ts[160]=ts[10]=1,es[160]=es[10]=-1,ns[160]=ns[10]=0,is[160]=is[10]=0,ps[160]=ps[10]=1,ds[160]=ds[10]=0,gs[160]=gs[10]=0,cs[160]=cs[10]=1,hs[160]=hs[10]=0,fs[160]=fs[10]=1,ss[130]=ss[40]=0,ls[130]=ls[40]=1,us[130]=us[40]=1,rs[130]=rs[40]=0,os[130]=os[40]=1,as[130]=as[40]=0,qa[130]=qa[40]=0,Ya[130]=Ya[40]=-1,Xa[130]=Xa[40]=0,Za[130]=Za[40]=0,Ja[130]=Ja[40]=-1,Ka[130]=Ka[40]=1,es[37]=es[133]=0,ns[37]=ns[133]=1,is[37]=is[133]=1,ps[37]=ps[133]=0,ds[37]=ds[133]=1,gs[37]=gs[133]=0,qa[37]=qa[133]=-1,Ya[37]=Ya[133]=0,Xa[37]=Xa[133]=0,Za[37]=Za[133]=1,Ja[37]=Ja[133]=0,Ka[37]=Ka[133]=0,ss[148]=ss[22]=-1,ls[148]=ls[22]=0,us[148]=us[22]=0,ps[148]=ps[22]=0,ds[148]=ds[22]=-1,gs[148]=gs[22]=1,cs[148]=cs[22]=0,hs[148]=hs[22]=1,fs[148]=fs[22]=1,Za[148]=Za[22]=-1,Ja[148]=Ja[22]=0,Ka[148]=Ka[22]=1,$a[82]=$a[88]=0,Qa[82]=Qa[88]=-1,ts[82]=ts[88]=1,ss[82]=ss[88]=1,ls[82]=ls[88]=0,us[82]=us[88]=1,rs[82]=rs[88]=-1,os[82]=os[88]=0,as[82]=as[88]=1,cs[82]=cs[88]=0,hs[82]=hs[88]=-1,fs[82]=fs[88]=0,$a[73]=$a[97]=0,Qa[73]=Qa[97]=1,ts[73]=ts[97]=0,es[73]=es[97]=0,ns[73]=ns[97]=-1,is[73]=is[97]=0,rs[73]=rs[97]=1,os[73]=os[97]=0,as[73]=as[97]=0,qa[73]=qa[97]=1,Ya[73]=Ya[97]=0,Xa[73]=Xa[97]=1,$a[145]=$a[25]=0,Qa[145]=Qa[25]=-1,ts[145]=ts[25]=0,rs[145]=rs[25]=1,os[145]=os[25]=0,as[145]=as[25]=1,ps[145]=ps[25]=0,ds[145]=ds[25]=1,gs[145]=gs[25]=1,Za[145]=Za[25]=-1,Ja[145]=Ja[25]=0,Ka[145]=Ka[25]=0,es[70]=es[100]=0,ns[70]=ns[100]=1,is[70]=is[100]=0,ss[70]=ss[100]=-1,ls[70]=ls[100]=0,us[70]=us[100]=1,cs[70]=cs[100]=0,hs[70]=hs[100]=-1,fs[70]=fs[100]=1,qa[70]=qa[100]=1,Ya[70]=Ya[100]=0,Xa[70]=Xa[100]=0,es[101]=es[69]=0,ns[101]=ns[69]=1,is[101]=is[69]=0,qa[101]=qa[69]=1,Ya[101]=Ya[69]=0,Xa[101]=Xa[69]=0,ps[149]=ps[21]=0,ds[149]=ds[21]=1,gs[149]=gs[21]=1,Za[149]=Za[21]=-1,Ja[149]=Ja[21]=0,Ka[149]=Ka[21]=0,ss[86]=ss[84]=-1,ls[86]=ls[84]=0,us[86]=us[84]=1,cs[86]=cs[84]=0,hs[86]=hs[84]=-1,fs[86]=fs[84]=1,$a[89]=$a[81]=0,Qa[89]=Qa[81]=-1,ts[89]=ts[81]=0,rs[89]=rs[81]=1,os[89]=os[81]=0,as[89]=as[81]=1,$a[96]=$a[74]=0,Qa[96]=Qa[74]=1,ts[96]=ts[74]=0,es[96]=es[74]=-1,ns[96]=ns[74]=0,is[96]=is[74]=1,cs[96]=cs[74]=1,hs[96]=hs[74]=0,fs[96]=fs[74]=0,qa[96]=qa[74]=1,Ya[96]=Ya[74]=0,Xa[96]=Xa[74]=1,$a[24]=$a[146]=0,Qa[24]=Qa[146]=-1,ts[24]=ts[146]=1,ss[24]=ss[146]=1,ls[24]=ls[146]=0,us[24]=us[146]=1,rs[24]=rs[146]=0,os[24]=os[146]=1,as[24]=as[146]=1,Za[24]=Za[146]=0,Ja[24]=Ja[146]=-1,Ka[24]=Ka[146]=0,es[6]=es[164]=-1,ns[6]=ns[164]=0,is[6]=is[164]=1,ss[6]=ss[164]=-1,ls[6]=ls[164]=0,us[6]=us[164]=0,ps[6]=ps[164]=0,ds[6]=ds[164]=-1,gs[6]=gs[164]=1,cs[6]=cs[164]=1,hs[6]=hs[164]=0,fs[6]=fs[164]=0,rs[129]=rs[41]=0,os[129]=os[41]=1,as[129]=as[41]=1,ps[129]=ps[41]=0,ds[129]=ds[41]=1,gs[129]=gs[41]=0,qa[129]=qa[41]=-1,Ya[129]=Ya[41]=0,Xa[129]=Xa[41]=0,Za[129]=Za[41]=0,Ja[129]=Ja[41]=-1,Ka[129]=Ka[41]=0,ss[66]=ss[104]=0,ls[66]=ls[104]=1,us[66]=us[104]=0,rs[66]=rs[104]=-1,os[66]=os[104]=0,as[66]=as[104]=1,cs[66]=cs[104]=0,hs[66]=hs[104]=-1,fs[66]=fs[104]=0,qa[66]=qa[104]=0,Ya[66]=Ya[104]=-1,Xa[66]=Xa[104]=1,$a[144]=$a[26]=-1,Qa[144]=Qa[26]=0,ts[144]=ts[26]=0,ps[144]=ps[26]=1,ds[144]=ds[26]=0,gs[144]=gs[26]=1,cs[144]=cs[26]=0,hs[144]=hs[26]=1,fs[144]=fs[26]=1,Za[144]=Za[26]=-1,Ja[144]=Ja[26]=0,Ka[144]=Ka[26]=1,es[36]=es[134]=0,ns[36]=ns[134]=1,is[36]=is[134]=1,ss[36]=ss[134]=0,ls[36]=ls[134]=1,us[36]=us[134]=0,qa[36]=qa[134]=0,Ya[36]=Ya[134]=-1,Xa[36]=Xa[134]=1,Za[36]=Za[134]=1,Ja[36]=Ja[134]=0,Ka[36]=Ka[134]=0,$a[9]=$a[161]=-1,Qa[9]=Qa[161]=0,ts[9]=ts[161]=0,es[9]=es[161]=0,ns[9]=ns[161]=-1,is[9]=is[161]=0,rs[9]=rs[161]=1,os[9]=os[161]=0,as[9]=as[161]=0,ps[9]=ps[161]=1,ds[9]=ds[161]=0,gs[9]=gs[161]=1,$a[136]=0,Qa[136]=1,ts[136]=1,es[136]=0,ns[136]=1,is[136]=0,ss[136]=-1,ls[136]=0,us[136]=1,rs[136]=-1,os[136]=0,as[136]=0,ps[136]=0,ds[136]=-1,gs[136]=0,cs[136]=0,hs[136]=-1,fs[136]=1,qa[136]=1,Ya[136]=0,Xa[136]=0,Za[136]=1,Ja[136]=0,Ka[136]=1,$a[34]=0,Qa[34]=-1,ts[34]=0,es[34]=0,ns[34]=-1,is[34]=1,ss[34]=1,ls[34]=0,us[34]=0,rs[34]=1,os[34]=0,as[34]=1,ps[34]=0,ds[34]=1,gs[34]=1,cs[34]=0,hs[34]=1,fs[34]=0,qa[34]=-1,Ya[34]=0,Xa[34]=1,Za[34]=-1,Ja[34]=0,Ka[34]=0,$a[35]=0,Qa[35]=1,ts[35]=1,es[35]=0,ns[35]=-1,is[35]=1,ss[35]=1,ls[35]=0,us[35]=0,rs[35]=-1,os[35]=0,as[35]=0,ps[35]=0,ds[35]=-1,gs[35]=0,cs[35]=0,hs[35]=1,fs[35]=0,qa[35]=-1,Ya[35]=0,Xa[35]=1,Za[35]=1,Ja[35]=0,Ka[35]=1,$a[153]=0,Qa[153]=1,ts[153]=1,rs[153]=-1,os[153]=0,as[153]=0,ps[153]=0,ds[153]=-1,gs[153]=0,Za[153]=1,Ja[153]=0,Ka[153]=1,es[102]=0,ns[102]=-1,is[102]=1,ss[102]=1,ls[102]=0,us[102]=0,cs[102]=0,hs[102]=1,fs[102]=0,qa[102]=-1,Ya[102]=0,Xa[102]=1,$a[155]=0,Qa[155]=-1,ts[155]=0,rs[155]=1,os[155]=0,as[155]=1,ps[155]=0,ds[155]=1,gs[155]=1,Za[155]=-1,Ja[155]=0,Ka[155]=0,es[103]=0,ns[103]=1,is[103]=0,ss[103]=-1,ls[103]=0,us[103]=1,cs[103]=0,hs[103]=-1,fs[103]=1,qa[103]=1,Ya[103]=0,Xa[103]=0,$a[152]=0,Qa[152]=1,ts[152]=1,ss[152]=-1,ls[152]=0,us[152]=1,rs[152]=-1,os[152]=0,as[152]=0,ps[152]=0,ds[152]=-1,gs[152]=0,cs[152]=0,hs[152]=-1,fs[152]=1,Za[152]=1,Ja[152]=0,Ka[152]=1,$a[156]=0,Qa[156]=-1,ts[156]=1,ss[156]=1,ls[156]=0,us[156]=1,rs[156]=-1,os[156]=0,as[156]=0,ps[156]=0,ds[156]=-1,gs[156]=0,cs[156]=0,hs[156]=1,fs[156]=1,Za[156]=-1,Ja[156]=0,Ka[156]=1,$a[137]=0,Qa[137]=1,ts[137]=1,es[137]=0,ns[137]=1,is[137]=0,rs[137]=-1,os[137]=0,as[137]=0,ps[137]=0,ds[137]=-1,gs[137]=0,qa[137]=1,Ya[137]=0,Xa[137]=0,Za[137]=1,Ja[137]=0,Ka[137]=1,$a[139]=0,Qa[139]=1,ts[139]=1,es[139]=0,ns[139]=-1,is[139]=0,rs[139]=1,os[139]=0,as[139]=0,ps[139]=0,ds[139]=1,gs[139]=0,qa[139]=-1,Ya[139]=0,Xa[139]=0,Za[139]=1,Ja[139]=0,Ka[139]=1,$a[98]=0,Qa[98]=-1,ts[98]=0,es[98]=0,ns[98]=-1,is[98]=1,ss[98]=1,ls[98]=0,us[98]=0,rs[98]=1,os[98]=0,as[98]=1,cs[98]=0,hs[98]=1,fs[98]=0,qa[98]=-1,Ya[98]=0,Xa[98]=1,$a[99]=0,Qa[99]=1,ts[99]=0,es[99]=0,ns[99]=-1,is[99]=1,ss[99]=1,ls[99]=0,us[99]=0,rs[99]=-1,os[99]=0,as[99]=1,cs[99]=0,hs[99]=-1,fs[99]=0,qa[99]=1,Ya[99]=0,Xa[99]=1,es[38]=0,ns[38]=-1,is[38]=1,ss[38]=1,ls[38]=0,us[38]=0,ps[38]=0,ds[38]=1,gs[38]=1,cs[38]=0,hs[38]=1,fs[38]=0,qa[38]=-1,Ya[38]=0,Xa[38]=1,Za[38]=-1,Ja[38]=0,Ka[38]=0,es[39]=0,ns[39]=1,is[39]=1,ss[39]=-1,ls[39]=0,us[39]=0,ps[39]=0,ds[39]=-1,gs[39]=1,cs[39]=0,hs[39]=1,fs[39]=0,qa[39]=-1,Ya[39]=0,Xa[39]=1,Za[39]=1,Ja[39]=0,Ka[39]=0;var ms=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},vs=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ys=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},_s=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},xs=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ws=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},bs=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Cs=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ss=[],Ms=[],Es=[],Is=[],Ts=[],Ps=[],Ls=[],Ds=[];Is[1]=Ts[1]=18,Is[169]=Ts[169]=18,Es[4]=Ms[4]=12,Es[166]=Ms[166]=12,Ss[16]=Ds[16]=4,Ss[154]=Ds[154]=4,Ps[64]=Ls[64]=22,Ps[106]=Ls[106]=22,Es[2]=Ps[2]=17,Is[2]=Ts[2]=18,Es[168]=Ps[168]=17,Is[168]=Ts[168]=18,Ss[8]=Is[8]=9,Ms[8]=Es[8]=12,Ss[162]=Is[162]=9,Ms[162]=Es[162]=12,Ss[32]=Ds[32]=4,Ms[32]=Ls[32]=1,Ss[138]=Ds[138]=4,Ms[138]=Ls[138]=1,Ts[128]=Ds[128]=21,Ps[128]=Ls[128]=22,Ts[42]=Ds[42]=21,Ps[42]=Ls[42]=22,Ms[5]=Ts[5]=14,Ms[165]=Ts[165]=14,Es[20]=Ds[20]=6,Es[150]=Ds[150]=6,Ss[80]=Ps[80]=11,Ss[90]=Ps[90]=11,Is[65]=Ls[65]=3,Is[105]=Ls[105]=3,Ss[160]=Ps[160]=11,Ms[160]=Ts[160]=14,Ss[10]=Ps[10]=11,Ms[10]=Ts[10]=14,Es[130]=Ds[130]=6,Is[130]=Ls[130]=3,Es[40]=Ds[40]=6,Is[40]=Ls[40]=3,Ms[101]=Ls[101]=1,Ms[69]=Ls[69]=1,Ts[149]=Ds[149]=21,Ts[21]=Ds[21]=21,Es[86]=Ps[86]=17,Es[84]=Ps[84]=17,Ss[89]=Is[89]=9,Ss[81]=Is[81]=9,Ss[96]=Ls[96]=0,Ms[96]=Ps[96]=15,Ss[74]=Ls[74]=0,Ms[74]=Ps[74]=15,Ss[24]=Es[24]=8,Is[24]=Ds[24]=7,Ss[146]=Es[146]=8,Is[146]=Ds[146]=7,Ms[6]=Ps[6]=15,Es[6]=Ts[6]=16,Ms[164]=Ps[164]=15,Es[164]=Ts[164]=16,Is[129]=Ds[129]=7,Ts[129]=Ls[129]=20,Is[41]=Ds[41]=7,Ts[41]=Ls[41]=20,Es[66]=Ls[66]=2,Is[66]=Ps[66]=19,Es[104]=Ls[104]=2,Is[104]=Ps[104]=19,Ss[144]=Ts[144]=10,Ps[144]=Ds[144]=23,Ss[26]=Ts[26]=10,Ps[26]=Ds[26]=23,Ms[36]=Ds[36]=5,Es[36]=Ls[36]=2,Ms[134]=Ds[134]=5,Es[134]=Ls[134]=2,Ss[9]=Ts[9]=10,Ms[9]=Is[9]=13,Ss[161]=Ts[161]=10,Ms[161]=Is[161]=13,Ms[37]=Ds[37]=5,Ts[37]=Ls[37]=20,Ms[133]=Ds[133]=5,Ts[133]=Ls[133]=20,Es[148]=Ts[148]=16,Ps[148]=Ds[148]=23,Es[22]=Ts[22]=16,Ps[22]=Ds[22]=23,Ss[82]=Es[82]=8,Is[82]=Ps[82]=19,Ss[88]=Es[88]=8,Is[88]=Ps[88]=19,Ss[73]=Ls[73]=0,Ms[73]=Is[73]=13,Ss[97]=Ls[97]=0,Ms[97]=Is[97]=13,Ss[145]=Is[145]=9,Ts[145]=Ds[145]=21,Ss[25]=Is[25]=9,Ts[25]=Ds[25]=21,Ms[70]=Ls[70]=1,Es[70]=Ps[70]=17,Ms[100]=Ls[100]=1,Es[100]=Ps[100]=17,Ss[34]=Is[34]=9,Ms[34]=Es[34]=12,Ts[34]=Ds[34]=21,Ps[34]=Ls[34]=22,Ss[136]=Ds[136]=4,Ms[136]=Ls[136]=1,Es[136]=Ps[136]=17,Is[136]=Ts[136]=18,Ss[35]=Ds[35]=4,Ms[35]=Es[35]=12,Is[35]=Ts[35]=18,Ps[35]=Ls[35]=22,Ss[153]=Ds[153]=4,Is[153]=Ts[153]=18,Ms[102]=Es[102]=12,Ps[102]=Ls[102]=22,Ss[155]=Is[155]=9,Ts[155]=Ds[155]=23,Ms[103]=Ls[103]=1,Es[103]=Ps[103]=17,Ss[152]=Ds[152]=4,Es[152]=Ps[152]=17,Is[152]=Ts[152]=18,Ss[156]=Es[156]=8,Is[156]=Ts[156]=18,Ps[156]=Ds[156]=23,Ss[137]=Ds[137]=4,Ms[137]=Ls[137]=1,Is[137]=Ts[137]=18,Ss[139]=Ds[139]=4,Ms[139]=Is[139]=13,Ts[139]=Ls[139]=20,Ss[98]=Is[98]=9,Ms[98]=Es[98]=12,Ps[98]=Ls[98]=22,Ss[99]=Ls[99]=0,Ms[99]=Es[99]=12,Is[99]=Ps[99]=19,Ms[38]=Es[38]=12,Ts[38]=Ds[38]=21,Ps[38]=Ls[38]=22,Ms[39]=Ds[39]=5,Es[39]=Ts[39]=16,Ps[39]=Ls[39]=22;var As=[];As[1]=As[169]=ms,As[4]=As[166]=vs,As[16]=As[154]=ys,As[64]=As[106]=_s,As[168]=As[2]=xs,As[162]=As[8]=ws,As[138]=As[32]=bs,As[42]=As[128]=Cs,As[5]=As[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},As[20]=As[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},As[80]=As[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},As[65]=As[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},As[160]=As[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},As[130]=As[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},As[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},As[101]=As[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},As[149]=As[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},As[86]=As[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},As[89]=As[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},As[96]=As[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},As[24]=As[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},As[6]=As[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},As[129]=As[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},As[66]=As[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},As[144]=As[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},As[36]=As[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},As[9]=As[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},As[37]=As[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},As[148]=As[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},As[82]=As[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},As[73]=As[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},As[145]=As[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},As[70]=As[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},As[34]=function(t){return[Cs(t),ws(t)]},As[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},As[136]=function(t){return[bs(t),xs(t)]},As[153]=function(t){return[ys(t),ms(t)]},As[102]=function(t){return[vs(t),_s(t)]},As[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},As[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},As[152]=function(t){return[ys(t),xs(t)]},As[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},As[137]=function(t){return[bs(t),ms(t)]},As[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},As[98]=function(t){return[ws(t),_s(t)]},As[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},As[38]=function(t){return[vs(t),Cs(t)]},As[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var ks=function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};ks.buildId=function(t){return t.join(",")},ks.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},ks.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},ks.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},ks.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=xi(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))}),this.outerEdgesSorted=!0)},ks.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},ks.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},ks.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var Ns=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};Ns.prototype.getSymetric=function(){return this.symetric||(this.symetric=new Ns(this.to,this.from),this.symetric.symetric=this),this.symetric},Ns.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},Ns.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},Ns.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},Ns.prototype.toLineString=function(){return s([this.from.coordinates,this.to.coordinates])},Ns.prototype.compareTo=function(t){return xi(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var Os=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Rs={length:{configurable:!0}};Os.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},Os.prototype.get=function(t){return this.edges[t]},Rs.length.get=function(){return this.edges.length},Os.prototype.forEach=function(t){this.edges.forEach(t)},Os.prototype.map=function(t){return this.edges.map(t)},Os.prototype.some=function(t){return this.edges.some(t)},Os.prototype.isValid=function(){return!0},Os.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e},0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=xi(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},Os.prototype.toMultiPoint=function(){return h(this.edges.map(function(t){return t.from.coordinates}))},Os.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},Os.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ce(this.toPolygon())},Os.findEdgeRingContaining=function(t,e){var n,r,o=t.getEnvelope();return e.forEach(function(e){var a=e.getEnvelope();if(r&&(n=r.getEnvelope()),!function(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),i=t.geometry.coordinates.map(function(t){return t[1]}),r=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,r)&&Math.max(null,i)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,r)&&Math.min(null,i)===Math.min(null,o)}(a,o)&&wi(a,o)){var s=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t,e.from.coordinates)})});s&&e.inside(i(s))&&(r&&!wi(n,a)||(r=e))}}),r},Os.prototype.inside=function(t){return Lt(t,this.toPolygon())},Object.defineProperties(Os.prototype,Rs);var Fs=function(){this.edges=[],this.nodes={}};Fs.fromGeoJson=function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(t);var e=new Fs;return R(t,function(t){Y(t,"LineString","Graph::fromGeoJson"),T(t,function(t,n){if(t){var i=e.getNode(t),r=e.getNode(n);e.addEdge(i,r)}return n})}),e},Fs.prototype.getNode=function(t){var e=ks.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new ks(t)),n},Fs.prototype.addEdge=function(t,e){var n=new Ns(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},Fs.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},Fs.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},Fs.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},Fs.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},Fs.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var a=r[o],s=a.symetric,l=void 0,u=void 0;a.label===e&&(l=a),s.label===e&&(u=s),l&&u&&(u&&(i=u),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)},Fs.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var i=n;do i.label=e,i=i.next;while(!n.isEqual(i));e++}}),t},Fs.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},Fs.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++i}),i>1&&e.push(n.from),n=n.next};do i();while(!t.isEqual(n));return e},Fs.prototype._findEdgeRing=function(t){var e=t,n=new Os;do n.push(e),e.ring=n,e=e.next;while(!t.isEqual(e));return n},Fs.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},Fs.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var zs=yt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Bs=(zs.shim,yt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=r?n:i).supported=n,e.unsupported=i})),Vs=(Bs.supported,Bs.unsupported,yt(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var i=Array.prototype.slice,r=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,l;if(e(t)||e(o))return!1;if(t.prototype!==o.prototype)return!1;if(Bs(t))return!!Bs(o)&&(t=i.call(t),o=i.call(o),r(t,o,a));if(n(t)){if(!n(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var u=zs(t),c=zs(o)}catch(t){return!1}if(u.length!=c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!=c[s])return!1;for(s=u.length-1;s>=0;s--)if(l=u[s],!r(t[l],o[l],a))return!1;return typeof t==typeof o}(t,o,a))}})),Gs=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Ai};Gs.prototype.compare=function(t,e){if(t.type!==e.type||!Di(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=Li(t),r=Li(e);return i.every(function(t){return this.some(function(e){return n.compare(t,e)})},r)}}return!1},Gs.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Gs.prototype.compareLine=function(t,e,n,i){if(!Di(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},Gs.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},Gs.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},Gs.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every(function(t){return this.some(function(e){return r.compareLine(t,e,1,!0)})},i)}return!1},Gs.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Gs.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Gs.prototype.removePseudo=function(t){return t};var Hs=Gs,js=yt(function(t){function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Us=yt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(c),s=0,l=0;l<c;l++)a[l]=0;for(var u=0;u<n;u++){var c=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<c;l++)a[l]+=this.dataset[u][l];s++}}if(s>0){for(l=0;l<c;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do e=Math.round(Math.random()*n),t=this.dataset[e];while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(i=n(t,e[s]))<r&&(r=i,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ws=yt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),qs=yt(function(t){function e(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}if(t.exports)var n=Ws;e.prototype.run=function(t,e,i,r){this._init(t,e,i,r);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new n(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(s,l))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i];t.push([i,r])}return t},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Ys=yt(function(t){t.exports&&(t.exports={DBSCAN:js,KMEANS:Us,OPTICS:qs,PriorityQueue:Ws})}),Xs=(Ys.DBSCAN,Ys.KMEANS,Ys.OPTICS,Ys.PriorityQueue,function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var a=(t[o]||0)-(e[o]||0);r+=a*a}return n?Math.sqrt(r):r}),Zs=Xs,Js=function(t,e,n){var i=Math.abs(t-e);return n?i:i*i},Ks=Xs,$s=function(t,e){for(var n={},i=[],r=e<<2,o=t.length,a=t[0].length>0;i.length<e&&r-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,
i.push(s))}if(i.length<e)throw new Error("Error initializating clusters");return i},Qs=function(t,e){var n=t[0].length?Zs:Js,i=[],r=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*r)];for(o&&a.join("_"),i.push(a);i.length<e;){for(var s=[],l=i.length,u=0,c=[],h=0;h<r;h++){for(var f=1/0,p=0;p<l;p++){var d=n(t[h],i[p]);d<=f&&(f=d)}s[h]=f}for(var g=0;g<r;g++)u+=s[g];for(var m=0;m<r;m++)c[m]={i:m,v:t[m],pr:s[m]/u,cs:0};c.sort(function(t,e){return t.pr-e.pr}),c[0].cs=c[0].pr;for(var v=1;v<r;v++)c[v].cs=c[v-1].cs+c[v].pr;for(var y=Math.random(),_=0;_<r-1&&c[_++].cs<y;);i.push(c[_-1].v)}return i},tl=1e4,el=function(t,e,n,i){var r=[],o=[],a=[],s=[],l=!1,u=i||tl,c=t.length,h=t[0].length,f=h>0,p=[];if(n)r="kmrand"==n?$s(t,e):"kmpp"==n?Qs(t,e):n;else for(var d={};r.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,r.push(t[g]))}do{Ni(e,0,p);for(var m=0;m<c;m++){for(var v=1/0,y=0,_=0;_<e;_++)(s=f?Ks(t[m],r[_]):Math.abs(t[m]-r[_]))<=v&&(v=s,y=_);a[m]=y,p[y]++}for(var x=[],w=(o=[],0);w<e;w++)x[w]=f?Ni(h,0,x[w]):0,o[w]=r[w];if(f){for(var b=0;b<e;b++)r[b]=[];for(var C=0;C<c;C++)for(var S=x[a[C]],M=t[C],E=0;E<h;E++)S[E]+=M[E];l=!0;for(var I=0;I<e;I++){for(var T=r[I],P=x[I],L=o[I],D=p[I],A=0;A<h;A++)T[A]=P[A]/D||0;if(l)for(var k=0;k<h;k++)if(L[k]!=T[k]){l=!1;break}}}else{for(var N=0;N<c;N++)x[a[N]]+=t[N];for(var O=0;O<e;O++)r[O]=x[O]/p[O]||0;l=!0;for(var R=0;R<e;R++)if(o[R]!=r[R]){l=!1;break}}l=l||--u<=0}while(!l);return{it:tl-u,k:e,idxs:a,centroids:r}},nl={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||nl.heuristics.manhattan,o=i.closest||!1,a=new Bi(function(t){return t.f}),s=e;for(e.h=r(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return Ri(l);l.closed=!0;for(var u=t.neighbors(l),c=0,h=u.length;c<h;++c){var f=u[c];if(!f.closed&&!f.isWall()){var p=l.g+f.getCost(l),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=l,f.h=f.h||r(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),d?a.rescoreElement(f):a.push(f))}}}return o?Ri(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Fi.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)nl.cleanNode(this.nodes[t])},Fi.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)nl.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Fi.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Fi.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},Fi.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,i=(e=o[a]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},zi.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},zi.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},zi.prototype.isWall=function(){return 0===this.weight},Bi.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(r=this.scoreFunction(l))<i&&(s=a)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===s?i:r)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}};var il=function(t){return function(){return t}};Hi.prototype={constructor:Hi,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=qi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Ui(this,n),n=(t=n).U),n.C=!1,i.C=!0,Wi(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Wi(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ui(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?qi(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Ui(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Wi(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Ui(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Wi(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ui(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Wi(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var rl,ol,al,sl,ll,ul=[],cl=[],hl=1e-6,fl=1e-12;cr.prototype={constructor:cr,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Qi(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,s=n.site,l=-1,u=e[r[o-1]],c=u.left===s?u.right:u.left;++l<o;)a=c,c=(u=e[r[l]]).left===s?u.right:u.left,a&&c&&i<a.index&&i<c.index&&lr(s,a,c)<0&&t.push([s.data,a.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var l=t-r.site[0],u=e-r.site[1],c=l*l+u*u;do r=o.cells[i=a],a=null,r.halfedges.forEach(function(n){var i=o.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,a=s.index)}});while(null!==a);return o._found=i,null==n||c<=n*n?r.site:null}};var pl=function(){function t(t){return new cr(t.map(function(i,r){var o=[Math.round(e(i,r,t)/hl)*hl,Math.round(n(i,r,t)/hl)*hl];return o.index=r,o.data=i,o}),i)}var e=Vi,n=Gi,i=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:il(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:il(+e),t):n},t.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},t.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],t):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},t},dl=Object.freeze({randomPosition:vr,randomPoint:yr,randomPolygon:_r,randomLineString:xr}),gl=Object.freeze({getCluster:br,clusterEach:Cr,clusterReduce:Sr,createBins:Mr,applyFilter:Er,propertiesContainsFilter:Ir,filterProperties:Tr});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var ml=function(){};ml.prototype.interfaces_=function(){return[]},ml.prototype.getClass=function(){return ml},ml.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var vl=function(){},yl=function(){},_l={MAX_VALUE:{configurable:!0}};yl.isNaN=function(t){return Number.isNaN(t)},yl.doubleToLongBits=function(t){return t},yl.longBitsToDouble=function(t){return t},yl.isInfinite=function(t){return!Number.isFinite(t)},_l.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(yl,_l);var xl=function(){},wl=function(){},bl=function(){},Cl=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Sl={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Cl.prototype.setOrdinate=function(t,e){switch(t){case Cl.X:this.x=e;break;case Cl.Y:this.y=e;break;case Cl.Z:this.z=e;break;default:throw new vl("Invalid ordinate index: "+t)}},Cl.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!ml.equalsWithTolerance(this.x,e.x,n)&&!!ml.equalsWithTolerance(this.y,e.y,n)}},Cl.prototype.getOrdinate=function(t){switch(t){case Cl.X:return this.x;case Cl.Y:return this.y;case Cl.Z:return this.z}throw new vl("Invalid ordinate index: "+t)},Cl.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||yl.isNaN(this.z))&&yl.isNaN(t.z)},Cl.prototype.equals=function(t){return t instanceof Cl&&this.equals2D(t)},Cl.prototype.equalInZ=function(t,e){return ml.equalsWithTolerance(this.z,t.z,e)},Cl.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Cl.prototype.clone=function(){},Cl.prototype.copy=function(){return new Cl(this)},Cl.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Cl.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},Cl.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Cl.prototype.hashCode=function(){var t=17;return t=37*t+Cl.hashCode(this.x),t=37*t+Cl.hashCode(this.y)},Cl.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Cl.prototype.interfaces_=function(){return[xl,wl,Pr]},Cl.prototype.getClass=function(){return Cl},Cl.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=yl.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Sl.DimensionalComparator.get=function(){return Ml},Sl.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Sl.NULL_ORDINATE.get=function(){return yl.NaN},Sl.X.get=function(){return 0},Sl.Y.get=function(){return 1},Sl.Z.get=function(){return 2},Object.defineProperties(Cl,Sl);var Ml=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new vl("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Ml.prototype.compare=function(t,e){var n=t,i=e,r=Ml.compare(n.x,i.x);if(0!==r)return r;var o=Ml.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:Ml.compare(n.z,i.z)},Ml.prototype.interfaces_=function(){return[bl]},Ml.prototype.getClass=function(){return Ml},Ml.compare=function(t,e){return t<e?-1:t>e?1:yl.isNaN(t)?yl.isNaN(e)?0:-1:yl.isNaN(e)?1:0};var El=function(){};El.prototype.create=function(){},El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El};var Il=function(){},Tl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Il.prototype.interfaces_=function(){return[]},Il.prototype.getClass=function(){return Il},Il.toLocationSymbol=function(t){switch(t){case Il.EXTERIOR:return"e";case Il.BOUNDARY:return"b";case Il.INTERIOR:return"i";case Il.NONE:return"-"}throw new vl("Unknown location value: "+t)},Tl.INTERIOR.get=function(){return 0},Tl.BOUNDARY.get=function(){return 1},Tl.EXTERIOR.get=function(){return 2},Tl.NONE.get=function(){return-1},Object.defineProperties(Il,Tl);var Pl=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Ll=function(){},Dl={LOG_10:{configurable:!0}};Ll.prototype.interfaces_=function(){return[]},Ll.prototype.getClass=function(){return Ll},Ll.log10=function(t){var e=Math.log(t);return yl.isInfinite(e)?e:yl.isNaN(e)?e:e/Ll.LOG_10},Ll.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},Ll.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},Ll.wrap=function(t,e){return t<0?e- -t%e:t%e},Ll.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=r;return o>l&&(l=o),a>l&&(l=a),s>l&&(l=s),l}},Ll.average=function(t,e){return(t+e)/2},Dl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Ll,Dl);var Al=function(t){this.str=t};Al.prototype.append=function(t){this.str+=t},Al.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Al.prototype.toString=function(t){return this.str};var kl=function(t){this.value=t};kl.prototype.intValue=function(){return this.value},kl.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},kl.isNaN=function(t){return Number.isNaN(t)};var Nl=function(){};Nl.isWhitespace=function(t){return t<=32&&t>=0||127===t},Nl.toUpperCase=function(t){return t.toUpperCase()};var Ol=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var i=arguments[0];t.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}},Rl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Ol.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Ol.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=Ol.magnitude(n._hi),r=Ol.TEN.pow(i);(n=n.divide(r)).gt(Ol.TEN)?(n=n.divide(Ol.TEN),i+=1):n.lt(Ol.ONE)&&(n=n.multiply(Ol.TEN),i-=1);for(var o=i+1,a=new Al,s=Ol.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,h=0;u>9?(c=!0,h="9"):h="0"+u,a.append(h),n=n.subtract(Ol.valueOf(u)).multiply(Ol.TEN),c&&n.selfAdd(Ol.TEN);var f=!0,p=Ol.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-l&&(f=!1),!f)break}return e[0]=i,a.toString()},Ol.prototype.sqr=function(){return this.multiply(this)},Ol.prototype.doubleValue=function(){return this._hi+this._lo},Ol.prototype.subtract=function(){if(arguments[0]instanceof Ol){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Ol.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Ol.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Ol.prototype.selfSubtract=function(){if(arguments[0]instanceof Ol){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Ol.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Ol.prototype.min=function(t){return this.le(t)?this:t},Ol.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Ol){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null;return l=this._hi/n,u=Ol.SPLIT*l,r=u-l,h=Ol.SPLIT*n,r=u-r,o=l-r,a=h-n,c=l*n,a=h-a,s=n-a,h=r*a-c+r*s+o*a+o*s,u=(this._hi-c-h+this._lo-l*i)/n,h=l+u,this._hi=h,this._lo=l-h+u,this}},Ol.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Ol.prototype.divide=function(){if(arguments[0]instanceof Ol){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,a=null,s=null,l=null;return n=(o=this._hi/t._hi)-(e=(a=Ol.SPLIT*o)-(e=a-o)),l=e*(i=(l=Ol.SPLIT*t._hi)-(i=l-t._hi))-(s=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,a=(this._hi-s-l+this._lo-o*t._lo)/t._hi,new Ol(l=o+a,o-l+a)}if("number"==typeof arguments[0]){var u=arguments[0];return yl.isNaN(u)?Ol.createNaN():Ol.copy(this).selfDivide(u,0)}},Ol.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Ol.prototype.pow=function(t){if(0===t)return Ol.valueOf(1);var e=new Ol(this),n=Ol.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Ol.prototype.ceil=function(){if(this.isNaN())return Ol.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Ol(t,e)},Ol.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Ol.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Ol.prototype.setValue=function(){if(arguments[0]instanceof Ol){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Ol.prototype.max=function(t){return this.ge(t)?this:t},Ol.prototype.sqrt=function(){if(this.isZero())return Ol.valueOf(0);if(this.isNegative())return Ol.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Ol.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},Ol.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Ol){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,a=null,s=null;return r=this._hi+e,a=r-this._hi,o=r-a,o=e-a+(this._hi-o),s=o+this._lo,n=r+s,i=s+(r-n),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],c=null,h=null,f=null,p=null,d=null,g=null,m=null;p=this._hi+l,h=this._lo+u,d=p-(g=p-this._hi),f=h-(m=h-this._lo);var v=(c=p+(g=(d=l-g+(this._hi-d))+h))+(g=(f=u-m+(this._lo-f))+(g+(p-c))),y=g+(c-v);return this._hi=v,this._lo=y,this}},Ol.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Ol){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,l=null,u=null;r=(l=Ol.SPLIT*this._hi)-this._hi,u=Ol.SPLIT*n,r=l-r,o=this._hi-r,a=u-n;var c=(l=this._hi*n)+(u=r*(a=u-a)-l+r*(s=n-a)+o*a+o*s+(this._hi*i+this._lo*n)),h=u+(r=l-c);return this._hi=c,this._lo=h,this}},Ol.prototype.selfSqr=function(){return this.selfMultiply(this)},Ol.prototype.floor=function(){if(this.isNaN())return Ol.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Ol(t,e)},Ol.prototype.negate=function(){return this.isNaN()?this:new Ol(-this._hi,-this._lo)},Ol.prototype.clone=function(){},Ol.prototype.multiply=function(){if(arguments[0]instanceof Ol){var t=arguments[0];return t.isNaN()?Ol.createNaN():Ol.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return yl.isNaN(e)?Ol.createNaN():Ol.copy(this).selfMultiply(e,0)}},Ol.prototype.isNaN=function(){return yl.isNaN(this._hi)},Ol.prototype.intValue=function(){return Math.trunc(this._hi)},Ol.prototype.toString=function(){var t=Ol.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Ol.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+Ol.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+Ol.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},Ol.prototype.reciprocal=function(){var t=null,e=null,n=null,i=null,r=null,o=null,a=null,s=null;e=(r=1/this._hi)-(t=(o=Ol.SPLIT*r)-(t=o-r)),n=(s=Ol.SPLIT*this._hi)-this._hi;var l=r+(o=(1-(a=r*this._hi)-(s=t*(n=s-n)-a+t*(i=this._hi-n)+e*n+e*i)-r*this._lo)/this._hi);return new Ol(l,r-l+o)},Ol.prototype.toSciNotation=function(){if(this.isZero())return Ol.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=Ol.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},Ol.prototype.abs=function(){return this.isNaN()?Ol.NaN:this.isNegative()?this.negate():new Ol(this)},Ol.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Ol.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Ol.prototype.add=function(){if(arguments[0]instanceof Ol){var t=arguments[0];return Ol.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Ol.copy(this).selfAdd(e)}},Ol.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Ol){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},Ol.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Ol.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Ol.prototype.trunc=function(){return this.isNaN()?Ol.NaN:this.isPositive()?this.floor():this.ceil()},Ol.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Ol.prototype.interfaces_=function(){return[Pr,xl,wl]},Ol.prototype.getClass=function(){return Ol},Ol.sqr=function(t){return Ol.valueOf(t).selfMultiply(t)},Ol.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Ol.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Ol(e)}},Ol.sqrt=function(t){return Ol.valueOf(t).sqrt()},Ol.parse=function(t){for(var e=0,n=t.length;Nl.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new Ol,a=0,s=0,l=0;!(e>=n);){var u=t.charAt(e);if(e++,Nl.isDigit(u)){var c=u-"0";o.selfMultiply(Ol.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"===u||"E"===u){var h=t.substring(e);try{l=kl.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-l;if(0===p)f=o;else if(p>0){var d=Ol.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=Ol.TEN.pow(-p);f=o.multiply(g)}return i?f.negate():f},Ol.createNaN=function(){return new Ol(yl.NaN,yl.NaN)},Ol.copy=function(t){return new Ol(t)},Ol.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},Ol.stringOfChar=function(t,e){for(var n=new Al,i=0;i<e;i++)n.append(t);return n.toString()},Rl.PI.get=function(){return new Ol(3.141592653589793,1.2246467991473532e-16)},Rl.TWO_PI.get=function(){return new Ol(6.283185307179586,2.4492935982947064e-16)},Rl.PI_2.get=function(){return new Ol(1.5707963267948966,6.123233995736766e-17)},Rl.E.get=function(){return new Ol(2.718281828459045,1.4456468917292502e-16)},Rl.NaN.get=function(){return new Ol(yl.NaN,yl.NaN)},Rl.EPS.get=function(){return 1.23259516440783e-32},Rl.SPLIT.get=function(){return 134217729},Rl.MAX_PRINT_DIGITS.get=function(){return 32},Rl.TEN.get=function(){return Ol.valueOf(10)},Rl.ONE.get=function(){return Ol.valueOf(1)},Rl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Rl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Ol,Rl);var Fl=function(){},zl={DP_SAFE_EPSILON:{configurable:!0}};Fl.prototype.interfaces_=function(){return[]},Fl.prototype.getClass=function(){return Fl},Fl.orientationIndex=function(t,e,n){var i=Fl.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=Ol.valueOf(e.x).selfAdd(-t.x),o=Ol.valueOf(e.y).selfAdd(-t.y),a=Ol.valueOf(n.x).selfAdd(-e.x),s=Ol.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},Fl.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},Fl.intersection=function(t,e,n,i){var r=Ol.valueOf(i.y).selfSubtract(n.y).selfMultiply(Ol.valueOf(e.x).selfSubtract(t.x)),o=Ol.valueOf(i.x).selfSubtract(n.x).selfMultiply(Ol.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),s=Ol.valueOf(i.x).selfSubtract(n.x).selfMultiply(Ol.valueOf(t.y).selfSubtract(n.y)),l=Ol.valueOf(i.y).selfSubtract(n.y).selfMultiply(Ol.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=Ol.valueOf(t.x).selfAdd(Ol.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),h=Ol.valueOf(e.x).selfSubtract(t.x).selfMultiply(Ol.valueOf(t.y).selfSubtract(n.y)),f=Ol.valueOf(e.y).selfSubtract(t.y).selfMultiply(Ol.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=Ol.valueOf(n.y).selfAdd(Ol.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new Cl(c,d)},Fl.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=r-o;if(r>0){if(o<=0)return Fl.signum(a);i=r+o}else{if(!(r<0))return Fl.signum(a);if(o>=0)return Fl.signum(a);i=-r-o}var s=Fl.DP_SAFE_EPSILON*i;return a>=s||-a>=s?Fl.signum(a):2},Fl.signum=function(t){return t>0?1:t<0?-1:0},zl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Fl,zl);var Bl=function(){},Vl={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Vl.X.get=function(){return 0},Vl.Y.get=function(){return 1},Vl.Z.get=function(){return 2},Vl.M.get=function(){return 3},Bl.prototype.setOrdinate=function(t,e,n){},Bl.prototype.size=function(){},Bl.prototype.getOrdinate=function(t,e){},Bl.prototype.getCoordinate=function(){},Bl.prototype.getCoordinateCopy=function(t){},Bl.prototype.getDimension=function(){},Bl.prototype.getX=function(t){},Bl.prototype.clone=function(){},Bl.prototype.expandEnvelope=function(t){},Bl.prototype.copy=function(){},Bl.prototype.getY=function(t){},Bl.prototype.toCoordinateArray=function(){},Bl.prototype.interfaces_=function(){return[wl]},Bl.prototype.getClass=function(){return Bl},Object.defineProperties(Bl,Vl);var Gl=function(){},Hl=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gl),jl=function(){};jl.arraycopy=function(t,e,n,i,r){for(var o=0,a=e;a<e+r;a++)n[i+o]=t[a],o++},jl.getProperty=function(t){return{"line.separator":"\n"}[t]};var Ul=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof Cl&&arguments[1]instanceof Cl){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2];this.x=l,this.y=u,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,m=f.x-h.x,v=h.x*f.y-f.x*h.y,y=p.y-d.y,_=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=m*x-_*v,this.y=y*v-g*x,this.w=g*_-y*m}};Ul.prototype.getY=function(){var t=this.y/this.w;if(yl.isNaN(t)||yl.isInfinite(t))throw new Hl;return t},Ul.prototype.getX=function(){var t=this.x/this.w;if(yl.isNaN(t)||yl.isInfinite(t))throw new Hl;return t},Ul.prototype.getCoordinate=function(){var t=new Cl;return t.x=this.getX(),t.y=this.getY(),t},Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-i.y,l=i.x-n.x,u=n.x*i.y-i.x*n.y,c=r*l-s*o,h=(o*u-l*a)/c,f=(s*a-r*u)/c;if(yl.isNaN(h)||yl.isInfinite(h)||yl.isNaN(f)||yl.isInfinite(f))throw new Hl;return new Cl(h,f)};var Wl=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Cl){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},ql={serialVersionUID:{configurable:!0}};Wl.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Wl.prototype.equals=function(t){if(!(t instanceof Wl))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Wl.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Wl;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new Wl(e,i,n,r)},Wl.prototype.isNull=function(){return this._maxx<this._minx},Wl.prototype.getMaxX=function(){return this._maxx},Wl.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Cl){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Wl){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},Wl.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Wl){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny);
}if(arguments[0]instanceof Cl){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},Wl.prototype.getMinY=function(){return this._miny},Wl.prototype.getMinX=function(){return this._minx},Wl.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Cl){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Wl){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},Wl.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Wl.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Wl.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Wl.prototype.translate=function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Wl.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Wl.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Wl.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Wl.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Wl.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Wl.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Wl){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Cl){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},Wl.prototype.centre=function(){return this.isNull()?null:new Cl((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Wl.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Cl){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Wl){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Wl.prototype.getMaxY=function(){return this._maxy},Wl.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Wl.prototype.hashCode=function(){var t=17;return t=37*t+Cl.hashCode(this._minx),t=37*t+Cl.hashCode(this._maxx),t=37*t+Cl.hashCode(this._miny),t=37*t+Cl.hashCode(this._maxy)},Wl.prototype.interfaces_=function(){return[xl,Pr]},Wl.prototype.getClass=function(){return Wl},Wl.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(u>l||c<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(i.y,r.y),c=Math.max(i.y,r.y),u>l||c<s))}},ql.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Wl,ql);var Yl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Xl=function(t){this.geometryFactory=t||new vc};Xl.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=Yl.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=Yl.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Jl[n]&&(e=Jl[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Xl.prototype.write=function(t){return this.extractGeometry(t)},Xl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Zl[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Zl[e].apply(this,[t])+")"};var Zl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Zl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Zl.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Zl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Zl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Zl.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Zl.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+Zl.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Zl.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Jl={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Yl.spaces);return this.geometryFactory.createPoint(new Cl(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Yl.trimParens,"$1"),i.push(Jl.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Yl.spaces),i.push(new Cl(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Yl.spaces),i.push(new Cl(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Yl.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Yl.trimParens,"$1"),i.push(Jl.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(Yl.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(Yl.trimParens,"$1"),n=Jl.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===s?r=i:a.push(i);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Yl.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Yl.trimParens,"$1"),i.push(Jl.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},Kl=function(t){this.parser=new Xl(t)};Kl.prototype.write=function(t){return this.parser.write(t)},Kl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $l=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Ql=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($l),tu=function(){};tu.prototype.interfaces_=function(){return[]},tu.prototype.getClass=function(){return tu},tu.shouldNeverReachHere=function(){if(0===arguments.length)tu.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Ql("Should never reach here"+(null!==t?": "+t:""))}},tu.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],tu.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new Ql:new Ql(e)},tu.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],tu.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new Ql("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var eu=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Cl,this._intPt[1]=new Cl,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};eu.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},eu.prototype.getTopologySummary=function(){var t=new Al;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},eu.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},eu.prototype.getIntersectionNum=function(){return this._result},eu.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},eu.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},eu.prototype.setPrecisionModel=function(t){this._precisionModel=t},eu.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},eu.prototype.getIntersection=function(t){return this._intPt[t]},eu.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},eu.prototype.hasIntersection=function(){return this._result!==eu.NO_INTERSECTION},eu.prototype.getEdgeDistance=function(t,e){return eu.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},eu.prototype.isCollinear=function(){return this._result===eu.COLLINEAR_INTERSECTION},eu.prototype.toString=function(){return Kl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Kl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},eu.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},eu.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},eu.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},eu.prototype.interfaces_=function(){return[]},eu.prototype.getClass=function(){return eu},eu.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=i>r?a:s)||t.equals(e)||(o=Math.max(a,s))}return tu.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},eu.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return tu.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nu.DONT_INTERSECT.get=function(){return 0},nu.DO_INTERSECT.get=function(){return 1},nu.COLLINEAR.get=function(){return 2},nu.NO_INTERSECTION.get=function(){return 0},nu.POINT_INTERSECTION.get=function(){return 1},nu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(eu,nu);var iu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Wl(this._inputLines[0][0],this._inputLines[0][1]),n=new Wl(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];return this._isProper=!1,Wl.intersects(n,i,e)&&0===au.orientationIndex(n,i,e)&&0===au.orientationIndex(i,n,e)?(this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null):void(this._result=t.NO_INTERSECTION)},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=Ul.intersection(t,n,i,r)}catch(a){if(!(a instanceof Hl))throw a;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new Cl(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=Fl.intersection(t,e,n,i),a=this.isInSegmentEnvelopes(o);jl.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&jl.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new Cl(t),o=new Cl(e),a=new Cl(n),s=new Cl(i),l=new Cl;this.normalizeToEnvCentre(r,o,a,s,l);var u=this.safeHCoordinateIntersection(r,o,a,s);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=Wl.intersects(e,n,i),a=Wl.intersects(e,n,r),s=Wl.intersects(i,r,e),l=Wl.intersects(i,r,n);return o&&a?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,p=((o>u?o:u)+(s<h?s:h))/2,d=((a>c?a:c)+(l<f?l:f))/2;r.x=p,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!Wl.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=au.orientationIndex(e,n,i),a=au.orientationIndex(e,n,r);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=au.orientationIndex(i,r,e),l=au.orientationIndex(i,r,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,i,r):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new Cl(i):0===a?this._intPt[0]=new Cl(r):0===s?this._intPt[0]=new Cl(e):0===l&&(this._intPt[0]=new Cl(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=au.distancePointLine(t,n,i),a=au.distancePointLine(e,n,i);return a<o&&(o=a,r=e),(a=au.distancePointLine(n,t,e))<o&&(o=a,r=n),(a=au.distancePointLine(i,t,e))<o&&(o=a,r=i),r},e}(eu),ru=function(){};ru.prototype.interfaces_=function(){return[]},ru.prototype.getClass=function(){return ru},ru.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ru.signOfDet2x2(i,r,o,a)},ru.signOfDet2x2=function(t,e,n,i){var r=null,o=null,a=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(a=Math.floor(n/t),n-=a*t,(i-=a*e)<0)return-r;if(i>e)return r;if(t>n+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(a=Math.floor(t/n),t-=a*n,(e-=a*i)<0)return r;if(e>i)return-r;if(n>t+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var ou=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};ou.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=ru.signOfDet2x2(r,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},ou.prototype.isPointInPolygon=function(){return this.getLocation()!==Il.EXTERIOR},ou.prototype.getLocation=function(){return this._isPointOnSegment?Il.BOUNDARY:this._crossingCount%2==1?Il.INTERIOR:Il.EXTERIOR},ou.prototype.isOnSegment=function(){return this._isPointOnSegment},ou.prototype.interfaces_=function(){return[]},ou.prototype.getClass=function(){return ou},ou.locatePointInRing=function(){if(arguments[0]instanceof Cl&&Pl(arguments[1],Bl)){for(var t=arguments[0],e=arguments[1],n=new ou(t),i=new Cl,r=new Cl,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Cl&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],l=new ou(a),u=1;u<s.length;u++){var c=s[u],h=s[u-1];if(l.countSegment(c,h),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var au=function(){},su={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};au.prototype.interfaces_=function(){return[]},au.prototype.getClass=function(){return au},au.orientationIndex=function(t,e,n){return Fl.orientationIndex(t,e,n)},au.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(Pl(arguments[0],Bl)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new Cl,u=new Cl,c=new Cl;a.getCoordinate(0,u),a.getCoordinate(1,c);var h=u.x;c.x-=h;for(var f=0,p=1;p<s-1;p++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(p+1,c),c.x-=h,f+=u.x*(l.y-c.y);return f/2}},au.distanceLineLine=function(t,e,n,i){if(t.equals(e))return au.distancePointLine(t,n,i);if(n.equals(i))return au.distancePointLine(i,t,e);var r=!1;if(Wl.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var a=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(r=!0)}}else r=!0;return r?Ll.min(au.distancePointLine(t,n,i),au.distancePointLine(e,n,i),au.distancePointLine(n,t,e),au.distancePointLine(i,t,e)):0},au.isPointInRing=function(t,e){return au.locatePointInRing(t,e)!==Il.EXTERIOR},au.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new Cl;t.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var s=i.x,l=i.y,u=s-r,c=l-o;n+=Math.sqrt(u*u+c*c),r=s,o=l}return n},au.isCCW=function(t){var e=t.length-1;if(e<3)throw new vl("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var a=i;do(a-=1)<0&&(a=e);while(t[a].equals2D(n)&&a!==i);var s=i;do s=(s+1)%e;while(t[s].equals2D(n)&&s!==i);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=au.computeOrientation(l,n,u),h=!1;return h=0===c?l.x>u.x:c>0},au.locatePointInRing=function(t,e){return ou.locatePointInRing(t,e)},au.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},au.computeOrientation=function(t,e,n){return au.orientationIndex(t,e,n)},au.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new vl("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=au.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(u>=1)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},au.isOnLine=function(t,e){for(var n=new iu,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},su.CLOCKWISE.get=function(){return-1},su.RIGHT.get=function(){return au.CLOCKWISE},su.COUNTERCLOCKWISE.get=function(){return 1},su.LEFT.get=function(){return au.COUNTERCLOCKWISE},su.COLLINEAR.get=function(){return 0},su.STRAIGHT.get=function(){return au.COLLINEAR},Object.defineProperties(au,su);var lu=function(){};lu.prototype.filter=function(t){},lu.prototype.interfaces_=function(){return[]},lu.prototype.getClass=function(){return lu};var uu=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},cu={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};uu.prototype.isGeometryCollection=function(){return this.getSortIndex()===uu.SORTINDEX_GEOMETRYCOLLECTION},uu.prototype.getFactory=function(){return this._factory},uu.prototype.getGeometryN=function(t){return this},uu.prototype.getArea=function(){return 0},uu.prototype.isRectangle=function(){return!1},uu.prototype.equals=function(){if(arguments[0]instanceof uu){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof uu))return!1;var n=e;return this.equalsExact(n)}},uu.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},uu.prototype.geometryChanged=function(){this.apply(uu.geometryChangedFilter)},uu.prototype.geometryChangedAction=function(){this._envelope=null},uu.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},uu.prototype.getLength=function(){return 0},uu.prototype.getNumGeometries=function(){return 1},uu.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},uu.prototype.getUserData=function(){return this._userData},uu.prototype.getSRID=function(){return this._SRID},uu.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},uu.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===uu.SORTINDEX_GEOMETRYCOLLECTION)throw new vl("This method does not support GeometryCollection arguments")},uu.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},uu.prototype.norm=function(){var t=this.copy();return t.normalize(),t},uu.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},uu.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Wl(this._envelope)},uu.prototype.setSRID=function(t){this._SRID=t},uu.prototype.setUserData=function(t){this._userData=t},uu.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0},uu.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},uu.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===uu.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===uu.SORTINDEX_MULTIPOINT||this.getSortIndex()===uu.SORTINDEX_MULTILINESTRING||this.getSortIndex()===uu.SORTINDEX_MULTIPOLYGON},uu.prototype.interfaces_=function(){return[wl,xl,Pr]},uu.prototype.getClass=function(){return uu},uu.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},uu.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},cu.serialVersionUID.get=function(){return 0x799ea46522854c00},cu.SORTINDEX_POINT.get=function(){return 0},cu.SORTINDEX_MULTIPOINT.get=function(){return 1},cu.SORTINDEX_LINESTRING.get=function(){return 2},cu.SORTINDEX_LINEARRING.get=function(){return 3},cu.SORTINDEX_MULTILINESTRING.get=function(){return 4},cu.SORTINDEX_POLYGON.get=function(){return 5},cu.SORTINDEX_MULTIPOLYGON.get=function(){return 6},cu.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},cu.geometryChangedFilter.get=function(){return hu},Object.defineProperties(uu,cu);var hu=function(){};hu.interfaces_=function(){return[lu]},hu.filter=function(t){t.geometryChangedAction()};var fu=function(){};fu.prototype.filter=function(t){},fu.prototype.interfaces_=function(){return[]},fu.prototype.getClass=function(){return fu};var pu=function(){},du={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};pu.prototype.isInBoundary=function(t){},pu.prototype.interfaces_=function(){return[]},pu.prototype.getClass=function(){return pu},du.Mod2BoundaryNodeRule.get=function(){return gu},du.EndPointBoundaryNodeRule.get=function(){return mu},du.MultiValentEndPointBoundaryNodeRule.get=function(){return vu},du.MonoValentEndPointBoundaryNodeRule.get=function(){return yu},du.MOD2_BOUNDARY_RULE.get=function(){return new gu},du.ENDPOINT_BOUNDARY_RULE.get=function(){return new mu},du.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vu},du.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yu},du.OGC_SFS_BOUNDARY_RULE.get=function(){return pu.MOD2_BOUNDARY_RULE},Object.defineProperties(pu,du);var gu=function(){};gu.prototype.isInBoundary=function(t){return t%2==1},gu.prototype.interfaces_=function(){return[pu]},gu.prototype.getClass=function(){return gu};var mu=function(){};mu.prototype.isInBoundary=function(t){return t>0},mu.prototype.interfaces_=function(){return[pu]},mu.prototype.getClass=function(){return mu};var vu=function(){};vu.prototype.isInBoundary=function(t){return t>1},vu.prototype.interfaces_=function(){return[pu]},vu.prototype.getClass=function(){return vu};var yu=function(){};yu.prototype.isInBoundary=function(t){return 1===t},yu.prototype.interfaces_=function(){return[pu]},yu.prototype.getClass=function(){return yu};var _u=function(){};_u.prototype.add=function(){},_u.prototype.addAll=function(){},_u.prototype.isEmpty=function(){},_u.prototype.iterator=function(){},_u.prototype.size=function(){},_u.prototype.toArray=function(){},_u.prototype.remove=function(){};var xu=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),wu=function(){};wu.prototype.hasNext=function(){},wu.prototype.next=function(){},wu.prototype.remove=function(){};var bu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(_u);(Lr.prototype=new Error).name="NoSuchElementException";var Cu=function(t){function e(){
t.call(this),this.array_=[],arguments[0]instanceof _u&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,_u]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Su(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new xu;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(bu),Su=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Lr;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(wu),Mu=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=!1,r=e.iterator();r.hasNext();)this.add(r.next(),n),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof Cl&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],l);else for(var c=s.length-1;c>=0;c--)this.add(s[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Cl){var h=arguments[0],f=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(f))return null;if(h<p&&this.get(h).equals2D(f))return null}}t.prototype.add.call(this,h,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],m=arguments[2],v=arguments[3],y=1;m>v&&(y=-1);for(var _=m;_!==v;_+=y)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Cl(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Cu),Eu=function(){},Iu={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Iu.ForwardComparator.get=function(){return Tu},Iu.BidirectionalComparator.get=function(){return Pu},Iu.coordArrayType.get=function(){return new Array(0).fill(null)},Eu.prototype.interfaces_=function(){return[]},Eu.prototype.getClass=function(){return Eu},Eu.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Eu.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Eu.indexOf(i,e)<0)return i}return null},Eu.scroll=function(t,e){var n=Eu.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);jl.arraycopy(t,n,i,0,t.length-n),jl.arraycopy(t,0,i,t.length-n,n),jl.arraycopy(i,0,t,0,t.length)},Eu.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==o.compare(i[a],r[a]))return!1;return!0}},Eu.intersection=function(t,e){for(var n=new Mu,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Eu.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Eu.removeRepeatedPoints=function(t){return Eu.hasRepeatedPoints(t)?new Mu(t,!1).toCoordinateArray():t},Eu.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Eu.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},Eu.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Cl(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new Cl(i[r+l])},Eu.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},Eu.envelope=function(t){for(var e=new Wl,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Eu.toCoordinateArray=function(t){return t.toArray(Eu.coordArrayType)},Eu.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Eu.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Eu.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},Eu.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Eu.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Eu.extract=function(t,e,n){e=Ll.clamp(e,0,t.length);var i=(n=Ll.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=e;a<=n;a++)r[o++]=t[a];return r},Object.defineProperties(Eu,Iu);var Tu=function(){};Tu.prototype.compare=function(t,e){return Eu.compare(t,e)},Tu.prototype.interfaces_=function(){return[bl]},Tu.prototype.getClass=function(){return Tu};var Pu=function(){};Pu.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Eu.compare(n,i);return Eu.isEqualReversed(n,i)?0:r},Pu.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Eu.increasingDirection(n),o=Eu.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(i[s]);if(0!==u)return u;a+=r,s+=o}return 0},Pu.prototype.interfaces_=function(){return[bl]},Pu.prototype.getClass=function(){return Pu};var Lu=function(){};Lu.prototype.get=function(){},Lu.prototype.put=function(){},Lu.prototype.size=function(){},Lu.prototype.values=function(){},Lu.prototype.entrySet=function(){};var Du=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lu);(Dr.prototype=new Error).name="OperationNotSupported",(Ar.prototype=new _u).contains=function(){};var Au=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof _u&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new ku(this)},e}(Ar),ku=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Lr;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Dr},e}(wu),Nu=0;(zr.prototype=new Du).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},zr.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nu,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:Nu,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},zr.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Nr(t)===Rr(Nr(Nr(t)))){var e=Fr(Nr(Nr(t)));1===kr(e)?(Or(Nr(t),Nu),Or(e,Nu),Or(Nr(Nr(t)),1),t=Nr(Nr(t))):(t===Fr(Nr(t))&&(t=Nr(t),this.rotateLeft(t)),Or(Nr(t),Nu),Or(Nr(Nr(t)),1),this.rotateRight(Nr(Nr(t))))}else{var n=Rr(Nr(Nr(t)));1===kr(n)?(Or(Nr(t),Nu),Or(n,Nu),Or(Nr(Nr(t)),1),t=Nr(Nr(t))):(t===Rr(Nr(t))&&(t=Nr(t),this.rotateRight(t)),Or(Nr(t),Nu),Or(Nr(Nr(t)),1),this.rotateLeft(Nr(Nr(t))))}this.root_.color=Nu},zr.prototype.values=function(){var t=new Cu,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=zr.successor(e));)t.add(e.value);return t},zr.prototype.entrySet=function(){var t=new Au,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=zr.successor(e));)t.add(e);return t},zr.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},zr.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},zr.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},zr.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},zr.prototype.size=function(){return this.size_};var Ou=function(){};Ou.prototype.interfaces_=function(){return[]},Ou.prototype.getClass=function(){return Ou},Br.prototype=new Ar,(Vr.prototype=new Br).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Vr.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Vr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Vr.prototype.remove=function(t){throw new Dr},Vr.prototype.size=function(){return this.array_.length},Vr.prototype.isEmpty=function(){return 0===this.array_.length},Vr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Vr.prototype.iterator=function(){return new Ru(this)};var Ru=function(t){this.treeSet_=t,this.position_=0};Ru.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Lr;return this.treeSet_.array_[this.position_++]},Ru.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ru.prototype.remove=function(){throw new Dr};var Fu=function(){};Fu.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Fu.asList=function(t){for(var e=new Cu,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var zu=function(){},Bu={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bu.P.get=function(){return 0},Bu.L.get=function(){return 1},Bu.A.get=function(){return 2},Bu.FALSE.get=function(){return-1},Bu.TRUE.get=function(){return-2},Bu.DONTCARE.get=function(){return-3},Bu.SYM_FALSE.get=function(){return"F"},Bu.SYM_TRUE.get=function(){return"T"},Bu.SYM_DONTCARE.get=function(){return"*"},Bu.SYM_P.get=function(){return"0"},Bu.SYM_L.get=function(){return"1"},Bu.SYM_A.get=function(){return"2"},zu.prototype.interfaces_=function(){return[]},zu.prototype.getClass=function(){return zu},zu.toDimensionSymbol=function(t){switch(t){case zu.FALSE:return zu.SYM_FALSE;case zu.TRUE:return zu.SYM_TRUE;case zu.DONTCARE:return zu.SYM_DONTCARE;case zu.P:return zu.SYM_P;case zu.L:return zu.SYM_L;case zu.A:return zu.SYM_A}throw new vl("Unknown dimension value: "+t)},zu.toDimensionValue=function(t){switch(Nl.toUpperCase(t)){case zu.SYM_FALSE:return zu.FALSE;case zu.SYM_TRUE:return zu.TRUE;case zu.SYM_DONTCARE:return zu.DONTCARE;case zu.SYM_P:return zu.P;case zu.SYM_L:return zu.L;case zu.SYM_A:return zu.A}throw new vl("Unknown dimension symbol: "+t)},Object.defineProperties(zu,Bu);var Vu=function(){};Vu.prototype.filter=function(t){},Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu};var Gu=function(){};Gu.prototype.filter=function(t,e){},Gu.prototype.isDone=function(){},Gu.prototype.isGeometryChanged=function(){},Gu.prototype.interfaces_=function(){return[]},Gu.prototype.getClass=function(){return Gu};var Hu=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new vl("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Wl,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Fu.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=zu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=zu.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new Vr(Fu.asList(this._geometries)),n=new Vr(Fu.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,a=this.getNumGeometries(),s=o.getNumGeometries(),l=0;l<a&&l<s;){var u=this.getGeometryN(l),c=o.getGeometryN(l),h=u.compareToSameClass(c,r);if(0!==h)return h;l++}return l<a?1:l<s?-1:0}},e.prototype.apply=function(){if(Pl(arguments[0],fu))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(Pl(arguments[0],Gu)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(Pl(arguments[0],Vu)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(Pl(arguments[0],lu)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),tu.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(uu),ju=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return uu.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zu.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Uu(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ou]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Hu),Uu=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=pu.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Uu.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Uu.prototype.getBoundary=function(){return this._geom instanceof Zu?this.boundaryLineString(this._geom):this._geom instanceof ju?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Uu.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Uu.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Uu.prototype.computeBoundaryCoordinates=function(t){var e=new Cu;this._endpointMap=new zr;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Eu.toCoordinateArray(e)},Uu.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Wu,this._endpointMap.put(t,e)),e.count++},Uu.prototype.interfaces_=function(){return[]},Uu.prototype.getClass=function(){return Uu},Uu.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Uu(t).getBoundary()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Uu(e,n).getBoundary()}};var Wu=function(){this.count=null};Wu.prototype.interfaces_=function(){return[]},Wu.prototype.getClass=function(){return Wu};var qu=function(){},Yu={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};qu.prototype.interfaces_=function(){return[]},qu.prototype.getClass=function(){return qu},qu.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},qu.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",a=new function(){}(new function(){}(qu.getStackTrace(i))),s=0;s<r;s++)try{o+=a.readLine()+qu.NEWLINE}catch(t){if(!(t instanceof Gr))throw t;tu.shouldNeverReachHere()}return o}},qu.split=function(t,e){for(var n=e.length,i=new Cu,r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);i.add(a),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var s=new Array(i.size()).fill(null),l=0;l<s.length;l++)s[l]=i.get(l);return s},qu.toString=function(){if(1===arguments.length){var t=arguments[0];return qu.SIMPLE_ORDINATE_FORMAT.format(t)}},qu.spaces=function(t){return qu.chars(" ",t)},Yu.NEWLINE.get=function(){return jl.getProperty("line.separator")},Yu.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(qu,Yu);var Xu=function(){};Xu.prototype.interfaces_=function(){return[]},Xu.prototype.getClass=function(){return Xu},Xu.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Xu.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Bl.X)===t.getOrdinate(e-1,Bl.X)&&t.getOrdinate(0,Bl.Y)===t.getOrdinate(e-1,Bl.Y)},Xu.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=t.getOrdinate(r,o),s=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||yl.isNaN(a)&&yl.isNaN(s)))return!1}return!0},Xu.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Xu.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Xu.copy(e,r-1,i,o,1);return i},Xu.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Xu.swap(t,i,e-i)},Xu.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Xu.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Xu.copyCoord(t,e+o,n,i+o)},Xu.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new Al;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(qu.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Xu.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Xu.createClosedRing(t,e,4):e.getOrdinate(0,Bl.X)===e.getOrdinate(n-1,Bl.X)&&e.getOrdinate(0,Bl.Y)===e.getOrdinate(n-1,Bl.Y)?e:Xu.createClosedRing(t,e,n+1)},Xu.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Xu.copy(e,0,i,0,r);for(var o=r;o<n;o++)Xu.copy(e,0,i,o,1);return i};var Zu=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Wl:this._points.expandEnvelope(new Wl)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Xu.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zu.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return au.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Xu.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(Pl(arguments[0],fu))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(Pl(arguments[0],Gu)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else Pl(arguments[0],Vu)?arguments[0].filter(this):Pl(arguments[0],lu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Uu(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new vl("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ou]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(uu),Ju=function(){};Ju.prototype.interfaces_=function(){return[]},Ju.prototype.getClass=function(){return Ju};var Ku=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Wl;var t=new Wl;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n));
}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return zu.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(Pl(arguments[0],fu)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Pl(arguments[0],Gu)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else Pl(arguments[0],Vu)?arguments[0].filter(this):Pl(arguments[0],lu)&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),tu.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Ju]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(uu),$u=function(){};$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u};var Qu=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new vl("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new vl("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(au.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(au.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o==(u!==a))return!1;o=l,a=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Fu.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);jl.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=Eu.minCoordinate(e.getCoordinates());Eu.scroll(i,r),jl.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],au.isCCW(e.getCoordinates())===n&&Eu.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,a=this._shell,s=o._shell,l=a.compareToSameClass(s,r);if(0!==l)return l;for(var u=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<u&&h<c;){var f=this.getInteriorRingN(h),p=o.getInteriorRingN(h),d=f.compareToSameClass(p,r);if(0!==d)return d;h++}return h<u?1:h<c?-1:0}},e.prototype.apply=function(t){if(Pl(t,fu)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(Pl(t,Gu)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(Pl(t,Vu))t.filter(this);else if(Pl(t,lu)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[$u]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(uu),tc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return uu.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return zu.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ju]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Hu),ec=function(t){function e(e,n){e instanceof Cl&&n instanceof vc&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return uu.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return zu.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Xu.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new vl("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new vl("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Zu),nc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return uu.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Cu,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$u]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Hu),ic=function(t){this._factory=t||null,this._isUserDataCopied=!1},rc={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ic.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ic.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ic.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Hu?this.editGeometryCollection(t,e):t instanceof Qu?this.editPolygon(t,e):t instanceof Ku?e.edit(t,this._factory):t instanceof Zu?e.edit(t,this._factory):(tu.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ic.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new Cu,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===tc?this._factory.createMultiPoint(i.toArray([])):n.getClass()===ju?this._factory.createMultiLineString(i.toArray([])):n.getClass()===nc?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ic.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Cu,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a)}return this._factory.createPolygon(i,r.toArray([]))},ic.prototype.interfaces_=function(){return[]},ic.prototype.getClass=function(){return ic},ic.GeometryEditorOperation=function(){},rc.NoOpGeometryOperation.get=function(){return oc},rc.CoordinateOperation.get=function(){return ac},rc.CoordinateSequenceOperation.get=function(){return sc},Object.defineProperties(ic,rc);var oc=function(){};oc.prototype.edit=function(t,e){return t},oc.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},oc.prototype.getClass=function(){return oc};var ac=function(){};ac.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ec?e.createLinearRing(n):t instanceof Zu?e.createLineString(n):t instanceof Ku?n.length>0?e.createPoint(n[0]):e.createPoint():t},ac.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},ac.prototype.getClass=function(){return ac};var sc=function(){};sc.prototype.edit=function(t,e){return t instanceof ec?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Zu?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Ku?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},sc.prototype.interfaces_=function(){return[ic.GeometryEditorOperation]},sc.prototype.getClass=function(){return sc};var lc=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new Cl}else if(Pl(arguments[0],Bl)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new Cl}},uc={serialVersionUID:{configurable:!0}};lc.prototype.setOrdinate=function(t,e,n){switch(e){case Bl.X:this._coordinates[t].x=n;break;case Bl.Y:this._coordinates[t].y=n;break;case Bl.Z:this._coordinates[t].z=n;break;default:throw new vl("invalid ordinateIndex")}},lc.prototype.size=function(){return this._coordinates.length},lc.prototype.getOrdinate=function(t,e){switch(e){case Bl.X:return this._coordinates[t].x;case Bl.Y:return this._coordinates[t].y;case Bl.Z:return this._coordinates[t].z}return yl.NaN},lc.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},lc.prototype.getCoordinateCopy=function(t){return new Cl(this._coordinates[t])},lc.prototype.getDimension=function(){return this._dimension},lc.prototype.getX=function(t){return this._coordinates[t].x},lc.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new lc(t,this._dimension)},lc.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},lc.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new lc(t,this._dimension)},lc.prototype.toString=function(){if(this._coordinates.length>0){var t=new Al(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},lc.prototype.getY=function(t){return this._coordinates[t].y},lc.prototype.toCoordinateArray=function(){return this._coordinates},lc.prototype.interfaces_=function(){return[Bl,Pr]},lc.prototype.getClass=function(){return lc},uc.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(lc,uc);var cc=function(){},hc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};cc.prototype.readResolve=function(){return cc.instance()},cc.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new lc(t)}if(Pl(arguments[0],Bl)){var e=arguments[0];return new lc(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new lc(n):new lc(n,i)}},cc.prototype.interfaces_=function(){return[El,Pr]},cc.prototype.getClass=function(){return cc},cc.instance=function(){return cc.instanceObject},hc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},hc.instanceObject.get=function(){return new cc},Object.defineProperties(cc,hc);var fc=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Cu,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Au;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(Lu),pc=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof gc){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},dc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pc.prototype.equals=function(t){if(!(t instanceof pc))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pc.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new kl(n).compareTo(new kl(i))},pc.prototype.getScale=function(){return this._scale},pc.prototype.isFloating=function(){return this._modelType===pc.FLOATING||this._modelType===pc.FLOATING_SINGLE},pc.prototype.getType=function(){return this._modelType},pc.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pc.FLOATING?t="Floating":this._modelType===pc.FLOATING_SINGLE?t="Floating-Single":this._modelType===pc.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pc.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return yl.isNaN(t)?t:this._modelType===pc.FLOATING_SINGLE?t:this._modelType===pc.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Cl){var e=arguments[0];if(this._modelType===pc.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pc.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pc.FLOATING?t=16:this._modelType===pc.FLOATING_SINGLE?t=6:this._modelType===pc.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pc.prototype.setScale=function(t){this._scale=Math.abs(t)},pc.prototype.interfaces_=function(){return[Pr,xl]},pc.prototype.getClass=function(){return pc},pc.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},dc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},dc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pc,dc);var gc=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},mc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};gc.prototype.readResolve=function(){return gc.nameToTypeMap.get(this._name)},gc.prototype.toString=function(){return this._name},gc.prototype.interfaces_=function(){return[Pr]},gc.prototype.getClass=function(){return gc},mc.serialVersionUID.get=function(){return-552860263173159e4},mc.nameToTypeMap.get=function(){return new fc},Object.defineProperties(gc,mc),pc.Type=gc,pc.FIXED=new gc("FIXED"),pc.FLOATING=new gc("FLOATING"),pc.FLOATING_SINGLE=new gc("FLOATING SINGLE");var vc=function t(){this._precisionModel=new pc,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Pl(arguments[0],El)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pc&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},yc={serialVersionUID:{configurable:!0}};vc.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Cl(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Cl(t.getMinX(),t.getMinY()),new Cl(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Cl(t.getMinX(),t.getMinY()),new Cl(t.getMinX(),t.getMaxY()),new Cl(t.getMaxX(),t.getMaxY()),new Cl(t.getMaxX(),t.getMinY()),new Cl(t.getMinX(),t.getMinY())]),null)},vc.prototype.createLineString=function(t){return t?t instanceof Array?new Zu(this.getCoordinateSequenceFactory().create(t),this):Pl(t,Bl)?new Zu(t,this):void 0:new Zu(this.getCoordinateSequenceFactory().create([]),this)},vc.prototype.createMultiLineString=function(){if(0===arguments.length)return new ju(null,this);if(1===arguments.length){var t=arguments[0];return new ju(t,this)}},vc.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(vc.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qu)return this.createMultiPolygon(vc.toPolygonArray(t));if(s instanceof Zu)return this.createMultiLineString(vc.toLineStringArray(t));if(s instanceof Ku)return this.createMultiPoint(vc.toPointArray(t));tu.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},vc.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},vc.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Cl){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Pl(arguments[0],Bl)){var e=arguments[0];return new Ku(e,this)}}},vc.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},vc.prototype.createPolygon=function(){if(0===arguments.length)return new Qu(null,null,this);if(1===arguments.length){if(Pl(arguments[0],Bl)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ec){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new Qu(i,r,this)}},vc.prototype.getSRID=function(){return this._SRID},vc.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Hu(null,this);if(1===arguments.length){var t=arguments[0];return new Hu(t,this)}},vc.prototype.createGeometry=function(t){return new ic(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},vc.prototype.getPrecisionModel=function(){return this._precisionModel},vc.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Pl(arguments[0],Bl)){var e=arguments[0];return new ec(e,this)}}},vc.prototype.createMultiPolygon=function(){if(0===arguments.length)return new nc(null,this);if(1===arguments.length){var t=arguments[0];return new nc(t,this)}},vc.prototype.createMultiPoint=function(){if(0===arguments.length)return new tc(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new tc(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(Pl(arguments[0],Bl)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Xu.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},vc.prototype.interfaces_=function(){return[Pr]},vc.prototype.getClass=function(){return vc},vc.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.getDefaultCoordinateSequenceFactory=function(){return cc.instance()},vc.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},vc.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},yc.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(vc,yc);var _c=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xc=function(t){this.geometryFactory=t||new vc};xc.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!wc[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_c.indexOf(n)?wc[n].apply(this,[e.coordinates]):"GeometryCollection"===n?wc[n].apply(this,[e.geometries]):wc[n].apply(this,[e])},xc.prototype.write=function(t){var e=t.getGeometryType();if(!bc[e])throw new Error("Geometry is not supported");return bc[e].apply(this,[t])};var wc={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!wc[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=wc.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new Cl(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Cl(t[0],t[1]),new Cl(t[2],t[1]),new Cl(t[2],t[3]),new Cl(t[0],t[3]),new Cl(t[0],t[1])])},Point:function(t){var e=new Cl(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(wc.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=wc.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(wc.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=wc.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],a=wc.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(wc.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},bc={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:bc.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=bc.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(bc.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=bc.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=bc.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=bc.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=bc.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(bc[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Cc=function(t){this.geometryFactory=t||new vc,this.precisionModel=this.geometryFactory.getPrecisionModel(),
this.parser=new xc(this.geometryFactory)};Cc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pc.FIXED&&this.reducePrecision(e),e},Cc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Sc=function(){this.parser=new xc(this.geometryFactory)};Sc.prototype.write=function(t){return this.parser.write(t)};var Mc=function(){},Ec={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Mc.prototype.interfaces_=function(){return[]},Mc.prototype.getClass=function(){return Mc},Mc.opposite=function(t){return t===Mc.LEFT?Mc.RIGHT:t===Mc.RIGHT?Mc.LEFT:t},Ec.ON.get=function(){return 0},Ec.LEFT.get=function(){return 1},Ec.RIGHT.get=function(){return 2},Object.defineProperties(Mc,Ec),(Hr.prototype=new Error).name="EmptyStackException",(jr.prototype=new bu).add=function(t){return this.array_.push(t),!0},jr.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},jr.prototype.push=function(t){return this.array_.push(t),t},jr.prototype.pop=function(t){if(0===this.array_.length)throw new Hr;return this.array_.pop()},jr.prototype.peek=function(){if(0===this.array_.length)throw new Hr;return this.array_[this.array_.length-1]},jr.prototype.empty=function(){return 0===this.array_.length},jr.prototype.isEmpty=function(){return this.empty()},jr.prototype.search=function(t){return this.array_.indexOf(t)},jr.prototype.size=function(){return this.array_.length},jr.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ic=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ic.prototype.getCoordinate=function(){return this._minCoord},Ic.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ic.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();tu.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=au.computeOrientation(this._minCoord,n,e),r=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===au.COUNTERCLOCKWISE?r=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===au.CLOCKWISE&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Ic.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Mc.LEFT;return n[e].y<n[e+1].y&&(i=Mc.RIGHT),i},Ic.prototype.getEdge=function(){return this._orientedDe},Ic.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ic.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ic.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}tu.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Mc.LEFT&&(this._orientedDe=this._minDe.getSym())},Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic};var Tc=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new Cl(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($l),Pc=function(){this.array_=[]};Pc.prototype.addLast=function(t){this.array_.push(t)},Pc.prototype.removeFirst=function(){return this.array_.shift()},Pc.prototype.isEmpty=function(){return 0===this.array_.length};var Lc=function(){this._finder=null,this._dirEdgeList=new Cu,this._nodes=new Cu,this._rightMostCoord=null,this._env=null,this._finder=new Ic};Lc.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Lc.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Lc.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Tc("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Lc.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Mc.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Lc.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Lc.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Mc.RIGHT)>=1&&e.getDepth(Mc.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Lc.prototype.computeDepths=function(t){var e=new Au,n=new Pc,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Lc.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Lc.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Wl,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Lc.prototype.addReachable=function(t){var e=new jr;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Lc.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Mc.LEFT,t.getDepth(Mc.RIGHT)),e.setDepth(Mc.RIGHT,t.getDepth(Mc.LEFT))},Lc.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Lc.prototype.getNodes=function(){return this._nodes},Lc.prototype.getDirectedEdges=function(){return this._dirEdgeList},Lc.prototype.interfaces_=function(){return[xl]},Lc.prototype.getClass=function(){return Lc};var Dc=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Mc.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Mc.ON]=o,this.location[Mc.LEFT]=a,this.location[Mc.RIGHT]=s}};Dc.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Dc.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Il.NONE)return!1;return!0},Dc.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Il.NONE&&(this.location[e]=t)},Dc.prototype.isLine=function(){return 1===this.location.length},Dc.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Mc.ON]=this.location[Mc.ON],e[Mc.LEFT]=Il.NONE,e[Mc.RIGHT]=Il.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Il.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Dc.prototype.getLocations=function(){return this.location},Dc.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Mc.LEFT];this.location[Mc.LEFT]=this.location[Mc.RIGHT],this.location[Mc.RIGHT]=t},Dc.prototype.toString=function(){var t=new Al;return this.location.length>1&&t.append(Il.toLocationSymbol(this.location[Mc.LEFT])),t.append(Il.toLocationSymbol(this.location[Mc.ON])),this.location.length>1&&t.append(Il.toLocationSymbol(this.location[Mc.RIGHT])),t.toString()},Dc.prototype.setLocations=function(t,e,n){this.location[Mc.ON]=t,this.location[Mc.LEFT]=e,this.location[Mc.RIGHT]=n},Dc.prototype.get=function(t){return t<this.location.length?this.location[t]:Il.NONE},Dc.prototype.isArea=function(){return this.location.length>1},Dc.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Il.NONE)return!0;return!1},Dc.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Mc.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Dc.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Il.NONE)},Dc.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Dc.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Ac=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Dc(e),this.elt[1]=new Dc(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Dc(n.elt[0]),this.elt[1]=new Dc(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Dc(Il.NONE),this.elt[1]=new Dc(Il.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Dc(o,a,s),this.elt[1]=new Dc(o,a,s)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Dc(Il.NONE,Il.NONE,Il.NONE),this.elt[1]=new Dc(Il.NONE,Il.NONE,Il.NONE),this.elt[l].setLocations(u,c,h)}};Ac.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ac.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ac.prototype.isNull=function(t){return this.elt[t].isNull()},Ac.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Ac.prototype.isLine=function(t){return this.elt[t].isLine()},Ac.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Dc(t.elt[e]):this.elt[e].merge(t.elt[e])},Ac.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ac.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Mc.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Ac.prototype.toString=function(){var t=new Al;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ac.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ac.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ac.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Mc.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Ac.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ac.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ac.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Dc(this.elt[t].location[0]))},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac},Ac.toLineLabel=function(t){for(var e=new Ac(Il.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var kc=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Cu,this._pts=new Cu,this._label=new Ac(Il.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Cu,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};kc.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=au.isCCW(this._ring.getCoordinates())},kc.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},kc.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Tc("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Tc("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();tu.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},kc.prototype.getLinearRing=function(){return this._ring},kc.prototype.getCoordinate=function(t){return this._pts.get(t)},kc.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},kc.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var a=i.length-2;n&&(a=i.length-1);for(var s=a;s>=0;s--)this._pts.add(i[s])}},kc.prototype.isHole=function(){return this._isHole},kc.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)},kc.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!au.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},kc.prototype.addHole=function(t){this._holes.add(t)},kc.prototype.isShell=function(){return null===this._shell},kc.prototype.getLabel=function(){return this._label},kc.prototype.getEdges=function(){return this._edges},kc.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},kc.prototype.getShell=function(){return this._shell},kc.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Mc.RIGHT);if(i===Il.NONE)return null;if(this._label.getLocation(n)===Il.NONE)return this._label.setLocation(n,i),null}},kc.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},kc.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc};var Nc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kc),Oc=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Cu,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Nc(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext();while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(kc),Rc=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Rc.prototype.setVisited=function(t){this._isVisited=t},Rc.prototype.setInResult=function(t){this._isInResult=t},Rc.prototype.isCovered=function(){return this._isCovered},Rc.prototype.isCoveredSet=function(){return this._isCoveredSet},Rc.prototype.setLabel=function(t){this._label=t},Rc.prototype.getLabel=function(){return this._label},Rc.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Rc.prototype.updateIM=function(t){tu.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Rc.prototype.isInResult=function(){return this._isInResult},Rc.prototype.isVisited=function(){return this._isVisited},Rc.prototype.interfaces_=function(){return[]},Rc.prototype.getClass=function(){return Rc};var Fc=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Ac(0,Il.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Il.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==Il.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ac(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ac)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===Il.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Il.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Il.BOUNDARY:n=Il.INTERIOR;break;case Il.INTERIOR:default:n=Il.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rc),zc=function(){this.nodeMap=new zr,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};zc.prototype.find=function(t){return this.nodeMap.get(t)},zc.prototype.addNode=function(){if(arguments[0]instanceof Cl){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fc){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},zc.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},zc.prototype.iterator=function(){return this.nodeMap.values().iterator()},zc.prototype.values=function(){return this.nodeMap.values()},zc.prototype.getBoundaryNodes=function(t){for(var e=new Cu,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===Il.BOUNDARY&&e.add(i)}return e},zc.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},zc.prototype.interfaces_=function(){return[]},zc.prototype.getClass=function(){return zc};var Bc=function(){},Vc={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Bc.prototype.interfaces_=function(){return[]},Bc.prototype.getClass=function(){return Bc},Bc.isNorthern=function(t){return t===Bc.NE||t===Bc.NW},Bc.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Bc.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Bc.isInHalfPlane=function(t,e){return e===Bc.SE?t===Bc.SE||t===Bc.SW:t===e||t===e+1},Bc.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vl("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Bc.NE:Bc.SE:e>=0?Bc.NW:Bc.SW}if(arguments[0]instanceof Cl&&arguments[1]instanceof Cl){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new vl("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Bc.NE:Bc.SE:i.y>=n.y?Bc.NW:Bc.SW}},Vc.NE.get=function(){return 0},Vc.NW.get=function(){return 1},Vc.SW.get=function(){return 2},Vc.SE.get=function(){return 3},Object.defineProperties(Bc,Vc);var Gc=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=r,this.init(o,a),this._label=s}};Gc.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:au.computeOrientation(t._p0,t._p1,this._p1)},Gc.prototype.getDy=function(){return this._dy},Gc.prototype.getCoordinate=function(){return this._p0},Gc.prototype.setNode=function(t){this._node=t},Gc.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Gc.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Gc.prototype.getDirectedCoordinate=function(){return this._p1},Gc.prototype.getDx=function(){return this._dx},Gc.prototype.getLabel=function(){return this._label},Gc.prototype.getEdge=function(){return this._edge},Gc.prototype.getQuadrant=function(){return this._quadrant},Gc.prototype.getNode=function(){return this._node},Gc.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Gc.prototype.computeLabel=function(t){},Gc.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Bc.quadrant(this._dx,this._dy),tu.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Gc.prototype.interfaces_=function(){return[xl]},Gc.prototype.getClass=function(){return Gc};var Hc=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ac(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Tc("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Mc.LEFT)===Il.INTERIOR&&this._label.getLocation(e,Mc.RIGHT)===Il.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Mc.LEFT]+"/"+this._depth[Mc.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Il.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Il.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Mc.LEFT&&(i=-1);var r=Mc.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Il.EXTERIOR&&e===Il.INTERIOR?1:t===Il.INTERIOR&&e===Il.EXTERIOR?-1:0},e}(Gc),jc=function(){};jc.prototype.createNode=function(t){return new Fc(t,null)},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc};var Uc=function(){if(this._edges=new Cu,this._nodes=null,this._edgeEndList=new Cu,0===arguments.length)this._nodes=new zc(new jc);else if(1===arguments.length){var t=arguments[0];this._nodes=new zc(t)}};Uc.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Uc.prototype.find=function(t){return this._nodes.find(t)},Uc.prototype.addNode=function(){if(arguments[0]instanceof Fc){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Cl){var e=arguments[0];return this._nodes.addNode(e)}},Uc.prototype.getNodeIterator=function(){return this._nodes.iterator()},Uc.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Uc.prototype.debugPrintln=function(t){jl.out.println(t)},Uc.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===Il.BOUNDARY},Uc.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Uc.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&au.computeOrientation(t,e,i)===au.COLLINEAR&&Bc.quadrant(t,e)===Bc.quadrant(n,i)},Uc.prototype.getEdgeEnds=function(){return this._edgeEndList},Uc.prototype.debugPrint=function(t){jl.out.print(t)},Uc.prototype.getEdgeIterator=function(){return this._edges.iterator()},Uc.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},Uc.prototype.insertEdge=function(t){this._edges.add(t)},Uc.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Uc.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new Hc(n,!0),r=new Hc(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Uc.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Uc.prototype.getNodes=function(){return this._nodes.values()},Uc.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Uc.prototype.interfaces_=function(){return[]},Uc.prototype.getClass=function(){return Uc},Uc.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Wc=function(){this._geometryFactory=null,this._shellList=new Cu;var t=arguments[0];this._geometryFactory=t};Wc.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},Wc.prototype.computePolygons=function(t){for(var e=new Cu,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},Wc.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Tc("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},Wc.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new Cu,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else i.add(o)}return i},Wc.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Wc.prototype.buildMaximalEdgeRings=function(t){for(var e=new Cu,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Oc(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},Wc.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},Wc.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Wc.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();
null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&au.isPointInRing(r,u.getCoordinates())&&(h=!0),h&&(null===o||a.contains(c))&&(o=l)}return o},Wc.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return tu.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Wc.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Uc.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new Cu,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc};var qc=function(){};qc.prototype.getBounds=function(){},qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var Yc=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Yc.prototype.getItem=function(){return this._item},Yc.prototype.getBounds=function(){return this._bounds},Yc.prototype.interfaces_=function(){return[qc,Pr]},Yc.prototype.getClass=function(){return Yc};var Xc=function(){this._size=null,this._items=null,this._size=0,this._items=new Cu,this._items.add(null)};Xc.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Xc.prototype.size=function(){return this._size},Xc.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Xc.prototype.clear=function(){this._size=0,this._items.clear()},Xc.prototype.isEmpty=function(){return 0===this._size},Xc.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Xc.prototype.interfaces_=function(){return[]},Xc.prototype.getClass=function(){return Xc};var Zc=function(){};Zc.prototype.visitItem=function(t){},Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var Jc=function(){};Jc.prototype.insert=function(t,e){},Jc.prototype.remove=function(t,e){},Jc.prototype.query=function(){},Jc.prototype.interfaces_=function(){return[]},Jc.prototype.getClass=function(){return Jc};var Kc=function(){if(this._childBoundables=new Cu,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},$c={serialVersionUID:{configurable:!0}};Kc.prototype.getLevel=function(){return this._level},Kc.prototype.size=function(){return this._childBoundables.size()},Kc.prototype.getChildBoundables=function(){return this._childBoundables},Kc.prototype.addChildBoundable=function(t){tu.isTrue(null===this._bounds),this._childBoundables.add(t)},Kc.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Kc.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Kc.prototype.interfaces_=function(){return[qc,Pr]},Kc.prototype.getClass=function(){return Kc},$c.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Kc,$c);var Qc=function(){};Qc.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qc.min=function(t){return Qc.sort(t),t.get(0)},Qc.sort=function(t,e){var n=t.toArray();e?Fu.sort(n,e):Fu.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Qc.singletonList=function(t){var e=new Cu;return e.add(t),e};var th=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};th.prototype.expandToQueue=function(t,e){var n=th.isComposite(this._boundable1),i=th.isComposite(this._boundable2);if(n&&i)return th.area(this._boundable1)>th.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new vl("neither boundable is composite")},th.prototype.isLeaves=function(){return!(th.isComposite(this._boundable1)||th.isComposite(this._boundable2))},th.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},th.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),a=new th(o,e,this._itemDistance);a.getDistance()<i&&n.add(a)}},th.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},th.prototype.getDistance=function(){return this._distance},th.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},th.prototype.interfaces_=function(){return[xl]},th.prototype.getClass=function(){return th},th.area=function(t){return t.getBounds().getArea()},th.isComposite=function(t){return t instanceof Kc};var eh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Cu,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];tu.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};eh.prototype.getNodeCapacity=function(){return this._nodeCapacity},eh.prototype.lastNode=function(t){return t.get(t.size()-1)},eh.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Kc?t+=this.size(n):n instanceof Yc&&(t+=1)}return t}},eh.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Yc&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},eh.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Cu:t}if(1===arguments.length){for(var e=arguments[0],n=new Cu,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Kc){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof Yc?n.add(r.getItem()):tu.shouldNeverReachHere()}return n.size()<=0?null:n}},eh.prototype.insert=function(t,e){tu.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Yc(t,e))},eh.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Cu;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(tu.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Kc?this.boundablesAtLevel(n,a,r):(tu.isTrue(a instanceof Yc),-1===n&&r.add(a))}return null}},eh.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Cu;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(Pl(arguments[2],Zc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kc)for(var r=arguments[0],o=arguments[1],a=arguments[2],s=o.getChildBoundables(),l=0;l<s.size();l++){var u=s.get(l);this.getIntersectsOp().intersects(u.getBounds(),r)&&(u instanceof Kc?this.query(r,u,a):u instanceof Yc?a.visitItem(u.getItem()):tu.shouldNeverReachHere())}else if(Pl(arguments[2],bu)&&arguments[0]instanceof Object&&arguments[1]instanceof Kc)for(var c=arguments[0],h=arguments[1],f=arguments[2],p=h.getChildBoundables(),d=0;d<p.size();d++){var g=p.get(d);this.getIntersectsOp().intersects(g.getBounds(),c)&&(g instanceof Kc?this.query(c,g,f):g instanceof Yc?f.add(g.getItem()):tu.shouldNeverReachHere())}},eh.prototype.build=function(){return this._built?null:(this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0,void 0)},eh.prototype.getRoot=function(){return this.build(),this._root},eh.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Kc&&(o=this.remove(n,l,r))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o}},eh.prototype.createHigherLevels=function(t,e){tu.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},eh.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Kc){var i=this.depth(n);i>t&&(t=i)}}return t+1}},eh.prototype.createParentBoundables=function(t,e){tu.isTrue(!t.isEmpty());var n=new Cu;n.add(this.createNode(e));var i=new Cu(t);Qc.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},eh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},eh.prototype.interfaces_=function(){return[Pr]},eh.prototype.getClass=function(){return eh},eh.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nh.IntersectsOp.get=function(){return ih},nh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(eh,nh);var ih=function(){},rh=function(){};rh.prototype.distance=function(t,e){},rh.prototype.interfaces_=function(){return[]},rh.prototype.getClass=function(){return rh};var oh=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){tu.isTrue(t.length>0);for(var n=new Cu,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},e.prototype.createNode=function(t){return new ah(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];return e.isNull()?null:void t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new Cu;for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++}}return i},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(Pl(arguments[2],Zc)&&arguments[0]instanceof Object&&arguments[1]instanceof Kc){var r=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,r,o,a)}else if(Pl(arguments[2],bu)&&arguments[0]instanceof Object&&arguments[1]instanceof Kc){var s=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,s,l,u)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){tu.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Cu(t);Qc.sort(r,e.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Pl(arguments[0],rh)){var t=arguments[0],n=new th(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof th){var i=arguments[0];return this.nearestNeighbour(i,yl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Pl(arguments[1],rh)){var r=arguments[0],o=arguments[1],a=new th(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof th&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],u=null,c=new Xc;for(c.add(s);!c.isEmpty()&&l>0;){var h=c.poll(),f=h.getDistance();if(f>=l)break;h.isLeaves()?(l=f,u=h):h.expandToQueue(c,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],m=new Yc(p,d),v=new th(this.getRoot(),m,g);return this.nearestNeighbour(v)[0]}},e.prototype.interfaces_=function(){return[Jc,Pr]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return ah},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[bl]},compare:function(n,i){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(i.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[bl]},compare:function(n,i){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(i.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(eh),ah=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Wl(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kc),sh=function(){};sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh},sh.relativeSign=function(t,e){return t<e?-1:t>e?1:0},sh.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=sh.relativeSign(e.x,n.x),r=sh.relativeSign(e.y,n.y);switch(t){case 0:return sh.compareValue(i,r);case 1:return sh.compareValue(r,i);case 2:return sh.compareValue(r,-i);case 3:return sh.compareValue(-i,r);case 4:return sh.compareValue(-i,-r);case 5:return sh.compareValue(-r,-i);case 6:return sh.compareValue(-r,i);case 7:return sh.compareValue(i,-r)}return tu.shouldNeverReachHere("invalid octant value"),0},sh.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var lh=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new Cl(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};lh.prototype.getCoordinate=function(){return this.coord},lh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},lh.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:sh.compare(this._segmentOctant,this.coord,e.coord)},lh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},lh.prototype.isInterior=function(){return this._isInterior},lh.prototype.interfaces_=function(){return[xl]},lh.prototype.getClass=function(){return lh};var uh=function(){this._nodeMap=new zr,this._edge=null;var t=arguments[0];this._edge=t};uh.prototype.getSplitCoordinates=function(){var t=new Mu;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},uh.prototype.addCollapsedNodes=function(){var t=new Cu;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},uh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},uh.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new kl(e+1))}},uh.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new Cl(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new Cl(e.coord))},uh.prototype.iterator=function(){return this._nodeMap.values().iterator()},uh.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},uh.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},uh.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new kl(e[0])),i=r}},uh.prototype.getEdge=function(){return this._edge},uh.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},uh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Cl(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return r&&(o[a]=new Cl(e.coord)),new ph(o,this._edge.getData())},uh.prototype.add=function(t,e){var n=new lh(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(tu.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},uh.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $l("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new $l("bad split edge end point at "+r)},uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh};var ch=function(){};ch.prototype.interfaces_=function(){return[]},ch.prototype.getClass=function(){return ch},ch.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new vl("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof Cl&&arguments[1]instanceof Cl){var r=arguments[0],o=arguments[1],a=o.x-r.x,s=o.y-r.y;if(0===a&&0===s)throw new vl("Cannot compute the octant for two identical points "+r);return ch.octant(a,s)}};var hh=function(){};hh.prototype.getCoordinates=function(){},hh.prototype.size=function(){},hh.prototype.getCoordinate=function(t){},hh.prototype.isClosed=function(){},hh.prototype.setData=function(t){},hh.prototype.getData=function(){},hh.prototype.interfaces_=function(){return[]},hh.prototype.getClass=function(){return hh};var fh=function(){};fh.prototype.addIntersection=function(t,e){},fh.prototype.interfaces_=function(){return[hh]},fh.prototype.getClass=function(){return fh};var ph=function(){this._nodeList=new uh(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};ph.prototype.getCoordinates=function(){return this._pts},ph.prototype.size=function(){return this._pts.length},ph.prototype.getCoordinate=function(t){return this._pts[t]},ph.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ph.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},ph.prototype.setData=function(t){this._data=t},ph.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ch.octant(t,e)},ph.prototype.getData=function(){return this._data},ph.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[3],o=new Cl(n.getIntersection(r));this.addIntersection(o,i)}},ph.prototype.toString=function(){return Kl.toLineString(new lc(this._pts))},ph.prototype.getNodeList=function(){return this._nodeList},ph.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},ph.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},ph.prototype.interfaces_=function(){return[fh]},ph.prototype.getClass=function(){return ph},ph.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Cu;return ph.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)};var dh=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Cl,this.p1=new Cl;else if(1===arguments.length){var t=arguments[0];this.p0=new Cl(t.p0),this.p1=new Cl(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new Cl(e,n),this.p1=new Cl(i,r)}},gh={serialVersionUID:{configurable:!0}};dh.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},dh.prototype.orientationIndex=function(){if(arguments[0]instanceof dh){var t=arguments[0],e=au.orientationIndex(this.p0,this.p1,t.p0),n=au.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Cl){var i=arguments[0];return au.orientationIndex(this.p0,this.p1,i)}},dh.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},dh.prototype.isVertical=function(){return this.p0.x===this.p1.x},dh.prototype.equals=function(t){if(!(t instanceof dh))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},dh.prototype.intersection=function(t){var e=new iu;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},dh.prototype.project=function(){if(arguments[0]instanceof Cl){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Cl(t);var e=this.projectionFactor(t),n=new Cl;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof dh){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(i.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new dh(a,s)}},dh.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},dh.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},dh.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},dh.prototype.distancePerpendicular=function(t){return au.distancePointLinePerpendicular(t,this.p0,this.p1)},dh.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},dh.prototype.midPoint=function(){return dh.midPoint(this.p0,this.p1)},dh.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?yl.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},dh.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=yl.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(r=s.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n},dh.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},dh.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},dh.prototype.getLength=function(){return this.p0.distance(this.p1)},dh.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},dh.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},dh.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},dh.prototype.lineIntersection=function(t){try{return Ul.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Hl))throw t}return null},dh.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},dh.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*r/a,l=e*o/a}return new Cl(n-l,i+s)},dh.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},dh.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||yl.isNaN(e))&&(e=1),e},dh.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},dh.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},dh.prototype.distance=function(){if(arguments[0]instanceof dh){var t=arguments[0];return au.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Cl){var e=arguments[0];return au.distancePointLine(e,this.p0,this.p1)}},dh.prototype.pointAlong=function(t){var e=new Cl;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},dh.prototype.hashCode=function(){var t=yl.doubleToLongBits(this.p0.x);t^=31*yl.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=yl.doubleToLongBits(this.p1.x);return n^=31*yl.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},dh.prototype.interfaces_=function(){return[xl,Pr]},dh.prototype.getClass=function(){return dh},dh.midPoint=function(t,e){return new Cl((t.x+e.x)/2,(t.y+e.y)/2)},gh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(dh,gh);var mh=function(){this.tempEnv1=new Wl,this.tempEnv2=new Wl,this._overlapSeg1=new dh,this._overlapSeg2=new dh};mh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var vh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};vh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vh.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,i),a<n&&this.computeSelect(t,a,n,i)},vh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vh.prototype.setId=function(t){this._id=t},vh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Wl(t,e)}return this._env},vh.prototype.getEndIndex=function(){return this._end},vh.prototype.getStartIndex=function(){return this._start},vh.prototype.getContext=function(){return this._context},vh.prototype.getId=function(){return this._id},vh.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var a=this._pts[t],s=this._pts[e],l=n._pts[i],u=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<c&&(i<h&&this.computeOverlapsInternal(t,c,n,i,h,o),h<r&&this.computeOverlapsInternal(t,c,n,h,r,o)),c<e&&(i<h&&this.computeOverlapsInternal(c,e,n,i,h,o),h<r&&this.computeOverlapsInternal(c,e,n,h,r,o))},vh.prototype.interfaces_=function(){return[]},vh.prototype.getClass=function(){return vh};var yh=function(){};yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh},yh.getChainStartIndices=function(t){var e=0,n=new Cu;n.add(new kl(e));do{var i=yh.findChainEnd(t,e);n.add(new kl(i)),e=i}while(e<t.length-1);return yh.toIntArray(n)},yh.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Bc.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Bc.quadrant(t[r-1],t[r])===i);)r++;return r-1},yh.getChains=function(){if(1===arguments.length){var t=arguments[0];return yh.getChains(t,null);
}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new Cu,r=yh.getChainStartIndices(e),o=0;o<r.length-1;o++){var a=new vh(e,r[o],r[o+1],n);i.add(a)}return i}},yh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var _h=function(){};_h.prototype.computeNodes=function(t){},_h.prototype.getNodedSubstrings=function(){},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var xh=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xh.prototype.setSegmentIntersector=function(t){this._segInt=t},xh.prototype.interfaces_=function(){return[_h]},xh.prototype.getClass=function(){return xh};var wh=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Cu,this._index=new oh,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return ph.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=yh.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new bh(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return bh},Object.defineProperties(e,n),e}(xh),bh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],o=e.getContext(),a=i.getContext();this._si.processIntersections(o,n,a,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mh),Ch=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Sh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ch.prototype.getEndCapStyle=function(){return this._endCapStyle},Ch.prototype.isSingleSided=function(){return this._isSingleSided},Ch.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Ch.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ch.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Ch.JOIN_ROUND&&(this._quadrantSegments=Ch.DEFAULT_QUADRANT_SEGMENTS)},Ch.prototype.getJoinStyle=function(){return this._joinStyle},Ch.prototype.setJoinStyle=function(t){this._joinStyle=t},Ch.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Ch.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ch.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ch.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Ch.prototype.getMitreLimit=function(){return this._mitreLimit},Ch.prototype.setMitreLimit=function(t){this._mitreLimit=t},Ch.prototype.setSingleSided=function(t){this._isSingleSided=t},Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Sh.CAP_ROUND.get=function(){return 1},Sh.CAP_FLAT.get=function(){return 2},Sh.CAP_SQUARE.get=function(){return 3},Sh.JOIN_ROUND.get=function(){return 1},Sh.JOIN_MITRE.get=function(){return 2},Sh.JOIN_BEVEL.get=function(){return 3},Sh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sh.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Ch,Sh);var Mh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=au.COUNTERCLOCKWISE,this._inputLine=t||null},Eh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Mh.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,t,n,i)},Mh.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Mh.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},Mh.prototype.isShallowConcavity=function(t,e,n,i){return au.computeOrientation(t,e,n)===this._angleOrientation&&au.distancePointLine(e,t,n)<i},Mh.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Mh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o)if(!this.isShallow(t,e,this._inputLine[a],r))return!1;return!0},Mh.prototype.isConcave=function(t,e,n){var i=au.computeOrientation(t,e,n)===this._angleOrientation;return i},Mh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=au.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},Mh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Mh.DELETE;)e++;return e},Mh.prototype.isShallow=function(t,e,n,i){return au.distancePointLine(e,t,n)<i},Mh.prototype.collapseLine=function(){for(var t=new Mu,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Mh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh},Mh.simplify=function(t,e){return new Mh(t).simplify(e)},Eh.INIT.get=function(){return 0},Eh.DELETE.get=function(){return 1},Eh.KEEP.get=function(){return 1},Eh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Mh,Eh);var Ih=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Cu},Th={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ih.prototype.getCoordinates=function(){return this._ptList.toArray(Ih.COORDINATE_ARRAY_TYPE)},Ih.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ih.prototype.addPt=function(t){var e=new Cl(t);return this._precisionModel.makePrecise(e),this.isRedundant(e)?null:void this._ptList.add(e)},Ih.prototype.revere=function(){},Ih.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Ih.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ih.prototype.toString=function(){return(new vc).createLineString(this.getCoordinates()).toString()},Ih.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Cl(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);return t.equals(e)?null:void this._ptList.add(t)},Ih.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ih.prototype.interfaces_=function(){return[]},Ih.prototype.getClass=function(){return Ih},Th.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ih,Th);var Ph=function(){},Lh={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ph.prototype.interfaces_=function(){return[]},Ph.prototype.getClass=function(){return Ph},Ph.toDegrees=function(t){return 180*t/Math.PI},Ph.normalize=function(t){for(;t>Math.PI;)t-=Ph.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ph.PI_TIMES_2;return t},Ph.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Ph.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},Ph.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},Ph.interiorAngle=function(t,e,n){var i=Ph.angle(e,t),r=Ph.angle(e,n);return Math.abs(r-i)},Ph.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ph.PI_TIMES_2;t>=Ph.PI_TIMES_2&&(t=0)}else{for(;t>=Ph.PI_TIMES_2;)t-=Ph.PI_TIMES_2;t<0&&(t=0)}return t},Ph.angleBetween=function(t,e,n){var i=Ph.angle(e,t),r=Ph.angle(e,n);return Ph.diff(i,r)},Ph.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ph.toRadians=function(t){return t*Math.PI/180},Ph.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ph.COUNTERCLOCKWISE:n<0?Ph.CLOCKWISE:Ph.NONE},Ph.angleBetweenOriented=function(t,e,n){var i=Ph.angle(e,t),r=Ph.angle(e,n)-i;return r<=-Math.PI?r+Ph.PI_TIMES_2:r>Math.PI?r-Ph.PI_TIMES_2:r},Lh.PI_TIMES_2.get=function(){return 2*Math.PI},Lh.PI_OVER_2.get=function(){return Math.PI/2},Lh.PI_OVER_4.get=function(){return Math.PI/4},Lh.COUNTERCLOCKWISE.get=function(){return au.COUNTERCLOCKWISE},Lh.CLOCKWISE.get=function(){return au.CLOCKWISE},Lh.NONE.get=function(){return au.COLLINEAR},Object.defineProperties(Ph,Lh);var Dh=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new dh,this._seg1=new dh,this._offset0=new dh,this._offset1=new dh,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new iu,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Ch.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Ah={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Dh.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=au.computeOrientation(this._s0,this._s1,this._s2),i=n===au.CLOCKWISE&&this._side===Mc.LEFT||n===au.COUNTERCLOCKWISE&&this._side===Mc.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Dh.prototype.addLineEndCap=function(t,e){var n=new dh(t,e),i=new dh;this.computeOffsetSegment(n,Mc.LEFT,this._distance,i);var r=new dh;this.computeOffsetSegment(n,Mc.RIGHT,this._distance,r);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Ch.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,au.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Ch.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Ch.CAP_SQUARE:var l=new Cl;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new Cl(i.p1.x+l.x,i.p1.y+l.y),c=new Cl(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},Dh.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Dh.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=Ul.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof Hl))throw t;o=new Cl(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Dh.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);i===au.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,i,r),this._segList.addPt(n)},Dh.prototype.addOutsideTurn=function(t,e){return this._offset0.p1.distance(this._offset1.p0)<this._distance*Dh.OFFSET_SEGMENT_SEPARATION_FACTOR?(this._segList.addPt(this._offset0.p1),null):void(this._bufParams.getJoinStyle()===Ch.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ch.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0)))},Dh.prototype.createSquare=function(t){this._segList.addPt(new Cl(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Cl(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Cl(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Cl(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Dh.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Dh.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Dh.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Dh.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Dh.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Ph.angle(r,this._seg0.p0),a=Ph.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,s=Ph.normalize(o+a),l=Ph.normalize(s+Math.PI),u=i*n,c=n-u*Math.abs(Math.sin(a)),h=r.x+u*Math.cos(l),f=r.y+u*Math.sin(l),p=new Cl(h,f),d=new dh(r,p),g=d.pointAlongOffset(1,c),m=d.pointAlongOffset(1,-c);this._side===Mc.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Dh.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Mc.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=r*n*o/s,u=r*n*a/s;i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+l},Dh.prototype.addFilletArc=function(t,e,n,i,r){var o=i===au.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new Cl;u<a;){var h=e+o*u;c.x=t.x+r*Math.cos(h),c.y=t.y+r*Math.sin(h),this._segList.addPt(c),u+=l}},Dh.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Dh.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Cl((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new Cl((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Dh.prototype.createCircle=function(t){var e=new Cl(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Dh.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Dh.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ih,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Dh.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Dh.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ch.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ch.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,au.CLOCKWISE,this._distance))},Dh.prototype.closeRing=function(){this._segList.closeRing()},Dh.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh},Ah.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ah.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ah.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ah.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Dh,Ah);var kh=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};kh.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Eu.reverse(o),o},kh.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Mh.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Mc.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(t,!1);var s=Mh.simplify(t,i),l=s.length-1;n.initSideSegments(s[0],s[1],Mc.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},kh.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Mc.RIGHT&&(i=-i);var r=Mh.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(r[a],s)}n.closeRing()},kh.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Mh.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Mc.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=Mh.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Mc.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},kh.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Ch.CAP_ROUND:e.createCircle(t);break;case Ch.CAP_SQUARE:e.createSquare(t)}},kh.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},kh.prototype.getBufferParameters=function(){return this._bufParams},kh.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},kh.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return kh.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},kh.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Mh.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Mc.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var s=Mh.simplify(t,i),l=s.length-1;n.initSideSegments(s[0],s[1],Mc.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},kh.prototype.getSegGen=function(t){return new Dh(this._precisionModel,this._bufParams,t)},kh.prototype.interfaces_=function(){return[]},kh.prototype.getClass=function(){return kh},kh.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Cl(t[n]);return e};var Nh=function(){this._subgraphs=null,this._seg=new dh,this._cga=new au;var t=arguments[0];this._subgraphs=t},Oh={DepthSegment:{configurable:!0}};Nh.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Cu,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(Pl(arguments[2],bu)&&arguments[0]instanceof Cl&&arguments[1]instanceof Hc){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||au.computeOrientation(this._seg.p0,this._seg.p1,o)===au.RIGHT)){var c=a.getDepth(Mc.LEFT);this._seg.p0.equals(l[u])||(c=a.getDepth(Mc.RIGHT));var h=new Rh(this._seg,c);s.add(h)}}else if(Pl(arguments[2],bu)&&arguments[0]instanceof Cl&&Pl(arguments[1],bu))for(var f=arguments[0],p=arguments[1],d=arguments[2],g=p.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.findStabbedSegments(f,m,d)}},Nh.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qc.min(e)._leftDepth},Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Oh.DepthSegment.get=function(){return Rh},Object.defineProperties(Nh,Oh);var Rh=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new dh(t),this._leftDepth=e};Rh.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Rh.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Rh.prototype.toString=function(){return this._upwardSeg.toString()},Rh.prototype.interfaces_=function(){return[xl]},Rh.prototype.getClass=function(){return Rh};var Fh=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fh.prototype.area=function(){return Fh.area(this.p0,this.p1,this.p2)},Fh.prototype.signedArea=function(){return Fh.signedArea(this.p0,this.p1,this.p2)},Fh.prototype.interpolateZ=function(t){if(null===t)throw new vl("Supplied point is null.");return Fh.interpolateZ(t,this.p0,this.p1,this.p2)},Fh.prototype.longestSideLength=function(){return Fh.longestSideLength(this.p0,this.p1,this.p2)},Fh.prototype.isAcute=function(){return Fh.isAcute(this.p0,this.p1,this.p2)},Fh.prototype.circumcentre=function(){return Fh.circumcentre(this.p0,this.p1,this.p2)},Fh.prototype.area3D=function(){return Fh.area3D(this.p0,this.p1,this.p2)},Fh.prototype.centroid=function(){return Fh.centroid(this.p0,this.p1,this.p2)},Fh.prototype.inCentre=function(){return Fh.inCentre(this.p0,this.p1,this.p2)},Fh.prototype.interfaces_=function(){return[]},Fh.prototype.getClass=function(){return Fh},Fh.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fh.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fh.det=function(t,e,n,i){return t*i-e*n},Fh.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,s=i.x-r,l=n.y-o,u=i.y-o,c=a*u-s*l,h=t.x-r,f=t.y-o,p=(u*h-s*f)/c,d=(-l*h+a*f)/c;return e.z+p*(n.z-e.z)+d*(i.z-e.z)},Fh.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),a=i;return r>a&&(a=r),o>a&&(a=o),a},Fh.isAcute=function(t,e,n){return!!Ph.isAcute(t,e,n)&&!!Ph.isAcute(e,n,t)&&!!Ph.isAcute(n,t,e)},Fh.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,a=t.y-r,s=e.x-i,l=e.y-r,u=2*Fh.det(o,a,s,l),c=Fh.det(a,o*o+a*a,l,s*s+l*l),h=Fh.det(o,o*o+a*a,s,s*s+l*l);return new Cl(i-c/u,r+h/u)},Fh.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Ul(t.x+n/2,t.y+i/2,1),o=new Ul(t.x-i+n/2,t.y+n+i/2,1);return new Ul(r,o)},Fh.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new Cl(t.x+r*o,t.y+r*a)},Fh.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=r*l-o*s,c=o*a-i*l,h=i*s-r*a,f=u*u+c*c+h*h,p=Math.sqrt(f)/2;return p},Fh.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new Cl(i,r)},Fh.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),a=i+r+o,s=(i*t.x+r*e.x+o*n.x)/a,l=(i*t.y+r*e.y+o*n.y)/a;return new Cl(s,l)};var zh=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Cu;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};zh.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Il.EXTERIOR,Il.INTERIOR)},zh.prototype.addPolygon=function(t){var e=this._distance,n=Mc.LEFT;this._distance<0&&(e=-this._distance,n=Mc.RIGHT);var i=t.getExteriorRing(),r=Eu.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,Il.EXTERIOR,Il.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Eu.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Mc.opposite(n),Il.INTERIOR,Il.EXTERIOR)}},zh.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fh(t[0],t[1],t[2]),i=n.inCentre();return au.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},zh.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Eu.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Il.EXTERIOR,Il.INTERIOR)},zh.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new ph(t,new Ac(0,Il.BOUNDARY,e,n));this._curveList.add(i)},zh.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zh.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ec.MINIMUM_VALID_SIZE)return null;var o=i,a=r;t.length>=ec.MINIMUM_VALID_SIZE&&au.isCCW(t)&&(o=r,a=i,n=Mc.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},zh.prototype.add=function(t){return t.isEmpty()?null:void(t instanceof Qu?this.addPolygon(t):t instanceof Zu?this.addLineString(t):t instanceof Ku?this.addPoint(t):t instanceof tc?this.addCollection(t):t instanceof ju?this.addCollection(t):t instanceof nc?this.addCollection(t):t instanceof Hu&&this.addCollection(t))},zh.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},zh.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var Bh=function(){};Bh.prototype.locate=function(t){},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var Vh=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Vh.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vh.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Lr;var t=this._parent.getGeometryN(this._index++);return t instanceof Hu?(this._subcollectionIterator=new Vh(t),this._subcollectionIterator.next()):t},Vh.prototype.remove=function(){throw new Error(this.getClass().getName())},Vh.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vh.prototype.interfaces_=function(){return[wu]},Vh.prototype.getClass=function(){return Vh},Vh.isAtomic=function(t){return!(t instanceof Hu)};var Gh=function(){this._geom=null;var t=arguments[0];this._geom=t};Gh.prototype.locate=function(t){return Gh.locate(t,this._geom)},Gh.prototype.interfaces_=function(){return[Bh]},Gh.prototype.getClass=function(){return Gh},Gh.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&au.isPointInRing(t,e.getCoordinates())},Gh.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Gh.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Gh.isPointInRing(t,r))return!1}return!0},Gh.containsPoint=function(t,e){if(e instanceof Qu)return Gh.containsPointInPolygon(t,e);if(e instanceof Hu)for(var n=new Vh(e);n.hasNext();){var i=n.next();if(i!==e&&Gh.containsPoint(t,i))return!0}return!1},Gh.locate=function(t,e){return e.isEmpty()?Il.EXTERIOR:Gh.containsPoint(t,e)?Il.INTERIOR:Il.EXTERIOR};var Hh=function(){this._edgeMap=new zr,this._edgeList=null,this._ptInAreaLocation=[Il.NONE,Il.NONE]};Hh.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Hh.prototype.propagateSideLabels=function(t){for(var e=Il.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Mc.LEFT)!==Il.NONE&&(e=i.getLocation(t,Mc.LEFT))}if(e===Il.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Mc.ON)===Il.NONE&&s.setLocation(t,Mc.ON,r),s.isArea(t)){var l=s.getLocation(t,Mc.LEFT),u=s.getLocation(t,Mc.RIGHT);if(u!==Il.NONE){if(u!==r)throw new Tc("side location conflict",a.getCoordinate());l===Il.NONE&&tu.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=l}else tu.isTrue(s.getLocation(t,Mc.LEFT)===Il.NONE,"found single null side"),s.setLocation(t,Mc.RIGHT,r),s.setLocation(t,Mc.LEFT,r)}}},Hh.prototype.getCoordinate=function(){var t=this.iterator();
return t.hasNext()?t.next().getCoordinate():null},Hh.prototype.print=function(t){jl.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Hh.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Hh.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Mc.LEFT);tu.isTrue(i!==Il.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var a=o.next().getLabel();tu.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Mc.LEFT),l=a.getLocation(t,Mc.RIGHT);if(s===l)return!1;if(l!==r)return!1;r=s}return!0},Hh.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Hh.prototype.iterator=function(){return this.getEdges().iterator()},Hh.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Cu(this._edgeMap.values())),this._edgeList},Hh.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Il.NONE&&(this._ptInAreaLocation[t]=Gh.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Hh.prototype.toString=function(){var t=new Al;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Hh.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Hh.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===Il.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var u=Il.NONE;if(e[l])u=Il.EXTERIOR;else{var c=a.getCoordinate();u=this.getLocation(l,c,t)}s.setAllLocationsIfNull(l,u)}},Hh.prototype.getDegree=function(){return this._edgeMap.size()},Hh.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh};var jh=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Tc("no outgoing dirEdge found",this.getCoordinate());tu.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Bc.isNorthern(r)&&Bc.isNorthern(o)?n:Bc.isNorthern(r)||Bc.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(tu.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){jl.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Cu;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Mc.LEFT),i=t.getDepth(Mc.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Tc("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=o;l<a;l++){var u=this._edgeList.get(l);u.setEdgeDepths(Mc.RIGHT,s),s=u.getDepth(Mc.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(tu.isTrue(null!==e,"found null for first outgoing dirEdge"),tu.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Il.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Il.INTERIOR;break}if(i.isInResult()){t=Il.EXTERIOR;break}}}if(t===Il.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===Il.INTERIOR):(a.isInResult()&&(r=Il.EXTERIOR),s.isInResult()&&(r=Il.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ac(Il.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==Il.INTERIOR&&o!==Il.BOUNDARY||this._label.setLocation(r,Il.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Hh),Uh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fc(t,new jh)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jc),Wh=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Wh.prototype.compareTo=function(t){var e=t;return Wh.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Wh.prototype.interfaces_=function(){return[xl]},Wh.prototype.getClass=function(){return Wh},Wh.orientation=function(t){return 1===Eu.increasingDirection(t)},Wh.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,a=e?t.length:-1,s=i?n.length:-1,l=e?0:t.length-1,u=i?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var h=(l+=r)===a,f=(u+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var qh=function(){this._edges=new Cu,this._ocaMap=new zr};qh.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},qh.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},qh.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},qh.prototype.iterator=function(){return this._edges.iterator()},qh.prototype.getEdges=function(){return this._edges},qh.prototype.get=function(t){return this._edges.get(t)},qh.prototype.findEqualEdge=function(t){var e=new Wh(t.getCoordinates());return this._ocaMap.get(e)},qh.prototype.add=function(t){this._edges.add(t);var e=new Wh(t.getCoordinates());this._ocaMap.put(e,t)},qh.prototype.interfaces_=function(){return[]},qh.prototype.getClass=function(){return qh};var Yh=function(){};Yh.prototype.processIntersections=function(t,e,n,i){},Yh.prototype.isDone=function(){},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Xh=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Xh.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Xh.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Xh.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Xh.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Xh.prototype.getLineIntersector=function(){return this._li},Xh.prototype.hasProperIntersection=function(){return this._hasProper},Xh.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Xh.prototype.hasIntersection=function(){return this._hasIntersection},Xh.prototype.isDone=function(){return!1},Xh.prototype.hasInteriorIntersection=function(){return this._hasInterior},Xh.prototype.interfaces_=function(){return[Yh]},Xh.prototype.getClass=function(){return Xh},Xh.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zh=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Cl(t),this.segmentIndex=e,this.dist=n};Zh.prototype.getSegmentIndex=function(){return this.segmentIndex},Zh.prototype.getCoordinate=function(){return this.coord},Zh.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zh.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zh.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zh.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zh.prototype.getDistance=function(){return this.dist},Zh.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zh.prototype.interfaces_=function(){return[xl]},Zh.prototype.getClass=function(){return Zh};var Jh=function(){this._nodeMap=new zr,this.edge=null;var t=arguments[0];this.edge=t};Jh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jh.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jh.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Jh.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Jh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Cl(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return r&&(o[a]=e.coord),new ef(o,new Ac(this.edge._label))},Jh.prototype.add=function(t,e,n){var i=new Zh(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Jh.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Kh=function(){};Kh.prototype.getChainStartIndices=function(t){var e=0,n=new Cu;n.add(new kl(e));do{var i=this.findChainEnd(t,e);n.add(new kl(i)),e=i}while(e<t.length-1);return Kh.toIntArray(n)},Kh.prototype.findChainEnd=function(t,e){for(var n=Bc.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Bc.quadrant(t[i-1],t[i])===n;)i++;return i-1},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh},Kh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $h=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Wl,this.env2=new Wl;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Kh;this.startIndex=e.getChainStartIndices(this.pts)};$h.prototype.getCoordinates=function(){return this.pts},$h.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$h.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$h.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[r],h=this.pts[o],f=a.pts[s],p=a.pts[l];if(o-r==1&&l-s==1)return u.addIntersections(this.e,r,a.e,s),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),g=Math.trunc((s+l)/2);r<d&&(s<g&&this.computeIntersectsForChain(r,d,a,s,g,u),g<l&&this.computeIntersectsForChain(r,d,a,g,l,u)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,u),g<l&&this.computeIntersectsForChain(d,o,a,g,l,u))}},$h.prototype.getStartIndexes=function(){return this.startIndex},$h.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},$h.prototype.interfaces_=function(){return[]},$h.prototype.getClass=function(){return $h};var Qh=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},tf={NULL_VALUE:{configurable:!0}};Qh.prototype.getDepth=function(t,e){return this._depth[t][e]},Qh.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Qh.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Qh.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Qh.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===Qh.NULL_VALUE}},Qh.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},Qh.prototype.getDelta=function(t){return this._depth[t][Mc.RIGHT]-this._depth[t][Mc.LEFT]},Qh.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Il.EXTERIOR:Il.INTERIOR},Qh.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Qh.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==Il.EXTERIOR&&i!==Il.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=Qh.depthAtLocation(i):this._depth[e][n]+=Qh.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===Il.INTERIOR&&this._depth[r][o]++}},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh},Qh.depthAtLocation=function(t){return t===Il.EXTERIOR?0:t===Il.INTERIOR?1:Qh.NULL_VALUE},tf.NULL_VALUE.get=function(){return-1},Object.defineProperties(Qh,tf);var ef=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Jh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Qh,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ac.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(i=!1),this.pts[a].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $h(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Wl;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new Cl(t.getIntersection(i)),o=e,a=t.getEdgeDistance(n,i),s=o+1;if(s<this.pts.length){var l=this.pts[s];r.equals2D(l)&&(o=s,a=0)}this.eiList.add(r,o,a)},e.prototype.toString=function(){var t=new Al;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Mc.ON),e.getLocation(1,Mc.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Mc.LEFT),e.getLocation(1,Mc.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Mc.RIGHT),e.getLocation(1,Mc.RIGHT),2))},e}(Rc),nf=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new qh,this._bufParams=t||null};nf.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},nf.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Ac(t.getLabel())).flip(),n.merge(i);var r=nf.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(nf.depthDelta(t.getLabel()))},nf.prototype.buildSubgraphs=function(t,e){for(var n=new Cu,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new Nh(n).getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},nf.prototype.createSubgraphs=function(t){for(var e=new Cu,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Lc;r.create(i),e.add(r)}}return Qc.sort(e,Qc.reverseOrder()),e},nf.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},nf.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wh,n=new iu;return n.setPrecisionModel(t),e.setSegmentIntersector(new Xh(n)),e},nf.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new kh(n,this._bufParams),r=new zh(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Uc(new Uh),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Wc(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},nf.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),s=new ef(r.getCoordinates(),new Ac(a));this.insertUniqueEdge(s)}}},nf.prototype.setNoder=function(t){this._workingNoder=t},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},nf.depthDelta=function(t){var e=t.getLocation(0,Mc.LEFT),n=t.getLocation(0,Mc.RIGHT);return e===Il.INTERIOR&&n===Il.EXTERIOR?1:e===Il.EXTERIOR&&n===Il.INTERIOR?-1:0},nf.convertSegStrings=function(t){for(var e=new vc,n=new Cu;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var rf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};rf.prototype.rescale=function(){if(Pl(arguments[0],_u))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&jl.out.println(n)}},rf.prototype.scale=function(){if(Pl(arguments[0],_u)){for(var t=arguments[0],e=new Cu,n=t.iterator();n.hasNext();){var i=n.next();e.add(new ph(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),a=0;a<r.length;a++)o[a]=new Cl(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].z);return Eu.removeRepeatedPoints(o)}},rf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},rf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rf.prototype.interfaces_=function(){return[_h]},rf.prototype.getClass=function(){return rf};var of=function(){this._li=new iu,this._segStrings=null;var t=arguments[0];this._segStrings=t},af={fact:{configurable:!0}};of.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new $l("found endpt/interior pt intersection at index "+o+" :pt "+n)},of.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(r,l,o,u);else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],p=arguments[3];if(c===f&&h===p)return null;var d=c.getCoordinates()[h],g=c.getCoordinates()[h+1],m=f.getCoordinates()[p],v=f.getCoordinates()[p+1];if(this._li.computeIntersection(d,g,m,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,m,v)))throw new $l("found non-noded intersection at "+d+"-"+g+" and "+m+"-"+v)}},of.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},of.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},of.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},of.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $l("found non-noded collapse at "+of.fact.createLineString([t,e,n]))},of.prototype.interfaces_=function(){return[]},of.prototype.getClass=function(){return of},af.fact.get=function(){return new vc},Object.defineProperties(of,af);var sf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new vl("Scale factor must be non-zero");1!==e&&(this._pt=new Cl(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Cl,this._p1Scaled=new Cl),this.initCorners(this._pt)},lf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sf.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return tu.isTrue(!(a&&s),"Found bad envelope test"),s},sf.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new Cl(this._maxx,this._maxy),this._corner[1]=new Cl(this._minx,this._maxy),this._corner[2]=new Cl(this._minx,this._miny),this._corner[3]=new Cl(this._maxx,this._miny)},sf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sf.prototype.getCoordinate=function(){return this._originalPt},sf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Wl(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sf.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},sf.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},lf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sf,lf);var uf=function(){this.tempEnv1=new Wl,this.selectedSegment=new dh};uf.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var cf=function(){this._index=null;var t=arguments[0];this._index=t},hf={HotPixelSnapAction:{configurable:!0}};cf.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new ff(e,n,i);return this._index.query(r,{interfaces_:function(){return[Zc]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf},hf.HotPixelSnapAction.get=function(){
return ff},Object.defineProperties(cf,hf);var ff=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],i=e.getContext();return null!==this._parentEdge&&i===this._parentEdge&&n===this._hotPixelVertexIndex?null:void(this._isNodeAdded=this._hotPixel.addSnappedNode(i,n))},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uf),pf=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Cu};pf.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},pf.prototype.isDone=function(){return!1},pf.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pf.prototype.interfaces_=function(){return[Yh]},pf.prototype.getClass=function(){return pf};var df=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new iu,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};df.prototype.checkCorrectness=function(t){var e=ph.getNodedSubstrings(t),n=new of(e);try{n.checkValid()}catch(t){if(!(t instanceof Gl))throw t;t.printStackTrace()}},df.prototype.getNodedSubstrings=function(){return ph.getNodedSubstrings(this._nodedSegStrings)},df.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},df.prototype.findInteriorIntersections=function(t,e){var n=new pf(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},df.prototype.computeVertexSnaps=function(){if(Pl(arguments[0],_u))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof ph)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new sf(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},df.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wh,this._pointSnapper=new cf(this._noder.getIndex()),this.snapRound(t,this._li)},df.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new sf(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},df.prototype.interfaces_=function(){return[_h]},df.prototype.getClass=function(){return df};var gf=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ch,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},mf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gf.prototype.bufferFixedPrecision=function(t){var e=new rf(new df(new pc(1)),t.getScale()),n=new nf(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gf.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gf.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Tc))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=gf.precisionScaleFactor(this._argGeom,this._distance,n),r=new pc(i);this.bufferFixedPrecision(r)}},gf.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pc.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gf.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gf.prototype.bufferOriginalPrecision=function(){try{var t=new nf(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $l))throw t;this._saveException=t}},gf.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gf.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf},gf.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new gf(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof uu&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2],o=new gf(n);return o.setQuadrantSegments(r),o.getResultGeometry(i)}if(arguments[2]instanceof Ch&&arguments[0]instanceof uu&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=arguments[2];return new gf(a,l).getResultGeometry(s)}}else if(4===arguments.length){var u=arguments[0],c=arguments[1],h=arguments[2],f=arguments[3],p=new gf(u);return p.setQuadrantSegments(h),p.setEndCapStyle(f),p.getResultGeometry(c)}},gf.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=Ll.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},mf.CAP_ROUND.get=function(){return Ch.CAP_ROUND},mf.CAP_BUTT.get=function(){return Ch.CAP_FLAT},mf.CAP_FLAT.get=function(){return Ch.CAP_FLAT},mf.CAP_SQUARE.get=function(){return Ch.CAP_SQUARE},mf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gf,mf);var vf=function(){this._pt=[new Cl,new Cl],this._distance=yl.NaN,this._isNull=!0};vf.prototype.getCoordinates=function(){return this._pt},vf.prototype.getCoordinate=function(t){return this._pt[t]},vf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},vf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},vf.prototype.getDistance=function(){return this._distance},vf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var yf=function(){};yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf},yf.computeDistance=function(){if(arguments[2]instanceof vf&&arguments[0]instanceof Zu&&arguments[1]instanceof Cl)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=t.getCoordinates(),r=new dh,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof vf&&arguments[0]instanceof Qu&&arguments[1]instanceof Cl){var s=arguments[0],l=arguments[1],u=arguments[2];yf.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)yf.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof vf&&arguments[0]instanceof uu&&arguments[1]instanceof Cl){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Zu)yf.computeDistance(h,f,p);else if(h instanceof Qu)yf.computeDistance(h,f,p);else if(h instanceof Hu)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);yf.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof vf&&arguments[0]instanceof dh&&arguments[1]instanceof Cl){var v=arguments[0],y=arguments[1],_=arguments[2],x=v.closestPoint(y);_.setMinimum(x,y)}};var _f=function(t){this._maxPtDist=new vf,this._inputGeom=t||null},xf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_f.prototype.computeMaxMidpointDistance=function(t){var e=new bf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_f.prototype.computeMaxVertexDistance=function(t){var e=new wf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_f.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_f.prototype.getDistancePoints=function(){return this._maxPtDist},_f.prototype.interfaces_=function(){return[]},_f.prototype.getClass=function(){return _f},xf.MaxPointDistanceFilter.get=function(){return wf},xf.MaxMidpointDistanceFilter.get=function(){return bf},Object.defineProperties(_f,xf);var wf=function(t){this._maxPtDist=new vf,this._minPtDist=new vf,this._geom=t||null};wf.prototype.filter=function(t){this._minPtDist.initialize(),yf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wf.prototype.getMaxPointDistance=function(){return this._maxPtDist},wf.prototype.interfaces_=function(){return[fu]},wf.prototype.getClass=function(){return wf};var bf=function(t){this._maxPtDist=new vf,this._minPtDist=new vf,this._geom=t||null};bf.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new Cl((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),yf.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bf.prototype.isDone=function(){return!1},bf.prototype.isGeometryChanged=function(){return!1},bf.prototype.getMaxPointDistance=function(){return this._maxPtDist},bf.prototype.interfaces_=function(){return[Gu]},bf.prototype.getClass=function(){return bf};var Cf=function(t){this._comps=t||null};Cf.prototype.filter=function(t){t instanceof Qu&&this._comps.add(t)},Cf.prototype.interfaces_=function(){return[Vu]},Cf.prototype.getClass=function(){return Cf},Cf.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Cf.getPolygons(t,new Cu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qu?n.add(e):e instanceof Hu&&e.apply(new Cf(n)),n}};var Sf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ec){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Zu&&this._lines.add(t)},Sf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sf.prototype.interfaces_=function(){return[lu]},Sf.prototype.getClass=function(){return Sf},Sf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sf.getLines(e,n))}},Sf.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sf.getLines(t,!1)}if(2===arguments.length){if(Pl(arguments[0],_u)&&Pl(arguments[1],_u)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();Sf.getLines(r,n)}return n}if(arguments[0]instanceof uu&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new Cu;return o.apply(new Sf(s,a)),s}if(arguments[0]instanceof uu&&Pl(arguments[1],_u)){var l=arguments[0],u=arguments[1];return l instanceof Zu?u.add(l):l.apply(new Sf(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Pl(arguments[0],_u)&&Pl(arguments[1],_u)){for(var c=arguments[0],h=arguments[1],f=arguments[2],p=c.iterator();p.hasNext();){var d=p.next();Sf.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof uu&&Pl(arguments[1],_u)){var g=arguments[0],m=arguments[1],v=arguments[2];return g.apply(new Sf(m,v)),m}}};var Mf=function(){if(this._boundaryRule=pu.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new vl("Rule must be non-null");this._boundaryRule=t}};Mf.prototype.locateInternal=function(){if(arguments[0]instanceof Cl&&arguments[1]instanceof Qu){var t=arguments[0],e=arguments[1];if(e.isEmpty())return Il.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===Il.EXTERIOR)return Il.EXTERIOR;if(i===Il.BOUNDARY)return Il.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),a=this.locateInPolygonRing(t,o);if(a===Il.INTERIOR)return Il.EXTERIOR;if(a===Il.BOUNDARY)return Il.BOUNDARY}return Il.INTERIOR}if(arguments[0]instanceof Cl&&arguments[1]instanceof Zu){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return Il.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?au.isOnLine(s,u)?Il.INTERIOR:Il.EXTERIOR:Il.BOUNDARY}if(arguments[0]instanceof Cl&&arguments[1]instanceof Ku){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?Il.INTERIOR:Il.EXTERIOR}},Mf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?au.locatePointInRing(t,e.getCoordinates()):Il.EXTERIOR},Mf.prototype.intersects=function(t,e){return this.locate(t,e)!==Il.EXTERIOR},Mf.prototype.updateLocationInfo=function(t){t===Il.INTERIOR&&(this._isIn=!0),t===Il.BOUNDARY&&this._numBoundaries++},Mf.prototype.computeLocation=function(t,e){if(e instanceof Ku&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Zu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qu)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ju)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof nc)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Hu)for(var l=new Vh(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Mf.prototype.locate=function(t,e){return e.isEmpty()?Il.EXTERIOR:e instanceof Zu?this.locateInternal(t,e):e instanceof Qu?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Il.BOUNDARY:this._numBoundaries>0||this._isIn?Il.INTERIOR:Il.EXTERIOR)},Mf.prototype.interfaces_=function(){return[]},Mf.prototype.getClass=function(){return Mf};var Ef=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._component=i,this._segIndex=r,this._pt=o}},If={INSIDE_AREA:{configurable:!0}};Ef.prototype.isInsideArea=function(){return this._segIndex===Ef.INSIDE_AREA},Ef.prototype.getCoordinate=function(){return this._pt},Ef.prototype.getGeometryComponent=function(){return this._component},Ef.prototype.getSegmentIndex=function(){return this._segIndex},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},If.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ef,If);var Tf=function(t){this._pts=t||null};Tf.prototype.filter=function(t){t instanceof Ku&&this._pts.add(t)},Tf.prototype.interfaces_=function(){return[Vu]},Tf.prototype.getClass=function(){return Tf},Tf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Ku?Qc.singletonList(t):Tf.getPoints(t,new Cu)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Ku?n.add(e):e instanceof Hu&&e.apply(new Tf(n)),n}};var Pf=function(){this._locations=null;var t=arguments[0];this._locations=t};Pf.prototype.filter=function(t){(t instanceof Ku||t instanceof Zu||t instanceof Qu)&&this._locations.add(new Ef(t,0,t.getCoordinate()))},Pf.prototype.interfaces_=function(){return[Vu]},Pf.prototype.getClass=function(){return Pf},Pf.getLocations=function(t){var e=new Cu;return t.apply(new Pf(e)),e};var Lf=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Mf,this._minDistanceLocation=null,this._minDistance=yl.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Lf.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Cf.getPolygons(this._geom[e]);if(r.size()>0){var o=Pf.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Pl(arguments[0],bu)&&Pl(arguments[1],bu)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),h=0;h<s.size();h++)if(this.computeContainmentDistance(c,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ef&&arguments[1]instanceof Qu){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate();if(Il.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=f,d[1]=new Ef(p,g),null}},Lf.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},Lf.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sf.getLines(this._geom[0]),n=Sf.getLines(this._geom[1]),i=Tf.getPoints(this._geom[0]),r=Tf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Lf.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Lf.prototype.updateMinDistance=function(t,e){return null===t[0]?null:void(e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1]))},Lf.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Lf.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Zu&&arguments[1]instanceof Ku){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var a=au.distancePointLine(r,i[o],i[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new dh(i[o],i[o+1]).closestPoint(r);n[0]=new Ef(t,o,s),n[1]=new Ef(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zu&&arguments[1]instanceof Zu){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),f=u.getCoordinates(),p=0;p<h.length-1;p++)for(var d=0;d<f.length-1;d++){var g=au.distanceLineLine(h[p],h[p+1],f[d],f[d+1]);if(g<this._minDistance){this._minDistance=g;var m=new dh(h[p],h[p+1]),v=new dh(f[d],f[d+1]),y=m.closestPoints(v);c[0]=new Ef(l,p,y[0]),c[1]=new Ef(u,d,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Lf.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Ef(r,0,r.getCoordinate()),n[1]=new Ef(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Lf.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new vl("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Lf.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf},Lf.distance=function(t,e){return new Lf(t,e).distance()},Lf.isWithinDistance=function(t,e,n){return new Lf(t,e,n).distance()<=n},Lf.nearestPoints=function(t,e){return new Lf(t,e).nearestPoints()};var Df=function(){this._pt=[new Cl,new Cl],this._distance=yl.NaN,this._isNull=!0};Df.prototype.getCoordinates=function(){return this._pt},Df.prototype.getCoordinate=function(t){return this._pt[t]},Df.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Df.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Df.prototype.toString=function(){return Kl.toLineString(this._pt[0],this._pt[1])},Df.prototype.getDistance=function(){return this._distance},Df.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Df.prototype.interfaces_=function(){return[]},Df.prototype.getClass=function(){return Df};var Af=function(){};Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.computeDistance=function(){if(arguments[2]instanceof Df&&arguments[0]instanceof Zu&&arguments[1]instanceof Cl)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new dh,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Df&&arguments[0]instanceof Qu&&arguments[1]instanceof Cl){var s=arguments[0],l=arguments[1],u=arguments[2];Af.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Af.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Df&&arguments[0]instanceof uu&&arguments[1]instanceof Cl){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof Zu)Af.computeDistance(h,f,p);else if(h instanceof Qu)Af.computeDistance(h,f,p);else if(h instanceof Hu)for(var d=h,g=0;g<d.getNumGeometries();g++){var m=d.getGeometryN(g);Af.computeDistance(m,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Df&&arguments[0]instanceof dh&&arguments[1]instanceof Cl){var v=arguments[0],y=arguments[1],_=arguments[2],x=v.closestPoint(y);_.setMinimum(x,y)}};var kf=function(){this._g0=null,this._g1=null,this._ptDist=new Df,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Nf={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};kf.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},kf.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new vl("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},kf.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},kf.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},kf.prototype.computeOrientedDistance=function(t,e,n){var i=new Of(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Rf(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},kf.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new kf(t,e).distance()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new kf(n,i);return o.setDensifyFraction(r),o.distance()}},Nf.MaxPointDistanceFilter.get=function(){return Of},Nf.MaxDensifiedByFractionDistanceFilter.get=function(){return Rf},Object.defineProperties(kf,Nf);var Of=function(){this._maxPtDist=new Df,this._minPtDist=new Df,this._euclideanDist=new Af,this._geom=null;var t=arguments[0];this._geom=t};Of.prototype.filter=function(t){this._minPtDist.initialize(),Af.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Of.prototype.getMaxPointDistance=function(){return this._maxPtDist},Of.prototype.interfaces_=function(){return[fu]},Of.prototype.getClass=function(){return Of};var Rf=function(){this._maxPtDist=new Df,this._minPtDist=new Df,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Rf.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*r,l=n.y+a*o,u=new Cl(s,l);this._minPtDist.initialize(),Af.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Rf.prototype.isDone=function(){return!1},Rf.prototype.isGeometryChanged=function(){return!1},Rf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Rf.prototype.interfaces_=function(){return[Gu]},Rf.prototype.getClass=function(){return Rf};var Ff=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},zf={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ff.prototype.checkMaximumDistance=function(t,e,n){var i=new kf(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Kl.toLineString(r[0],r[1])+")"}},Ff.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Ff.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Ff.VERBOSE&&jl.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Ff.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qu||this._input instanceof nc||this._input instanceof Hu))return null;var t=this.getPolygonLines(this._input);return this.checkMinimumDistance(t,this._result,this._minValidDistance),this._isValid?void this.checkMaximumDistance(t,this._result,this._maxValidDistance):null},Ff.prototype.getErrorIndicator=function(){return this._errorIndicator},Ff.prototype.checkMinimumDistance=function(t,e,n){var i=new Lf(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Kl.toLineString(r[0],r[1])+" )"}},Ff.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();return this.checkMinimumDistance(this._input,t,this._minValidDistance),this._isValid?void this.checkMaximumDistance(this._input,t,this._maxValidDistance):null},Ff.prototype.getErrorLocation=function(){return this._errorLocation},Ff.prototype.getPolygonLines=function(t){for(var e=new Cu,n=new Sf(e),i=Cf.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},Ff.prototype.getErrorMessage=function(){return this._errMsg},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},zf.VERBOSE.get=function(){return!1},zf.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ff,zf);var Bf=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Vf={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bf.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bf.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bf.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Wl(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Wl(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),
this.report("Envelope")},Bf.prototype.checkDistance=function(){var t=new Ff(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Bf.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Bf.prototype.checkPolygonal=function(){this._result instanceof Qu||this._result instanceof nc||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Bf.prototype.getErrorIndicator=function(){return this._errorIndicator},Bf.prototype.getErrorLocation=function(){return this._errorLocation},Bf.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Bf.prototype.report=function(t){return Bf.VERBOSE?void jl.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED")):null},Bf.prototype.getErrorMessage=function(){return this._errorMsg},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf},Bf.isValidMsg=function(t,e,n){var i=new Bf(t,e,n);return i.isValid()?null:i.getErrorMessage()},Bf.isValid=function(t,e,n){return!!new Bf(t,e,n).isValid()},Vf.VERBOSE.get=function(){return!1},Vf.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bf,Vf);var Gf=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Gf.prototype.getCoordinates=function(){return this._pts},Gf.prototype.size=function(){return this._pts.length},Gf.prototype.getCoordinate=function(t){return this._pts[t]},Gf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Gf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ch.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Gf.prototype.setData=function(t){this._data=t},Gf.prototype.getData=function(){return this._data},Gf.prototype.toString=function(){return Kl.toLineString(new lc(this._pts))},Gf.prototype.interfaces_=function(){return[hh]},Gf.prototype.getClass=function(){return Gf};var Hf=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Cu,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Hf.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Hf.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Hf.prototype.getIntersectionSegments=function(){return this._intSegments},Hf.prototype.count=function(){return this._intersectionCount},Hf.prototype.getIntersections=function(){return this._intersections},Hf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Hf.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Hf.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Hf.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Hf.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Hf.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Hf.prototype.interfaces_=function(){return[Yh]},Hf.prototype.getClass=function(){return Hf},Hf.createAllIntersectionsFinder=function(t){var e=new Hf(t);return e.setFindAllIntersections(!0),e},Hf.createAnyIntersectionFinder=function(t){return new Hf(t)},Hf.createIntersectionCounter=function(t){var e=new Hf(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var jf=function(){this._li=new iu,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};jf.prototype.execute=function(){return null!==this._segInt?null:void this.checkInteriorIntersections()},jf.prototype.getIntersections=function(){return this._segInt.getIntersections()},jf.prototype.isValid=function(){return this.execute(),this._isValid},jf.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},jf.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Hf(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},jf.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Tc(this.getErrorMessage(),this._segInt.getInteriorIntersection())},jf.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Kl.toLineString(t[0],t[1])+" and "+Kl.toLineString(t[2],t[3])},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},jf.computeIntersections=function(t){var e=new jf(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Uf=function t(){this._nv=null;var e=arguments[0];this._nv=new jf(t.toSegmentStrings(e))};Uf.prototype.checkValid=function(){this._nv.checkValid()},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.toSegmentStrings=function(t){for(var e=new Cu,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Gf(i.getCoordinates(),i))}return e},Uf.checkValid=function(t){new Uf(t).checkValid()};var Wf=function(t){this._mapOp=t};Wf.prototype.map=function(t){for(var e=new Cu,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(vc.toGeometryArray(e))},Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Wf.map=function(t,e){return new Wf(e).map(t)};var qf=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Cu,this._resultLineList=new Cu;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};qf.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},qf.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},qf.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},qf.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ep.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},qf.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},qf.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},qf.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},qf.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(tu.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ep.isResultOfOp(i,e)&&e===Ep.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},qf.prototype.interfaces_=function(){return[]},qf.prototype.getClass=function(){return qf};var Yf=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Cu;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Yf.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Yf.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ep.INTERSECTION)){var i=n.getLabel();Ep.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Yf.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf};var Xf=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Xf.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Xf.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof ec&&!i.isEmpty()||(n=!1);for(var r=new Cu,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ec||(n=!1),r.add(a))}if(n)return this._factory.createPolygon(i,r.toArray([]));var s=new Cu;return null!==i&&s.add(i),s.addAll(r),this._factory.buildGeometry(s)},Xf.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Xf.prototype.getInputGeometry=function(){return this._inputGeom},Xf.prototype.transformMultiLineString=function(t,e){for(var n=new Cu,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Xf.prototype.transformCoordinates=function(t,e){return this.copy(t)},Xf.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Xf.prototype.transformMultiPoint=function(t,e){for(var n=new Cu,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Xf.prototype.transformMultiPolygon=function(t,e){for(var n=new Cu,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Xf.prototype.copy=function(t){return t.copy()},Xf.prototype.transformGeometryCollection=function(t,e){for(var n=new Cu,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(vc.toGeometryArray(n)):this._factory.buildGeometry(n)},Xf.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Ku)return this.transformPoint(t,null);if(t instanceof tc)return this.transformMultiPoint(t,null);if(t instanceof ec)return this.transformLinearRing(t,null);if(t instanceof Zu)return this.transformLineString(t,null);if(t instanceof ju)return this.transformMultiLineString(t,null);if(t instanceof Qu)return this.transformPolygon(t,null);if(t instanceof nc)return this.transformMultiPolygon(t,null);if(t instanceof Hu)return this.transformGeometryCollection(t,null);throw new vl("Unknown Geometry subtype: "+t.getClass().getName())},Xf.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Xf.prototype.interfaces_=function(){return[]},Xf.prototype.getClass=function(){return Xf};var Zf=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new dh,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Zu&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};Zf.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new Cl(o)),0===i&&this._isClosed&&t.set(t.size()-1,new Cl(o)))}},Zf.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Zf.prototype.snapTo=function(t){var e=new Mu(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zf.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new Cl(r),!1)}},Zf.prototype.findSegmentIndexToSnap=function(t,e){for(var n=yl.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Zf.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Zf.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Jf=function(t){this._srcGeom=t||null},Kf={SNAP_PRECISION_FACTOR:{configurable:!0}};Jf.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new $f(e,n).transform(this._srcGeom)},Jf.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new $f(t,n,!0).transform(this._srcGeom),r=i;return e&&Pl(r,$u)&&(r=i.buffer(0)),r},Jf.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Jf.prototype.extractTargetCoordinates=function(t){for(var e=new Vr,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Jf.prototype.computeMinimumSegmentLength=function(t){for(var e=yl.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Jf(t);i[0]=r.snapTo(e,n);var o=new Jf(e);return i[1]=o.snapTo(i[0],n),i},Jf.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Jf.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pc.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Jf.computeOverlaySnapTolerance(r),Jf.computeOverlaySnapTolerance(o))}},Jf.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Jf.SNAP_PRECISION_FACTOR},Jf.snapToSelf=function(t,e,n){return new Jf(t).snapToSelf(e,n)},Kf.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Jf,Kf);var $f=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Zf(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xf),Qf=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qf.prototype.getCommon=function(){return yl.longBitsToDouble(this._commonBits)},Qf.prototype.add=function(t){var e=yl.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qf.signExpBits(this._commonBits),this._isFirst=!1,null):Qf.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qf.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qf.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qf.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=yl.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+yl.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf},Qf.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qf.signExpBits=function(t){return t>>52},Qf.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qf.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Qf.getBit(t,i)!==Qf.getBit(e,i))return n;n++}return 52};var tp=function(){this._commonCoord=null,this._ccFilter=new np},ep={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tp.prototype.addCommonBits=function(t){var e=new ip(this._commonCoord);t.apply(e),t.geometryChanged()},tp.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Cl(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ip(e);return t.apply(n),t.geometryChanged(),t},tp.prototype.getCommonCoordinate=function(){return this._commonCoord},tp.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp},ep.CommonCoordinateFilter.get=function(){return np},ep.Translater.get=function(){return ip},Object.defineProperties(tp,ep);var np=function(){this._commonBitsX=new Qf,this._commonBitsY=new Qf};np.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},np.prototype.getCommonCoordinate=function(){return new Cl(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},np.prototype.interfaces_=function(){return[fu]},np.prototype.getClass=function(){return np};var ip=function(){this.trans=null;var t=arguments[0];this.trans=t};ip.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ip.prototype.isDone=function(){return!1},ip.prototype.isGeometryChanged=function(){return!0},ip.prototype.interfaces_=function(){return[Gu]},ip.prototype.getClass=function(){return ip};var rp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rp.prototype.selfSnap=function(t){return new Jf(t).snapTo(t,this._snapTolerance)},rp.prototype.removeCommonBits=function(t){this._cbr=new tp,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ep.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rp.prototype.checkValid=function(t){t.isValid()||jl.out.println("Snapped geometry is invalid")},rp.prototype.computeSnapTolerance=function(){this._snapTolerance=Jf.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rp.prototype.snap=function(t){var e=this.removeCommonBits(t);return Jf.snap(e[0],e[1],this._snapTolerance)},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.overlayOp=function(t,e,n){return new rp(t,e).getResultGeometry(n)},rp.union=function(t,e){return rp.overlayOp(t,e,Ep.UNION)},rp.intersection=function(t,e){return rp.overlayOp(t,e,Ep.INTERSECTION)},rp.symDifference=function(t,e){return rp.overlayOp(t,e,Ep.SYMDIFFERENCE)},rp.difference=function(t,e){return rp.overlayOp(t,e,Ep.DIFFERENCE)};var op=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};op.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Ep.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $l))throw t;i=t}if(!n)try{e=rp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $l?i:t}return e},op.prototype.interfaces_=function(){return[]},op.prototype.getClass=function(){return op},op.overlayOp=function(t,e,n){return new op(t,e).getResultGeometry(n)},op.union=function(t,e){return op.overlayOp(t,e,Ep.UNION)},op.intersection=function(t,e){return op.overlayOp(t,e,Ep.INTERSECTION)},op.symDifference=function(t,e){return op.overlayOp(t,e,Ep.SYMDIFFERENCE)},op.difference=function(t,e){return op.overlayOp(t,e,Ep.DIFFERENCE)};var ap=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ap.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap};var sp=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},lp={INSERT:{configurable:!0},DELETE:{configurable:!0}};sp.prototype.isDelete=function(){return this._eventType===sp.DELETE},sp.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},sp.prototype.getObject=function(){return this._obj},sp.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},sp.prototype.getInsertEvent=function(){return this._insertEvent},sp.prototype.isInsert=function(){return this._eventType===sp.INSERT},sp.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},sp.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},sp.prototype.interfaces_=function(){return[xl]},sp.prototype.getClass=function(){return sp},lp.INSERT.get=function(){return 1},lp.DELETE.get=function(){return 2},Object.defineProperties(sp,lp);var up=function(){};up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up};var cp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};cp.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(cp.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},cp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},cp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},cp.prototype.hasProperIntersection=function(){return this._hasProper},cp.prototype.hasIntersection=function(){return this._hasIntersection},cp.prototype.isDone=function(){return this._isDone},cp.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},cp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},cp.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},cp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hp=function(t){function e(){t.call(this),this.events=new Cu,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qc.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cp&&Pl(arguments[0],bu)&&Pl(arguments[1],bu)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&Pl(arguments[0],bu)&&arguments[1]instanceof cp){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new ap(n,r),a=new sp(e,n.getMinX(r),o);this.events.add(a),this.events.add(new sp(n.getMaxX(r),a))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(r.computeIntersections(s,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();this.addEdge(o,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(up),fp=function(){this._min=yl.POSITIVE_INFINITY,this._max=yl.NEGATIVE_INFINITY},pp={NodeComparator:{configurable:!0}};fp.prototype.getMin=function(){return this._min},fp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fp.prototype.getMax=function(){return this._max},fp.prototype.toString=function(){return Kl.toLineString(new Cl(this._min,0),new Cl(this._max,0))},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},pp.NodeComparator.get=function(){return dp},Object.defineProperties(fp,pp);var dp=function(){};dp.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},dp.prototype.interfaces_=function(){return[bl]},dp.prototype.getClass=function(){return dp};var gp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){return this.intersects(t,e)?void n.visitItem(this._item):null},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),mp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){return this.intersects(t,e)?(null!==this._node1&&this._node1.query(t,e,n),void(null!==this._node2&&this._node2.query(t,e,n))):null},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),vp=function(){this._leaves=new Cu,this._root=null,this._level=0};vp.prototype.buildTree=function(){Qc.sort(this._leaves,new fp.NodeComparator);for(var t=this._leaves,e=null,n=new Cu;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},vp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gp(t,e,n))},vp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},vp.prototype.buildRoot=function(){return null!==this._root?null:void(this._root=this.buildTree())},vp.prototype.printNode=function(t){jl.out.println(Kl.toLineString(new Cl(t._min,this._level),new Cl(t._max,this._level)))},vp.prototype.init=function(){return null!==this._root?null:void this.buildRoot()},vp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new mp(t.get(n),t.get(n+1));e.add(r)}}},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var yp=function(){this._items=new Cu};yp.prototype.visitItem=function(t){this._items.add(t)},yp.prototype.getItems=function(){return this._items},yp.prototype.interfaces_=function(){return[Zc]},yp.prototype.getClass=function(){return yp};var _p=function(){this._index=null;var t=arguments[0];if(!Pl(t,$u))throw new vl("Argument must be Polygonal");this._index=new bp(t)},xp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_p.prototype.locate=function(t){var e=new ou(t),n=new wp(e);return this._index.query(t.y,t.y,n),e.getLocation()},_p.prototype.interfaces_=function(){return[Bh]},_p.prototype.getClass=function(){
return _p},xp.SegmentVisitor.get=function(){return wp},xp.IntervalIndexedGeometry.get=function(){return bp},Object.defineProperties(_p,xp);var wp=function(){this._counter=null;var t=arguments[0];this._counter=t};wp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},wp.prototype.interfaces_=function(){return[Zc]},wp.prototype.getClass=function(){return wp};var bp=function(){this._index=new vp;var t=arguments[0];this.init(t)};bp.prototype.init=function(t){for(var e=Sf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},bp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new dh(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},bp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new yp;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp};var Cp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fc,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Mf,2===arguments.length){var e=arguments[0],n=arguments[1],i=pu.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;Il.NONE,i.getLocation(t,Mc.ON)===Il.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new cp(n,!0,!1);o.setIsDoneIfProperInt(r);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ec||this._parentGeom instanceof Qu||this._parentGeom instanceof nc,l=i||!s;return a.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new cp(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Ku){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,Il.INTERIOR)}else if(arguments[0]instanceof Cl){var e=arguments[0];this.insertPoint(this._argIndex,e,Il.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Il.EXTERIOR,Il.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Il.INTERIOR,Il.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Il.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Il.BOUNDARY)},e.prototype.addLineString=function(t){var e=Eu.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ef(e,new Ac(this._argIndex,Il.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),tu.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===Il.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=Eu.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;au.isCCW(i)&&(r=n,o=e);var a=new ef(i,new Ac(this._argIndex,Il.BOUNDARY,r,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,i[0],Il.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Ac(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof nc&&(this._useBoundaryDeterminationRule=!1),e instanceof Qu)this.addPolygon(e);else if(e instanceof Zu)this.addLineString(e);else if(e instanceof Ku)this.addPoint(e);else if(e instanceof tc)this.addCollection(e);else if(e instanceof ju)this.addCollection(e);else if(e instanceof nc)this.addCollection(e);else{if(!(e instanceof Hu))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Pl(this._parentGeom,$u)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _p(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Il.BOUNDARY:Il.INTERIOR},e}(Uc),Sp=function(){if(this._li=new iu,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Cp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=pu.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Cp(0,e,i),this._arg[1]=new Cp(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Cp(0,r,a),this._arg[1]=new Cp(1,o,a)}};Sp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Sp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp};var Mp=function(){};Mp.prototype.interfaces_=function(){return[]},Mp.prototype.getClass=function(){return Mp},Mp.map=function(){if(arguments[0]instanceof uu&&Pl(arguments[1],Mp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Cu,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(Pl(arguments[0],_u)&&Pl(arguments[1],Mp.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Cu,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},Mp.MapOp=function(){};var Ep=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Mf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new qh,this._resultPolyList=new Cu,this._resultLineList=new Cu,this._resultPointList=new Cu,this._graph=new Uc(new Uh),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Ac(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new Cu;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==Il.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Cu,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Cu;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Uf.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Wc(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new qf(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new Yf(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Mc.RIGHT),r.getLocation(1,Mc.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(tu.isTrue(!i.isNull(r,Mc.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Mc.LEFT,i.getLocation(r,Mc.LEFT)),tu.isTrue(!i.isNull(r,Mc.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Mc.RIGHT,i.getLocation(r,Mc.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sp);Ep.overlayOp=function(t,e,n){return new Ep(t,e).getResultGeometry(n)},Ep.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ep.createEmptyResult(Ep.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Wf.map(t,{interfaces_:function(){return[Mp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Ep.INTERSECTION)},Ep.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ep.createEmptyResult(Ep.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Ep.SYMDIFFERENCE)},Ep.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Ep.INTERSECTION:o=Math.min(i,r);break;case Ep.UNION:o=Math.max(i,r);break;case Ep.DIFFERENCE:o=i;break;case Ep.SYMDIFFERENCE:o=Math.max(i,r)}return o},Ep.createEmptyResult=function(t,e,n,i){var r=null;switch(Ep.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Ep.difference=function(t,e){return t.isEmpty()?Ep.createEmptyResult(Ep.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Ep.DIFFERENCE))},Ep.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Ep.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];switch(r===Il.BOUNDARY&&(r=Il.INTERIOR),o===Il.BOUNDARY&&(o=Il.INTERIOR),a){case Ep.INTERSECTION:return r===Il.INTERIOR&&o===Il.INTERIOR;case Ep.UNION:return r===Il.INTERIOR||o===Il.INTERIOR;case Ep.DIFFERENCE:return r===Il.INTERIOR&&o!==Il.INTERIOR;case Ep.SYMDIFFERENCE:return r===Il.INTERIOR&&o!==Il.INTERIOR||r!==Il.INTERIOR&&o===Il.INTERIOR}return!1}},Ep.INTERSECTION=1,Ep.UNION=2,Ep.DIFFERENCE=3,Ep.SYMDIFFERENCE=4;var Ip=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Mf,this._seg=new dh;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ip.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ip.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Il.BOUNDARY:this._ptLocator.locate(t,this._g)},Ip.prototype.extractLinework=function(t){var e=new Tp;t.apply(e);var n=e.getLinework(),i=vc.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Tp=function(){this._linework=null,this._linework=new Cu};Tp.prototype.getLinework=function(){return this._linework},Tp.prototype.filter=function(t){if(t instanceof Qu){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Tp.prototype.interfaces_=function(){return[Vu]},Tp.prototype.getClass=function(){return Tp};var Pp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Pp.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Pp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Pp.prototype.getPoints=function(t){for(var e=new Cu,n=Sf.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Pp.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o),s=n*r/a,l=n*o/a,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new Cl(u-l,c+s);i.add(h)}if(this._doRight){var f=new Cl(u+l,c-s);i.add(f)}},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp};var Lp=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Cu;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Ip(this._geom[0],this._boundaryDistanceTolerance),new Ip(this._geom[1],this._boundaryDistanceTolerance),new Ip(this._geom[2],this._boundaryDistanceTolerance)]},Dp={TOLERANCE:{configurable:!0}};Lp.prototype.reportResult=function(t,e,n){jl.out.println("Overlay result invalid - A:"+Il.toLocationSymbol(e[0])+" B:"+Il.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Il.toLocationSymbol(e[2]))},Lp.prototype.isValid=function(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var e=this.checkValid(t);return e},Lp.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Lp.hasLocation(this._location,Il.BOUNDARY)||this.isValidResult(i,this._location)}},Lp.prototype.addTestPts=function(t){var e=new Pp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Lp.prototype.isValidResult=function(t,e){var n=Ep.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===Il.INTERIOR);return i||this.reportResult(t,e,n),i},Lp.prototype.getInvalidLocation=function(){return this._invalidLocation},Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp},Lp.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Lp.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Jf.computeSizeBasedSnapTolerance(t),Jf.computeSizeBasedSnapTolerance(e))},Lp.isValid=function(t,e,n,i){return new Lp(t,e,i).isValid(n)},Dp.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Lp,Dp);var Ap=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ap.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Ap.prototype.combine=function(){for(var t=new Cu,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.combine=function(){if(1===arguments.length){var t=arguments[0];return new Ap(t).combine()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return new Ap(Ap.createList(e,n)).combine()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return new Ap(Ap.createList(i,r,o)).combine()}},Ap.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ap.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Cu;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=new Cu;return a.add(i),a.add(r),a.add(o),a}};var kp=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Cu)},Np={STRTREE_NODE_CAPACITY:{configurable:!0}};kp.prototype.reduceToGeometries=function(t){for(var e=new Cu,n=t.iterator();n.hasNext();){var i=n.next(),r=null;Pl(i,bu)?r=this.unionTree(i):i instanceof uu&&(r=i),e.add(r)}return e},kp.prototype.extractByEnvelope=function(t,e,n){for(var i=new Cu,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},kp.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Ap.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},kp.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new oh(kp.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},kp.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=kp.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(kp.getGeometry(e,n),kp.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,i);return this.unionSafe(a,s)}},kp.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},kp.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},kp.prototype.unionActual=function(t,e){return kp.restrictToPolygons(t.union(e))},kp.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},kp.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new Cu,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),a=this.unionActual(r,o);return i.add(a),Ap.combine(i)},kp.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.restrictToPolygons=function(t){if(Pl(t,$u))return t;var e=Cf.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(vc.toPolygonArray(e))},kp.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},kp.union=function(t){return new kp(t).union()},Np.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(kp,Np);var Op=function(){};Op.prototype.interfaces_=function(){return[]},Op.prototype.getClass=function(){return Op},Op.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ep.createEmptyResult(Ep.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),op.overlayOp(t,e,Ep.UNION)};var Rp=function(){return new Wr};Wr.prototype={constructor:Wr,reset:function(){this.s=this.t=0},add:function(t){qr(Fp,t,this.t),qr(this,Fp.s,this.s),this.s?this.t+=Fp.t:this.s=Fp.t},valueOf:function(){return this.s}};var Fp=new Wr,zp=1e-6,Bp=Math.PI,Vp=Bp/2,Gp=Bp/4,Hp=2*Bp,jp=180/Bp,Up=Bp/180,Wp=Math.abs,qp=Math.atan,Yp=Math.atan2,Xp=Math.cos,Zp=Math.exp,Jp=Math.log,Kp=Math.sin,$p=Math.sqrt,Qp=Math.tan,td={Feature:function(t,e){Zr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Zr(n[i].geometry,e)}},ed={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Jr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Jr(n[i],e,0)},Polygon:function(t,e){Kr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Kr(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Zr(n[i],e)}},nd=function(t,e){t&&td.hasOwnProperty(t.type)?td[t.type](t,e):Zr(t,e)},id=(Rp(),Rp(),Rp(),function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n});oo.invert=oo;var rd=function(t){function e(e){return e=t(e[0]*Up,e[1]*Up),e[0]*=jp,e[1]*=jp,e}return t=ao(t[0]*Up,t[1]*Up,t.length>2?t[2]*Up:0),e.invert=function(e){return e=t.invert(e[0]*Up,e[1]*Up),e[0]*=jp,e[1]*=jp,e},e},od=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Xr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},ad=function(t,e,n,i,r,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,f=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=i-l,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*f),c<1&&(e[0]=s+c*h,e[1]=l+c*f),!0}}}}},sd=function(t,e){return Wp(t[0]-e[0])<zp&&Wp(t[1]-e[1])<zp},ld=function(t,e,n,i,r){var o,a,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(sd(i,a)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else s.push(n=new ho(i,t,null,!0)),l.push(n.o=new ho(i,null,n,!1)),s.push(n=new ho(a,t,null,!1)),l.push(n.o=new ho(a,null,n,!0))}}),s.length){for(l.sort(e),fo(s),fo(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=u.length;o<a;++o)r.point((c=u[o])[0],c[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(u=f.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}},ud=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},cd=(function(t){1===t.length&&(t=function(t){return function(e,n){return ud(t(e),n)}}(t))}(ud),function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n}),hd=1e9,fd=-hd,pd=Rp(),dd=(Rp(),function(t){return t}),gd=(Rp(),Rp(),1/0),md=gd,vd=-gd,yd=vd,_d={point:function(t,e){t<gd&&(gd=t),t>vd&&(vd=t),e<md&&(md=e),e>yd&&(yd=e)},lineStart:Xr,lineEnd:Xr,polygonStart:Xr,polygonEnd:Xr,result:function(){var t=[[gd,md],[vd,yd]];return vd=yd=-(md=gd=1/0),t}},xd=(Rp(),function(t,e,n,i){return function(r,o){function a(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function s(t,e){var n=r(t,e);m.point(n[0],n[1])}function l(){w.point=s,m.lineStart()}function u(){w.point=a,m.lineEnd()}function c(t,e){g.push([t,e]);var n=r(t,e);_.point(n[0],n[1])}function h(){_.lineStart(),g=[]}function f(){c(g[0][0],g[0][1]),_.lineEnd();var t,e,n,i,r=_.clean(),a=y.result(),s=a.length;if(g.pop(),p.push(g),g=null,s)if(1&r){if(n=a[0],(e=n.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else s>1&&2&r&&a.push(a.pop().concat(a.shift())),d.push(a.filter(go))}var p,d,g,m=e(o),v=r.invert(i[0],i[1]),y=od(),_=e(y),x=!1,w={point:a,lineStart:l,lineEnd:u,polygonStart:function(){w.point=c,w.lineStart=h,w.lineEnd=f,d=[],p=[]},polygonEnd:function(){w.point=a,w.lineStart=l,w.lineEnd=u,d=cd(d);var t=function(t,e){var n=e[0],i=e[1],r=[Kp(n),-Xp(n),0],o=0,a=0;pd.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,h=u[c-1],f=h[0],p=h[1]/2+Gp,d=Kp(p),g=Xp(p),m=0;m<c;++m,f=y,d=x,g=w,h=v){var v=u[m],y=v[0],_=v[1]/2+Gp,x=Kp(_),w=Xp(_),b=y-f,C=b>=0?1:-1,S=C*b,M=S>Bp,E=d*x;if(pd.add(Yp(E*C*Kp(S),g*w+E*Xp(S))),o+=M?b+C*Hp:b,M^f>=n^y>=n){var I=eo(Qr(h),Qr(v));ro(I);var T=eo(r,I);ro(T);var P=(M^b>=0?-1:1)*Yr(T[2]);(i>P||i===P&&(I[0]||I[1]))&&(a+=M^b>=0?1:-1)}}return(o<-zp||o<zp&&pd<-zp)^1&a}(p,v);d.length?(x||(o.polygonStart(),x=!0),ld(d,mo,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return w}}),wd=xd(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Bp:-Bp,l=Wp(o-n);Wp(l-Bp)<zp?(t.point(n,i=(i+a)/2>0?Vp:-Vp),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=Bp&&(Wp(n-r)<zp&&(n-=r*zp),Wp(o-s)<zp&&(o-=s*zp),i=function(t,e,n,i){var r,o,a=Kp(t-n);return Wp(a)>zp?qp((Kp(e)*(o=Xp(i))*Kp(n)-Kp(i)*(r=Xp(e))*Kp(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)r=n*Vp,i.point(-Bp,r),i.point(0,r),i.point(Bp,r),i.point(Bp,0),i.point(Bp,-r),i.point(0,-r),i.point(-Bp,-r),i.point(-Bp,0),i.point(-Bp,r);else if(Wp(t[0]-e[0])>zp){var o=t[0]<e[0]?Bp:-Bp;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-Bp,-Vp]),bd=function(t,e){function n(t,e){return Xp(t)*Xp(e)>o}function i(t,e,n){var i=[1,0,0],r=eo(Qr(t),Qr(e)),a=to(r,r),s=r[0],l=a-s*s;if(!l)return!n&&t;var u=o*a/l,c=-o*s/l,h=eo(i,r),f=io(i,u);no(f,io(r,c));var p=h,d=to(f,p),g=to(p,p),m=d*d-g*(to(f,f)-1);if(!(m<0)){var v=$p(m),y=io(p,(-d-v)/g);if(no(y,f),y=$r(y),!n)return y;var _,x=t[0],w=e[0],b=t[1],C=e[1];w<x&&(_=x,x=w,w=_);var S=w-x,M=Wp(S-Bp)<zp;if(!M&&C<b&&(_=b,b=C,C=_),M||S<zp?M?b+C>0^y[1]<(Wp(y[0]-x)<zp?b:C):b<=y[1]&&y[1]<=C:S>Bp^(x<=y[0]&&y[0]<=w)){var E=io(p,(-d+v)/g);return no(E,f),[y,$r(E)]}}}function r(e,n){var i=a?t:Bp-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var o=Xp(t),a=o>0,s=Wp(o)>zp;return xd(n,function(t){var e,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,f){var p,d=[h,f],g=n(h,f),m=a?g?0:r(h,f):g?r(h+(h<0?Bp:-Bp),f):0;if(!e&&(u=l=g)&&t.lineStart(),
g!==l&&(!(p=i(e,d))||sd(e,p)||sd(d,p))&&(d[0]+=zp,d[1]+=zp,g=n(d[0],d[1])),g!==l)c=0,g?(t.lineStart(),p=i(d,e),t.point(p[0],p[1])):(p=i(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(s&&e&&a^g){var v;m&o||!(v=i(d,e,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&sd(e,d)||t.point(d[0],d[1]),e=d,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}},function(n,i,r,o){!function(t,e,n,i,r,o){if(n){var a=Xp(e),s=Kp(e),l=i*n;null==r?(r=e+i*Hp,o=e-l/2):(r=co(a,r),o=co(a,o),(i>0?r<o:r>o)&&(r+=i*Hp));for(var u,c=r;i>0?c>o:c<o;c-=l)u=$r([a,-s*Xp(c),-s*Kp(c)]),t.point(u[0],u[1])}}(o,t,e,r,n,i)},a?[0,-t]:[-Bp,t-Bp])};yo.prototype={constructor:yo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Cd=16,Sd=Xp(30*Up),Md=function(t,e){return+e?function(t,e){function n(i,r,o,a,s,l,u,c,h,f,p,d,g,m){var v=u-i,y=c-r,_=v*v+y*y;if(_>4*e&&g--){var x=a+f,w=s+p,b=l+d,C=$p(x*x+w*w+b*b),S=Yr(b/=C),M=Wp(Wp(b)-1)<zp||Wp(o-h)<zp?(o+h)/2:Yp(w,x),E=t(M,S),I=E[0],T=E[1],P=I-i,L=T-r,D=y*P-v*L;(D*D/_>e||Wp((v*P+y*L)/_-.5)>.3||a*f+s*p+l*d<Sd)&&(n(i,r,o,a,s,l,I,T,M,x/=C,w/=C,b,g,m),m.point(I,T),n(I,T,M,x,w,b,u,c,h,f,p,d,g,m))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){v=NaN,b.point=o,e.lineStart()}function o(i,r){var o=Qr([i,r]),a=t(i,r);n(v,y,m,_,x,w,v=a[0],y=a[1],m=i,_=o[0],x=o[1],w=o[2],Cd,e),e.point(v,y)}function a(){b.point=i,e.lineEnd()}function s(){r(),b.point=l,b.lineEnd=u}function l(t,e){o(c=t,e),h=v,f=y,p=_,d=x,g=w,b.point=o}function u(){n(v,y,m,_,x,w,h,f,c,p,d,g,Cd,e),b.lineEnd=a,a()}var c,h,f,p,d,g,m,v,y,_,x,w,b={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),b.lineStart=s},polygonEnd:function(){e.polygonEnd(),b.lineStart=r}};return b}}(t,e):function(t){return vo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Ed=vo({point:function(t,e){this.stream.point(t*Up,e*Up)}});wo.invert=function(t,e){return[t,2*qp(Zp(e))-Vp]},bo.invert=function(t,e){return[-e,2*qp(Zp(t))-Vp]};var Id=function(){var t=function(t){function e(){var e=Bp*s(),a=o(rd(o.rotate()).invert([0,0]));return u(null==c?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===wo?[[Math.max(a[0]-e,c),n],[Math.min(a[0]+e,i),r]]:[[c,Math.max(a[1]-e,n)],[i,Math.min(a[1]+e,r)]])}var n,i,r,o=xo(t),a=o.center,s=o.scale,l=o.translate,u=o.clipExtent,c=null;return o.scale=function(t){return arguments.length?(s(t),e()):s()},o.translate=function(t){return arguments.length?(l(t),e()):l()},o.center=function(t){return arguments.length?(a(t),e()):a()},o.clipExtent=function(t){return arguments.length?(null==t?c=n=i=r=null:(c=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),e()):null==c?null:[[c,n],[i,r]]},e()}(bo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.projection=Ea,t.random=dl,t.clusters=gl,t.helpers=Vo,t.invariant=Ho,t.meta=Go,t.isolines=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(X(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!S(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=it(t,{zProperty:i,flip:!0});return u(function(t,e,n){var i=H(n),r=i[2]-i[0],o=i[3]-i[1],a=i[0],s=i[1],l=e[0].length-1,u=e.length-1,c=r/l,h=o/u,f=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach(function(t){I(t,f)}),t}(function(t,e,n,i,r){for(var o=[],a=1;a<e.length;a++){var s=+e[a],l=Object.assign({},i,r[a]);l[n]=s;var u=c($(t,s),l);o.push(u)}return o}(a,e,i,r,o),a,t))},t.convex=Pt,t.pointsWithinPolygon=At,t.concave=function(t,n){if(n=n||{},!S(n))throw new Error("options is invalid");if(!t)throw new Error("points is required");var i=n.maxEdge||1/0;if(!C(i))throw new Error("maxEdge is invalid");var r=kt(function(t){var e=[],n={};return D(t,function(t){if(t.geometry){var i=t.geometry.coordinates.join("-");n.hasOwnProperty(i)||(e.push(t),n[i]=!0)}}),u(e)}(t));if(r.features=r.features.filter(function(t){var e=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=Ft(e,r,n),s=Ft(r,o,n),l=Ft(e,o,n);return a<=i&&s<=i&&l<=i}),r.features.length<1)return null;var o=Qt(r,n);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),e(o)},t.collect=function(t,e,n,i){var r=qo(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return r.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=H(t),n=[];r.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}).forEach(function(e){Lt([e.minX,e.minY],t)&&n.push(e.property)}),t.properties[i]=n}),t},t.flip=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=zt(t)),I(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.simplify=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=zt(t)),N(t,function(t){!function(t,e,n){var i=t.type;if("Point"===i||"MultiPoint"===i)return t;te(t,!0);var r=t.coordinates;switch(i){case"LineString":t.coordinates=ae(r,e,n);break;case"MultiLineString":t.coordinates=r.map(function(t){return ae(t,e,n)});break;case"Polygon":t.coordinates=se(r,e,n);break;case"MultiPolygon":t.coordinates=r.map(function(t){return se(t,e,n)})}}(t,n,i)}),t},t.bezierSpline=le,t.tag=function(t,e,n,i){return t=zt(t),e=zt(e),D(t,function(t){t.properties||(t.properties={}),D(e,function(e){void 0===t.properties[i]&&Lt(t,e)&&(t.properties[i]=e.properties[n])})}),t},t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return u(function(t,e){for(var n,i,r=t.slice(0),o=t.length,a=o-e;o-- >a;)i=Math.floor((o+1)*Math.random()),n=r[i],r[i]=r[o],r[o]=n;return r.slice(a)}(t.features,e))},t.envelope=ce,t.square=he,t.circle=pe,t.midpoint=function(t,e){return fe(t,Ft(t,e)/2,de(t,e))},t.center=ge,t.centerOfMass=ve,t.centroid=me,t.combine=function(t){function n(t,e,n){n?i[e].coordinates=i[e].coordinates.concat(t.geometry.coordinates):i[e].coordinates.push(t.geometry.coordinates),i[e].properties.push(t.properties)}var i={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},r=Object.keys(i).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return D(t,function(t){t.geometry&&(i[t.geometry.type]?n(t,t.geometry.type,!0):r[t.geometry.type]&&n(t,r[t.geometry.type],!1))}),u(Object.keys(i).filter(function(t){return i[t].coordinates.length}).sort().map(function(t){return e({type:t,coordinates:i[t].coordinates},{collectedProperties:i[t].properties})}))},t.distance=Ft,t.explode=ye,t.bbox=H,t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Oe(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Oe(t))}),e},t.bboxPolygon=ue,t.booleanPointInPolygon=Lt,t.nearestPoint=Re,t.nearestPointOnLine=on,t.nearestPointToLine=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.units,r=n.properties||{};if(!t)throw new Error("points is required");if(!(t=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return N(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t)).features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==K(e))throw new Error("line must be a LineString");var o=1/0,a=null;return D(t,function(t){var n=dn(t,e,{units:i});n<o&&(o=n,a=t)}),a&&(a.properties=Object.assign({dist:o},a.properties,r)),a},t.planepoint=function(t,e){var n=j(t),i=Z(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r=e.properties||{},o=r.a,a=r.b,s=r.c,l=n[0],u=n[1],c=i[0][0],h=i[0][1],f=void 0!==o?o:i[0][2],p=i[1][0],d=i[1][1],g=void 0!==a?a:i[1][2],m=i[2][0],v=i[2][1],y=void 0!==s?s:i[2][2];return(y*(l-c)*(u-d)+f*(l-p)*(u-v)+g*(l-m)*(u-h)-g*(l-c)*(u-v)-y*(l-p)*(u-h)-f*(l-m)*(u-d))/((l-c)*(u-d)+(l-p)*(u-v)+(l-m)*(u-h)-(l-c)*(u-v)-(l-p)*(u-h)-(l-m)*(u-d))},t.tin=kt,t.bearing=de,t.destination=fe,t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var a=function(t,e,n,i,r,o,a,s){var l,u,c,h,f,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(s-o)*(n-t)-(a-r)*(i-e))?null!==p.x&&null!==p.y&&p:(u=e-o,c=t-r,h=(a-r)*u-(s-o)*c,f=(n-t)*u-(i-e)*c,u=h/l,c=f/l,p.x=t+u*(n-t),p.y=e+u*(i-e),u>=0&&u<=1&&(p.onLine1=!0),c>=0&&c<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);a&&r.features.push(i([a[0],a[1]]))}})}),r},t.pointOnFeature=mn,t.area=yn,t.along=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var r;if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}if(!C(e))throw new Error("distance must be a number");for(var o=0,a=0;a<r.length&&!(e>=o&&a===r.length-1);a++){if(o>=e){var s=e-o;if(s){var l=de(r[a],r[a-1])-180;return fe(r[a],s,l,n)}return i(r[a])}o+=Ft(r[a],r[a+1],n)}return i(r[r.length-1])},t.length=Cn,t.lineSlice=function(t,e,n){var i=U(n);if("LineString"!==K(n))throw new Error("line must be a LineString");for(var r,o=on(n,t),a=on(n,e),l=[(r=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],u=r[0].properties.index+1;u<r[1].properties.index+1;u++)l.push(i[u]);return l.push(r[1].geometry.coordinates),s(l,n.properties)},t.lineSliceAlong=Sn,t.pointGrid=Pn,t.truncate=Ln,t.flatten=function(t){if(!t)throw new Error("geojson is required");var e=[];return R(t,function(t){e.push(t)}),u(e)},t.lineIntersect=nn,t.lineChunk=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return R(t,function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=Cn(t,{units:n});if(r<=e)return i(t);var o=r/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){var s=Sn(t,e*a,e*(a+1),{units:n});i(s,a)}}(t,e,i,function(t){o.push(t)})}),u(o)},t.unkinkPolygon=function(t){var e=[];return R(t,function(t){"Polygon"===t.geometry.type&&D(Pa(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),u(e)},t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;return t=j(t),e=j(e),i=i||{},r=r||100,o=o||10,new Fa({x:t[0],y:t[1]},{x:e[0],y:e[1]},i).Arc(r,{offset:o}).json()},t.lineSegment=en,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=K(t),i=K(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=Ln(e,{precision:7});switch(i){case"Point":return On(t,r);case"MultiPoint":return Nn(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Nn(t,nn(t,r))}},t.lineArc=zn,t.polygonToLine=Vn,t.lineToPolygon=Hn,t.bboxClip=function(t,e){var n=function(t){return t.geometry?t.geometry.type:t.type}(t),i=U(t),r=t.properties;switch(n){case"LineString":case"MultiLineString":var a=[];return"LineString"===n&&(i=[i]),i.forEach(function(t){za(t,e,a)}),1===a.length?s(a[0],r):c(a,r);case"Polygon":return o(Xn(i,e),r);case"MultiPolygon":return f(i.map(function(t){return Xn(t,e)}),r);default:throw new Error("geometry "+n+" not supported")}},t.lineOverlap=Qn,t.sector=function(t,e,n,i,r){if(r=r||{},!S(r))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===i||null===i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(ei(n)===ei(i))return pe(t,e,r);var a=U(t),s=[[a]];return I(zn(t,e,n,i,r),function(t){s[0].push(t)}),s[0].push(a),o(s)},t.rhumbBearing=an,t.rhumbDistance=ln,t.rhumbDestination=ni,t.polygonTangents=function(t,e){var n,r,o,a=U(t),s=U(e);switch(K(e)){case"Polygon":n=s[0][0],r=s[0][0],o=ri(s[0][0],s[0][s[0].length-1],a);var l=ii(s[0],a,o,void 0,n,r);n=l[0],r=l[1];break;case"MultiPolygon":n=s[0][0][0],r=s[0][0][0],o=ri(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach(function(t){var e=ii(t[0],a,o,void 0,n,r);n=e[0],r=e[1]})}return u([i(n),i(r)])},t.rewind=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=zt(t));var r=[];switch(t.type){case"GeometryCollection":return N(t,function(t){ai(t,n)}),t;case"FeatureCollection":return D(t,function(t){D(ai(t,n),function(t){r.push(t)})}),u(r)}return ai(t,n)},t.isobands=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},a=n.breaksProperties||[];if(X(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!S(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(a))throw new Error("breaksProperties is not an Array");var s=ui(t,{zProperty:i,flip:!0}),l=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var a=+e[r-1],s=+e[r],l=ci(t,a,s-a),u=function(t){var e=[],n=[];t.forEach(function(t){var i=yn(o([t]));n.push(i),e.push({ring:t,area:i})}),n.sort(function(t,e){return e-t});var i=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1);break}}),i}(l),c=function(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!function(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var a=o([e[i].lrCoordinates]),s=i+1;s<e.length;s++)if(!e[s].grouped){var l=o([e[s].lrCoordinates]);(function(t,e){for(var n=ye(t),i=0;i<n.features.length;i++)if(!Lt(n.features[i],e))return!1;return!0})(l,a)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0)}n.push(r)}return n}(u),h={};h.groupedRings=c,h[n]=a+"-"+s,i.push(h)}return i}(s,e,i);return u((l=function(t,e,n){var i=H(n),r=i[2]-i[0],o=i[3]-i[1],a=i[0],s=i[1],l=e[0].length-1,u=e.length-1,c=r/l,h=o/u,f=function(t){t[0]=t[0]*c+a,t[1]=t[1]*h+s};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(f)})})}),t}(l,s,t)).map(function(t,e){if(a[e]&&!S(a[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},r,a[e]);return n[i]=t[i],f(t.groupedRings,n)}))},t.transformRotate=pi,t.transformScale=di,t.transformTranslate=function(t,e,n,i){if(i=i||{},!S(i))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,a=i.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),!1!==a&&void 0!==a||(t=zt(t)),I(t,function(t){var i=U(ni(t,e,n,{units:r}));t[0]=i[0],t[1]=i[1],o&&3===t.length&&(t[2]+=o)}),t},t.lineOffset=function(t,e,n){if(n=n||{},!S(n))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var r=K(t),o=t.properties;switch(r){case"LineString":return _i(t,e,i);case"MultiLineString":var a=[];return R(t,function(t){a.push(_i(t,e,i).geometry.coordinates)}),c(a,o);default:throw new Error("geometry "+r+" is not supported")}},t.polygonize=function(t){var e=Fs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):i.push(t)}),n.forEach(function(t){Os.findEdgeRingContaining(t,i)&&i.push(t)}),u(i.map(function(t){return t.toPolygon()}))},t.booleanDisjoint=function(t,e){var n;return R(t,function(t){R(e,function(e){return!1!==n&&void(n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!function(t,e){return t[0]===e[0]&&t[1]===e[1]}(t.coordinates,e.coordinates);case"LineString":return!bi(e,t);case"Polygon":return!Lt(t,e)}break;case"LineString":switch(e.type){case"Point":return!bi(t,e);case"LineString":return!function(t,e){return nn(t,e).features.length>0}(t,e);case"Polygon":return!Ci(e,t)}break;case"Polygon":switch(e.type){case"Point":return!Lt(e,t);case"LineString":return!Ci(t,e);case"Polygon":return!function(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(Lt(t.coordinates[0][n],e))return!0;for(var i=0;i<e.coordinates[0].length;i++)if(Lt(e.coordinates[0][i],t))return!0;return!1}(e,t)}}}(t.geometry,e.geometry))})}),n},t.booleanContains=function(t,e){var n=K(t),i=K(e),r=Z(t),o=Z(e),a=U(t),s=U(e);switch(n){case"Point":switch(i){case"Point":return Mi(a,s);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(Mi(t.coordinates[n],e.coordinates)){i=!0;break}return i}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var i=!1,r=0;r<t.coordinates.length;r++)if(Mi(e.coordinates[n],t.coordinates[r])){i=!0;break}if(!i)return!1}return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return Mn(o,r,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(Mn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!0})&&(n=!0),!Mn({type:"Point",coordinates:e.coordinates[i]},t,{ignoreEndVertices:!1}))return!1;return n}(r,o);case"MultiPoint":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(Mn(e.coordinates[i],t,{ignoreEndVertices:!0})&&(n=!0),!Mn(e.coordinates[i],t))return!1;return!!n}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return Lt(o,r,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,i=0,r=H(t),o=H(e);if(!Si(r,o))return!1;for(;i<e.coordinates.length-1;i++){var a=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}(e.coordinates[i],e.coordinates[i+1]);if(Lt({type:"Point",coordinates:a},t,{ignoreBoundary:!0})){n=!0;break}}return n}(r,o);case"Polygon":return function(t,e){var n=H(t),i=H(e);if(!Si(n,i))return!1;for(var r=0;r<e.coordinates[0].length;r++)if(!Lt(e.coordinates[0][r],t))return!1;return!0}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!Lt(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=K(t),i=K(e),r=Z(t),o=Z(e);switch(n){case"MultiPoint":switch(i){case"LineString":return Ei(r,o);case"Polygon":return Ti(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"MultiPoint":return Ei(o,r);case"LineString":return function(t,e){if(nn(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),Pi(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(r,o);case"Polygon":return Ii(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"MultiPoint":return Ti(o,r);case"LineString":return Ii(o,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.booleanClockwise=oi,t.booleanOverlap=ki,t.booleanPointOnLine=Mn,t.booleanEqual=function(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");return K(t)===K(e)&&new Hs({precision:6}).compare(te(t),te(e))},t.booleanWithin=En,t.clone=zt,t.cleanCoords=te,t.clustersDbscan=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.minPoints,r=n.units;if(X(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===i||null===i||Math.sign(i)>0))throw new Error("Invalid minPoints");t=zt(t),i=i||3;var o=new Ys.DBSCAN,a=-1;return o.run(k(t),w(e,r),i,Ft).forEach(function(e){a++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t},t.clustersKmeans=function(t,e){if("object"!=typeof(e=e||{}))throw new Error("options is invalid");var n=e.numberOfClusters,i=e.mutate;X(t,"Point","Input must contain Points");var r=t.features.length;(n=n||Math.round(Math.sqrt(r/2)))>r&&(n=r),!1!==i&&void 0!==i||(t=zt(t));var o=k(t),a=o.slice(0,n),s=el(o,n,a),l={};return s.centroids.forEach(function(t,e){l[e]=t}),D(t,function(t,e){var n=s.idxs[e];t.properties.cluster=n,t.properties.centroid=l[n]}),t},t.pointToLineDistance=dn,t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Oi(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Oi(e,"line2"))throw new Error("line2 must be a LineString");for(var n=en(te(t)).features,i=en(te(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!function(t,e){var n=y(an(t[0],t[1])),i=y(an(e[0],e[1]));return n===i}(o,i[r].geometry.coordinates))return!1}return!0},t.shortestPath=function(t,n,r){if(r=r||{},!S(r))throw new Error("options is invalid");var o=r.resolution,a=r.minDistance,l=r.obstacles||u([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!C(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(a)throw new Error("options.minDistance is not yet implemented");var c=j(t),h=j(n);switch(t=i(c),n=i(h),K(l)){case"FeatureCollection":if(0===l.features.length)return s([c,h]);break;case"Polygon":l=u([e(Z(l))]);break;default:throw new Error("invalid obstacles")}var f=l;f.features.push(t),f.features.push(n);var p=H(di(ue(H(f)),1.15));o||(o=Ft([p[0],p[1]],[p[2],p[1]],r)/100),f.features.pop(),f.features.pop();for(var d=p[0],g=p[1],m=p[2],v=p[3],y=o/Ft([d,g],[m,g],r)*(m-d),_=o/Ft([d,g],[d,v],r)*(v-g),x=m-d,w=v-g,b=(x-Math.floor(x/y)*y)/2,M=[],E=[],I=[],T=[],P=1/0,L=1/0,D=v-(w-Math.floor(w/_)*_)/2,A=0;D>=g;){for(var k=[],N=[],O=d+b,R=0;O<=m;){var F=i([O,D]),z=function(t,e){for(var n=0;n<e.features.length;n++)if(Lt(t,e.features[n]))return!0;return!1}(F,l);k.push(z?0:1),N.push(O+"|"+D);var B=Ft(F,t);!z&&B<P&&(P=B,I={x:R,y:A});var V=Ft(F,n);!z&&V<L&&(L=V,T={x:R,y:A}),O+=y,R++}E.push(k),M.push(N),D-=_,A++}var G=new Fi(E,{diagonal:!0}),U=G.grid[I.y][I.x],W=G.grid[T.y][T.x],q=[c];return nl.search(G,U,W).forEach(function(t){var e=M[t.x][t.y].split("|");q.push([+e[0],+e[1]])}),q.push(h),te(s(q))},t.voronoi=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return X(t,"Point","points"),u(pl().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(hr))},t.ellipse=fr,t.centerMean=dr,t.centerMedian=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.counter||10;if(!C(n))throw new Error("counter must be a number");var i=e.weight,r=dr(t,{weight:e.weight}),o=u([]);return D(t,function(t){o.features.push(me(t,{weight:t.properties[i]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},gr(r.geometry.coordinates,[0,0],o,n)},t.standardDeviationalEllipse=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.steps||64,i=e.weight,r=e.properties||{};if(!C(n))throw new Error("steps must be a number");if(!S(r))throw new Error("properties must be a number");var o=k(t).length,a=dr(t,{weight:i}),s=0,l=0,c=0;D(t,function(t){var e=t.properties[i]||1,n=mr(U(t),U(a));s+=Math.pow(n.x,2)*e,l+=Math.pow(n.y,2)*e,c+=n.x*n.y*e});var h=s-l,f=Math.sqrt(Math.pow(h,2)+4*Math.pow(c,2)),p=2*c,d=Math.atan((h+f)/p),g=180*d/Math.PI,m=0,v=0,y=0;D(t,function(t){var e=t.properties[i]||1,n=mr(U(t),U(a));m+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,v+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,y+=e});var _=Math.sqrt(2*m/y),x=Math.sqrt(2*v/y),w=fr(a,_,x,{units:"degrees",angle:g,steps:n,properties:r}),b=At(t,u([w])),M={meanCenterCoordinates:U(a),semiMajorAxis:_,semiMinorAxis:x,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*k(b).length/o};return w.properties.standardDeviationalEllipse=M,w},t.difference=function(t,n){var i=Z(t),r=Z(n),o=t.properties||{};if(i=Ur(i),r=Ur(r),!i)return null;if(!r)return e(i,o);var a=new Cc,s=a.read(i),l=a.read(r),u=Ep.difference(s,l);return u.isEmpty()?null:e((new Sc).write(u),o)},t.buffer=function(t,e,n){var i=(n=n||{}).units,r=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");r=r||64,i=i||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return N(t,function(t){var n=Co(t,e,i,r);n&&o.push(n)}),u(o);case"FeatureCollection":return D(t,function(t){var n=Co(t,e,i,r);n&&D(n,function(t){t&&o.push(t)})}),u(o)}return Co(t,e,i,r)},t.union=To,t.intersect=Po,t.dissolve=function(t,e){if(e=e||{},!S(e))throw new Error("options is invalid");var n=e.propertyName;X(t,"Polygon","dissolve");var i=zt(t),r=i.features,o=[];r.forEach(function(t,e){t.properties.origIndexPosition=e});var a=$e();a.load(i);for(var l in r){var u=r[l],c=!1;if(a.search(u).features.forEach(function(t){u=r[l];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var i=Lo(e,o);0!==i&&(e-=i)}if(e!==+l){var h=r[e];h&&u&&(void 0!==n&&h.properties[n]!==u.properties[n]||ki(u,h)&&function(t,e){var n=s(k(t)),i=s(k(e));return nn(n,i).features.length>0}(u,h)&&(r[l]=To(u,h),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),a.remove(t),r.splice(e,1),u.properties.origIndexPosition=l,a.remove(u,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),c=!0))}}),c){if(!u)continue;u.properties.origIndexPosition=l,a.insert(u),l--}}return r.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),i},t.hexGrid=Do,t.mask=function(t,e){var n=function(t){return o(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e),i=function(t){var e=[],n=[];return R(t,function(t){var i=t.geometry.coordinates,r=i[0],a=i.slice(1);e.push(o([r])),a.forEach(function(t){n.push(o([t]))})}),[u(e),u(n)]}(t),r=i[0],a=i[1];return function(t,e,n){var i=[];return i.push(t.geometry.coordinates[0]),R(e,function(t){i.push(t.geometry.coordinates[0])}),R(n,function(t){i.push(t.geometry.coordinates[0])}),o(i)}(n,r=Ao(r),a=Ao(a))},t.squareGrid=No,t.triangleGrid=Oo,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(X(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var a,s=H(t);switch(i){case"point":case"points":a=Pn(s,e,n);break;case"square":case"squares":a=No(s,e,n);break;case"hex":case"hexes":a=Do(s,e,n);break;case"triangle":case"triangles":a=Oo(s,e,n);break;default:throw new Error("invalid gridType")}var l=[];return D(a,function(e){var a=0,s=0;D(t,function(t){var l,u=Ft("point"===i?e:me(e),t,n);if(void 0!==r&&(l=t.properties[r]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing");0===u&&(a=l);var c=1/Math.pow(u,o);s+=c,a+=c*l});var u=zt(e);u.properties[r]=a/s,l.push(u)}),u(l)},t.pointOnSurface=mn,t.polygonToLineString=Vn,t.lineStringToPolygon=Hn,t.inside=Lt,t.within=At,t.bezier=le,t.nearest=Re,t.pointOnLine=on,t.lineDistance=Cn,t.radians2degrees=_,t.degrees2radians=x,t.distanceToDegrees=v,t.distanceToRadians=m,t.radiansToDistance=g,t.bearingToAngle=y,t.convertDistance=w,t.toMercator=un,t.toWgs84=cn,t.randomPosition=vr,t.randomPoint=yr,t.randomPolygon=_r,t.randomLineString=xr,t.getCluster=br,t.clusterEach=Cr,t.clusterReduce=Sr,t.createBins=Mr,t.applyFilter=Er,t.propertiesContainsFilter=Ir,t.filterProperties=Tr,t.earthRadius=Ro,t.factors=Fo,t.unitsFactors=zo,t.areaFactors=Bo,t.feature=e,t.geometry=n,t.point=i,t.points=r,t.polygon=o,t.polygons=a,t.lineString=s,t.lineStrings=l,t.featureCollection=u,t.multiLineString=c,t.multiPoint=h,t.multiPolygon=f,t.geometryCollection=p,t.round=d,t.radiansToLength=g,t.lengthToRadians=m,t.lengthToDegrees=v,t.bearingToAzimuth=y,t.radiansToDegrees=_,t.degreesToRadians=x,t.convertLength=w,t.convertArea=b,t.isNumber=C,t.isObject=S,t.validateBBox=M,t.validateId=E,t.getCoord=j,t.getCoords=U,t.containsNumber=W,
t.geojsonType=q,t.featureOf=Y,t.collectionOf=X,t.getGeom=Z,t.getGeomType=J,t.getType=K,t.coordEach=I,t.coordReduce=T,t.propEach=P,t.propReduce=L,t.featureEach=D,t.featureReduce=A,t.coordAll=k,t.geomEach=N,t.geomReduce=O,t.flattenEach=R,t.flattenReduce=F,t.segmentEach=z,t.segmentReduce=B,t.lineEach=V,t.lineReduce=G,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function t(e){n(this,t),this.viewer=e};e.default=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this._itemList=[],this._currentItems=[],this._isFly=!1,this._relayTime=1e3}return i(t,[{key:"_playAnimation",value:function(t,e){var n=e._currentItems[e._currentIndex];if(e._currentIndex++,e._currentIndex>e._currentItems.length)return void e.stopPlay();var i=n.view,r=new Cesium.Cartesian3(i.position[0],i.position[1],i.position[2]);e.viewer.camera.flyTo({destination:r,orientation:{heading:i.orientation[0],pitch:i.orientation[1],roll:i.orientation[2]},duration:i.duration,easingFunction:Cesium.EasingFunction.LINEAR_NONE,complete:function(){e._isFly&&t(t,e)}})}},{key:"_getNewItem",value:function(t){var e=this.viewer.viewPort.getCurrent();return{view:e,id:Cesium.createGuid(),name:t}}},{key:"fromJSON",value:function(t){this._itemList=t}},{key:"toJSON",value:function(){return this._itemList}},{key:"addGroup",value:function(t){if(!this._isFly){var e={type:"gruop",children:[],id:Cesium.createGuid(),name:t};return this._itemList.push(e),e}}},{key:"removeGroup",value:function(t){if(this._isFly)return!1;for(var e=0;e<this._itemList.length;e++)if(this._itemList[e].id==t){this._itemList.splice(e,1);break}return!0}},{key:"addItem",value:function(t,e){if(this._isFly)return!1;for(var n=void 0,i=0;i<this._itemList.length;i++)if(this._itemList[i].id==t){n=this._getNewItem(e),this._itemList[i].children.push(n);break}return n}},{key:"removeItem",value:function(t,e){if(this._isFly)return!1;for(var n=0;n<this._itemList.length;n++)if(this._itemList[n].id==t)for(var i=this._itemList[n].children,r=0;r<i.length;r++)if(i[r].id==e){i.splice(r,1);break}return!0}},{key:"removeAll",value:function(){return!this._isFly&&(this._itemList=[],!0)}},{key:"flyToItem",value:function(t){t&&this.viewer.viewPort.setCurrent(t.view)}},{key:"playGroup",value:function(t){for(var e=0;e<this._itemList.length;e++)if(this._itemList[e].id==t){var n=this._itemList[e].children;this.playItems(n);break}}},{key:"playItems",value:function(t){this._isFly&&this.stopPlay(),this._isFly=!0,this._currentItems=t,this._currentIndex=0,this._playAnimation(this._playAnimation,this)}},{key:"stopPlay",value:function(){this._playTimer&&clearTimeout(this._playTimer),this.viewer.camera.cancelFlight(),this._currentIndex=0,this._currentItems=[],this._isFly=!1}},{key:"isFly",get:function(){return this._isFly}},{key:"relayTime",get:function(){return this._relayTime},set:function(t){this._relayTime=t}},{key:"itemList",get:function(){return this._itemList}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(30),s=i(a),l=function(){function t(){r(this,t)}return o(t,[{key:"_getTemplate",value:function(t,e,n){return{id:Cesium.createGuid(),name:t,layerType:"Image",config:{type:e,options:n}}}}],[{key:"setTDTKey",value:function(t){this.tdtKey=t}},{key:"setBingKey",value:function(t){this.bingKey=t}},{key:"arcgisImage",value:function(){return this._getTemplate("ArcGIS影像",s.default.ArcGIS,{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"})}},{key:"googleImage",value:function(){return this._getTemplate("Google影像",s.default.Google,{url:" http://www.google.cn/maps/vt?lyrs=s%2Ch&gl=cn&x={x}&y={y}&z={z}"})}},{key:"bingImage",value:function(){return this._getTemplate("Bing影像",s.default.Bing,{url:"http://www.huaruiview.cn:3500/startlvlone/wmts"})}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(71),s=i(a),l=n(72),u=i(l),c=n(73),h=i(c),f=n(75),p=i(f),d=n(74),g=i(d),m=n(26),v=i(m),y=function(){function t(e){r(this,t),this.viewer=e,Cesium.Camera.DEFAULT_VIEW_RECTANGLE=Cesium.Rectangle.fromDegrees(73,13,135,53),this.FlyAround=new s.default(this.viewer),this.ZoomControl=new u.default(this.viewer),this.ViewPort=new p.default(e),this._mousePosition=new h.default(e),this._cusorPosition=Cesium.Cartesian3.ZERO,this.initMouseCursor()}return o(t,[{key:"registHotKey",value:function(){document.addEventListener("keyup",function(t){var e=getFlagForKeyCode(t.keyCode);"undefined"!=typeof e&&(flags[e]=!1)},!1)}},{key:"initMouseCursor",value:function(){var t=this,e=Cesium.Cartesian3,n=v.default.getResource("Assets/Images/naviCursor.png");this._naviCursor=this.viewer.entities.add({position:Cesium.Cartesian3.ZERO,billboard:{image:n,disableDepthTestDistance:6e7},show:!1});var i=new Cesium.ScreenSpaceEventHandler(this.viewer.canvas),r=Cesium.ScreenSpaceEventType;i.setInputAction(function(e){t._cusorPosition=g.default.pickPosition(t.viewer,e.endPosition)},r.MOUSE_MOVE),i.setInputAction(function(n){var i=g.default.pickPosition(t.viewer,n.position);i&&(t._naviCursor._position._value=e.clone(i),t._naviCursor.show=!0),t._naviCursorShowTime=null},r.MIDDLE_DOWN),i.setInputAction(function(n){var i=g.default.pickPosition(t.viewer,n.position);i&&(t._naviCursor._position._value=e.clone(i),t._naviCursor.show=!0),t._naviCursorShowTime=null},r.RIGHT_DOWN),i.setInputAction(function(e){t._naviCursor.show=!1},r.RIGHT_UP),i.setInputAction(function(e){t._naviCursor.show=!1},r.MIDDLE_UP),i.setInputAction(function(e){t._naviCursor._position._value=t._cusorPosition?t._cusorPosition:Cesium.Cartesian3.ZERO,t._naviCursor.show=!0,t._naviCursorShowTime=(new Date).getTime()},r.WHEEL),this.viewer.clock.onTick.addEventListener(function(e){Cesium.defined(t._naviCursor)&&t._naviCursor.show&&Cesium.defined(t._naviCursorShowTime)&&(new Date).getTime()-t._naviCursorShowTime>200&&(t._naviCursor.show=!1)})}},{key:"fullScreen",value:function(){this.ViewPort.fullScreen()}},{key:"exitFullScreen",value:function(){this.ViewPort.exitFullScreen()}},{key:"goto",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;return this.viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(t,e,n),duration:i})}},{key:"zoomTo",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;this.viewer.scene.camera.setView({destination:Cesium.Cartesian3.fromDegrees(t,e,n)})}},{key:"home",value:function(){return this.viewer.camera.flyTo({destination:Cesium.Camera.DEFAULT_VIEW_RECTANGLE})}},{key:"flyAround",value:function(t){t&&this.viewer.scene.camera.setView({destination:t});var e=this.ViewPort.getCenter();return this.FlyAround.startFlyAround(e)}},{key:"flyCenter",value:function(t){t&&this.viewer.scene.camera.setView({destination:t});var e=this.ViewPort.getCenter();return this.FlyAround.startFlyCenter(e)}},{key:"stopFly",value:function(){return this.FlyAround.stopFly()}},{key:"zoomIn",value:function(){this.ZoomControl.zoomIn()}},{key:"zoomOut",value:function(){this.ZoomControl.zoomOut()}},{key:"tiltUp",value:function(){}},{key:"tiltDown",value:function(){}},{key:"switch2D",value:function(){this.ZoomControl.resetView()}},{key:"crossChar",get:function(){return this.ViewPort.crosChar}},{key:"mousePosition",get:function(){return this._mousePosition}},{key:"undergroud",get:function(){},set:function(t){}},{key:"lockView",get:function(){},set:function(t){}}]),t}();e.default=y},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this._shouldAnimate=this.viewer.clock.shouldAnimate,this.isStart=!1,this.isFlyCenter=!1,this.viewer.clock.shouldAnimate=!1}return i(t,[{key:"clock_onTickHandler",value:function(t){var e=Cesium.JulianDate.secondsDifference(this.viewer.clock.currentTime,this.time),n=Cesium.Math.toRadians(e*this.angle)+this.heading;this.isFlyCenter?(this.viewer.scene.camera.setView({destination:this.position,orientation:{heading:n,pitch:this.pitch}}),this.viewer.scene.camera.moveBackward(this.distance)):this.viewer.scene.camera.setView({orientation:{heading:n,pitch:this.pitch}})}},{key:"_setPosition",value:function(t){this.position=t,this.distance=Cesium.Cartesian3.distance(this.position,this.viewer.camera.positionWC),this.angle=6,this.time=this.viewer.clock.currentTime.clone(),this.heading=this.viewer.camera.heading,this.pitch=this.viewer.camera.pitch}},{key:"_startFly",value:function(t){this.isStart||(this._setPosition(t),this.viewer.clock.shouldAnimate=!0,this.viewer.clock.onTick.addEventListener(this.clock_onTickHandler,this),this.isStart=!0)}},{key:"startFlyAround",value:function(t){this._startFly(t),this.isFlyCenter=!1}},{key:"startFlyCenter",value:function(t){this._startFly(t),this.isFlyCenter=!0}},{key:"stopFly",value:function(){this.viewer.clock.onTick.removeEventListener(this.clock_onTickHandler,this),this.isStart=!1,this.viewer.clock.shouldAnimate=this._shouldAnimate}},{key:"lookAt",value:function(){function t(){var t=viewer.camera.heading+r*Math.PI/180;t=t>180?t-360:t;var o=viewer.camera.pitch<n?viewer.camera.pitch+i:viewer.camera.pitch,a=viewer.camera.getMagnitude();viewer.camera.lookAt(e,new Cesium.HeadingPitchRange(t,o,a))}var e=Cesium.Cartesian3.fromDegrees(101.9915,24.069534,30),n=Cesium.Math.toRadians(-28),i=5e-4,r=.02;viewer.clock.onTick.addEventListener(t)}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this.relativeAmount=2,this.cartesian3Scratch=new Cesium.Cartesian3}return i(t,[{key:"zoomIn",value:function(){this._zoomFun2(.5)}},{key:"zoomOut",value:function(){this._zoomFun2(1.5)}},{key:"resetView",value:function(){var t=this.viewer.scene,e=t.camera,n=new Cesium.Cartesian2,i=new Cesium.Cartesian3;n.x=t.canvas.clientWidth/2,n.y=t.canvas.clientHeight/2;var r=e.pickEllipsoid(n,t.globe.ellipsoid,i);if(Cesium.defined(r)){var o=Cesium.Transforms.eastNorthUpToFixedFrame(r,t.globe.ellipsoid),a=t.globe.ellipsoid.cartographicToCartesian(e.positionCartographic,new Cesium.Cartesian3),s=Cesium.Cartesian3.subtract(r,a,new Cesium.Cartesian3),l=Cesium.Matrix4.multiplyByPoint(o,new Cesium.Cartesian3(0,0,Cesium.Cartesian3.magnitude(s)),new Cesium.Cartesian3);e.flyTo({destination:l,duration:1})}}},{key:"_zoomFun2",value:function(t){var e=this.viewer.scene,n=e.screenSpaceCameraController;if(n.enableInputs&&n.enableZoom){var i,r=e.camera;switch(e.mode){case Cesium.SceneMode.MORPHING:break;case Cesium.SceneMode.SCENE2D:r.zoomIn(r.positionCartographic.height*(1-this.relativeAmount));break;default:var o;if(o=Cesium.defined(this.viewer.trackedEntity)?new Cesium.Cartesian3:this.getCameraFocus(this.viewer,!1),Cesium.defined(o))i={direction:r.direction,up:r.up};else{var a=new Cesium.Ray(r.worldToCameraCoordinatesPoint(e.globe.ellipsoid.cartographicToCartesian(r.positionCartographic)),r.directionWC);o=Cesium.IntersectionTests.grazingAltitudeLocation(a,e.globe.ellipsoid),i={heading:r.heading,pitch:r.pitch,roll:r.roll}}var s=Cesium.Cartesian3.subtract(r.position,o,this.cartesian3Scratch),l=Cesium.Cartesian3.multiplyByScalar(s,t,s),u=Cesium.Cartesian3.add(o,l,o);Cesium.defined(this.viewer.trackedEntity)||e.mode==Cesium.SceneMode.COLUMBUS_VIEW?r.position=u:r.flyTo({destination:u,orientation:i,duration:1,convert:!1})}}}},{key:"getCameraFocus",value:function(t,e,n){var i=t.scene,r=i.camera,o=new Cesium.Cartographic,a=new Cesium.Ray;if(i.mode!=Cesium.SceneMode.MORPHING&&(Cesium.defined(n)||(n=new Cesium.Cartesian3),Cesium.defined(t.trackedEntity)?n=t.trackedEntity.position.getValue(t.clock.currentTime,n):(a.origin=r.positionWC,a.direction=r.directionWC,n=i.globe.pick(a,i,n)),Cesium.defined(n)))return i.mode==Cesium.SceneMode.SCENE2D||i.mode==Cesium.SceneMode.COLUMBUS_VIEW?(n=r.worldToCameraCoordinatesPoint(n,n),e&&(n=i.globe.ellipsoid.cartographicToCartesian(i.mapProjection.unproject(n,o),n))):e||(n=r.worldToCameraCoordinatesPoint(n,n)),n}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(74),s=i(a),l=function(){function t(e){r(this,t),this.viewer=e,this._show=!1,this._init()}return o(t,[{key:"_init",value:function(){this._createUi(),this._initEvent()}},{key:"_initEvent",value:function(){var t=this.viewer.scene,e=this.viewer.camera,n=this,i=new Cesium.ScreenSpaceEventHandler(t.canvas);i.setInputAction(function(i){if(n._show){var r,o,a,l,u,c=s.default.pickPosition(n.viewer,i.endPosition);if(Cesium.defined(c)){var h=t.globe.ellipsoid,f=h.cartesianToCartographic(c);r=Cesium.Math.toDegrees(f.longitude).toFixed(7),o=Cesium.Math.toDegrees(f.latitude).toFixed(7),a=f.height.toFixed(4);var l=c.x.toFixed(2),u=c.y.toFixed(2)}else r="",o="",a="",l="",u="";var p=Cesium.Cartographic.fromCartesian(e.position).height.toFixed(4);n.mousePosition.innerHTML="经度: &nbsp;"+r+" &nbsp; &nbsp; &nbsp; 纬度: &nbsp;"+o+" &nbsp; &nbsp; &nbsp;  高程: &nbsp;"+a+" &nbsp; &nbsp; &nbsp;横：&nbsp; "+l+" 纵：&nbsp; "+u+" &nbsp; &nbsp;镜头高度: &nbsp;"+p}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"_createUi",value:function(){this.posPanel=document.createElement("div"),this.posPanel.style.height="26px",this.posPanel.style.width="100%",this.posPanel.style.position="absolute",this.posPanel.style.bottom="0px",this.posPanel.style.background="#00000075",this.mousePosition=document.createElement("div"),this.mousePosition.style.height="26px",this.mousePosition.style.lineHeight="26px",this.mousePosition.style.width="800px",this.mousePosition.style.position="absolute",this.mousePosition.style.left="10px",this.mousePosition.style.color="#e9e9e9",this.mousePosition.style.textAlign="left",this.mousePosition.style.fontSize="13px",this.mousePosition.style.fontFamily="微软雅黑",this.mousePosition.style.textShadow="2px 2px 2px #000;",this.posPanel.appendChild(this.mousePosition),this.viewer.container.appendChild(this.posPanel),this.posPanel.style.display=this._show?"block":"none"}},{key:"show",get:function(){return this._show},set:function(t){this._show=t,this.posPanel.style.display=t?"block":"none"}}]),t}();e.default=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t)}return i(t,null,[{key:"pickPosition",value:function(e,n){if(!Cesium.defined(n))return null;var i,r=e.scene,o=e.camera.getPickRay(n);if(r.mode!==Cesium.SceneMode.MORPHING){var a=r.pick(n);i=t.isModel(r,a)?r.pickPosition(n):e.scene.globe.pick(o,r)}return i}},{key:"isModel",value:function(t,e){return!!(Cesium.defined(e)&&t.pickPositionSupported&&(e.primitive&&e.primitive.asset||e.id&&e.id.model))}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(76),s=i(a),l=n(77),u=i(l),c=function(){function t(e){r(this,t),this.viewer=e,this._defautduration=3,this.crosChar=new u.default(this.viewer.container)}return o(t,[{key:"exportImage",value:function(t,e){this.viewer.render();var n=this.viewer.canvas;return t=Cesium.defaultValue(t,n.width),e=Cesium.defaultValue(e,n.height),s.default.convertToJPEG(n,t,e)}},{key:"gotoHome",value:function(){var t=Cesium.Rectangle.center(Cesium.Camera.DEFAULT_VIEW_RECTANGLE),e=Cesium.Cartesian3.fromDegrees(Cesium.Math.toDegrees(t.longitude),Cesium.Math.toDegrees(t.latitude),8e6);this.viewer.camera.flyTo({destination:e})}},{key:"setCurrent",value:function(t){var e=new Cesium.Cartesian3(t.position[0],t.position[1],t.position[2]),n=t.orientation;this.viewer.camera.flyTo({destination:e,duration:t.duration?t.duration:3,orientation:{heading:n[0],pitch:n[1],roll:n[2]}})}},{key:"getCurrent",value:function(){var t=this.viewer,e=t.camera.position,n={position:[e.x,e.y,e.z],duration:3,orientation:[t.camera.heading,t.camera.pitch,t.camera.roll]};return n}},{key:"getCenter",value:function(){var t=this.viewer.scene,e=t.globe,n=this.pickCenterPoint();if(!n){var i=t.camera.positionCartographic.clone(),r=e.getHeight(i);i.height=r||0,n=Cesium.Ellipsoid.WGS84.cartographicToCartesian(i)}return n}},{key:"pickCenterPoint",value:function(){var t=this.viewer.scene,e=t.canvas,n=t.globe,i=t.camera,r=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight/2),o=i.getPickRay(r);return n.pick(o,t)||i.pickEllipsoid(r)}},{key:"fullScreen",value:function(){Cesium.Fullscreen.requestFullscreen(this.viewer.scene.canvas)}},{key:"exitFullScreen",value:function(){Cesium.Fullscreen.exitFullscreen()}},{key:"toJSON",value:function(){return this.getCurrent()}},{key:"fromJSON",value:function(t){var e=t;this.setCurrent(e)}},{key:"defaultDuration",get:function(){return this._defautduration},set:function(t){this._defautduration=t}}]),t}();e.default=c},function(t,e){"use strict";function n(t,e,n){var i=t.width,r=t.height;void 0==e&&(e=i),void 0==n&&(n=r);var o=document.createElement("canvas"),a=o.getContext("2d");return o.width=e,o.height=n,a.drawImage(t,0,0,i,r,0,0,e,n),o}function i(t,e,i,r){return t=n(t,i,r),t.toDataURL(e)}function r(t){document.location.href=t}function o(t){var e=document.createElement("img");return e.src=t,e}function a(t){t=t.toLowerCase().replace(/jpg/i,"jpeg");var e=t.match(/png|jpeg|bmp|gif/)[0];return"image/"+e}function s(t){if(!window.btoa)throw"btoa undefined";var e="";if("string"==typeof t)e=t;else for(var n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function l(t){var e=t.width,n=t.height;return t.getContext("2d").getImageData(0,0,e,n)}function u(t,e){return"data:"+e+";base64,"+t}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:!!e,imageData:!!e.getImageData,dataURL:!!t.toDataURL,btoa:!!window.btoa}}(),h="image/octet-stream",f=function(t){var e=t.width,n=t.height,i=e*n*3,r=i+54,o=[66,77,255&r,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,54,0,0,0],a=[40,0,0,0,255&e,e>>8&255,e>>16&255,e>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,255&i,i>>8&255,i>>16&255,i>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=(4-3*e%4)%4,u=t.data,c="",h=e<<2,f=n,p=String.fromCharCode;do{for(var d=h*(f-1),g="",m=0;m<e;m++){var v=m<<2;g+=p(u[d+v+2])+p(u[d+v+1])+p(u[d+v])}for(var y=0;y<l;y++)g+=String.fromCharCode(0);c+=g}while(--f);var _=s(o.concat(a))+s(c);return _},p=function(t,e,o,s){if(c.canvas&&c.dataURL)if("string"==typeof t&&(t=document.getElementById(t)),void 0==s&&(s="png"),s=a(s),/bmp/.test(s)){var p=l(n(t,e,o)),d=f(p);r(u(d,h))}else{var d=i(t,s,e,o);r(d.replace(s,h))}},d=function(t,e,r,s){if(c.canvas&&c.dataURL){if("string"==typeof t&&(t=document.getElementById(t)),void 0==s&&(s="png"),s=a(s),/bmp/.test(s)){var h=l(n(t,e,r)),p=f(h);return o(u(p,"image/bmp"))}return i(t,s,e,r)}};e.default={saveAsImage:p,saveAsPNG:function(t,e,n){return p(t,e,n,"png")},saveAsJPEG:function(t,e,n){return p(t,e,n,"jpeg")},saveAsGIF:function(t,e,n){return p(t,e,n,"gif")},saveAsBMP:function(t,e,n){return p(t,e,n,"bmp")},convertToImage:d,convertToPNG:function(t,e,n){return d(t,e,n,"png")},convertToJPEG:function(t,e,n){return d(t,e,n,"jpeg")},convertToGIF:function(t,e,n){return d(t,e,n,"gif")},convertToBMP:function(t,e,n){return d(t,e,n,"bmp")}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),s=i(a),l=function(){function t(e){r(this,t),this.container=e,this._show=!1,this._crossChairDiv=null,this._init()}return o(t,[{key:"_init",value:function(){this._crossChairDiv=document.createElement("div");var t=this._crossChairDiv.style;t.height="25px",t.width="25px",t.textAlign="center",t.float="left",t.position="absolute",t.top="49%",t.left="49%",t.display="none",t.pointerEvents="none";var e=document.createElement("SPAN");this._crossChairDiv.appendChild(e);var n=document.createElement("IMG");n.src=s.default.getResource("Assets/Images/crosschair.png"),n.style.height="30px",n.style.width="30px",n.style.textAlign="center",e.appendChild(n),this.container.appendChild(this._crossChairDiv)}},{key:"show",get:function(){return this._show},set:function(t){this._show=t,this._crossChairDiv.style.display=t?"block":"none"}}]),t}();e.default=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,e.showRenderLoopErrors=!1,e.scene.screenSpaceCameraController.zoomEventTypes=[Cesium.CameraEventType.WHEEL,Cesium.CameraEventType.PINCH],e.scene.screenSpaceCameraController.tiltEventTypes=[Cesium.CameraEventType.RIGHT_DRAG,Cesium.CameraEventType.PINCH],e.scene.screenSpaceCameraController.minimumZoomDistance=5,e.scene.screenSpaceCameraController.maximumZoomDistance=5e7,e.scene.minimumDisableDepthTestDistance=0,e.scene.fxaa=!1}return i(t,[{key:"doKeyDown",value:function(t){var e=t.keyCode?t.keyCode:t.which;38!==e&&87!==e||(clearCanvas(),y-=10,tempContext.fillRect(x,y,80,40),t.preventDefault()),39!==e&&68!==e||(clearCanvas(),x+=10,tempContext.fillRect(x,y,80,40),t.preventDefault()),40!==e&&83!==e||(clearCanvas(),y+=10,tempContext.fillRect(x,y,80,40),t.preventDefault()),37!==e&&65!==e||(clearCanvas(),x-=10,tempContext.fillRect(x,y,80,40),t.preventDefault())}},{key:"registHotKey",value:function(){var t=this;document.addEventListener("keyup",function(e){if("Space"!=e.code)switch(e.key){case"p":t.viewer.FPS=!t.viewer.FPS;break;case"r":break;case"P":break;case"P":break;case"P":}},!1)}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(74),s=i(a),l=function(){function t(e){r(this,t),this.viewer=e;var n=new Cesium.CustomDataSource("graphicDatasource");this.viewer.dataSources.add(n),this.entitycollection=n.entities,this.retainEntity=!0,this.clickEvt=null,this._lonlataltList=[],this._pointList=[],this.drawComplete=null,this._polygonShow=!1,this._polylineShow=!1,this._rectangleShow=!1,this._initEvent()}return o(t,[{key:"trackPolygon",value:function(t,e){this.drawComplete=t,this._polygonShow=!0,this._polylineShow=!1,this._rectangleShow=!1,this._addEntity(e),this._isTrack=!0,this.viewer.canvas.style.cursor="crosshair"}},{key:"trackPolyline",value:function(t,e){this.drawComplete=t,this._polygonShow=!1,this._polylineShow=!0,this._rectangleShow=!1,this._addEntity(e),this._isTrack=!0,this.earth.canvas.style.cursor="crosshair"}},{key:"clear",value:function(){this.entitycollection.removeAll(),this._lonlataltList=[],this._pointList=[],this._isTrack=!1,this.viewer.canvas.style.cursor="default"}},{key:"_initEvent",value:function(){var t=this.viewer.scene,e=this,n=new Cesium.ScreenSpaceEventHandler(t.canvas);this.clickEvt=n.setInputAction(function(n){if(e._isTrack){var i=s.default.pickPosition(e.viewer,n.position);if(i){var r=t.globe.ellipsoid.cartesianToCartographic(i),o=Cesium.Math.toDegrees(r.latitude),a=Cesium.Math.toDegrees(r.longitude),l=r.height;e._pointList.push(i),e._lonlataltList.push(a,o,l),e.entitycollection.add({position:i,point:{color:Cesium.Color.YELLOW,heightReference:Cesium.HeightReference.CLAMP_TO_GROUND,pixelSize:8,disableDepthTestDistance:Number.POSITIVE_INFINITY}})}}},Cesium.ScreenSpaceEventType.LEFT_CLICK),n.setInputAction(function(t){e._isTrack&&(e._isTrack=!1,e.retainEntity||e.clear(),e.drawComplete&&e.drawComplete(e._lonlataltList,e._pointList))},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}},{key:"_addEntity",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clear(),this.entitycollection.add({polygon:{show:this._polygonShow,perPositionHeight:!e,hierarchy:new Cesium.CallbackProperty(function(){return new Cesium.PolygonHierarchy(t._pointList)},!1),material:Cesium.Color.DEEPSKYBLUE.withAlpha(.7)},polyline:{show:this._polylineShow,clampToGround:e,positions:new Cesium.CallbackProperty(function(){return t._pointList},!1),material:Cesium.Color.DEEPSKYBLUE,width:2}})}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(81),s=i(a),l=n(82),u=i(l),c=n(83),h=i(c),f=n(84),p=i(f),d=n(85),g=i(d),m=n(86),v=i(m),y=n(87),_=i(y),x=n(88),w=i(x),b=n(89),C=i(b),S=n(90),M=i(S),E=n(92),I=i(E),T=n(102),P=i(T),L=n(103),D=i(L),A=n(105),k=i(A),N=function(){function t(e){r(this,t),this.viewer=e,this.toolList=new Map}return o(t,[{key:"closeAll",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.toolList[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value,a=o[1];"measureTool"==o[0]?a.clearMeasure():a.close()}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}}},{key:"aspect",get:function(){var t=this.toolList.get("aspect");return t||(t=new u.default(this.viewer),this.toolList.set("aspect",t)),t}},{key:"slope",get:function(){var t=this.toolList.get("slope");return t||(t=new s.default(this.viewer),this.toolList.set("slope",t)),t}},{key:"contour",get:function(){var t=this.toolList.get("contour");return t||(t=new h.default(this.viewer),this.toolList.set("contour",t)),t}},{key:"elevation",get:function(){var t=this.toolList.get("elevaton");return t||(t=new p.default(this.viewer),this.toolList.set("elevaton",t)),t}},{key:"profile",get:function(){var t=this.toolList.get("profile");return t||(t=new g.default(this.viewer),this.toolList.set("profile",t)),t}},{key:"flood",get:function(){var t=this.toolList.get("floodAnalyze");return t||(t=new _.default(this.viewer),this.toolList.set("floodAnalyze",t)),t}},{key:"heightAnalyze",get:function(){var t=this.toolList.get("heightAnalyze");return t||(t=new w.default(this.viewer),this.toolList.set("heightAnalyze",t)),t}},{key:"viewshedAnalyze",get:function(){var t=this.toolList.get("viewshedAnalyze");return t||(t=new v.default(this.viewer),this.toolList.set("viewshedAnalyze",t)),t}},{key:"measureTool",get:function(){var t=this.toolList.get("measureTool");return t||(t=new M.default(this.viewer),this.toolList.set("measureTool",t)),t}},{key:"clipTool",get:function(){var t=this.toolList.get("clipTool");return t||(t=new C.default(this.viewer),this.toolList.set("clipTool",t)),t}},{key:"skyline",get:function(){var t=this.toolList.get("skyline");return t||(t=new I.default(this.viewer),this.toolList.set("skyline",t)),t}},{key:"underground",get:function(){var t=this.toolList.get("underground");return t||(t=new P.default(this.viewer),this.toolList.set("underground",t)),t}},{key:"groundClip",get:function(){var t=this.toolList.get("groundClip");return t||(t=new D.default(this.viewer),this.toolList.set("groundClip",t)),t}},{key:"visibilityAnalyze",get:function(){var t=this.toolList.get("visibilityAnalyze");return t||(t=new k.default(this.viewer),this.toolList.set("visibilityAnalyze",t)),t}}]),t}();e.default=N},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this._colorRamp=new Map}return i(t,[{key:"setPolygon",value:function(t){t.length<2||(this._points=Cesium.Cartesian3.fromDegreesArrayHeights(t))}},{key:"open",value:function(){var t=Cesium.Material.fromType("SlopeRamp"),e=t.uniforms;e.image=this.getColorRamp(),Cesium.GlobeSurfaceOption&&Cesium.GlobeSurfaceOption.setPolygon(this._points),this.viewer.scene.globe.material=t}},{key:"close",value:function(){this.viewer.scene.globe.material=void 0;
}},{key:"getColorRamp",value:function(){var t=document.createElement("canvas");t.width=100,t.height=1;var e=t.getContext("2d"),n=e.createLinearGradient(0,0,100,0),i=!0,r=!1,o=void 0;try{for(var a,s=this._colorRamp[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n.addColorStop(l[0],l[1])}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return e.fillStyle=n,e.fillRect(0,0,100,1),t}},{key:"colorRamp",get:function(){return this._colorRamp}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this._colorRamp=new Map}return i(t,[{key:"setPolygon",value:function(t){t.length<2||(this._points=Cesium.Cartesian3.fromDegreesArrayHeights(t))}},{key:"open",value:function(){var t=Cesium.Material.fromType("AspectRamp"),e=t.uniforms;e.image=this.getColorRamp(),Cesium.GlobeSurfaceOption&&Cesium.GlobeSurfaceOption.setPolygon(this._points),this.viewer.scene.globe.material=t}},{key:"close",value:function(){this.viewer.scene.globe.material=void 0}},{key:"getColorRamp",value:function(){var t=document.createElement("canvas");t.width=100,t.height=1;var e=t.getContext("2d"),n=e.createLinearGradient(0,0,100,0),i=!0,r=!1,o=void 0;try{for(var a,s=this._colorRamp[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n.addColorStop(l[0],l[1])}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return e.fillStyle=n,e.fillRect(0,0,100,1),t}},{key:"colorRamp",get:function(){return this._colorRamp}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this._color=Cesium.Color.clone(Cesium.Color.RED),this._width=2,this._spacing=10,this._material=Cesium.Material.fromType("ElevationContour")}return i(t,[{key:"setPolygon",value:function(t){t.length<2||(this._points=Cesium.Cartesian3.fromDegreesArrayHeights(t),this.open())}},{key:"open",value:function(){var t=this._material.uniforms;t.width=this._width,t.spacing=this._spacing,t.color=this._color,Cesium.GlobeSurfaceOption&&Cesium.GlobeSurfaceOption.setPolygon(this._points),this.viewer.scene.globe.material=this._material}},{key:"close",value:function(){viewer.scene.globe.material=void 0}},{key:"color",get:function(){return this._material.uniforms.color},set:function(t){this._material.uniforms.color=t}},{key:"width",get:function(){return this._material.uniforms.width},set:function(t){this._material.uniforms.width=t}},{key:"spacing",get:function(){return this._material.uniforms.spacing},set:function(t){this._material.uniforms.spacing=t}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this._colorRamp=new Map,this._minimumHeight=-414,this._maximumHeight=8777}return i(t,[{key:"setPolygon",value:function(t){t.length<2||(this._points=Cesium.Cartesian3.fromDegreesArrayHeights(t))}},{key:"open",value:function(){var t=Cesium.Material.fromType("ElevationRamp"),e=t.uniforms;e.image=this.getColorRamp(),e.minimumHeight=this._minimumHeight,e.maximumHeight=this._maximumHeight,Cesium.GlobeSurfaceOption&&Cesium.GlobeSurfaceOption.setPolygon(this._points),this.viewer.scene.globe.material=t}},{key:"close",value:function(){viewer.scene.globe.material=void 0}},{key:"getColorRamp",value:function(){var t=document.createElement("canvas");t.width=100,t.height=1;var e=t.getContext("2d"),n=e.createLinearGradient(0,0,100,0),i=!0,r=!1,o=void 0;try{for(var a,s=this._colorRamp[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n.addColorStop(l[0],l[1])}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return e.fillStyle=n,e.fillRect(0,0,100,1),t}},{key:"minimumHeight",get:function(){return this._minimumHeight},set:function(t){this._minimumHeight=t}},{key:"maximumHeight",get:function(){return this._maximumHeight},set:function(t){this._maximumHeight=t}},{key:"colorRamp",get:function(){return this._colorRamp}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e}return i(t,[{key:"setPolyline",value:function(t,e){t.length<2}},{key:"caculatePoint",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){viewer.scene.globe.material=void 0}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this._viewer=e,this._scene=e.scene,this._camera=this._scene.camera,this.context=this._scene.context,this._visibleColor=Cesium.Color.LIME,this._inVisibleColor=Cesium.Color.RED,this._offsetDist=.2,this._viewPoint=null,this.timeId,this.cameraPosition=null,this.startAnalyze=!1,this.shadowOptions,this.handler,this.spotLightCamera,this.radii,this.heading,this.roll,this.pitch,this.tempFrustum,this.normalShaderFun=null,this.normalShader,this.lightSwitch=!1,this.testOn=!1,this.entities=[],this.activeShapePoints=[],this._showDistance=!0,this._showDome=!0,this.defaultOption={terrainShadows:this._viewer.terrainShadows,depthTestAgainstTerrain:this._scene.globe.depthTestAgainstTerrain,shadowMap:this._scene.shadowMap}}return i(t,[{key:"open",value:function(){this.startAnalyze||(this.close(),this._viewer.terrainShadows=Cesium.ShadowMode.ENABLED,this.testOn=this._scene.globe.depthTestAgainstTerrain,this.testOn||(this._scene.globe.depthTestAgainstTerrain=!0),this._initialiseHandlers(),this.startAnalyze=!0)}},{key:"close",value:function(){this.startAnalyze=!1,this.cameraPosition=null,this.tempFrustum&&this._scene.primitives.remove(this.tempFrustum),this.handler&&(this.handler.destroy(),this.handler=null),this._scene.shadowMap&&(this._scene.shadowMap.enabled=!1);var t=!0,e=!1,n=void 0;try{for(var i,r=this.entities[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;this._viewer.entities.remove(o)}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}this.entities=[],this.activeShapePoints=[],this._viewer.terrainShadows=this.defaultOption.terrainShadows,this._scene.globe.depthTestAgainstTerrain=this.defaultOption.depthTestAgainstTerrain,this._scene.shadowMap=this.defaultOption.shadowMap,this.spotLightCamera=null}},{key:"setPosition",value:function(t,e){var n=!0,i=!1,r=void 0;try{for(var o,a=this.entities[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this._viewer.entities.remove(s)}}catch(t){i=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}this._updateCamera(t),this._updateTarget(e)}},{key:"_updateTarget",value:function(t){t&&(this._calculatePose(t),this.cameraPosition&&(this.activeShapePoints=[],this.activeShapePoints.push(this.cameraPosition),this.activeShapePoints.push(t))),this._updateLightDirection(),this._creatFrustum()}},{key:"_updateCamera",value:function(t){t&&(this.cameraPosition=t,this._viewPoint=t,this._createViewShad(t),0==this.entities.length&&this._addEntity(),this.activeShapePoints.push(t))}},{key:"_initialiseHandlers",value:function(){var t=this,e=this;this.handler=new Cesium.ScreenSpaceEventHandler(this._scene.canvas),this.handler.setInputAction(function(n){if(e.startAnalyze&&null!=e.cameraPosition){var i=e._pickPosition(n.endPosition);t._updateTarget(i)}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(function(n){if(e.startAnalyze&&null==e.cameraPosition){var i=e._pickPosition(n.position);if(i){var r=!0,o=!1,a=void 0;try{for(var s,l=e.entities[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;e._viewer.entities.remove(u)}}catch(t){o=!0,a=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}e.entities=[],e.activeShapePoints=[];var c=e._viewer.scene.globe.ellipsoid,h=c.cartesianToCartographic(i),f=Cesium.Math.toDegrees(h.latitude),p=Cesium.Math.toDegrees(h.longitude),d=h.height+t._offsetDist,g=Cesium.Cartesian3.fromDegrees(p,f,d);t._updateCamera(g)}}},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(function(e){t.startAnalyze=!1,t.cameraPosition=null},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}},{key:"_addEntity",value:function(t){var e=this,n=new Cesium.CallbackProperty(function(){return e.viewPoint},!1),i=new Cesium.CallbackProperty(function(){return e.activeShapePoints},!1),r=new Cesium.CallbackProperty(function(){return e.activeShapePoints[e.activeShapePoints.length-1]},!1),o=new Cesium.CallbackProperty(function(){var t="";if(e.activeShapePoints.length>1){var n=Cesium.Cartesian3.distance(e.activeShapePoints[0],e.activeShapePoints[1]);t="距离:"+n.toFixed(2)+"米"}return t},!1),a=new Cesium.CallbackProperty(function(){return e._showDistance},!1);this.entities.push(this._viewer.entities.add({position:n,point:{pixelSize:12,color:Cesium.Color.YELLOW,disableDepthTestDistance:Number.POSITIVE_INFINITY}})),this.entities.push(this._viewer.entities.add({polyline:{positions:i,show:a,width:2,clampToGround:!1,material:Cesium.Color.LIME,disableDepthTestDistance:Number.POSITIVE_INFINITY,classificationType:Cesium.ClassificationType.NONE}})),this.entities.push(this._viewer.entities.add({position:r,label:{show:a,text:o,pixelOffset:new Cesium.Cartesian2(30,-50),scale:.5,font:"32px 微软雅黑",fillColor:Cesium.Color.DEEPSKYBLUE,outlineColor:Cesium.Color.BLACK,outlineWidth:1,showBackground:!0,backgroundColor:Cesium.Color.BLACK.withAlpha(.9),backgroundPadding:new Cesium.Cartesian2(10,6),disableDepthTestDistance:Number.POSITIVE_INFINITY}}))}},{key:"_calculatePose",value:function(t){var e=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(t,this.cameraPosition,e),this.radii=Cesium.Cartesian3.magnitude(e),Cesium.Cartesian3.normalize(e,e);var n=this._scene.frameState.camera,i=n.heading,r=n.pitch,o=n.roll,a=new Cesium.Cartesian3;Cesium.Cartesian3.clone(n.position,a);var s=e.clone(),l=this.cameraPosition.clone(),l=Cesium.Cartesian3.normalize(l,l);Math.abs(Cesium.Cartesian3.dot(l,s))>=1&&(l=Math.abs(Cesium.Cartesian3.dot(s,Cesium.Cartesian3.UNIT_Y))<1?Cesium.Cartesian3.clone(Cesium.Cartesian3.UNIT_Y,l):Cesium.Cartesian3.clone(Cesium.Cartesian3.UNIT_Z,l));var u=new Cesium.Cartesian3;Cesium.Cartesian3.cross(l,s,u),u=Cesium.Cartesian3.normalize(u,u),Cesium.Cartesian3.cross(s,u,l),l=Cesium.Cartesian3.normalize(l,l),n.setView({destination:this.cameraPosition,orientation:{direction:s,up:l}}),this.heading=n.heading,this.roll=n.roll,this.pitch=n.pitch,n.setView({destination:a,orientation:{heading:i,pitch:r,roll:o}})}},{key:"_createViewShad",value:function(t){if(!this.spotLightCamera){this.spotLightCamera=new Cesium.Camera(this._scene),this.spotLightCamera.position=t,this.spotLightCamera.frustum.fov=Cesium.Math.PI_OVER_THREE,this.spotLightCamera.frustum.aspectRatio=1,this.spotLightCamera.frustum.near=1,this.spotLightCamera.frustum.far=2,this.shadowOptions={context:this.context,enabled:!0,lightCamera:this.spotLightCamera,maximumDistance:500,cascadesEnabled:!1};var e=this;this._scene.shadowMap=new Cesium.ShadowMap(this.shadowOptions),null==this.normalShaderFun&&(this.normalShaderFun=Cesium.ShadowMapShader.createShadowReceiveFragmentShader),Cesium.ShadowMapShader.createShadowReceiveFragmentShader=function(t,n,i,r,o){return e._getUIShader(e,t,n,i,r,o)}}this.spotLightCamera.position=t}},{key:"_getUIShader",value:function(t,e,n,i,r,o){var a=t.normalShaderFun(e,n,i,r,o),s=t.visibleColor.red,l=t.visibleColor.green,u=t.visibleColor.blue,c=t.inVisibleColor.red,h=t.inVisibleColor.green,f=t.inVisibleColor.blue,p=" if(visibility == 1.0){ \n          gl_FragColor.rgb *= vec3("+s+","+l+","+u+");  \n        } else { \n          gl_FragColor.rgb *= vec3("+c+","+h+","+f+"); \n        }\n        ";return a.sources[a.sources.length-1]=a.sources[a.sources.length-1].replace("gl_FragColor.rgb *= visibility;",p),a}},{key:"_updateLightDirection",value:function(){this.radii<=1||(this.spotLightCamera.frustum.far=this.radii,this.shadowOptions.maximumDistance=this.radii,this.spotLightCamera.setView({orientation:{heading:this.heading,pitch:this.pitch,roll:this.roll}}))}},{key:"_creatFrustum",value:function(){var t=this.heading-100/57.29578,e=new Cesium.HeadingPitchRoll(t,this.pitch,this.roll),n=Cesium.Quaternion.fromHeadingPitchRoll(e),i=Cesium.Matrix3.fromQuaternion(n),r=Cesium.Matrix4.multiply(Cesium.Transforms.eastNorthUpToFixedFrame(this.cameraPosition),Cesium.Matrix4.fromRotationTranslation(i,new Cesium.Cartesian3(0,0,0)),new Cesium.Matrix4),o=this._getViewShadGeometry({dist:this.radii}),a=new Cesium.GeometryInstance({geometry:o,modelMatrix:r,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.WHITE)}}),s=new Cesium.Primitive({geometryInstances:a,asynchronous:!1,appearance:new Cesium.PerInstanceColorAppearance({flat:!0,translucent:!1})});this.tempFrustum&&this._scene.primitives.remove(this.tempFrustum),this._scene.primitives.add(s),this.tempFrustum=s,this.tempFrustum.show=this._showDome}},{key:"_pickPosition",value:function(t){return this._scene.pickPosition(t)}},{key:"_getViewShadGeometry",value:function(t){t=Cesium.defaultValue(t,Cesium.defaultValue.EMPTY_OBJECT);var e=Cesium.defaultValue(t.dist,200),n=Cesium.defaultValue(t.phiStart,75),i=Cesium.defaultValue(t.phiLength,30),r=Cesium.defaultValue(t.thetaLength,60),o=Cesium.defaultValue(t.thetaStart,320),a=new Cesium.Cartesian3(e,e,e),s=Cesium.Ellipsoid.fromCartesian3(a),l=Cesium.Math.toRadians(n),u=Cesium.Math.toRadians(i),c=Cesium.Math.toRadians(o),h=Cesium.Math.toRadians(r),f=new Float64Array(15),p=Cesium.IndexDatatype.createTypedArray(5,20),d=0,g=1.1547005*e;f[d++]=g*Math.cos(c)*Math.sin(l),f[d++]=g*Math.sin(c)*Math.sin(l),f[d++]=g*Math.cos(l),f[d++]=g*Math.cos(c+h)*Math.sin(l),f[d++]=g*Math.sin(c+h)*Math.sin(l),f[d++]=g*Math.cos(l),f[d++]=g*Math.cos(c)*Math.sin(l+u),f[d++]=g*Math.sin(c)*Math.sin(l+u),f[d++]=g*Math.cos(l+u),f[d++]=g*Math.cos(c+h)*Math.sin(l+u),f[d++]=g*Math.sin(c+h)*Math.sin(l+u),f[d++]=g*Math.cos(l+u),f[d++]=0,f[d++]=0,f[d++]=0,d=0,p[d++]=4,p[d++]=0,p[d++]=4,p[d++]=1,p[d++]=4,p[d++]=2,p[d++]=4,p[d++]=3,p[d++]=0,p[d++]=1,p[d++]=0,p[d++]=2,p[d++]=2,p[d++]=3,p[d++]=3,p[d++]=1;var m=new Cesium.GeometryAttributes({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:f})});return new Cesium.Geometry({attributes:m,indices:p,primitiveType:Cesium.PrimitiveType.LINES,boundingSphere:Cesium.BoundingSphere.fromEllipsoid(s)})}},{key:"visibleColor",get:function(){return this._visibleColor},set:function(t){t instanceof Cesium.Color&&(this._visibleColor=t)}},{key:"inVisibleColor",get:function(){return this._inVisibleColor},set:function(t){t instanceof Cesium.Color&&(this._inVisibleColor=t)}},{key:"showDistance",get:function(){return this._showDistance},set:function(t){this._showDistance=t}},{key:"offsetDist",get:function(){return this._offsetDist},set:function(t){this._offsetDist=t}},{key:"hpr",get:function(){return new Cesium.HeadingPitchRoll(this.spotLightCamera.heading,this.spotLightCamera.pitch,this.spotLightCamera.roll)},set:function(t){var e=this.spotLightCamera;e.setView({destination:e.position,orientation:{heading:t.heading,pitch:t.pitch,roll:t.roll}})}},{key:"fov",get:function(){var t=this.spotLightCamera.frustum;return Cesium.Math.toDegrees(t.fov)},set:function(t){var e=this.spotLightCamera.frustum;e.fov=Cesium.Math.toRadians(t),this.spotLightCamera.frustum=e}},{key:"near",get:function(){return this.spotLightCamera.frustum.near},set:function(t){this.spotLightCamera.frustum.near=t}},{key:"far",get:function(){return this.spotLightCamera.frustum.far},set:function(t){this.spotLightCamera.frustum.far=t}},{key:"showDome",get:function(){return this._showDome},set:function(t){this._showDome=t,this.tempFrustum&&(this.tempFrustum.show=this._showDome)}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){var i=this;n(this,t),this._viewer=e,this._scene=e.scene,this._camera=this._scene.camera,this._color=Cesium.Color.RED.withAlpha(.4),this._maxHeight=3e3,this._minHeight=0,this._currentHeight=0,this._interpolation=8,this._tickEvent=function(){i.updateGeometry()},this.flayer=null,this.pList=null,this.step=1}return i(t,[{key:"setPolygon",value:function(t,e){for(var n=[],i=[],r=[],o=[],a=0;a<t.length;a+=3)i.push(t[a]),r.push(t[a+1]),o.push(t[a+2]),n.push(Cesium.Cartographic.fromDegrees(t[a],t[a+1]));var s=Math.max.apply(null,r),l=Math.min.apply(null,r),u=Math.max.apply(null,i),c=Math.min.apply(null,i);0==this._minHeight&&(this._minHeight=Math.min.apply(null,o));for(var h=(s-l)/this._interpolation,f=(u-c)/this._interpolation,p=0;p<this._interpolation;p++)for(var d=0;d<this._interpolation;d++){var g=l+p*h,m=c+d*f;n.push(Cesium.Cartographic.fromDegrees(g,m))}var v=Cesium.sampleTerrain(this._viewer.terrainProvider,12,n);Cesium.when(v,function(t){e&&e()}),this.pList=Cesium.Cartesian3.fromDegreesArrayHeights(t)}},{key:"open",value:function(){this.startAnalyze=!0,this._viewer.clock.onTick.removeEventListener(this._tickEvent),this._viewer.clock.onTick.addEventListener(this._tickEvent)}},{key:"close",value:function(){this.startAnalyze=!1,this._viewer.clock.onTick.removeEventListener(this._tickEvent),this._viewer.scene.primitives.remove(this.flayer),this._currentHeight=0}},{key:"updateGeometry",value:function(){var t=this;if(t.startAnalyze){if(!(t._currentHeight<t._maxHeight))return void(t.startAnalyze=!1);t._currentHeight+=t.step;var e=t._minHeight+t._currentHeight;t._viewer.scene.primitives.remove(t.flayer);var n=t.creategeometry(t.pList,t._minHeight,e);t.flayer=new Cesium.ClassificationPrimitive({allowPicking:!1,geometryInstances:n,asynchronous:!1}),t._viewer.scene.primitives.add(t.flayer)}}},{key:"creategeometry",value:function(t,e,n){return new Cesium.GeometryInstance({geometry:Cesium.PolygonGeometry.fromPositions({positions:t,height:e,perPositionHeight:!1,extrudedHeight:n}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(this._color)}})}},{key:"speed",get:function(){return this.step},set:function(t){t<=0||(this.step=t)}},{key:"color",get:function(){return this._color},set:function(t){this._color=t}},{key:"maxHeight",get:function(){return this._maxHeight},set:function(t){this._maxHeight=t}},{key:"minHeight",get:function(){return this._minHeight},set:function(t){this._minHeight=t}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this.config={color:Cesium.Color.RED.withAlpha(.7),height:400}}return i(t,[{key:"setPolygon",value:function(t){t.length<2||(this._points=Cesium.Cartesian3.fromDegreesArrayHeights(t),this.updateLayer())}},{key:"open",value:function(){this.updateLayer()}},{key:"close",value:function(){this.viewer.scene.primitives.remove(this._layer)}},{key:"updateLayer",value:function(){if(this.viewer.scene.primitives.remove(this._layer),this._points){var t=this.creategeometry(this._points);this._layer=new Cesium.ClassificationPrimitive({allowPicking:!1,geometryInstances:t,asynchronous:!1}),this.viewer.scene.primitives.add(this._layer)}}},{key:"creategeometry",value:function(t){return new Cesium.GeometryInstance({geometry:Cesium.PolygonGeometry.fromPositions({positions:t,height:this.config.height,perPositionHeight:!1,extrudedHeight:1e6}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(this.config.color)}})}},{key:"color",get:function(){return this.config.color},set:function(t){this.config.color=Cesium.Color.fromCssColorString(t),this.updateLayer()}},{key:"height",get:function(){return this.config.height},set:function(t){this.config.height=t,this.updateLayer()}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),s=i(a),l=function(){function t(e){r(this,t),this.viewer=e,this._height=100,this.terrainClipPlan=null,this._path=[]}return o(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;this.terrainClipPlan||(this.terrainClipPlan=new TerrainClipPlane(this.viewer,{height:e,splitNum:1e4,wallImg:s.default.getResource("Assets/Images/excavate_side_min.jpg"),bottomImg:s.default.getResource("Assets/Images/excavate_side_min.jpg")})),this._height=e,this.terrainClipPlan._height=e,this.path=t}},{key:"getPositionsData",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=i.lon,o=i.lat,a=i.alt,s=Cesium.Cartesian3.fromDegrees(r,o,a);e.push({x:s.x,y:s.y,z:s.z})}return e}},{key:"updateData",value:function(){this.terrainClipPlan.updateData(this.path)}},{key:"clear",value:function(){this.terrainClipPlan.clear()}},{key:"polygon",get:function(){return this._path},set:function(t){this._path=t,this.updateData()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.terrainClipPlan._height=t,this.updateData()}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(65),l=i(s),u=n(39),c=i(u),h=n(91),f=i(h),p=function(){function t(e){o(this,t),this.mType="",this.viewer=e,this._font="16px SimHei";var n=this;this._defaultFaax=e.scene.postProcessStages.fxaa.enabled,e.scene.postProcessStages.fxaa.enabled=!1,this.drawControl=this.viewer.drawTool,this.dataSource=this.drawControl.getDataSource(),this._initWorker(this.dataSource),this.drawControl.onChangeDrawing=function(t){switch(n.mType){case"length":case"section":n.workLength.showAddPointLength(t);break;case"area":n.workArea.showAddPointLength(t);break;case"height":n.workHeight.showAddPointLength(t);break;case"super_height":n.workSuperHeight.showAddPointLength(t)}},this.drawControl.onMoveDrawing=function(t){switch(n.mType){case"length":case"section":n.workLength.showMoveDrawing(t);break;case"area":n.workArea.showMoveDrawing(t);break;case"height":n.workHeight.showMoveDrawing(t);break;case"super_height":n.workSuperHeight.showMoveDrawing(t)}},this.drawControl.onStopDrawing=function(t){switch(n.mType){case"length":case"section":n.workLength.showDrawEnd(t);break;case"area":n.workArea.showDrawEnd(t);break;case"height":n.workHeight.showDrawEnd(t);break;case"super_height":n.workSuperHeight.showDrawEnd(t)}}}return a(t,[{key:"_initWorker",value:function(t){var e=this;this.workLength={options:null,arrLables:[],totalLable:null,clearLastNoEnd:function(){if(null!=this.totalLable&&t.entities.remove(this.totalLable),this.arrLables&&this.arrLables.length>0){var e=this.arrLables;if(e&&e.length>0)for(var n in e)t.entities.remove(e[n])}this.totalLable=null,this.arrLables=[]},start:function(n){this.options=n,this.totalLable=t.entities.add({label:{style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.AZURE,horizontalOrigin:Cesium.HorizontalOrigin.LEFT,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-15),outlineColor:Cesium.Color.BLACK,outlineWidth:3,font:e._font,show:!1},isMarsMeasureLabel:!0,attribute:{unit:this.options.unit,type:this.options.type}}),this.arrLables=[],e.drawControl.startDraw({type:"polyline",addHeight:n.addHeight,style:{color:"#00FF00",clampToGround:"section"==this.options.type||this.options.terrain,width:3}})},showAddPointLength:function(n){var i=e.drawControl.getPositions(n),r=t.entities.add({position:i[i.length-1],label:{style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.AZURE,outlineColor:Cesium.Color.BLACK,outlineWidth:3,horizontalOrigin:Cesium.HorizontalOrigin.LEFT,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-15),font:e._font,show:!0},isMarsMeasureLabel:!0,attribute:{unit:this.options.unit,type:this.options.type}});if(1==i.length)r.label.text="起点";else{var o=this.getLength(i),a=e.formatLength(o,this.options.unit);r.label.text=a,r.attribute.value=o,this.getLength([i[i.length-2],i[i.length-1]])<5&&(r.show=!1)}this.arrLables.push(r)},showMoveDrawing:function(t){var n=e.drawControl.getPositions(t);if(!(n.length<2)){var i=this.getLength(n),r=e.formatLength(i,this.options.unit);this.totalLable&&(this.totalLable.position=n[n.length-1],this.totalLable.label.text="全长:"+r,this.totalLable.label.show=!0,this.totalLable.attribute.value=i,this.totalLable.attribute.textEx="全长:"),this.options.calback&&this.options.calback(r,i)}},showDrawEnd:function(n){var i=e.drawControl.getPositions(n),r=this.arrLables.length-i.length;if(r>=0){this.totalLable.position=i[i.length-1],this.totalLable.label.text="全长:"+this.arrLables[this.arrLables.length-1].label.text;for(var o=this.arrLables.length-1;o>=i.length-1;o--)t.entities.remove(this.arrLables[o]);this.arrLables.splice(i.length-1,r+1)}n._totalLable=this.totalLable,n._arrLables=this.arrLables,this.totalLable=null,this.arrLables=[],null!=n.polyline&&("section"==this.options.type?this.updateSectionForTerrain(n):this.options.terrain&&this.updateLengthForTerrain(n))},updateLengthForTerrain:function(t){function n(){u++;var h=[r[u-1],r[u]];l.default.terrainPolyline({viewer:e.viewer,positions:h,calback:function(l,f){if(c=f?1==u?c.concat(h):c.concat([r[u]]):c.concat(l),u>=r.length-1){if(t.polyline.positions.setValue(c),a){var p=i.getLength(c),d=e.formatLength(p,s);a.label.text="全长:"+d,a.attribute.value=p,i.options.calback&&i.options.calback(d,p)}}else{var p=i.getLength(l),d=e.formatLength(p,s),g=o[u];g.label.text=d,g.attribute.value=p,n()}}})}var i=this,r=t.polyline.positions.getValue(),o=t._arrLables,a=t._totalLable,s=a&&a.unit,u=0,c=[];n()},updateSectionForTerrain:function(t){function n(){s++;var t=[i[s-1],i[s]];l.default.terrainPolyline({viewer:e.viewer,positions:t,calback:function(l,v){u=v?1==s?u.concat(t):u.concat([i[s]]):u.concat(l);for(var y=Cesium.Cartographic.fromCartesian(i[s-1]).height,_=Cesium.Cartographic.fromCartesian(i[s]).height,x=(_-y)/l.length,w=0;w<l.length;w++){0!=w&&(c+=Cesium.Cartesian3.distance(l[w],l[w-1])),h.push(Number(c.toFixed(1)));var b=f.default.formatPositon(l[w]);p.push(b.z),g.push(b);var C=Number((y+x*w).toFixed(1));d.push(C)}if(s>=i.length-1){if(o){var S=m.getLength(u),M=e.formatLength(S,a);o.label.text="全长:"+M,o.attribute.value=S}m.options.calback&&m.options.calback({distancestr:M,distance:S,arrLen:h,arrLX:d,arrHB:p,arrPoint:g})}else{var S=m.getLength(l),M=e.formatLength(S,a),E=r[s];E.label.text=M,E.attribute.value=S,n()}}})}var i=t.polyline.positions.getValue();if(!(i.length<2)){var r=t._arrLables,o=t._totalLable,a=o&&o.unit,s=0,u=[],c=0,h=[],p=[],d=[],g=[],m=this;n()}},getLength:function(t){for(var e=0,n=0,i=t.length-1;n<i;n++)e+=Cesium.Cartesian3.distance(t[n],t[n+1]);return e}},this.workArea={options:null,totalLable:null,clearLastNoEnd:function(){null!=this.totalLable&&t.entities.remove(this.totalLable),this.totalLable=null},start:function(n){this.options=n,this.totalLable=t.entities.add({label:{style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.AZURE,outlineColor:Cesium.Color.BLACK,outlineWidth:3,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-15),font:e._font,show:!1},isMarsMeasureLabel:!0,attribute:{unit:this.options.unit,type:this.options.type}}),e.drawControl.startDraw({type:"polygon",style:{color:"#ffff00",outline:!0,outlineColor:"#ffff00",outlineWidth:4,opacity:.4,perPositionHeight:!0}})},showAddPointLength:function(t){},showMoveDrawing:function(t){var n=e.drawControl.getPositions(t);if(!(n.length<3)){var i=l.default.getArea(n),r=e.formatArea(i,this.options.unit),o=c.default.getMaxHeightForPositions(n),a=Cesium.Cartographic.fromCartesian(n[0]),s=Cesium.Math.toDegrees(a.latitude),u=Cesium.Math.toDegrees(a.longitude),h=Cesium.Cartesian3.fromDegrees(u,s,o+1);this.totalLable&&(this.totalLable.position=h,this.totalLable.label.text="面积:"+r,this.totalLable.label.show=!0,this.totalLable.attribute.value=i,this.totalLable.attribute.textEx="面积:"),this.options.calback&&this.options.calback(r,i)}},showDrawEnd:function(t){if(null!=t.polygon){var n=e.drawControl.getPositions(t);if(!(n.length<3)){var i=l.default.getArea(n),r=e.formatArea(i,this.options.unit);this.totalLable&&(this.totalLable.label.text="面积:"+r);var o=t.polygon.hierarchy.getValue();o.map(function(t){t.z=t.z+1}),t._totalLable=this.totalLable,this.totalLable=null}}}},this.workHeight={options:null,totalLable:null,clearLastNoEnd:function(){null!=this.totalLable&&t.entities.remove(this.totalLable),this.totalLable=null},start:function(n){this.options=n,this.totalLable=t.entities.add({label:{style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.AZURE,outlineColor:Cesium.Color.BLACK,outlineWidth:3,horizontalOrigin:Cesium.HorizontalOrigin.RIGHT,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-15),font:e._font,show:!1},isMarsMeasureLabel:!0,attribute:{unit:this.options.unit,type:this.options.type}}),e.drawControl.startDraw({type:"polyline",minMaxPoints:{min:2,max:2,
isSuper:!1},style:{color:"#ffff00",width:3}})},showAddPointLength:function(t){},showMoveDrawing:function(t){var n=e.drawControl.getPositions(t);if(!(n.length<2)){var i=Cesium.Cartographic.fromCartesian(n[0]),r=Cesium.Cartographic.fromCartesian(n[1]),o=Math.abs(r.height-i.height),a=e.formatLength(o,this.options.unit);this.totalLable&&(this.totalLable.position=c.default.getMidPosition(n[0],n[1]),this.totalLable.label.text="高度差:"+a,this.totalLable.label.show=!0,this.totalLable.attribute.value=o,this.totalLable.attribute.textEx="高度差:"),this.options.calback&&this.options.calback(a,o)}},showDrawEnd:function(t){t._totalLable=this.totalLable,this.totalLable=null}},this.workSuperHeight={options:null,totalLable:null,xLable:null,hLable:null,clearLastNoEnd:function(){null!=this.totalLable&&t.entities.remove(this.totalLable),null!=this.xLable&&t.entities.remove(this.xLable),null!=this.hLable&&t.entities.remove(this.hLable),this.totalLable=null,this.xLable=null,this.hLable=null},start:function(n){var i;this.options=n,this.totalLable=t.entities.add({label:(i={style:Cesium.LabelStyle.FILL_AND_OUTLINE,outlineColor:Cesium.Color.BLACK,font:e._font,show:!1,horizontalOrigin:Cesium.HorizontalOrigin.LEFT,verticalOrigin:Cesium.VerticalOrigin.CENTER},r(i,"font","normal 32px MicroSoft YaHei"),r(i,"scale",.5),r(i,"fillColor",Cesium.Color.YELLOW),r(i,"outlineColor",Cesium.Color.BLACK),r(i,"outlineWidth",2),r(i,"disableDepthTestDistance",Number.POSITIVE_INFINITY),i),isMarsMeasureLabel:!0,attribute:{unit:this.options.unit,type:this.options.type}}),this.xLable=t.entities.add({label:{style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.LIME,outlineColor:Cesium.Color.BLACK,outlineWidth:3,font:e._font,show:!1,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM},isMarsMeasureLabel:!0,attribute:{unit:this.options.unit,type:this.options.type}}),this.hLable=t.entities.add({label:{style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.RED,outlineColor:Cesium.Color.BLACK,outlineWidth:3,font:e._font,show:!1,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM},isMarsMeasureLabel:!0,attribute:{unit:this.options.unit,type:this.options.type}}),e.drawControl.startDraw({type:"polyline",minMaxPoints:{min:2,max:2,isSuper:!0},style:{color:"#ffff00",width:2}})},showAddPointLength:function(t){var n=e.drawControl.getPositions(t);if(4==n.length){var i=n[3].clone();n.pop(),n.pop(),n.pop(),n.push(i)}if(2==n.length){var r=c.default.getZHeightPosition(n[0],n[1]),o=c.default.getHDistance(n[0],n[1]);o>3&&(n.push(r),n.push(n[0]))}this.showSuperHeight(n)},showMoveDrawing:function(t){var n=e.drawControl.getPositions(t);if(4==n.length){var i=n[3].clone();n.pop(),n.pop(),n.pop(),n.push(i)}if(2==n.length){var r=c.default.getZHeightPosition(n[0],n[1]),o=c.default.getHDistance(n[0],n[1]);o>3&&(n.push(r),n.push(n[0]))}this.showSuperHeight(n)},showDrawEnd:function(t){t._arrLables=[this.totalLable,this.hLable,this.xLable],this.totalLable=null,this.hLable=null,this.xLable=null},showSuperHeight:function(t){var n,i,r,o;if(4==t.length){var a,s,l=c.default.getMidPosition(t[0],t[1]),u=Cesium.Cartographic.fromCartesian(t[0]),h=Cesium.Cartographic.fromCartesian(t[1]),f=Cesium.Cartographic.fromCartesian(t[2]),p=h.height-f.height;o=h.height-u.height,r=Cesium.Cartesian3.distance(t[0],t[1]),o>-1&&o<1?(s=t[1],this.updateSuperHeightLabel(this.totalLable,s,"高度差",o),this.updateSuperHeightLabel(this.hLable,l,"长度",r)):(p>-.1&&p<.1?(a=c.default.getMidPosition(t[2],t[1]),s=c.default.getMidPosition(t[2],t[3]),i=Cesium.Cartesian3.distance(t[1],t[2]),n=Cesium.Cartesian3.distance(t[3],t[2])):(s=c.default.getMidPosition(t[2],t[1]),a=c.default.getMidPosition(t[2],t[3]),i=Cesium.Cartesian3.distance(t[3],t[2]),n=Cesium.Cartesian3.distance(t[1],t[2])),this.updateSuperHeightLabel(this.totalLable,s,"高度差",n),this.updateSuperHeightLabel(this.xLable,a,"水平距离",i),this.updateSuperHeightLabel(this.hLable,l,"长度",r))}else if(2==t.length){n=Cesium.Cartesian3.distance(t[1],t[0]);var s=c.default.getMidPosition(t[0],t[1]);xLable.label.show&&(xLable.label.show=!1,hLable.label.show=!1),this.updateSuperHeightLabel(this.totalLable,s,"高度差",n)}var d=e.formatLength(n,this.options.unit);this.options.calback&&this.options.calback(d,n)},updateSuperHeightLabel:function(t,n,i,r){null!=t&&(t.position=n,t.label.text=i+":"+e.formatLength(r,this.options.unit),t.label.show=!0,t.attribute.value=r,t.attribute.textEx=i+":")}}}},{key:"measuerLength",value:function(t){this.endLastDraw(),this.mType="length",t=t||{},t.type=this.mType,t.hasOwnProperty("terrain")||(t.terrain=!0),this.workLength.start(t)}},{key:"measureSection",value:function(t){this.endLastDraw(),this.mType="section",t=t||{},t.type=this.mType,t.terrain=!0,this.workLength.start(t)}},{key:"measureArea",value:function(t){this.endLastDraw(),this.mType="area",t=t||{},t.type=this.mType,this.workArea.start(t)}},{key:"measureHeight",value:function(t){this.endLastDraw(),t=t||{},this.mType="height",t.type=this.mType,this.workHeight.start(t)}},{key:"measureTriangle",value:function(t){this.endLastDraw(),t=t||{},this.mType="super_height",t.type=this.mType,this.workSuperHeight.start(t)}},{key:"endLastDraw",value:function(){this.workLength.clearLastNoEnd(),this.workArea.clearLastNoEnd(),this.workHeight.clearLastNoEnd(),this.workSuperHeight.clearLastNoEnd(),this.drawControl.stopDraw()}},{key:"clearMeasure",value:function(){this.mType="",this.endLastDraw(),this.drawControl.removeAll()}},{key:"updateUnit",value:function(t,e){var n=this.dataSource.entities.values;for(var i in n){var r=n[i];if(r.label&&r.isMarsMeasureLabel&&r.attribute&&r.attribute.value){if(r.attribute.type!=t)continue;"area"==t?r.label.text._value=(r.attribute.textEx||"")+this.formatArea(r.attribute.value,e):r._label.text._value=(r.attribute.textEx||"")+this.formatLength(r.attribute.value,e)}}}},{key:"formatArea",value:function(t,e){if(null==t)return"";null!=e&&"auto"!=e||(e=t<1e6?"m":"km"),t=parseFloat(t);var n="";switch(e){default:case"m":n=t.toFixed(2)+" 平方米";break;case"km":n=(t/1e6).toFixed(2)+" 平方公里";break;case"mu":n=(.0015*t).toFixed(2)+" 亩";break;case"ha":n=(1e-4*t).toFixed(2)+" 公顷"}return n}},{key:"formatLength",value:function(t,e){if(null==t)return"";null!=e&&"auto"!=e||(e=t<1e3?"m":"km"),t=parseFloat(t);var n="";switch(e){default:case"m":n=t.toFixed(2)+" 米";break;case"km":n=(.001*t).toFixed(2)+" 公里";break;case"mile":n=(54e-5*t).toFixed(2)+" 海里";break;case"zhang":n=(.3*t).toFixed(2)+" 丈"}return n}}]),t}();e.default=p},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function t(){n(this,t)};i.formatPositon=function(t){var e=Cesium.Cartographic.fromCartesian(t),n={};return n.y=Number(Cesium.Math.toDegrees(e.latitude).toFixed(6)),n.x=Number(Cesium.Math.toDegrees(e.longitude).toFixed(6)),n.z=Number(e.height.toFixed(1)),n},i.getCurrentMousePosition=function(t,e){var n,i=t.pick(e);if(t.pickPositionSupported&&Cesium.defined(i)&&(n=t.pickPosition(e),Cesium.defined(n))){var r=Cesium.Cartographic.fromCartesian(n),o=r.height;if(o>=0)return n;if(!Cesium.defined(i.id)&&o>=-2e3)return n}if(t.mode===Cesium.SceneMode.SCENE3D){var a=t.camera.getPickRay(e);n=t.globe.pick(a,t)}else n=t.camera.pickEllipsoid(e,t.globe.ellipsoid);return n},i.getCenter=function(t,e){var n=t.scene,i=pickCenterPoint(n),r=i;if(!r){var o=n.globe,a=n.camera.positionCartographic.clone(),s=o.getHeight(a);a.height=s||0,r=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a)}var l=formatPositon(r);return e&&(l=t.mars.point2wgs(l)),l},i.pickCenterPoint=function(t){var e=t.canvas,n=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight/2),i=t.camera.getPickRay(n),r=t.globe.pick(i,t);return r||t.camera.pickEllipsoid(n)},i.getExtent=function(t,e){var n={xmin:70,xmax:140,ymin:0,ymax:55},i=t.scene,r=i.globe.ellipsoid,o=i.canvas,a=t.camera.pickEllipsoid(new Cesium.Cartesian2(0,0),r);if(a){var s=r.cartesianToCartographic(a);n.xmin=Cesium.Math.toDegrees(s.longitude),n.ymax=Cesium.Math.toDegrees(s.latitude)}else{for(var l,u=o.width/2,c=o.height/2,h=0;h<=c;h+=10){var f=h<=u?h:u;if(l=t.camera.pickEllipsoid(new Cesium.Cartesian2(f,h),r))break}if(l){var s=r.cartesianToCartographic(l);n.xmin=Cesium.Math.toDegrees(s.longitude),n.ymax=Cesium.Math.toDegrees(s.latitude)}}var p=t.camera.pickEllipsoid(new Cesium.Cartesian2(o.width,o.height),r);if(p){var d=r.cartesianToCartographic(p);n.xmax=Cesium.Math.toDegrees(d.longitude),n.ymin=Cesium.Math.toDegrees(d.latitude)}else{for(var g,u=o.width/2,c=o.height/2,h=o.height;h>=c;h-=10){var f=h>=u?h:u;if(g=t.camera.pickEllipsoid(new Cesium.Cartesian2(f,h),r))break}if(g){var d=r.cartesianToCartographic(g);n.xmax=Cesium.Math.toDegrees(d.longitude),n.ymin=Cesium.Math.toDegrees(d.latitude)}}if(e){var m=t.mars.point2wgs({x:n.xmin,y:n.ymin});n.xmin=m.x,n.ymin=m.y;var v=t.mars.point2wgs({x:n.xmax,y:n.ymax});n.xmax=v.x,n.ymax=v.y}return n},i.getCameraView=function(t,e){var n=t.camera,i=n.positionCartographic,r={};return r.y=Number(Cesium.Math.toDegrees(i.latitude).toFixed(6)),r.x=Number(Cesium.Math.toDegrees(i.longitude).toFixed(6)),r.z=Number(i.height.toFixed(1)),r.heading=Number(Cesium.Math.toDegrees(n.heading).toFixed(1)),r.pitch=Number(Cesium.Math.toDegrees(n.pitch).toFixed(1)),r.roll=Number(Cesium.Math.toDegrees(n.roll).toFixed(1)),e&&(r=t.mars.point2wgs(r)),r},e.default=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(93),s=i(a),l=n(101),u=i(l),c=function(){function t(e){r(this,t),this.viewer=e,this.skylineOption=new u.default(e),this.effects=new s.default(e)}return o(t,[{key:"open",value:function(){this.skylineEff=this.effects.addSkyline(this.skylineOption)}},{key:"close",value:function(){this.skylineEff&&this.effects.removeEffect(this.skylineEff)}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(94),s=i(a),l=n(96),u=i(l),c=n(97),h=i(c),f=n(98),p=i(f),d=n(99),g=i(d),m=n(100),v=i(m),y=function(){function t(e){r(this,t),this.viewer=e,this._ParticleList=[]}return o(t,[{key:"addEffect",value:function(t){var e=this.viewer.scene.postProcessStages;e.add(t),(t instanceof s.default||t instanceof u.default||t instanceof v.default)&&this._setFogAtmoshere()}},{key:"removeEffect",value:function(t){var e=this.viewer.scene.postProcessStages;e.remove(t),(t instanceof s.default||t instanceof u.default||t instanceof v.default)&&this._resetFogAtmoshere()}},{key:"addRain",value:function(){var t=new u.default;return this.addEffect(t),t}},{key:"addSnow",value:function(){var t=new s.default;return this.addEffect(t),t}},{key:"addFog",value:function(){var t=new v.default;return this.addEffect(t),t}},{key:"addScan",value:function(t,e,n,i){var r=new h.default(this.viewer,t,e,n,i);return this.addEffect(r),r}},{key:"addSkyline",value:function(t){var e=new g.default(t);return this.addEffect(e),e}},{key:"addRadar",value:function(t,e,n,i){var r=new p.default(this.viewer,t,e,n,i);return this.addEffect(r),r}},{key:"removeAll",value:function(){this.viewer.scene.postProcessStages.removeAll()}},{key:"_setFogAtmoshere",value:function(){this.viewer.scene.skyAtmosphere.hueShift=-.8,this.viewer.scene.skyAtmosphere.saturationShift=-.7,this.viewer.scene.skyAtmosphere.brightnessShift=-.33,this.viewer.scene.fog.density=.001,this.viewer.scene.fog.minimumBrightness=.8}},{key:"_resetFogAtmoshere",value:function(){this.viewer.scene.skyAtmosphere.hueShift=0,this.viewer.scene.skyAtmosphere.saturationShift=0,this.viewer.scene.skyAtmosphere.brightnessShift=0,this.viewer.scene.fog.density=2e-4,this.viewer.scene.fog.minimumBrightness=.1}}]),t}();e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(95),u=i(l),c=function(t){function e(t){r(this,e);var n=Cesium.defaultValue(t,1),i={fragmentShader:u.default.FS_SNOW,uniforms:{u_scale:n}},a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return a._scale=n,a}return a(e,t),s(e,[{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t}}]),e}(Cesium.PostProcessStage);e.default=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t)}return i(t,null,[{key:"FS_RAIN",get:function(){return"uniform sampler2D colorTexture;\n\t        varying vec2 v_textureCoordinates;\n\t    \n\t        float hash(float x){\n\t            return fract(sin(x*133.3)*13.13);\n\t    }\n\t    \n\t    void main(void){\n\t    \n\t        float time = czm_frameNumber / 60.0;\n\t    vec2 resolution = czm_viewport.zw;\n\t    \n\t    vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n\t    vec3 c=vec3(.6,.7,.8);\n\t    \n\t    float a=-.4;\n\t    float si=sin(a),co=cos(a);\n\t    uv*=mat2(co,-si,si,co);\n\t    uv*=length(uv+vec2(0,4.9))*.3+1.;\n\t    \n\t    float v=1.-sin(hash(floor(uv.x*100.))*2.);\n\t    float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*20.;\n\t    c*=v*b; \n\t    \n\t    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), 0.5);  \n\t    }\n\t    "}},{key:"FS_SNOW",get:function(){return"uniform sampler2D colorTexture;\n\t        varying vec2 v_textureCoordinates;\n\t    \n\t        float snow(vec2 uv,float scale)\n\t        {\n\t            float time = czm_frameNumber / 60.0;\n\t            float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;\n\t            uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;\n\t            uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;\n\t            p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);\n\t            k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\n\t            return k*w;\n\t        }\n\t    \n\t        void main(void){\n\t            vec2 resolution = czm_viewport.zw;\n\t            vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\n\t            vec3 finalColor=vec3(0);\n\t            float c = 0.0;\n\t            c+=snow(uv,30.)*.0;\n\t            c+=snow(uv,20.)*.0;\n\t            c+=snow(uv,15.)*.0;\n\t            c+=snow(uv,10.);\n\t            c+=snow(uv,8.);\n\t            c+=snow(uv,6.);\n\t            c+=snow(uv,5.);\n\t            finalColor=(vec3(c)); \n\t            gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.5); \n\t    \n\t        }\n\t    "}},{key:"FS_FOG",get:function(){return"uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  void main(void)\n  {\n      vec4 origcolor=texture2D(colorTexture, v_textureCoordinates);\n      vec4 fogcolor=vec4(0.8,0.8,0.8,0.5);\n      float depth = czm_readDepth(depthTexture, v_textureCoordinates);\n      vec4 depthcolor=texture2D(depthTexture, v_textureCoordinates);\n      float f=(depthcolor.r-0.22)/0.2;\n      if(f<0.0) f=0.0;\n      else if(f>1.0) f=1.0;\n      gl_FragColor = mix(origcolor,fogcolor,0.8);\n   }"}},{key:"FS_SCAN",get:function(){return"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\nvec4 toEye(in vec2 uv, in float depth)\n {\n vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n posInCamera =posInCamera / posInCamera.w;\n return posInCamera;\n }\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n{\nvec3 v01 = point -planeOrigin;\nfloat d = dot(planeNormal, v01) ;\nreturn (point - planeNormal * d);\n}\nfloat getDepth(in vec4 depth)\n{\nfloat z_window = czm_unpackDepth(depth);\nz_window = czm_reverseLogDepth(z_window);\nfloat n_range = czm_depthRange.near;\nfloat f_range = czm_depthRange.far;\nreturn (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvoid main()\n{\ngl_FragColor = texture2D(colorTexture, v_textureCoordinates);\nfloat depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\nvec4 viewPos = toEye(v_textureCoordinates, depth);\nvec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\nfloat dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\nif(dis < u_radius)\n{\nfloat f = 1.0 -abs(u_radius - dis) / u_radius;\nf = pow(f, 4.0);\ngl_FragColor = mix(gl_FragColor, u_scanColor, f);\n}\n}\n"}},{key:"FS_RADAR",get:function(){return"uniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nvarying vec2 v_textureCoordinates;\nuniform vec4 u_scanCenterEC;\nuniform vec3 u_scanPlaneNormalEC;\nuniform vec3 u_scanLineNormalEC;\nuniform float u_radius;\nuniform vec4 u_scanColor;\nvec4 toEye(in vec2 uv, in float depth)\n {\n vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n posInCamera =posInCamera / posInCamera.w;\n return posInCamera;\n }\nbool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 v01 = testPt - ptOnLine;\nnormalize(v01);\nvec3 temp = cross(v01, lineNormal);\nfloat d = dot(temp, u_scanPlaneNormalEC);\nreturn d > 0.5;\n}\nvec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n{\nvec3 v01 = point -planeOrigin;\nfloat d = dot(planeNormal, v01) ;\nreturn (point - planeNormal * d);\n}\nfloat distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n{\nvec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\nreturn length(tempPt - ptOnLine);\n}\nfloat getDepth(in vec4 depth)\n{\nfloat z_window = czm_unpackDepth(depth);\nz_window = czm_reverseLogDepth(z_window);\nfloat n_range = czm_depthRange.near;\nfloat f_range = czm_depthRange.far;\nreturn (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n}\nvoid main()\n{\ngl_FragColor = texture2D(colorTexture, v_textureCoordinates);\nfloat depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\nvec4 viewPos = toEye(v_textureCoordinates, depth);\nvec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\nfloat dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\nfloat twou_radius = u_radius * 2.0;\nif(dis < u_radius)\n{\nfloat f0 = 1.0 -abs(u_radius - dis) / u_radius;\nf0 = pow(f0, 64.0);\nvec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\nfloat f = 0.0;\nif(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n{\nfloat dis1= length(prjOnPlane.xyz - lineEndPt);\nf = abs(twou_radius -dis1) / twou_radius;\nf = pow(f, 3.0);\n}\ngl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n}\n}\n"}},{key:"FS_STROKE",get:function(){return"#extension GL_OES_standard_derivatives : enable\n\t        uniform sampler2D colorTexture;\n\t        uniform sampler2D depthTexture;\n\t        uniform float lineWidth;\n\t        uniform float height;\n\t        uniform bvec3 strokeType;\n\t        uniform vec3 tjxColor;\n\t        uniform vec3 bjColor;\n\t        uniform vec3 cameraPos;\n\t        uniform float mbDis;\n\t        varying vec2 v_textureCoordinates;\n\t        vec4 toEye(in vec2 uv, in float depth){\n\t            vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n\t            vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n\t            posInCamera =posInCamera / posInCamera.w;\n\t            return posInCamera;\n\t        }\n\t        float getDepth(in vec4 depth){\n\t            float z_window = czm_unpackDepth(depth);\n\t            z_window = czm_reverseLogDepth(z_window);\n\t            float n_range = czm_depthRange.near;\n\t            float f_range = czm_depthRange.far;\n\t            return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n\t        }\n\t        bool isTJX(vec2 uv,float lw){\n\t            vec2 pixelSize = lw / czm_viewport.zw;\n\t            float dx0 = -pixelSize.x;\n\t            float dy0 = -pixelSize.y;\n\t            float dx1 = pixelSize.x;\n\t            float dy1 = pixelSize.y;\n\t            \n\t            vec2 currUV = uv + vec2(dx0, dy0);\n\t            vec4 currDepth = texture2D(depthTexture, currUV);\n\t            float depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            currUV = uv + vec2(0.0, dy0);\n\t            currDepth = texture2D(depthTexture, currUV);\n\t            depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            currUV = uv + vec2(dx1, dy0);\n\t            currDepth = texture2D(depthTexture, currUV);\n\t            depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            currUV = uv + vec2(dx0, 0.0);\n\t            currDepth = texture2D(depthTexture, currUV);\n\t            depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            currUV = uv + vec2(dx1, 0.0);\n\t            currDepth = texture2D(depthTexture, currUV);\n\t            depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            currUV = uv + vec2(dx0, dy1);\n\t            currDepth = texture2D(depthTexture, currUV);\n\t            depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            currUV = uv + vec2(0.0, dy1);\n\t            currDepth = texture2D(depthTexture, currUV);\n\t            depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            currUV = uv + vec2(dx1, dy1);\n\t            currDepth = texture2D(depthTexture, currUV);\n\t            depth = getDepth(currDepth);\n\t            if(depth>=1.0)return true;\n\t            \n\t            return false;\n\t        }\n\t        void main(){\n\t            \n\t            \n\t            vec4 color = texture2D(colorTexture, v_textureCoordinates);\n\t            if(height>14102.0){\n\t                gl_FragColor = color;\n\t                return;\n\t            }\n\t            vec4 currD = texture2D(depthTexture, v_textureCoordinates);\n\t            if(currD.r>=1.0){\n\t                gl_FragColor = color;\n\t                return;\n\t            }\n\t            float depth = getDepth(currD);\n\t            vec4 positionEC = toEye(v_textureCoordinates, depth);\n\t            vec3 dx = dFdx(positionEC.xyz);\n\t            vec3 dy = dFdy(positionEC.xyz);\n\t            vec3 normal = normalize(cross(dx,dy));\n\t            \n\t            if(strokeType.y||strokeType.z){\n\t                vec4 wp = czm_inverseView * positionEC;\n\t                if(distance(wp.xyz,cameraPos)>mbDis){\n\t                    gl_FragColor = color;\n\t                }else{\n\t                    float dotNum = abs(dot(normal,normalize(positionEC.xyz)));\n\t                    if(dotNum<0.05){\n\t                        gl_FragColor = vec4(bjColor,1.0);\n\t                        return;\n\t                    }\n\t                }\n\t            }\n\t            if(strokeType.x||strokeType.z){\n\t                bool tjx = isTJX(v_textureCoordinates,lineWidth);\n\t                if(tjx){\n\t                    gl_FragColor = vec4(tjxColor,1.0);\n\t                    return;\n\t                }\n\t            }\n\t            gl_FragColor = color;\n\t        }\n\t        "}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(95),u=i(l),c=function(t){function e(t){r(this,e);var n=Cesium.defaultValue(t,1),i={fragmentShader:u.default.FS_RAIN,uniforms:{u_scale:n}},a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return a._scale=n,a}return a(e,t),s(e,[{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t}}]),e}(Cesium.PostProcessStage);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(95),u=i(l),c=function(t){function e(t,n,i,a,s){if(r(this,e),!Cesium.defined(t))return console.error("viewer 未定义"),o(b);if(!Cesium.defined(n))return console.error("中心点未定义"),o(b);var l=t,c=Cesium.defaultValue(i,1500),h=Cesium.defaultValue(a,Cesium.Color.RED),f=Cesium.defaultValue(s,4e3),p=(new Date).getTime(),d=new Cesium.Cartesian4(n.x,n.y,n.z,1),g=Cesium.Cartographic.fromCartesian(n);g.height+=500;var m=Cesium.Cartographic.toCartesian(g),v=new Cesium.Cartesian4(m.x,m.y,m.z,1),y=new Cesium.Cartesian4,_=new Cesium.Cartesian4,x=new Cesium.Cartesian3,w={fragmentShader:u.default.FS_SCAN,uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(l.camera._viewMatrix,d,y)},u_scanPlaneNormalEC:function(){var t=Cesium.Matrix4.multiplyByVector(l.camera._viewMatrix,d,y),e=Cesium.Matrix4.multiplyByVector(l.camera._viewMatrix,v,_);return x.x=e.x-t.x,x.y=e.y-t.y,x.z=e.z-t.z,Cesium.Cartesian3.normalize(x,x),x},u_radius:function(){return c*(((new Date).getTime()-p)%f)/f},u_scanColor:h}},b=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,w));return b.center=n,b}return a(e,t),s(e,[{key:"scanColor",get:function(){return this._scanColor},set:function(t){this._scanColor=t}},{key:"maxRadius",get:function(){},set:function(t){}}]),e}(Cesium.PostProcessStage);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(95),u=i(l),c=function(t){function e(t,n,i,a,s){if(r(this,e),!Cesium.defined(t))return console.error("viewer 未定义"),o(_this);if(!Cesium.defined(n))return console.error("中心点未定义"),o(_this);var l=Cesium.defaultValue(i,1500),c=Cesium.defaultValue(a,Cesium.Color.RED),h=Cesium.defaultValue(s,4e3),f=new Cesium.Cartesian4(n.x,n.y,n.z,1),p=Cesium.Cartographic.fromCartesian(n);p.height+=500;var d=Cesium.Cartographic.toCartesian(p),g=new Cesium.Cartesian4(d.x,d.y,d.z,1),m=Cesium.Cartographic.fromCartesian(n);m.longitude+=Cesium.Math.toRadians(.001);var v=Cesium.Cartographic.toCartesian(m),y=new Cesium.Cartesian4(v.x,v.y,v.z,1),_=new Cesium.Quaternion,x=new Cesium.Matrix3,w=(new Date).getTime(),b=new Cesium.Cartesian4,C=new Cesium.Cartesian4,S=new Cesium.Cartesian4,M=new Cesium.Cartesian3,E=new Cesium.Cartesian3,I={fragmentShader:u.default.FS_RADAR,uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(t.camera._viewMatrix,f,b)},u_scanPlaneNormalEC:function(){var e=Cesium.Matrix4.multiplyByVector(t.camera._viewMatrix,f,b),n=Cesium.Matrix4.multiplyByVector(t.camera._viewMatrix,g,C);return M.x=n.x-e.x,M.y=n.y-e.y,M.z=n.z-e.z,Cesium.Cartesian3.normalize(M,M),M},u_radius:l,u_scanLineNormalEC:function(){var e=Cesium.Matrix4.multiplyByVector(t.camera._viewMatrix,f,b),n=Cesium.Matrix4.multiplyByVector(t.camera._viewMatrix,g,C),i=Cesium.Matrix4.multiplyByVector(t.camera._viewMatrix,y,S);M.x=n.x-e.x,M.y=n.y-e.y,M.z=n.z-e.z,Cesium.Cartesian3.normalize(M,M),E.x=i.x-e.x,E.y=i.y-e.y,E.z=i.z-e.z;var r=((new Date).getTime()-w)%h/h;return Cesium.Quaternion.fromAxisAngle(M,r*Cesium.Math.PI*2,_),Cesium.Matrix3.fromQuaternion(_,x),Cesium.Matrix3.multiplyByVector(x,E,E),Cesium.Cartesian3.normalize(E,E),E},u_scanColor:c}};return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,I))}return a(e,t),s(e,[{key:"scanColor",get:function(){return this._scanColor},set:function(t){this._scanColor=t}},{key:"maxRadius",get:function(){},set:function(t){}}]),e}(Cesium.PostProcessStage);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{
default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(95),l=i(s),u=function(t){function e(t){if(r(this,e),!Cesium.defined(t))return console.error("skylineOption 未定义"),o(a);var n=t.viewer.scene.camera.position,i={fragmentShader:l.default.FS_STROKE,uniforms:{height:function(){return Cesium.Cartographic.fromCartesian(n).height},lineWidth:function(){return t.width},strokeType:function(){return t.strokeType},tjxColor:function(){return t.color},bjColor:function(){return t.bjColor},cameraPos:function(){return n},mbDis:function(){return t.strokeDistance}}},a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return a.skylineOption=t,a}return a(e,t),e}(Cesium.PostProcessStage);e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(95),u=i(l),c=function(t){function e(t){r(this,e);var n=Cesium.defaultValue(t,1),i={fragmentShader:u.default.FS_FOG,uniforms:{u_scale:n}},a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return a._scale=n,a}return a(e,t),s(e,[{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t}}]),e}(Cesium.PostProcessStage);e.default=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this._viewer=e,this._width=2,this._bjColor=Cesium.Color.RED,this._strokeDistance=500,this._color=Cesium.Color.RED,this._strokeType=new Cesium.Cartesian3(1,0,0)}return i(t,[{key:"viewer",get:function(){return this._viewer}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"strokeType",get:function(){return this._strokeType}},{key:"enabeEdge",get:function(){return 1==this._strokeType.x&&1==this._strokeType.y&&1==this._strokeType.z},set:function(t){t?this._strokeType=new Cesium.Cartesian3(1,1,1):this._strokeType=new Cesium.Cartesian3(1,0,0)}},{key:"bjColor",get:function(){return this._bjColor},set:function(t){this._bjColor=t}},{key:"color",get:function(){return this._color},set:function(t){this._color=t}},{key:"strokeDistance",get:function(){return this._strokeDistance},set:function(t){this._strokeDistance=t}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,i){n(this,t),this._viewer=e;var r=Cesium.defaultValue(i,{});this._depth=Cesium.defaultValue(r.depth,500),this._alpha=Cesium.defaultValue(r.alpha,.5),this.enable=Cesium.defaultValue(r.enable,!1);var o=Cesium.GlobeSurfaceOption;this._underGroundOpt=o?o.underGround:void 0}return i(t,[{key:"_resetLayersAlpha",value:function(t){for(var e=this._viewer.imageryLayers._layers,n=0,i=e.length;n<i;n++)e[n].alpha=t[n]}},{key:"_updateImageryLayersAlpha",value:function(t){for(var e=this._viewer.imageryLayers._layers,n=0,i=e.length;n<i;n++)e[n].alpha=t}},{key:"_historyOpts",value:function(){var t={};t.alpha=[];for(var e=this._viewer.imageryLayers._layers,n=0,i=e.length;n<i;n++)t.alpha.push(e[n].alpha);t.highDynamicRange=Cesium.clone(this._viewer.scene.highDynamicRange),t.skyShow=Cesium.clone(this._viewer.scene.skyAtmosphere.show),t.skyBoxShow=Cesium.clone(this._viewer.scene.skyBox.show),t.depthTest=Cesium.clone(this._viewer.scene.globe.depthTestAgainstTerrain),this._viewer.scene.globe._surface&&this._viewer.scene.globe._surface._tileProvider&&this._viewer.scene.globe._surface._tileProvider._renderState&&(t.blending=Cesium.clone(this._viewer.scene.globe._surface._tileProvider._renderState.blending)),this._oldViewOpts=t}},{key:"open",value:function(){if(this._underGroundOpt&&!this._enable){this._enable=!0,this._historyOpts(),this._updateImageryLayersAlpha(this._alpha);var t=this._viewer;this._underGroundOpt.enableSkirt=!0,this._underGroundOpt.enabled=!0,this._underGroundOpt.cullFace=null,this._underGroundOpt.enableDepth=this._depth,t.scene.globe.baseColor=new Cesium.Color(0,0,0,0),t.scene.globe.depthTestAgainstTerrain=!0,t.scene.highDynamicRange=!1,t.scene.skyAtmosphere.show=!1,t.scene.skyBox.show=!1}}},{key:"close",value:function(){if(this._enable){this._enable=!1,this._resetLayersAlpha(this._oldViewOpts.alpha);var t=this._viewer;this._underGroundOpt.enableSkirt=!1,this._underGroundOpt.enabled=!1,this._underGroundOpt.cullFace=void 0,t.scene.globe.depthTestAgainstTerrain=this._oldViewOpts.depthTest,t.scene.skyBox.show=this._oldViewOpts.skyBoxShow,t.scene.highDynamicRange=this._oldViewOpts.highDynamicRange,t.scene.skyAtmosphere.show=this._oldViewOpts.skyShow}}},{key:"destroy",value:function(){delete this._viewer,delete this._alpha,delete this._depth,delete this._enable,delete this._oldViewOpts}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t,this._updateImageryLayersAlpha(t)}},{key:"depth",get:function(){return this._depth},set:function(t){this._depth=t,this._underGroundOpt.enableDepth=t}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(104),s=i(a),l=n(26),u=i(l),c=function(){function t(e){r(this,t),this.viewer=e,this._height=100,this.terrainClipPlan=null,this._path=[]}return o(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;this.terrainClipPlan||(this.terrainClipPlan=new s.default(this.viewer,{height:e,splitNum:1e4,wallImg:u.default.getResource("Assets/Images/excavate_side_min.jpg"),bottomImg:u.default.getResource("Assets/Images/excavate_side_min.jpg")})),this._height=e,this.terrainClipPlan._height=e,this.polygon=t}},{key:"getPositionsData",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=i.lon,o=i.lat,a=i.alt,s=Cesium.Cartesian3.fromDegrees(r,o,a);e.push({x:s.x,y:s.y,z:s.z})}return e}},{key:"updateData",value:function(){this.terrainClipPlan.updateData(this._path)}},{key:"open",value:function(){this.updateData()}},{key:"close",value:function(){this.terrainClipPlan.clear()}},{key:"polygon",get:function(){return this._path},set:function(t){this._path=t,this.updateData()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this.terrainClipPlan._height=t,this.updateData()}}]),t}();e.default=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,i){n(this,t),this.viewer=e,this.options=i||{},this._positions=i.positions,this._height=this.options.height||0,this.bottomImg=i.bottomImg,this.wallImg=i.wallImg,this.splitNum=Cesium.defaultValue(i.splitNum,50),this._positions&&this._positions.length>0&&this.updateData(this._positions),this.excavateMinHeight=99999}return i(t,[{key:"updateData",value:function(t){this.clear();var e=[],n=t.length,i=new Cesium.Cartesian3,r=Cesium.Cartesian3.subtract(t[0],t[1],i);r=r.x>0,this.excavateMinHeight=9999;for(var o=0;o<n;++o){var a=(o+1)%n,s=Cesium.Cartesian3.midpoint(t[o],t[a],new Cesium.Cartesian3),l=Cesium.Cartographic.fromCartesian(t[o]),u=this.viewer.scene.globe.getHeight(l)||l.height;u<this.excavateMinHeight&&(this.excavateMinHeight=u);var c,h=Cesium.Cartesian3.normalize(s,new Cesium.Cartesian3);c=r?Cesium.Cartesian3.subtract(t[o],s,new Cesium.Cartesian3):Cesium.Cartesian3.subtract(t[a],s,new Cesium.Cartesian3),c=Cesium.Cartesian3.normalize(c,c);var f=Cesium.Cartesian3.cross(c,h,new Cesium.Cartesian3);f=Cesium.Cartesian3.normalize(f,f);var p=new Cesium.Plane(f,0),d=Cesium.Plane.getPointDistance(p,s);e.push(new Cesium.ClippingPlane(f,d))}this.viewer.scene.globe.clippingPlanes=new Cesium.ClippingPlaneCollection({modelMatrix:Cesium.Matrix4.IDENTITY,planes:e,edgeWidth:1,edgeColor:Cesium.Color.RED,enabled:!0}),this._prepareWell(t),this._createWell(this.wellData)}},{key:"_prepareWell",value:function(t){var e=this.splitNum,n=t.length;if(0!=n){for(var i=this.excavateMinHeight-this.height,r=[],o=[],a=[],s=0;s<n;s++){var l=s==n-1?0:s+1,u=Cesium.Cartographic.fromCartesian(t[s]),c=Cesium.Cartographic.fromCartesian(t[l]),h=[u.longitude,u.latitude],f=[c.longitude,c.latitude];0==s&&(a.push(new Cesium.Cartographic(h[0],h[1])),o.push(Cesium.Cartesian3.fromRadians(h[0],h[1],i)),r.push(Cesium.Cartesian3.fromRadians(h[0],h[1],0)));for(var p=1;p<=e;p++){var d=Cesium.Math.lerp(h[0],f[0],p/e),g=Cesium.Math.lerp(h[1],f[1],p/e);s==n-1&&p==e||(a.push(new Cesium.Cartographic(d,g)),o.push(Cesium.Cartesian3.fromRadians(d,g,i)),r.push(Cesium.Cartesian3.fromRadians(d,g,0)))}}this.wellData={lerp_pos:a,bottom_pos:o,no_height_top:r}}}},{key:"_createWell",value:function(t){if(Boolean(this.viewer.terrainProvider._layers)){var e=this;this._createBottomSurface(t.bottom_pos);var n=Cesium.sampleTerrainMostDetailed(this.viewer.terrainProvider,t.lerp_pos);Cesium.when(n,function(n){for(var i=n.length,r=[],o=0;o<i;o++){var a=Cesium.Cartesian3.fromRadians(n[o].longitude,n[o].latitude,n[o].height);r.push(a)}e._createWellWall(t.bottom_pos,r)})}else this._createBottomSurface(t.bottom_pos),this._createWellWall(t.bottom_pos,t.no_height_top)}},{key:"_getMinHeight",value:function(t){for(var e=5e6,n=null,i=0;i<t.length;i++){var r=t[i].z;r<e&&(e=r,n=this._ellipsoidToLonLat(t[i]))}return n.altitude}},{key:"_ellipsoidToLonLat",value:function(t){var e=this.viewer.scene.globe.ellipsoid,n=new Cesium.Cartesian3(t.x,t.y,t.z),i=e.cartesianToCartographic(n),r=Cesium.Math.toDegrees(i.latitude),o=Cesium.Math.toDegrees(i.longitude),a=i.height;return{longitude:o,latitude:r,altitude:a}}},{key:"_createWellWall",value:function(t,e){for(var n=this._getMinHeight(t),i=[],r=[],o=0;o<e.length;o++)i.push(this._ellipsoidToLonLat(e[o]).altitude),r.push(n);var a=new Cesium.WallGeometry({positions:e,maximumHeights:i,minimumHeights:r}),s=Cesium.WallGeometry.createGeometry(a),l=new Cesium.Material({fabric:{type:"Image",uniforms:{image:this.wallImg}}}),u=new Cesium.MaterialAppearance({translucent:!1,flat:!0,material:l});this.wellWall=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:s,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.GREY)},id:"PitWall"}),appearance:u,asynchronous:!1}),this.viewer.scene.primitives.add(this.wellWall)}},{key:"_createBottomSurface",value:function(t){if(t.length){for(var e=this._getMinHeight(t),n=[],i=0;i<t.length;i++){var r=this._ellipsoidToLonLat(t[i]);n.push(r.longitude),n.push(r.latitude),n.push(e)}var o=new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArrayHeights(n)),perPositionHeight:!0}),a=Cesium.PolygonGeometry.createGeometry(o),s=new Cesium.Material({fabric:{type:"Image",uniforms:{image:this.bottomImg}}}),l=new Cesium.MaterialAppearance({translucent:!1,flat:!0,material:s});this.bottomSurface=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:a}),appearance:l,asynchronous:!1}),this.viewer.scene.primitives.add(this.bottomSurface)}}},{key:"_switchExcavate",value:function(t){t?(this.viewer.scene.globe.material=Cesium.Material.fromType("WaJue"),this.wellWall.show=!0,this.bottomSurface.show=!0):(this.viewer.scene.globe.material=null,this.wellWall.show=!1,this.bottomSurface.show=!1)}},{key:"_updateExcavateDepth",value:function(t){this.bottomSurface&&this.viewer.scene.primitives.remove(this.bottomSurface),this.wellWall&&this.viewer.scene.primitives.remove(this.wellWall);for(var e=this.wellData.lerp_pos,n=[],i=e.length,r=0;r<i;r++)n.push(Cesium.Cartesian3.fromRadians(e[r].longitude,e[r].latitude,this.excavateMinHeight-t));this.wellData.bottom_pos=n,this._createWell(this.wellData),this.viewer.scene.primitives.add(this.bottomSurface),this.viewer.scene.primitives.add(this.wellWall)}},{key:"clear",value:function(){this.viewer.scene.globe.clippingPlanes&&(this.viewer.scene.globe.clippingPlanes.enabled=!1,this.viewer.scene.globe.clippingPlanes.removeAll(),this.viewer.scene.globe.clippingPlanes.isDestroyed()||this.viewer.scene.globe.clippingPlanes.destroy(),this.viewer.scene.globe.clippingPlanes=null,this.viewer.scene.primitives.remove(this.bottomSurface),this.viewer.scene.primitives.remove(this.wellWall),this.bottomSurface=null,this.wellWall=null,this.viewer.scene.render())}},{key:"show",get:function(){return this._show},set:function(t){this._show=t,this.viewer.scene.globe.clippingPlanes&&(this.viewer.scene.globe.clippingPlanes.enabled=t,this._switchExcavate(t))}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._updateExcavateDepth(t)}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this._viewer=e,this._scene=e.scene,this._camera=this._scene.camera,this.context=this._scene.context,this.entities=[],this.startAnalyze=!1,this._showDome=!0,this._offsetDist=.2,this.activeShapePoints=[],this.defaultOption={terrainShadows:this._viewer.terrainShadows,depthTestAgainstTerrain:this._scene.globe.depthTestAgainstTerrain}}return i(t,[{key:"reset",value:function(){}},{key:"open",value:function(){this.startAnalyze||(this._viewer.terrainShadows=Cesium.ShadowMode.ENABLED,this.testOn=this._scene.globe.depthTestAgainstTerrain,this.testOn||(this._scene.globe.depthTestAgainstTerrain=!0),this._initialiseHandlers(),this.startAnalyze=!0)}},{key:"close",value:function(){this.startAnalyze=!1,this.cameraPosition=null,this.handler&&(this.handler.destroy(),this.handler=null),this._scene.shadowMap&&(this._scene.shadowMap.enabled=!1);var t=!0,e=!1,n=void 0;try{for(var i,r=this.entities[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;this._viewer.entities.remove(o)}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}this.entities=[],this.viewPoint=void 0,this.pointLightCamera=void 0,this._viewer.terrainShadows=this.defaultOption.terrainShadows,this._scene.globe.depthTestAgainstTerrain=this.defaultOption.depthTestAgainstTerrain}},{key:"setPosition",value:function(t,e){var n=this;if(!this.viewPoint){this._scene.globe.depthTestAgainstTerrain=!0;var i=new Cesium.CallbackProperty(function(){return n._showDome},!1),r=new Cesium.CallbackProperty(function(){return n.viewPoint?n.viewPoint:new Cesium.Cartesian3},!1);this.entities.push(this._viewer.entities.add({name:"Dome",position:r,ellipsoid:{radii:new Cesium.Cartesian3(e,e,e),maximumCone:Cesium.Math.PI_OVER_TWO,fill:!1,show:i,outlineColor:Cesium.Color.WHITE.withAlpha(.3),outlineWidth:4,slicePartitions:96,stackPartitions:96,outline:!0}}))}this.viewPoint=t,this.distance=e,this._createViewShad(t)}},{key:"_initialiseHandlers",value:function(){var t=this;this.handler=new Cesium.ScreenSpaceEventHandler(this._scene.canvas),this.handler.setInputAction(function(e){if(t.startAnalyze&&null!=t.cameraPosition){var n=t._scene.pickPosition(e.endPosition);if(Cesium.defined(n)){1!=t.activeShapePoints.length&&t.activeShapePoints.pop(),t.activeShapePoints.push(n);var i=Cesium.Cartesian3.distance(t.activeShapePoints[0],t.activeShapePoints[1]);t.shadowMap._pointLightRadius=i}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(function(e){if(t.startAnalyze&&null==t.cameraPosition){var n=t._scene.pickPosition(e.position);if(n){var i=!0,r=!1,o=void 0;try{for(var a,s=t.entities[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;t._viewer.entities.remove(l)}}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}t.entities=[],t.activeShapePoints=[];var u=t._viewer.scene.globe.ellipsoid,c=u.cartesianToCartographic(n),h=Cesium.Math.toDegrees(c.latitude),f=Cesium.Math.toDegrees(c.longitude),p=c.height+t._offsetDist,d=Cesium.Cartesian3.fromDegrees(f,h,p);t.cameraPosition=d,t._createViewShad(d),t._addEntity(d),t.activeShapePoints.push(d)}}},Cesium.ScreenSpaceEventType.LEFT_CLICK),this.handler.setInputAction(function(e){t.startAnalyze=!1,t.cameraPosition=null},Cesium.ScreenSpaceEventType.RIGHT_CLICK)}},{key:"_addEntity",value:function(t){var e=this,n=new Cesium.CallbackProperty(function(){return e.activeShapePoints},!1),i=new Cesium.CallbackProperty(function(){return e.activeShapePoints[e.activeShapePoints.length-1]},!1),r=new Cesium.CallbackProperty(function(){var t="";if(e.activeShapePoints.length>1){var n=Cesium.Cartesian3.distance(e.activeShapePoints[0],e.activeShapePoints[1]);t="距离:"+n.toFixed(2)+"米"}return t},!1),o=new Cesium.CallbackProperty(function(){return e._showDistance},!1),a=new Cesium.CallbackProperty(function(){var t=new Cesium.Cartesian3;if(e.activeShapePoints.length>1){var n=Cesium.Cartesian3.distance(e.activeShapePoints[0],e.activeShapePoints[1]);t=new Cesium.Cartesian3(n,n,n)}return t},!1),s=new Cesium.CallbackProperty(function(){return e._showDome},!1);this.entities.push(this._viewer.entities.add({name:"Dome",position:t,ellipsoid:{radii:a,maximumCone:Cesium.Math.PI_OVER_TWO,fill:!1,show:s,outlineColor:Cesium.Color.WHITE.withAlpha(.3),outlineWidth:4,slicePartitions:96,stackPartitions:96,outline:!0}})),this.entities.push(this._viewer.entities.add({position:t,point:{pixelSize:12,color:Cesium.Color.YELLOW,disableDepthTestDistance:Number.POSITIVE_INFINITY}})),this.entities.push(this._viewer.entities.add({polyline:{positions:n,show:o,width:2,clampToGround:!1,material:Cesium.Color.LIME,disableDepthTestDistance:Number.POSITIVE_INFINITY,classificationType:Cesium.ClassificationType.NONE}})),this.entities.push(this._viewer.entities.add({position:i,label:{show:o,text:r,pixelOffset:new Cesium.Cartesian2(30,-50),scale:.5,font:"32px 微软雅黑",fillColor:Cesium.Color.DEEPSKYBLUE,outlineColor:Cesium.Color.BLACK,outlineWidth:1,showBackground:!0,backgroundColor:Cesium.Color.BLACK.withAlpha(.9),backgroundPadding:new Cesium.Cartesian2(10,6),disableDepthTestDistance:Number.POSITIVE_INFINITY}}))}},{key:"_createViewShad",value:function(t){var e=this;if(!this.pointLightCamera){this.pointLightCamera=new Cesium.Camera(this._scene),this.pointLightCamera.position=t,this.shadowOptions={context:this.context,enabled:!0,isPointLight:!0,lightCamera:this.pointLightCamera,maximumDistance:500,cascadesEnabled:!1},this._scene.shadowMap=new Cesium.ShadowMap(this.shadowOptions);var n=this._scene.shadowMap;n.enabled=!0,n.debugShow=!0,n.maximumDistance=1e4,n._pointLightRadius=1,n._fitNearFar=!0,n.darkness=.3,n.debugShow=!1,n.debugFreezeFrame=!1,n.enabled=!0,n.size=1024,n.debugCascadeColors=!1,n.softShadows=!1,this.shadowMap=n,n.debugCreateRenderStates(),n.dirty=!0,null==this.normalShaderFun&&(this.normalShaderFun=Cesium.ShadowMapShader.createShadowReceiveFragmentShader),Cesium.ShadowMapShader.createShadowReceiveFragmentShader=function(t,n,i,r,o){return e._getUIShader(t,n,i,r,o)}}this.pointLightCamera.position=t,this.shadowMap._pointLightRadius=this.distance?this.distance:10}},{key:"_getUIShader",value:function(t,e,n,i,r){var o=this.normalShaderFun(t,e,n,i,r),a="if(visibility == 1.0){ \n          gl_FragColor.rgb *= vec3(0,1,0);  \n        } else { \n          gl_FragColor.rgb *= vec3(1,0,0); ; \n        }\n        ";return o.sources[o.sources.length-1]=o.sources[o.sources.length-1].replace("gl_FragColor.rgb *= visibility;",a),o}},{key:"showDistance",get:function(){return this._showDistance},set:function(t){this._showDistance=t}},{key:"offsetDist",get:function(){return this._offsetDist},set:function(t){this._offsetDist=t}},{key:"showDome",get:function(){return this._showDome},set:function(t){this._showDome=t}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,r){n(this,t),this.recordedBlobs=[],this._videoType="video/webm",this.mediaRecorder=null,this.stream=e.captureStream(),void 0!=i(this.stream)&&this.stream&&(this._mbps=r||2.5,this.video=document.createElement("video"),this.video.style.display="none")}return r(t,[{key:"start",value:function(){var t=this,e=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg","video/mp4"];if(!MediaRecorder.isTypeSupported(this._videoType)){console.log("No supported type found for MediaRecorder");for(var n in e)if(MediaRecorder.isTypeSupported(e[n])){this._videoType=e[n];break}}var i={mimeType:this._videoType,videoBitsPerSecond:1e6*this._mbps};this.recordedBlobs=[];try{this.mediaRecorder=new MediaRecorder(this.stream,i)}catch(t){return alert("MediaRecorder is not supported by this browser."),void console.error("Exception while creating MediaRecorder:",t)}console.log("Created MediaRecorder",this.mediaRecorder,"with options",i),this.mediaRecorder.onstop=function(){var e=new Blob(t.recordedBlobs,{type:t.supportedType});t.video.src=window.URL.createObjectURL(e)},this.mediaRecorder.ondataavailable=function(e){e.data&&e.data.size>0&&t.recordedBlobs.push(e.data)},this.mediaRecorder.start(100),console.log("MediaRecorder started",this.mediaRecorder)}},{key:"stop",value:function(){this.mediaRecorder.stop(),this.video.controls=!0}},{key:"save",value:function(t){var e=t||"recording.webm",n=new Blob(this.recordedBlobs,{type:this.supportedType}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,r.download=e,document.body.appendChild(r),r.click(),setTimeout(function(){document.body.removeChild(r),window.URL.revokeObjectURL(i)},100)}},{key:"handleDataAvailable",value:function(t){t.data&&t.data.size>0&&this.recordedBlobs.push(t.data)}},{key:"handleStop",value:function(t){var e=new Blob(this.recordedBlobs,{type:this.supportedType});this.video.src=window.URL.createObjectURL(e)}},{key:"mbps",get:function(){return this._mbps},set:function(t){this._mbps=t}},{key:"videoType",get:function(){return this._videoType},set:function(t){this._videoType=t}}]),t}();e.default=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t)}return i(t,[{key:"licSuccess",value:function(){}},{key:"licFail",value:function(){}}],[{key:"checkLicense",value:function(){return!0}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this.dataSources=new Cesium.CustomDataSource(Cesium.createGuid()),e.dataSources.add(this.dataSources)}return i(t,[{key:"add",value:function(t,e,n,i,r,o,a,s){var l=this,u=new Cesium.Cesium3DTileset({url:t,skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,loadSiblings:!1,cullWithChildrenBounds:!0});u.readyPromise.then(function(t){var s=Cesium.Cartographic.fromCartesian(t.boundingSphere.center),l=Cesium.Cartesian3.fromRadians(s.longitude,s.latitude,s.height),u=Cesium.Cartesian3.fromRadians(s.longitude,s.latitude,-250),c=Cesium.Cartesian3.subtract(u,l,new Cesium.Cartesian3);t.modelMatrix=Cesium.Matrix4.fromTranslation(c),viewer.scene.primitives.add(t);var h=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(e,n,i));t._root.transform=h,viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(r,o,a)})}),s&&s.length>0&&l.dataSources.entities.add({name:"",polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(s),width:8,material:new Cesium.PolylineGlowMaterialProperty({glowPower:.4,color:Cesium.Color.RED})}})}},{key:"removeResource",value:function(){this.dataSources&&this.dataSources.entities.removeAll()}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,i){n(this,t),this.viewer=e,this.className=i||"popupdialog",this.id=0,this.ctnList={}}return i(t,[{key:"add",value:function(t){var e=this,n=t.geometry,i="popup_"+(65536*(1+Math.random())|0).toString(16)+e.id++,r=document.createElement("div");r.className="bx-popup-ctn"+(this.className?" "+this.className:""),r.id=i,document.getElementById(e.viewer.container.id).appendChild(r);var o=t.content;r.innerHTML=e.createHtml(o.header,o.content,o.isclose),e.ctnList[i]=[n,r],e.render(),e.eventListener||(e.eventListener=function(t){e.render()},e.viewer.clock.onTick.addEventListener(e.eventListener)),t.isclose===!1||r.getElementsByClassName("bx-popup-close")&&r.getElementsByClassName("bx-popup-close").length>0&&(r.getElementsByClassName("bx-popup-close")[0].onclick=function(){e.close(r)}),t.callback}},{key:"render",value:function(){var t=this;for(var e in t.ctnList){var n=Cesium.SceneTransforms.wgs84ToWindowCoordinates(t.viewer.scene,t.ctnList[e][0]);n&&n.x&&n.y&&(Math.abs(n.x)>2*window.innerWidth||Math.abs(n.y)>2*window.innerHeight?t.ctnList[e][1].style.display="none":(t.ctnList[e][1].style.display="",t.ctnList[e][1].style.left=n.x+"px",t.ctnList[e][1].style.top=n.y+"px"))}}},{key:"createHtml",value:function(t,e,n){if(this.html)return this.html(t,e);var i="\n      "+(n===!1?"":'<div class="bx-popup-close"><i class="iconfont icon-guanbi"></i></div>')+'\n            <div class="divpoint-wrap">\n            <div class="divpoint-border">\n            <div class="divpoint-center">\n            <div class="bx-popup-header-ctn">\n            '+t+'\n            </div>\n            <div class="bx-popup-content-ctn" >\n            <div class="bx-popup-content" >\n            '+e+'\n            </div>\n            </div>\n            </div>\n            </div>\n            </div>\n            <div class="directional"></div>\n            ';return i}},{key:"close",value:function(t){t.remove(),delete this.ctnList[t.id],0===Object.keys(this.ctnList).length&&(this.viewer.clock.onTick.removeEventListener(this.eventListener),this.eventListener=null)}},{key:"closeAll",value:function(t){for(var e in this.ctnList)this.ctnList[e][1].remove();this.ctnList={},this.eventListener&&this.viewer.clock.onTick.removeEventListener(this.eventListener),this.eventListener=null}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t)}return i(t,[{key:"GetAzimuth",value:function(t,e,n,i){var r=0;if(t==n||e==i)return t==n?i>=e?90:270:n>=t?0:180;r=Math.atan((i-e)/(n-t));var o=Math.abs(180*r/Math.PI);return n>t?i>=e?o:360-o:i>=e?180-o:180+o}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.viewer=e,this.dataSources=new Cesium.CustomDataSource(Cesium.createGuid()),e.dataSources.add(this.dataSources),this.g_HLLTileSets=[]}return i(t,[{key:"add",value:function(t,e,n,i,r,o){for(var a=this,s=e.names,l=0;l<s.length;l++){var u=s[l],c=u.name,h=new Cesium.Cesium3DTileset({url:t+"/"+c+"/tileset.json",skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:1,immediatelyLoadDesiredLevelOfDetail:!1,loadSiblings:!1,cullWithChildrenBounds:!0});a.g_HLLTileSets.push(h),h.readyPromise.then(function(t){var e=Cesium.Matrix3.fromRotationZ(Cesium.Math.toRadians(o)),a=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(n,i,r)),s=Cesium.Matrix4.fromRotationTranslation(e);
Cesium.Matrix4.multiply(a,s,a),t._root.transform=a,viewer.scene.primitives.add(t)})}}},{key:"isshow",value:function(){if(this.g_HLLTileSets.length>0)for(var t=0;t<this.g_HLLTileSets.length;t++)this.g_HLLTileSets[t].show=!this.g_HLLTileSets[t].show;else;}},{key:"removeResource",value:function(){this.dataSources&&this.dataSources.entities.removeAll()}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),s=i(a),l=n(113),u=i(l),c=function(){function t(e){r(this,t),this.viewer=e,this.id=0,this.ctnList={},this.g_trailMatrial=[],this.dataSources=new Cesium.CustomDataSource(Cesium.createGuid()),e.dataSources.add(this.dataSources)}return o(t,[{key:"app",value:function(t,e,n){var i=new Cesium.EllipsoidSurfaceAppearance({material:new Cesium.Material({fabric:{type:"Water",uniforms:{normalMap:s.default.getResource("Assets/Images/waterNormals.jpg"),frequency:1e3,animationSpeed:.01,amplitude:10,angle:n,repeate:new Cesium.Cartesian2(t,e)}}}),vertexShaderSource:"attribute vec3 position3DHigh;\n            attribute vec3 position3DLow;\n            attribute vec2 st;\n            attribute float batchId;\n            varying vec3 v_positionMC;\n            varying vec3 v_positionEC;\n            varying vec2 v_st;\n            uniform float angle_4;\n            uniform vec2 repeate_5;\n            varying float v_angle;\n            void main()\n            {\n            vec4 p = czm_computePosition();\n            v_positionMC = position3DHigh + position3DLow;\n            v_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n            v_st = st;\n            v_st=repeate_5*v_st;\n            v_angle=angle_4;\n            gl_Position = czm_modelViewProjectionRelativeToEye * p;\n            }",fragmentShaderSource:"varying vec3 v_positionMC; \n                          varying vec3 v_positionEC; \n                          varying vec2 v_st;\n                varying float v_angle;\n                          void main()\n                          {\n                  czm_materialInput materialInput;\n                  vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n                  #ifdef FACE_FORWARD\n                    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n                  #endif\n                  //materialInput.s = v_st.s;\n                  //materialInput.st = v_st;\n                  materialInput.st = v_st;\n                  //materialInput.s = v_st.s-czm_frameNumber*0.001;\n                  float angle = v_angle;\n                  float s = cos(angle)*v_st.s-sin(angle)*v_st.t;\n                  float t = sin(angle)*v_st.s+cos(angle)*v_st.t;\n                  //materialInput.st.s = v_st.s-czm_frameNumber*0.001;\n                  materialInput.st.t=t;\n                  materialInput.st.s = s-czm_frameNumber*0.001;\n                  //materialInput.str = vec3(v_st, 0.0);\n                  materialInput.normalEC = normalEC;\n                  materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n                  vec3 positionToEyeEC = -v_positionEC;\n                  materialInput.positionToEyeEC = positionToEyeEC;\n                  //texture2D(image, vec2(st.s, fract(st.t - time)));\n                  czm_material material = czm_getMaterial(materialInput);\n                  #ifdef FLAT\n                    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n                  #else\n                    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n                    gl_FragColor.a=0.85;\n                  #endif\n                          }"});return i}},{key:"addCircleRipple",value:function(t,e){function n(){return a+=e.deviationR,a>=e.maxR&&(a=e.minR),a}function i(){return s+=e.deviationR,s>=e.maxR&&(s=e.minR),s}var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this,a=e.minR,s=e.minR,l=(o.dataSources.entities.add({id:e.id,name:"",position:Cesium.Cartesian3.fromDegrees(e.lon,e.lat,e.height),ellipse:{semiMinorAxis:new Cesium.CallbackProperty(n,!1),semiMajorAxis:new Cesium.CallbackProperty(n,!1),height:e.height,material:new Cesium.ImageMaterialProperty({image:e.imageUrl,repeat:new Cesium.Cartesian2(1,1),transparent:!0,color:new Cesium.CallbackProperty(function(){var t=1-a/e.maxR;return Cesium.Color.WHITE.withAlpha(t+.2)},!1)})}}),setTimeout(function(){o.dataSources.entities.add({name:"",position:Cesium.Cartesian3.fromDegrees(e.lon,e.lat,e.height),ellipse:{semiMinorAxis:new Cesium.CallbackProperty(i,!1),semiMajorAxis:new Cesium.CallbackProperty(i,!1),height:e.height,material:new Cesium.ImageMaterialProperty({image:e.imageUrl,repeat:new Cesium.Cartesian2(1,1),transparent:!0,color:new Cesium.CallbackProperty(function(){var t=1;return t=1-s/e.maxR,Cesium.Color.WHITE.withAlpha(t+.2)},!1)})}});clearTimeout(l)},e.eachInterval));r&&o.dataSources.entities.add({name:"",polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights([e.lon,e.lat,0,e.lon,e.lat,74]),width:8,material:new Cesium.PolylineGlowMaterialProperty({glowPower:.4,color:Cesium.Color.BLUE})}})}},{key:"addDynamicWall",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2e3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=this,s=!1,l=1,c=1,h=new Cesium.Color(0,0,1,.8),f=1,p=e+"-";null!=o&&(o.hasOwnProperty("repeatX")&&(l=o.repeatX,p+=l+"-"),o.hasOwnProperty("repeatY")&&(c=o.repeatY,p+=c+"-"),o.hasOwnProperty("horizontal")&&(f=o.horizontal,p+=f+"-"),o.hasOwnProperty("color")&&(h=o.color,p+=h.red+h.green+h.blue+h.alpha+"-"),o.hasOwnProperty("speed")&&(r=o.speed),o.hasOwnProperty("showTop")&&(s=o.showTop)),p+=r;var d=null;a.g_trailMatrial.hasOwnProperty(p)?d=a.g_trailMatrial[p]:(d=new u.default(p,h,e,r,l,c,f),Cesium.Material._materialCache.addMaterial(p,{fabric:{type:d.name,uniforms:{color:new Cesium.Color(1,1,1,1),image:d.image,repeat:new Cesium.Cartesian2(l,c),time:0,horizontal:f},source:Cesium.Material.WallLinkMaterialProperty},translucent:function(t){return!0}}),a.g_trailMatrial[p]=d);for(var g=[],m=[],v=0,y=0;y<n.length;y+=3)g[v]=n[y+2],m[v++]=n[y+2]+i;if(a.dataSources.entities.add({name:t,wall:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(n),material:d,minimumHeights:g,maximumHeights:m,outline:!1}}),s){for(var _=[],y=0;y<n.length;y+=3)_[y]=n[y],_[y+1]=n[y+1],_[y+2]=n[y+2]+i;a.dataSources.entities.add({polygon:{hierarchy:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(_)},outline:!1,outlineColor:Cesium.Color.WHITE.withAlpha(0),outlineWidth:2,material:Cesium.Color.GREEN.withAlpha(.8),fill:!0,perPositionHeight:!0,show:!0}})}}},{key:"remove",value:function(){this.dataSources&&(this.viewer.dataSources.remove(this.dataSources),this.dataSources=null)}}]),t}();e.default=c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;this._definitionChanged=new Cesium.Event,this._color=void 0,this.color=e,this.repeatX=r,this.repeatY=o,this._horizontal=a,this.duration=i,this.image=n,this.name=t,this._time=(new Date).getTime()};Object.defineProperties(n.prototype,{isConstant:{get:function(){return!1}},definitionChanged:{get:function(){return this._definitionChanged}},color:Cesium.createPropertyDescriptor("color")}),n.prototype.getType=function(t){return this.name},n.prototype.getValue=function(t,e){return Cesium.defined(e)||(e={}),e.color=Cesium.Property.getValueOrClonedDefault(this._color,t,Cesium.Color.WHITE,e.color),e.image=this.image,e.horizontal=this._horizontal,e.time=((new Date).getTime()-this._time)%this.duration/this.duration,e},n.prototype.equals=function(t){return this===t||t instanceof n&&Cesium.Property.equals(this._color,t._color)&&this.image===t.image&&this.duration===t.duration&&this.repeatX===t.repeatX&&this.repeatY===t.repeatY},Cesium.WallLinkMaterialProperty=n,Cesium.Material.WallLinkMaterialProperty="czm_material czm_getMaterial(czm_materialInput materialInput)\n\t\t\t\t\t\t\t\t\t\t\t  {\n\t\t\t\t\t\t\t\t\t\t\t\t   czm_material material = czm_getDefaultMaterial(materialInput);\n\t\t\t\t\t\t\t\t\t\t\t\t   vec2 st = repeat *materialInput.st;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t   vec4 colorImage  = texture2D(image, vec2(fract(st.s - time), st.t ));\n\t\t\t\t\t\t\t\t\t\t\t\t   if(horizontal<0.001)\n\t\t\t\t\t\t\t\t\t\t\t\t   {\n\t\t\t\t\t\t\t\t\t\t\t\t\t    colorImage =  texture2D(image, vec2(st.s, fract(st.t - time)));\n\t\t\t\t\t\t\t\t\t\t\t\t   }\n\t\t\t\t\t\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t\t\t\t\t\t   material.alpha = colorImage.a * color.a;\n\t\t\t\t\t\t\t\t\t\t\t\t   material.diffuse = (colorImage.rgb*0.7+color.rgb*0.3);\n\t\t\t\t\t\t\t\t\t\t\t\t   return material;\n\t\t\t\t\t\t\t\t\t\t\t   }",e.default=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),s=(i(a),function(){function t(e){r(this,t),this.viewer=e,this.dataSources=new Cesium.CustomDataSource(Cesium.createGuid()),e.dataSources.add(this.dataSources),this.g_trailMatrial=[],this.primitiveList=[]}return o(t,[{key:"addWasi",value:function(t,e,n){for(var i,r=this,o=8,a=1,s=a/20,l=[],u=[],c=[],h=2*a/(o-1),f=0,p=0;p<o;p++)for(var d=-a+p*h,g=0;g<o;g++){var m=-a+g*h;u.push(m),u.push(d);var v=Math.random()*s-s/2;u.push(v),l.push(g/(o-1)),l.push(p/(o-1))}for(var y=0;y<o-1;y++)for(var _=0;_<o-1;_++)c.push(f+y*o+_),c.push(f+y*o+_+1),c.push(f+(y+1)*o+_),c.push(f+y*o+_+1),c.push(f+(y+1)*o+_+1),c.push(f+(y+1)*o+_);i=new Cesium.Geometry({attributes:{position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:u}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:l})},indices:c,primitiveType:Cesium.PrimitiveType.TRIANGLES,boundingSphere:Cesium.BoundingSphere.fromVertices(u)});for(var x=[],h=n,w=0;w<t.length-1;w+=3){var b=t[w],C=t[w+1],S=t[w+2],M=t[w+3],E=t[w+4],I=t[w+5];x.push(b),x.push(C),x.push(S);for(var T=Math.sqrt((M-b)*(M-b)+(E-C)*(E-C)),P=0;P<T;){var m=b+(M-b)*P/T,d=C+(E-C)*P/T,v=S+(I-S)*P/T;x.push(m),x.push(d),x.push(v),P+=h}}for(var L=0,D=[],A=0;A<x.length;A+=3){for(var k=x[A],N=x[A+1],O=x[A+2],R=5+(x.length-A)/x.length*20,F=1+(x.length-A)/x.length*1,z=[],B=0;B<R;B++){var V=n/2+Math.random()*Math.random()*n/2,m=Math.random()*V-V/2,d=Math.random()*Math.random()*V-V/2,G=Math.random()*Math.PI,H=Math.random()*Math.random()*F+.5,v=O+2.5*Math.random()-1.5,j=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(k+m,N+d,v)),U=Math.random()*Math.PI/4-Math.PI/8,W=Math.random()*Math.PI/4-Math.PI/8,q=Cesium.Matrix3.fromRotationX(U),Y=Cesium.Matrix3.fromRotationY(W),X=Cesium.Matrix3.fromRotationZ(G),Z=Cesium.Matrix4.fromRotationTranslation(q),J=Cesium.Matrix4.fromRotationTranslation(Y),K=Cesium.Matrix4.fromRotationTranslation(X);Cesium.Matrix4.multiply(Z,J,Z),Cesium.Matrix4.multiply(Z,K,K);var $=Cesium.Matrix4.fromScale(new Cesium.Cartesian3(H,H,H)),Q=new Cesium.Matrix4;Cesium.Matrix4.multiply(K,$,Q),Cesium.Matrix4.multiply(j,Q,j);var tt=new Cesium.GeometryInstance({geometry:i,modelMatrix:j,attributes:{show:new Cesium.ShowGeometryInstanceAttribute(!0)},id:L});z.push(tt)}D.push(z)}for(var et=new Cesium.MaterialAppearance({renderState:{depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND,cull:{enabled:!1,face:Cesium.CullFace.BACK}},translucent:!0,material:new Cesium.Material({fabric:{type:"Image",uniforms:{image:e,fogNear:-100,fogFar:3e3}},source:"\n\t\t\t\t\t\t\t\t#define M_PI 3.1415926535897932384626433832795\n\t\t                        uniform float fogNear;\n\t\t\t\t\t\t\t\tuniform float fogFar;\n\t\t\t\t\t\t\t\tuniform sampler2D image;\n\t\t\t\t\t\t\t\tuniform vec2 st;\n\t\t\t\t\t\t\t\tvarying vec2 v_st;\n\t\t\t\t\t\t\t\tvarying float v_fogNear;\n\t\t\t\t\t\t\t\tvarying float v_fogFar;\n\t\t\t\t\t\t\t\tczm_material czm_getMaterial(czm_materialInput materialInput)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tv_fogNear=fogNear;\n\t\t\t\t\t\t\t\t\tv_fogFar=fogFar;\n\t\t\t\t\t\t\t\t\tv_st = st;\n\t\t\t\t\t\t\t\t\tvec4 colorImage = texture2D(image, st);\n\t\t\t\t\t\t\t\t\tmaterial.diffuse = colorImage.rgb;\n\t\t\t\t\t\t\t\t\tmaterial.alpha = colorImage.a;\n\t\t\t\t\t\t\t\t\t return material;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t"}),fragmentShaderSource:"varying vec3 v_positionMC; \n\t\t\t\t\t\t\tvarying vec3 v_positionEC; \n\t\t\t\t\t\t\tvarying vec2 v_st;\n\t\t\t\t\t\t\tuniform sampler2D v_image;\n\t\t\t\t\t\t\tvoid main()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tczm_materialInput materialInput;\t\n\t\t\t\t\t\t\t\tmaterialInput.st = v_st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t//uniform sampler2D map;\n\t\t\t\t\t\t\t\t//uniform vec3 fogColor;\t\t\t\t\n\t\t\t\t\t\t\t\t//varying vec2 vUv;\n                                    float depth = gl_FragCoord.z / gl_FragCoord.w;\n\t\t\t\t\t\t\t\t\tfloat fogFactor = smoothstep( -100.0, 5000.0, depth );\n\t\t\t\t\t\t\t\t\tczm_material material = czm_getMaterial(materialInput);\n\t\t\t\t\t\t\t\t\t//gl_FragColor = vec4(1.0,0.0,0.0,0.5);//vec4(material.diffuse, material.alpha);//texture2D( map, vUv );\n\t\t\t\t\t\t\t\t\tgl_FragColor = vec4(material.diffuse, material.alpha);//texture2D( map, vUv );\n\t\t\t\t\t\t\t\t\t//gl_FragColor.w *= pow( gl_FragCoord.z, 20.0 );\n\t\t\t\t\t\t\t\t   // gl_FragColor = mix( gl_FragColor, vec4( //69.0/255.0,132.0/255.0,180.0/255.0, gl_FragColor.w ),fogFactor );\n\t\t\t\t\t\t\t\t\t\n                                    //gl_FragColor=vec4(1.0,0.0,0.0,0.5);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}"}),nt=0;nt<D.length;nt++){var it=new Cesium.Primitive({geometryInstances:D[nt],appearance:et,show:!0});r.primitiveList.push(it),r.viewer.scene.primitives.add(it)}var rt=r.primitiveList.length,ot=0,at=0;viewer.scene.preUpdate.addEventListener(function(){ot++;var t=viewer.scene,e=t.frameState,n=e.frameNumber;if(n-at>1){ot>=rt&&(ot=0);for(var i=0;i<rt;i++)i<ot?r.primitiveList[i].show=!0:r.primitiveList[i].show=!1;at=n}})}},{key:"remove",value:function(){for(var t=this,e=0;e<t.primitiveList.length;e++)t.viewer.scene.primitives.remove(t.primitiveList[e])}},{key:"removeResource",value:function(){this.dataSources&&this.dataSources.entities.removeAll()}}]),t}());e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(26),s=i(a),l=function(){function t(e){r(this,t),this.viewer=e,this.dataSources=new Cesium.CustomDataSource(Cesium.createGuid()),e.dataSources.add(this.dataSources),this.g_trailMatrial=[]}return o(t,[{key:"addCaiKong",value:function(t,e){var n=this;$.get(t,{},function(t){for(var e=t,i=0;i<e.Map.length;i++){for(var r=e.Map[i],o=r.Name,a=r.Color.split(","),l=new Cesium.Color(parseFloat(a[0])/255,parseFloat(a[1])/255,parseFloat(a[2])/255),u=r.coords,c=u.split(","),h=[],f=[],p=0,d=0;d<c.length-3;d+=3){var g=parseFloat(c[d]),m=parseFloat(c[d+1]),v=parseFloat(c[d+2]);p++,f.push(g),f.push(m),f.push(v)}for(var d=0;d<f.length-3;d+=3){var g=f[d],m=f[d+1],v=f[d+2];h.push(fromLocal(g,m,v-938))}var y="ww",_=0,x=1,w=1,b=new Cesium.Color(0,0,1,.8),C=new Cesium.WallLinkMaterialProperty(y,b,s.default.getResource("Assets/Images/section.png"),2e3,x,w,_);Cesium.Material._materialCache.addMaterial(y,{fabric:{type:C.name,uniforms:{color:new Cesium.Color(1,1,1,1),image:C.image,repeat:new Cesium.Cartesian2(x,w),time:0,horizontal:_},source:Cesium.Material.WallLinkMaterialProperty},translucent:function(t){return!0}}),o.indexOf("工作面")!==-1?n.dataSources&&n.dataSources.entities.add({polygon:{hierarchy:{positions:h},perPositionHeight:!1,outline:!0,clampToGround:!0,material:C,stRotation:25,outlineColor:Cesium.Color.BLACK.withAlpha(1)}}):n.dataSources&&n.dataSources.entities.add({polygon:{hierarchy:{positions:h},perPositionHeight:!1,outline:!0,clampToGround:!0,material:l.withAlpha(.1),outlineColor:Cesium.Color.BLACK.withAlpha(1)}})}}),$.get(e,{},function(t){for(var e=t,i=0;i<e.Map.length;i++){var r=e.Map[i];if("MModel_Passage"==r.ModelType){for(var o=r.W,a=(r.H,r.XYZ,r.XYZ.split(";")),s=[],l=0;l<a.length;l++){var u=a[l].split(","),c=parseFloat(u[0]),h=parseFloat(u[1]),f=parseFloat(u[2]),p=LocalToDegree(c,h,f);s.push(p.x),s.push(p.y)}n.dataSources&&n.dataSources.entities.add({name:"",polyline:{positions:Cesium.Cartesian3.fromDegreesArray(s),width:o/2,material:Cesium.Color.BLACK.withAlpha(.3),clampToGround:!0}})}}})}},{key:"addGrowLine",value:function(t){this.dataSources&&this.dataSources.entities.add({name:"",polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(t),width:18,material:new Cesium.PolylineGlowMaterialProperty({glowPower:.4,color:Cesium.Color.RED})}})}},{key:"addTrailLine",value:function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=this,s=1,l=1,u=0,c=new Cesium.Color(0,0,1,.8),h=1,f=e+"-";null!=o&&(o.hasOwnProperty("repeatX")&&(s=o.repeatX,f+=s+"-"),o.hasOwnProperty("repeatY")&&(l=o.repeatY,f+=l+"-"),o.hasOwnProperty("horizontal")&&(h=o.horizontal,f+=h+"-"),o.hasOwnProperty("color")&&(c=o.color,f+=c.red+c.green+c.blue+c.alpha+"-"),o.hasOwnProperty("speed")&&(r=o.speed),o.hasOwnProperty("interpolationDis")&&(u=o.interpolationDis));var p=Cesium.Cartesian3.fromDegreesArrayHeights(n),d=[];if(u>0){for(var g=0;g<p.length-1;g++){var m=p[g],v=p[g+1],y=Cesium.Cartesian3.distance(m,v);if(d.push(m),y>u)for(var _=parseInt(y/u),x=(v.x-m.x)/_,w=(v.y-m.y)/_,b=(v.z-m.z)/_,C=1;C<_-1;C++){var S=m.x+C*x,M=m.y+C*w,E=m.z+C*b;d.push(new Cesium.Cartesian3(S,M,E))}}d.push(p[p.length-1])}f+=r;var I=null;a.g_trailMatrial.hasOwnProperty(f)?I=a.g_trailMatrial[f]:(I=new Cesium.WallLinkMaterialProperty(f,c,e,r,s,l),Cesium.Material._materialCache.addMaterial(f,{fabric:{type:I.name,uniforms:{color:new Cesium.Color(1,1,1,1),image:I.image,repeat:new Cesium.Cartesian2(s,l),time:0,horizontal:h},source:Cesium.Material.WallLinkMaterialProperty},translucent:function(t){return!0}}),a.g_trailMatrial[f]=I),this.dataSources.entities.add({name:t,polyline:{positions:d.length>0?d:p,material:I,width:i,outline:!1}})}},{key:"remove",value:function(){this.dataSources&&(this.viewer.dataSources.remove(this.dataSources),this.dataSources=null)}},{key:"removeResource",value:function(){this.dataSources&&this.dataSources.entities.removeAll()}}]),t}();e.default=l},function(e,n,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=r(26),h=o(l),f=function(){function e(t){a(this,e),this.scene=t,this._transformHandler=null,this._starting=!1,this.axisModel=null,this._isLeftDown=!1,this._meshName=null,this._primitive=null,this._tileset=null,this._transformEditor_Axis="transformEditor_Axis"}return s(e,[{key:"start",value:function(){this._transformHandler||(this._transformHandler=new Cesium.ScreenSpaceEventHandler(this.scene.canvas)),this._starting||(this._initialEvent(),this._starting=!0)}},{key:"stop",value:function(){this._starting=!1,this.axisModel&&this.scene.primitives.remove(this.axisModel),this._transformHandler||this._transformHandler.destroy(),this._ennableNavigation(!0)}},{key:"_ennableNavigation",value:function(t){this.scene.screenSpaceCameraController.enableRotate=t,this.scene.screenSpaceCameraController.enableTranslate=t,this.scene.screenSpaceCameraController.enableZoom=t,this.scene.screenSpaceCameraController.enableTilt=t,this.scene.screenSpaceCameraController.enableLook=t}},{key:"_initialEvent",value:function(){var t=this;this._transformHandler.setInputAction(function(e){t._handleClick(e)},Cesium.ScreenSpaceEventType.LEFT_CLICK),this._transformHandler.setInputAction(function(e){t._handledbClick(e)},Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this._transformHandler.setInputAction(function(e){t._handleleftDown(e)},Cesium.ScreenSpaceEventType.LEFT_DOWN),this._transformHandler.setInputAction(function(e){t._handleleftUp(e)},Cesium.ScreenSpaceEventType.LEFT_UP),this._transformHandler.setInputAction(function(e){t._handleMove(e)},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},{key:"getOffSet",value:function(t,e,n){var i=this._tileset?this.tileset._root.transform:this._primitive.modelMatrix,r=Cesium.Matrix4.inverseTransformation(i,new Cesium.Matrix4),o=this.scene.camera.position,a=Cesium.Matrix4.multiplyByPoint(r,o,new Cesium.Cartesian3),s=Cesium.Matrix4.multiplyByPoint(r,t,new Cesium.Cartesian3),l=Cesium.Matrix4.multiplyByPoint(r,e,new Cesium.Cartesian3),u=Cesium.Cartesian3.normalize(Cesium.Cartesian3.subtract(s,a,new Cesium.Cartesian3),new Cesium.Cartesian3),c=Cesium.Cartesian3.normalize(Cesium.Cartesian3.subtract(l,a,new Cesium.Cartesian3),new Cesium.Cartesian3),h=Cesium.Plane.fromPointNormal(Cesium.Cartesian3.ZERO,n),f=new Cesium.Ray(a,u),p=new Cesium.Ray(a,c),d=Cesium.IntersectionTests.rayPlane(f,h),g=Cesium.IntersectionTests.rayPlane(p,h);return{start:d,end:g}}},{key:"_handleMove",value:function(t){if((this._primitive||this._tileset)&&this._isLeftDown){var e=this.scene.pickPosition(t.startPosition),n=this.scene.pickPosition(t.endPosition),i=this._tileset?this.tileset._root.transform:this._primitive.modelMatrix,r=this,o=function(t,o,a){var s=r.getOffSet(e,n,t),l=Cesium.Cartesian3.subtract(s.end,s.start,new Cesium.Cartesian3);l[o]=0,l[a]=0;var u=Cesium.Matrix4.multiplyByTranslation(i,l,new Cesium.Matrix4);r._tileset?r.tileset._root.transform=u:r._primitive.modelMatrix=u,r.axisModel.modelMatrix=u},a=function(t,o,a){var s=r.getOffSet(e,n,t),l=(s.start[o]*s.end[a]-s.start[a]*s.end[o])/(s.start[o]*s.end[o]+s.start[a]*s.end[a]),u=Cesium.Quaternion.fromAxisAngle(t,Math.atan(l)),c=Cesium.Matrix3.fromQuaternion(u),h=Cesium.Matrix4.multiplyByMatrix3(i,c,new Cesium.Matrix4);r._tileset?r.tileset._root.transform=h:r._primitive.modelMatrix=h,r.axisModel.modelMatrix=h};switch(this._meshName&&n&&this._ennableNavigation(!1),this._meshName){case"YArrow_1":o(Cesium.Cartesian3.UNIT_Z,"y","z");break;case"XArrow_1":o(Cesium.Cartesian3.UNIT_X,"x","z");break;case"ZArrow_1":o(Cesium.Cartesian3.UNIT_Y,"x","y");break;case"YAxis_1":a(Cesium.Cartesian3.UNIT_X,"y","z");break;case"XAxis_1":a(Cesium.Cartesian3.UNIT_Y,"z","x");break;case"ZAxis_1":a(Cesium.Cartesian3.UNIT_Z,"x","y")}}}},{key:"_handleleftDown",value:function(t){this.scene.pickPosition(t.position);var e=this.scene.pick(t.position);Cesium.defined(e)&&Cesium.defined(e.mesh)&&(this._meshName=e.mesh.name,this._isLeftDown=!0,this._ennableNavigation(!1))}},{key:"_handleleftUp",value:function(t){this._ennableNavigation(!0),this._isLeftDown=!1,this._meshName=null}},{key:"_handleClick",value:function(t){if(this._starting&&!this._tileset){var e=this.scene.pick(t.position);if(Cesium.defined(e)&&e.primitive){if(e.id===this._transformEditor_Axis)return;this._primitive=e.primitive;var n=this._primitive.boundingSphere.radius;this._addAXIS(this._primitive.modelMatrix,n)}}}},{key:"_addAXIS",value:function(t,e){this.axisModel&&this.scene.primitives.remove(this.axisModel),this.axisModel=this.scene.primitives.add(Cesium.Model.fromGltf({url:h.default.getResource("Assets/models/AXIS.gltf"),modelMatrix:t,scale:e,id:this._transformEditor_Axis,colorBlendMode:Cesium.ColorBlendMode.HIGHLIGHT}))}},{key:"_handledbClick",value:function(){this.stop()}},{key:"_translate",value:function(e,n,r){var o=c(e),a=Cesium.Cartesian3.subtract(o.end,o.start,new Cesium.Cartesian3);a[n]=0,a[r]=0;var s=Cesium.Matrix4.multiplyByTranslation(u,a,new Cesium.Matrix4);t.modelMatrix=s,i.modelMatrix=t.modelMatrix}},{key:"tileset",get:function(){return this._tileset},set:function(t){this._tileset=t;var e=this._tileset.boundingSphere.radius;this._addAXIS(t._root.transform,e/8)}}]),e}();n.default=f},function(t,e){"use strict";Cesium.Model.test=function(){console.log("测试成")}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(119),s=i(a),l=function(){function t(e){r(this,t),this.tileset=e,this.tileset._matrixEditor=new s.default(e),this.matrixEditor=this.tileset._matrixEditor}return o(t,[{key:"position",get:function(){var t=this.tileset._root.customTransform.position,e=Cesium.Math.toDegrees(t.latitude),n=Cesium.Math.toDegrees(t.longitude),i=t.height;return[e,n,i]},set:function(t){this.matrixEditor.translateTo(t[0],t[1],t[2])}},{key:"scale",get:function(){return this.tileset._root.customTransform.scale},set:function(t){this.matrixEditor.scale(t)}},{key:"rotate",get:function(){var t=this.tileset._root.customTransform.rotation;return[t.x,t.y,t.z]},set:function(t){this.matrixEditor.rotate(t[0],t[1],t[2])}},{key:"height",get:function(){var t=this.tileset._root.customTransform.position;return t.height},set:function(t){var e=this.position;this.position=[e[0],e[1],t]}}]),t}(),u=function(){function t(e){r(this,t),this.tileset=e,this.enabled=!0,this.edgeStylingEnabled=!0,this.edgeWidth=2,this.edgeColor=Cesium.Color.WHITE,this._polygon=[],this._heightPlane=[],this._clipHeight=null,this._rotateX=0,this._rotateY=0,this._rotateZ=0}return o(t,[{key:"createHeightPlane",value:function(t){if(this.tileset.ready){var e=new Cesium.ClippingPlaneCollection({planes:[new Cesium.ClippingPlane(new Cesium.Cartesian3(0,0,-1),t)],edgeWidth:this.edgeWidth,edgeColor:this.edgeColor,enabled:this.enabled});this.tileset.clippingPlanes=e;var n=this.tileset.clippingPlanes.modelMatrix,i=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromRotationY(Cesium.Math.toRadians(this._rotateX))),r=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromRotationX(Cesium.Math.toRadians(this._rotateY))),o=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromRotationX(Cesium.Math.toRadians(this._rotateZ)));Cesium.Matrix4.multiply(n,i,n),Cesium.Matrix4.multiply(n,r,n),Cesium.Matrix4.multiply(n,o,n),this.tileset.clippingPlanes.modelMatrix=n}}},{key:"createclippingPlanes",value:function(t){for(var e=t.length,n=[],i=0;i<e;++i){var r=(i+1)%e,o=Cesium.Cartesian3.add(t[i],t[r],new Cesium.Cartesian3);o=Cesium.Cartesian3.multiplyByScalar(o,.5,o);var a=Cesium.Cartesian3.normalize(o,new Cesium.Cartesian3),s=Cesium.Cartesian3.subtract(t[r],o,new Cesium.Cartesian3);s=Cesium.Cartesian3.normalize(s,s);var l=Cesium.Cartesian3.cross(s,a,new Cesium.Cartesian3);l=Cesium.Cartesian3.normalize(l,l);var u=new Cesium.Plane(l,0),c=Cesium.Plane.getPointDistance(u,o);n.push(new Cesium.ClippingPlane(l,c))}return n}},{key:"clear",value:function(){this.tileset.clippingPlanes.removeAll(),this._polygon=[]}},{key:"polygon",get:function(){return this._polygon},set:function(t){if(t.length>0){var e=Cesium.Cartesian3.fromDegreesArrayHeights(t),n=this.createclippingPlanes(e);this.tileset.clippingPlanes=new Cesium.ClippingPlaneCollection({planes:n,edgeWidth:this.edgeWidth,edgeColor:this.edgeColor,enabled:this.enabled}),this._polygon=t}}},{key:"clipHeight",get:function(){return this._clipHeight},set:function(t){if(0==this._heightPlane.length){if(this.tileset.ready)this.createHeightPlane(t);else{var e=this;this.tileset.readyPromise.then(function(n){e.createHeightPlane(t)})}this._heightPlane=this.tileset.clippingPlanes}else for(var n=0;n<this._heightPlane.length;++n){var i=this._heightPlane.get(n);i.distance=t}this._clipHeight=t}},{key:"rotateX",get:function(){return this._rotateX},set:function(t){var e=this.tileset.clippingPlanes;if(e){var n=e.modelMatrix,i=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromRotationX(Cesium.Math.toRadians(t)));Cesium.Matrix4.multiply(n,i,n),e.modelMatrix=n}this._rotateX=t}},{key:"rotateY",get:function(){return this._rotateY},set:function(t){var e=this.tileset.clippingPlanes;if(e){var n=e.modelMatrix,i=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromRotationY(Cesium.Math.toRadians(t)));Cesium.Matrix4.multiply(n,i,n),e.modelMatrix=n}this._rotateY=t}},{key:"rotateZ",get:function(){return this._rotateZ},set:function(t){var e=this.tileset.clippingPlanes;if(e){var n=e.modelMatrix,i=Cesium.Matrix4.fromRotationTranslation(Cesium.Matrix3.fromRotationZ(Cesium.Math.toRadians(t)));Cesium.Matrix4.multiply(n,i,n),e.modelMatrix=n}this._rotateZ=t}}]),t}();Object.defineProperties(Cesium.Cesium3DTileset.prototype,{showBound:{get:function(){return this._showBound},set:function(t){t!=this._showBound&&(!this.ready&&t?this.readyPromise.then(function(t){t.createBound()}):this.setBoundVisible(t),this._showBound=t)}},boundColor:{get:function(){return this._showBound},set:function(t){this._showBound=t}},transformer:{get:function(){return this._transformer||(this._transformer=new l(this)),this._transformer}},clippingTool:{get:function(){return this._clippingPolygon||(this._clippingPolygon=new u(this)),this._clippingPolygon}},maxVal:{get:function(){return this._maxVal},set:function(t){this._maxVal=t;var e=[],n=this._maxVal-10,i=this._maxVal-20;e.push(["${z} >= "+this._maxVal,"color('red')"]),e.push(["${z} >= "+n,"color('yellow')"]),e.push(["${z} >= "+i,"color('blue')"]),e.push(["true","color('green')"]),this.style=new Cesium.Cesium3DTileStyle({pointSize:2,color:{conditions:e}})}},psize:{get:function(){return this._psize},set:function(t){this._psize=t,this.style||(this.style=new Cesium.Cesium3DTileStyle),this.style.pointSize=t}}})},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.tileset=e,this._transformInitialize()}return i(t,[{key:"rotate",value:function(t,e,n){var i=this.tileset._root.customTransform;void 0===t&&(t=i.rotation.x),void 0===e&&(e=i.rotation.y),void 0===n&&(n=i.rotation.z);var r=Cesium.Matrix3.fromHeadingPitchRoll(new Cesium.HeadingPitchRoll(Cesium.Math.toRadians(n),Cesium.Math.toRadians(e),Cesium.Math.toRadians(t))),o=Cesium.Matrix4.fromRotationTranslation(r,void 0,void 0);i.matrix.rotation=o,this._transform(),i.rotation.x=t,i.rotation.y=e,this.tileset._root.customTransform.rotation.z=n}},{key:"resetRotation",
value:function(){this.tileset._root.customTransform.matrix.rotation=Cesium.Matrix4.IDENTITY,this.tileset._root.customTransform.rotation={x:0,y:0,z:0},this._transform()}},{key:"scale",value:function(t){var e=Cesium.Matrix4.fromScale(new Cesium.Cartesian3(t,t,t));this.tileset._root.customTransform.matrix.scale=e,this.tileset._root.customTransform.scale=t,this._transform()}},{key:"resetScale",value:function(){this.tileset._root.customTransform.matrix.scale=Cesium.Matrix4.IDENTITY,this.tileset._root.customTransform.scale=1,this._transform()}},{key:"translateTo",value:function(t,e,n){var i=this.tileset._root.customTransform.position,r=Cesium.Cartesian3.fromRadians(i.originalLongitude,i.originalLatitude,i.originalHeight),o=Cesium.Cartesian3.fromDegrees(e,t,n),a=Cesium.Cartesian3.subtract(o,r,new Cesium.Cartesian3);this.tileset.modelMatrix=Cesium.Matrix4.fromTranslation(a),i.latitude=Cesium.Math.toRadians(t),i.longitude=Cesium.Math.toRadians(e),i.height=n}},{key:"resetTranslation",value:function(){var t=this.tileset._root.customTransform.position;t.latitude=t.originalLatitude,t.longitude=t.originalLongitude,t.height=t.originalHeight}},{key:"_translate",value:function(t,e,n){var i=Cesium.Cartographic.fromCartesian(tileset.boundingSphere.center),r=Cesium.Cartesian3.fromRadians(i.longitude,i.latitude,0),o=Cesium.Cartesian3.fromRadians(i.longitude+e,i.latitude+t,n),a=Cesium.Cartesian3.subtract(o,r,new Cesium.Cartesian3);Cesium.Matrix4.multiply(this.tileset.modelMatrix,Cesium.Matrix4.fromTranslation(a),this.tileset.modelMatrix)}},{key:"_transform",value:function(){var t=new Cesium.Matrix4;Cesium.Matrix4.multiply(this.tileset._root.customTransform.matrix.origin,this.tileset._root.customTransform.matrix.rotation,t),Cesium.Matrix4.multiply(t,this.tileset._root.customTransform.matrix.scale,t),Cesium.Matrix4.multiply(t,this.tileset._root.customTransform.matrix.translation,this.tileset._root.transform)}},{key:"_transformInitialize",value:function(){var t=Cesium.Cartographic.fromCartesian(this.tileset.boundingSphere.center);this.tileset._root.customTransform={matrix:{origin:this.tileset._root.transform.clone(),rotation:Cesium.Matrix4.IDENTITY,translation:Cesium.Matrix4.IDENTITY,scale:Cesium.Matrix4.IDENTITY},rotation:{x:0,y:0,z:0},scale:1,position:{originalLatitude:t.latitude,originalLongitude:t.longitude,originalHeight:t.height,height:t.height,latitude:t.latitude,longitude:t.longitude}}}}]),t}();e.default=r},function(t,e){"use strict";function n(t){var e,n=33746824,r=33554054;switch(t.layer){case"vec":default:e="http://online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles="+(t.bigfont?"ph":"pl")+"&scaler = 1 & p = 1";break;case"img_d":e="http://shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46";break;case"img_z":e="http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles="+(t.bigfont?"sh":"sl")+"&v=020";break;case"custom":t.customid=t.customid||"midnight",e="http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid="+t.customid;break;case"time":e="http://its.map.baidu.com:8002/traffic/TrafficTileService?x={x}&y={y}&level={z}&time="+(new Date).getTime()+"&label=web2D&v=017"}this._url=e,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=18;var a=new i(-r,-n),s=new i(r,n);this._tilingScheme=new o({rectangleSouthwestInMeters:a,rectangleNortheastInMeters:s}),this._credit=void 0,this._rectangle=this._tilingScheme.rectangle,this._ready=!0}Object.defineProperty(e,"__esModule",{value:!0});var i=Cesium.Cartesian2,r=Cesium.DeveloperError,o=Cesium.WebMercatorTilingScheme,a=Cesium.ImageryProvider;Object.defineProperties(n.prototype,{url:{get:function(){return this._url}},token:{get:function(){return this._token}},proxy:{get:function(){return this._proxy}},tileWidth:{get:function(){if(!this._ready)throw new r("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new r("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new r("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new r("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new r("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new r("rectangle must not be called before the imagery provider  is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new r("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}}),n.prototype.getTileCredits=function(t,e,n){},n.prototype.requestImage=function(t,e,n){if(!this._ready)throw new r("requestImage must not be called before the imagery provider is ready.");var i=this._tilingScheme.getNumberOfXTilesAtLevel(n),o=this._tilingScheme.getNumberOfYTilesAtLevel(n),s=this._url.replace("{x}",t-i/2).replace("{y}",o/2-e-1).replace("{z}",n).replace("{s}",Math.floor(10*Math.random()));return a.loadImage(this,s)},e.default=n},function(e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o={ENLARGE:0,NARROW:1,LEFT_ROTATE:2,RIGHT_ROTATE:3,TOP_ROTATE:4,BOTTOM_ROTATE:5},a=function(){function e(t){var n=this;i(this,e),this.viewer=t,this.flags={moveForward:!1,moveBackward:!1,moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1},this._enable=!1,this.l=this.speedRatio=150,this.u=this.dirStep=25,this.c=this.rotateStep=1,this.h=this.minPitch=.1,this.d=this.maxPitch=.95;var r=t.scene.canvas;r.setAttribute("tabindex","0"),r.onclick=function(){r.focus()},document.addEventListener("keydown",function(t){if(n._enable){var e=n.getFlagForKeyCode(t.keyCode);void 0!==e&&(n.flags[e]=!0)}},!1),document.addEventListener("keyup",function(t){if(n._enable){var e=n.getFlagForKeyCode(t.keyCode);void 0!==e&&(n.flags[e]=!1)}},!1),this.handler=new Cesium.ScreenSpaceEventHandler(t.scene.canvas),this.handler.setInputAction(function(t){n._enable&&(t>0?(n.speedRatio=l*=.9,n.rotateStep=n.c*=1.1,n.dirStep=n.u*=.9):(n.speedRatio=n.l*=1.1,n.rotateStep=n.c*=.9,n.dirStep=n.u*=1.1))},Cesium.ScreenSpaceEventType.WHEEL)}return r(e,[{key:"bind",value:function(e){this._enable||(this._enable=!0,Cesium.defined(e)&&(t.speedRatio=l=e.speedRatio||l,t.dirStep=u=e.dirStep||u,t.rotateStep=c=e.rotateStep||c,t.minPitch=h=e.minPitch||h,t.maxPitch=d=e.maxPitch||d),this.viewer.clock.onTick.addEventListener(this.cameraFunc,this))}},{key:"unbind",value:function(){this._enable&&(this._enable=!1,this.viewer.clock.onTick.removeEventListener(this.cameraFunc,this))}},{key:"destroy",value:function(){this.unbind(),this.handler.destroy()}},{key:"getFlagForKeyCode",value:function(t){switch(t){case"W".charCodeAt(0):return"moveForward";case"S".charCodeAt(0):return"moveBackward";case"D".charCodeAt(0):return"moveRight";case"A".charCodeAt(0):return"moveLeft";case"Q".charCodeAt(0):return"moveUp";case"E".charCodeAt(0):return"moveDown";case 38:this.rotateCamera(o.TOP_ROTATE);break;case 37:this.rotateCamera(o.LEFT_ROTATE);break;case 39:this.rotateCamera(o.RIGHT_ROTATE);break;case 40:this.rotateCamera(o.BOTTOM_ROTATE);break;case"I".charCodeAt(0):case 104:this.moveCamera(o.ENLARGE);break;case"K".charCodeAt(0):case 101:this.moveCamera(o.NARROW);break;case"J".charCodeAt(0):case 100:this.moveCamera(o.LEFT_ROTATE);break;case"L".charCodeAt(0):case 102:this.moveCamera(o.RIGHT_ROTATE);break;case"U".charCodeAt(0):case 103:this.moveCamera(o.TOP_ROTATE);break;case"O".charCodeAt(0):case 105:this.moveCamera(o.BOTTOM_ROTATE)}}},{key:"moveForward",value:function(t){this.viewer.camera.moveForward(t)}},{key:"cameraFunc",value:function(t){var e=this.viewer.camera,n=this.viewer.scene.globe.ellipsoid.cartesianToCartographic(e.position).height,i=Math.abs(n/this.l);this.flags.moveForward&&this.moveForward(i),this.flags.moveBackward&&this.moveForward(-i),this.flags.moveUp&&e.moveUp(i),this.flags.moveDown&&e.moveDown(i),this.flags.moveLeft&&e.moveLeft(i),this.flags.moveRight&&e.moveRight(i)}},{key:"resetCameraPos",value:function(t){t&&(this.viewer.scene.camera.position=t.position,this.viewer.scene.camera.direction=t.direction,this.viewer.scene.camera.right=t.right,this.viewer.scene.camera.up=t.up)}},{key:"limitAngle",value:function(t,e,n){var i=Cesium.Cartesian3.dot(t,Cesium.Cartesian3.normalize(e,new Cesium.Cartesian3));return!("up"==n&&i<this.h||"down"==n&&i>this.d)}},{key:"getCenter1",value:function(){var t=this.viewer.scene,e=this.viewer.camera,n=new Cesium.Cartesian2,i=new Cesium.Cartesian3;n.x=t.canvas.clientWidth/2,n.y=t.canvas.clientHeight/2;var r=e.pickEllipsoid(n,t.globe.ellipsoid,i);return r}},{key:"getCenter",value:function(t,e){var n=t.scene,i=this.m(n),r=i;if(!Cesium.defined(r)){var o=n.globe,a=n.camera.positionCartographic.clone(),s=o.getHeight(a);a.height=s||0,r=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a)}var l=this.o(r);return l}},{key:"m",value:function(t){var e=t.canvas,n=new Cesium.Cartesian2(e.clientWidth/2,e.clientHeight/2),i=t.camera.getPickRay(n);return t.globe.pick(i,t)||t.camera.pickEllipsoid(n)}},{key:"o",value:function(t){var e=Cesium.Cartographic.fromCartesian(t),n={};return n.y=this.n(Cesium.Math.toDegrees(e.latitude),6),n.x=this.n(Cesium.Math.toDegrees(e.longitude),6),n.z=this.n(e.height,2),n}},{key:"n",value:function(t,e){return Number(t.toFixed(e||0))}},{key:"computedNewPos",value:function(t,e,n){var i=t.position,r=this.getCenter(this.viewer);if(r){var o=Cesium.Cartesian3.fromDegrees(r.x,r.y,r.z);if(o){var a=Cesium.Cartesian3.distance(o,i),s=a/100;s=n?s*this.c:s;var l={},u=new Cesium.Ray(i,e);if(l.position=Cesium.Ray.getPoint(u,s),l.direction=t.direction,l.right=t.right,l.up=t.up,n){var c=Cesium.Cartesian3.normalize(Cesium.Cartesian3.subtract(l.position,o,new Cesium.Cartesian3),new Cesium.Cartesian3);u=new Cesium.Ray(o,c),l.position=Cesium.Ray.getPoint(u,a),l.direction=Cesium.Cartesian3.negate(c,new Cesium.Cartesian3),l.up=Cesium.Cartesian3.normalize(l.position,new Cesium.Cartesian3),l.right=Cesium.Cartesian3.cross(l.direction,l.up,new Cesium.Cartesian3)}return l}}}},{key:"moveCamera",value:function(t){var e,n=this.viewer.scene.camera;switch(t){case o.ENLARGE:e=this.computedNewPos(n,n.direction);break;case o.NARROW:e=this.computedNewPos(n,Cesium.Cartesian3.negate(n.direction,new Cesium.Cartesian3));break;case o.LEFT_ROTATE:e=this.computedNewPos(n,Cesium.Cartesian3.negate(n.right,new Cesium.Cartesian3),!0);break;case o.RIGHT_ROTATE:e=this.computedNewPos(n,n.right,!0);break;case o.TOP_ROTATE:var i=this.limitAngle(Cesium.clone(n.up),Cesium.clone(n.position),"up");if(!i)return;e=this.computedNewPos(n,Cesium.clone(n.up),!0);break;case o.BOTTOM_ROTATE:var i=this.limitAngle(Cesium.clone(n.up),Cesium.clone(n.position),"down");if(!i)return;e=this.computedNewPos(n,Cesium.Cartesian3.negate(n.up,new Cesium.Cartesian3),!0)}e&&this.resetCameraPos(e)}},{key:"rotateCamera",value:function(t){var e=[0,0],n=this.viewer.scene.canvas.clientWidth,i=this.viewer.scene.canvas.clientHeight,r=(n+i)/this.u;switch(t){case o.LEFT_ROTATE:e=[-r*n/i,0];break;case o.RIGHT_ROTATE:e=[r*n/i,0];break;case o.TOP_ROTATE:e=[0,r];break;case o.BOTTOM_ROTATE:e=[0,-r];break;default:return}var a=e[0]/n,s=e[1]/i,l=this.viewer.camera;l.lookRight(.05*a),l.lookUp(.05*s);var u=l.direction,c=Cesium.Cartesian3.normalize(l.position,new Cesium.Cartesian3),h=Cesium.Cartesian3.cross(u,c,new Cesium.Cartesian3);c=Cesium.Cartesian3.cross(h,u,new Cesium.Cartesian3),l.up=c,l.right=h}},{key:"enable",get:function(){return this._enable},set:function(t){t?this.bind():this.unbind()}}]),e}();n.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.HeatMapOpt=e.HeatMapLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(123),s=i(a);e.HeatMapLayer=function(){function t(e){r(this,t),this._heatMapOption=e,this._heatMapLayer=null,this._zAxisHeight=null,this._zoomLevel=[0,25e3,5e4,1e5,225e3,3e5,5e5,75e4,1e6,25e5,375e4,5e6,75e5,1e7,2e7,5e7,1e8,25e7,5e8],this._zoomRadius=[1,1.25,1.5,2,2.25,3,5,7.5,10,12.5,13.75,15,17.5,20,25,27.5,35,50]}return o(t,[{key:"_calcBound",value:function(t){for(var e=[],n=[],i=void 0,r=void 0,o=void 0,a=void 0,s=0;s<t.length;s++)e.push(t[s].lon),n.push(t[s].lat);return i=Math.min.apply(null,e),r=Math.min.apply(null,n),o=Math.max.apply(null,e)>=178.5?178.5:Math.max.apply(null,e),a=Math.max.apply(null,n),{west:i,south:r,east:o,north:a}}},{key:"_formatPoints",value:function(t){return t.map(function(t){return{x:t.lon,y:t.lat,value:t.value}})}},{key:"_updateFllowCamera",value:function(){var t=this;this.destroyItem();var e=this._viewer.camera,n=e.positionCartographic.height/1,i=JSON.parse(JSON.stringify(this._heatMapParams));this._zAxisHeight=n;for(var r=0;r<this._zoomLevel.length;r++)this._zoomLevel[r]<n&&n<this._zoomLevel[r+1]&&(i.heatmapoptions.radius=this._zoomRadius[r]*this._heatMapParams.heatmapoptions.radius/1);var o=new s.default(i);this._heatMapLayer=this._viewer.imageryLayers.addImageryProvider(o),this._heatMapLayer.show=!0,e.moveEnd.addEventListener(this._moveEnd=function(){var n=e.positionCartographic.height/1;if(n>16293756)return t.destroyItem(),void t._create();for(var i=0;i<t._zoomLevel.length;i++)null===t._zAxisHeight||void 0===t._zAxisHeight||0===t._zAxisHeight?(t._zAxisHeight=n,t._updateFllowCamera()):t._zoomLevel[i]<t._zAxisHeight&&t._zAxisHeight<t._zoomLevel[i+1]&&(n<t._zoomLevel[i]||n>t._zoomLevel[i+1])&&(t._zAxisHeight=n,t._updateFllowCamera())})}},{key:"addToMap",value:function(t){this._viewer=t,this._create()}},{key:"getHeatMapOpt",value:function(){return this._heatMapOption}},{key:"update",value:function(t){this.destroyItem(),this._heatMapOption=t,this._create()}},{key:"_create",value:function(){this.destroyItem();var t=this._calcBound(this._heatMapOption.points),e={min:this._heatMapOption.limitMin,max:this._heatMapOption.limitMax,points:this._formatPoints(this._heatMapOption.points)};this._heatMapParams={heatmapoptions:{backgroundColor:"rgba(0,0,0,0)",radius:this._heatMapOption.radius,blur:this._heatMapOption.blur,gradient:this._heatMapOption.gradient,maxOpacity:this._heatMapOption.opacity},bounds:t,data:e},this._updateFllowCamera()}},{key:"destroyItem",value:function(){null!==this._heatMapLayer&&(this._heatMapLayer.show=!1,this._viewer.imageryLayers.remove(this._heatMapLayer),this._viewer.camera.moveEnd.removeEventListener(this._moveEnd),this._heatMapLayer=null)}}]),t}(),e.HeatMapOpt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments[2],o=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.8,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.85;r(this,t),this.points=e,this.radius=n,this.limitMin=i,this.limitMax=o,this.gradient=a,this.opacity=s,this.blur=l}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(124),s=i(a),l=(Cesium.Credit,Cesium.defaultValue),u=Cesium.defined,c=Cesium.DeveloperError,h=function(){function t(e){r(this,t),this.fun(e)}return o(t,[{key:"fun",value:function(t){function e(t){t instanceof HTMLVideoElement&&(h._dynamic=!0,h._dynamicTime=t.currentTime),h._ready=!0,h._readyPromise.resolve(!0),Cesium.TileProviderError.handleSuccess(h._errorEvent)}function n(t){var e="";"string"==typeof o&&(e=" "+o);var n="Failed to load image "+e+".";a=Cesium.TileProviderError.handleError(a,h,h._errorEvent,n,0,0,0,doRequest,t),h._readyPromise.reject(new RuntimeError(n))}t=l(t,{});var i=t.bounds,r=t.data;if(!u(i))throw new c("options.bounds is required.");if(!(u(i.north)&&u(i.south)&&u(i.east)&&u(i.west)))throw new c("options.bounds.north, options.bounds.south, options.bounds.east and options.bounds.west are required.");if(!u(r))throw new c("data is required.");if(!u(r.min)||!u(r.max)||!u(r.points))throw new c("options.bounds.north, bounds.south, bounds.east and bounds.west are required.");this._wmp=new Cesium.WebMercatorProjection,this._mbounds=this.wgs84ToMercatorBB(i),this._options=l(t.heatmapoptions,{}),this._options.gradient=l(this._options.gradient,{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"}),this.setWidthAndHeight(this._mbounds),this._options.radius=Math.round(l(this._options.radius,this.width>this.height?this.width/60:this.height/60)),this._spacing=1.5*this._options.radius,this._xoffset=this._mbounds.west,this._yoffset=this._mbounds.south,this.width=Math.round(this.width+2*this._spacing),this.height=Math.round(this.height+2*this._spacing),this._mbounds.west-=this._spacing*this._factor,this._mbounds.east+=this._spacing*this._factor,this._mbounds.south-=this._spacing*this._factor,this._mbounds.north+=this._spacing*this._factor,this.bounds=this.mercatorToWgs84BB(this._mbounds),this._container=this.getContainer(this.width,this.height),this._options.container=this._container,this._heatmap=s.default.create(this._options),this._canvas=this._container.children[0],this._tilingScheme=new Cesium.WebMercatorTilingScheme({rectangleSouthwestInMeters:new Cesium.Cartesian2(this._mbounds.west,this._mbounds.south),rectangleNortheastInMeters:new Cesium.Cartesian2(this._mbounds.east,this._mbounds.north)});var o=this._image=this._canvas;this._originalImage=this._canvas,this._texture=void 0,this._tileWidth=this.width,this._tileHeight=this.height,this._ready=!1,t.data&&(this._ready=this.setWGS84Data(t.data.min,t.data.max,t.data.points));var a,h=this;this.getImage(h,o).then(e).otherwise(n)}},{key:"getImage",value:function(t,e){function n(e){t._image=e,t._tileWidth=e.width,t._tileHeight=e.height}return n(e),Cesium.when(e)}},{key:"setWidthAndHeight",value:function(t){var e=2e3,n=700;this.width=t.east>0&&t.west<0?t.east+Math.abs(t.west):Math.abs(t.east-t.west),this.height=t.north>0&&t.south<0?t.north+Math.abs(t.south):Math.abs(t.north-t.south),this._factor=1,this.width>this.height&&this.width>e?(this._factor=this.width/e,this.height/this._factor<n&&(this._factor=this.height/n)):this.height>this.width&&this.height>e?(this._factor=this.height/e,this.width/this._factor<n&&(this._factor=this.width/n)):this.width<this.height&&this.width<n?(this._factor=this.width/n,this.height/this._factor>e&&(this._factor=this.height/e)):this.height<this.width&&this.height<n&&(this._factor=this.height/n,this.width/this._factor>e&&(this._factor=this.width/e)),this.width=this.width/this._factor,this.height=this.height/this._factor}},{key:"getContainer",value:function(t,e,n){var i=document.createElement("div");return n&&i.setAttribute("id",n),i.setAttribute("style","width: "+t+"px; height: "+e+"px; margin: 0px; display: none;"),document.body.appendChild(i),i}},{key:"wgs84ToMercator",value:function(t){return this._wmp.project(Cesium.Cartographic.fromDegrees(t.x,t.y))}},{key:"wgs84ToMercatorBB",value:function(t){var e=this._wmp.project(Cesium.Cartographic.fromDegrees(t.east,t.north)),n=this._wmp.project(Cesium.Cartographic.fromDegrees(t.west,t.south));return{north:e.y,south:n.y,east:e.x,west:n.x}}},{key:"mercatorToWgs84",value:function(t){var e=this._wmp.unproject(new Cesium.Cartesian3(t.x,t.y));return{x:e.longitude,y:e.latitude}}},{key:"mercatorToWgs84BB",value:function(t){var e=this._wmp.unproject(new Cesium.Cartesian3(t.west,t.south)),n=this._wmp.unproject(new Cesium.Cartesian3(t.east,t.north));return{north:this.rad2deg(n.latitude),east:this.rad2deg(n.longitude),south:this.rad2deg(e.latitude),west:this.rad2deg(e.longitude)}}},{key:"deg2rad",value:function(t){return t*(Math.PI/180)}},{key:"rad2deg",value:function(t){return t/(Math.PI/180)}},{key:"wgs84PointToHeatmapPoint",value:function(t){return this.mercatorPointToHeatmapPoint(this.wgs84ToMercator(t))}},{key:"mercatorPointToHeatmapPoint",value:function(t){var e={};return e.x=Math.round((t.x-this._xoffset)/this._factor+this._spacing),e.y=Math.round((t.y-this._yoffset)/this._factor+this._spacing),e.y=this.height-e.y,e}},{key:"setData",value:function(t,e,n){return!!(n&&n.length>0&&null!==t&&t!==!1&&null!==e&&e!==!1)&&(this._heatmap.setData({min:t,max:e,data:n}),!0)}},{key:"setWGS84Data",value:function(t,e,n){if(n&&n.length>0&&null!==t&&t!==!1&&null!==e&&e!==!1){for(var i=[],r=0;r<n.length;r++){var o=n[r],a=this.wgs84PointToHeatmapPoint(o);(o.value||0===o.value)&&(a.value=o.value),i.push(a)}var s=this.setData(t,e,i);return this.reload(),s}return!1}},{key:"reload",value:function(){if(u(this._reload)){if(this._dynamic){var t=this._image.currentTime;if(Math.abs(this._dynamicTime-t)<frameDiff)return;this._dynamicTime=t}this.getImage(this,this._originalImage).then(this._reload)}}},{key:"getTileCredits",value:function(t,e,n){}},{key:"requestImage",value:function(t,e,n){if(!this._ready)throw new c("requestImage must not be called before the imagery provider is ready.");return this._image}},{key:"pickFeatures",value:function(){}},{key:"url",get:function(){return this._url}},{key:"tileWidth",get:function(){if(!this._ready)throw new c("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},{key:"tileHeight",get:function(){if(!this._ready)throw new c("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},{key:"maximumLevel",get:function(){if(!this._ready)throw new c("maximumLevel must not be called before the imagery provider is ready.");return 0}},{key:"minimumLevel",get:function(){if(!this._ready)throw new c("minimumLevel must not be called before the imagery provider is ready.");return 0}},{key:"tilingScheme",get:function(){if(!this._ready)throw new c("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},{key:"rectangle",get:function(){return this._tilingScheme.rectangle}},{key:"tileDiscardPolicy",get:function(){if(!this._ready)throw new c("tileDiscardPolicy must not be called before the imagery provider is ready.")}},{key:"errorEvent",get:function(){return this._errorEvent}},{key:"ready",get:function(){return this._ready}},{key:"credit",get:function(){return this._credit}},{key:"hasAlphaChannel",get:function(){return!0}}]),t}();e.default=h},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},i=function(){var t=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},e=n.defaultRadius;return t.prototype={_organiseData:function(t,n){var i=t[this._xField],r=t[this._yField],o=this._radi,a=this._data,s=this._max,l=this._min,u=t[this._valueField]||1,c=t.radius||this._cfgRadius||e;a[i]||(a[i]=[],o[i]=[]),a[i][r]?a[i][r]+=u:(a[i][r]=u,o[i][r]=c);var h=a[i][r];return h>s?(n?this.setDataMax(h):this._max=h,!1):h<l?(n?this.setDataMin(h):this._min=h,!1):{x:i,y:r,value:u,radius:c,min:l,max:s}},_unOrganizeData:function(){var t=[],e=this._data,n=this._radi;for(var i in e)for(var r in e[i])t.push({x:i,y:r,radius:n[i][r],value:e[i][r]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var n=this._organiseData(arguments[0],!0);n&&(0===this._data.length&&(this._min=this._max=n.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[n]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var i=0;i<n;i++)this._organiseData(e[i],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t}(),r=function(){function t(t){var n=t.container,i=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=t.canvas||document.createElement("canvas"),o=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});r.className="heatmap-canvas",this._width=r.width=i.width=t.width||+o.width.replace(/px/,""),this._height=r.height=i.height=t.height||+o.height.replace(/px/,""),this.shadowCtx=i.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=i.style.cssText="position:absolute;left:0;top:0;",n.style.position="relative",n.appendChild(r),this._palette=e(t),this._templates={},this._setStyles(t)}var e=function(t){var e=t.gradient||t.defaultGradient,n=document.createElement("canvas"),i=n.getContext("2d");n.width=256,n.height=1;var r=i.createLinearGradient(0,0,256,1);for(var o in e)r.addColorStop(o,e[o]);return i.fillStyle=r,i.fillRect(0,0,256,1),i.getImageData(0,0,256,1).data},n=function(t,e){var n=document.createElement("canvas"),i=n.getContext("2d"),r=t,o=t;if(n.width=n.height=2*t,1==e)i.beginPath(),i.arc(r,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{var a=i.createRadialGradient(r,o,t*e,r,o,t);a.addColorStop(0,"rgba(0,0,0,1)"),a.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=a,i.fillRect(0,0,2*t,2*t)}return n},i=function(t){for(var e=[],n=t.min,i=t.max,r=t.radi,t=t.data,o=Object.keys(t),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),u=l.length;u--;){var c=l[u],h=t[s][c],f=r[s][c];e.push({x:s,y:c,value:h,radius:f})}return{min:n,max:i,data:e}};return t.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(i(t)),this._colorize())},_updateGradient:function(t){this._palette=e(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,i=this._max=t.max,t=t.data||[],r=t.length,o=1-this._blur;r--;){var a,s=t[r],l=s.x,u=s.y,c=s.radius,h=Math.min(s.value,i),f=l-c,p=u-c,d=this.shadowCtx;this._templates[c]?a=this._templates[c]:this._templates[c]=a=n(c,o);var g=(h-e)/(i-e);d.globalAlpha=g<.01?.01:g,d.drawImage(a,f,p),f<this._renderBoundaries[0]&&(this._renderBoundaries[0]=f),p<this._renderBoundaries[1]&&(this._renderBoundaries[1]=p),f+2*c>this._renderBoundaries[2]&&(this._renderBoundaries[2]=f+2*c),p+2*c>this._renderBoundaries[3]&&(this._renderBoundaries[3]=p+2*c)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,i=this._renderBoundaries[3]-e,r=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+n>r&&(n=r-t),e+i>o&&(i=o-e);for(var c=this.shadowCtx.getImageData(t,e,n,i),h=c.data,f=h.length,p=this._palette,d=3;d<f;d+=4){var g=h[d],m=4*g;if(m){var v;v=a>0?a:g<s?g<l?l:g:s,h[d-3]=p[m],h[d-2]=p[m+1],h[d-1]=p[m+2],h[d]=u?p[m+3]:v}}this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e,n=this.shadowCtx,i=n.getImageData(t.x,t.y,1,1),r=i.data[3],o=this._max,a=this._min;return e=Math.abs(o-a)*(r/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),o=function(){var t=!1;return"canvas2d"===n.defaultRenderer&&(t=r),t}(),a={merge:function(){for(var t={},e=arguments.length,n=0;n<e;n++){var i=arguments[n];for(var r in i)t[r]=i[r]}return t}},s=function(){function t(){var t=this._config=a.merge(n,arguments[0]||{});if(this._coordinator=new e,t.plugin){var s=t.plugin;if(!n.plugins[s])throw new Error("Plugin '"+s+"' not found. Maybe it was not registered.");var l=n.plugins[s];this._renderer=new l.renderer(t),this._store=new l.store(t)}else this._renderer=new o(t),this._store=new i(t);r(this)}var e=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,n){var i=this.cStore;i[t]||(i[t]=[]),i[t].push(function(t){return e.call(n,t)})},emit:function(t,e){var n=this.cStore;if(n[t])for(var i=n[t].length,r=0;r<i;r++){var o=n[t][r];o(e)}}},t}(),r=function(t){var e=t._renderer,n=t._coordinator,i=t._store;n.on("renderpartial",e.renderPartial,e),n.on("renderall",e.renderAll,e),n.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),i.setCoordinator(n)};return t.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=a.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){
return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},t}(),l={create:function(t){return new s(t)},register:function(t,e){n.plugins[t]=e}};e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MapVOpt=e.MapVLayer=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(126),s=i(a),l=n(127);e.MapVLayer=function(){function t(e){r(this,t),this._id=Cesium.createGuid(),this._MapV=null,this._show=!0,this._MapVOptions=e}return o(t,[{key:"addToMap",value:function(t){this._viewer=t,console.log(t),this._initMapv()}},{key:"destroyItem",value:function(){this._MapV.destroy()}},{key:"getMapVOpt",value:function(){return this._MapVOptions}},{key:"update",value:function(t){this._MapVOptions=t,this._MapV&&this.destroyItem(),this._initMapv()}},{key:"create",value:function(t){this._MapVOptions=t;var e=this.createDataSet(this._MapVOptions.data);return this._MapV=new s.default(this._viewer,e,this._MapVOptions.options)}},{key:"createDataSet",value:function(t){return new l.DataSet(t)}},{key:"_initMapv",value:function(){this._MapVOptions&&this.create(this._MapVOptions)}},{key:"_DataSetAdd",value:function(t,e){return new l.DataSet.add(t,e)}},{key:"_DataSetReset",value:function(){return new l.DataSet.reset}},{key:"_DataSetGet",value:function(t){return new l.DataSet.get(t)}},{key:"_DataSetSet",value:function(t){return new l.DataSet.set(t)}},{key:"_DataSetClear",value:function(t){return new l.DataSet.clear(t)}},{key:"_DataSetRemove",value:function(t){return new l.DataSet.remove(t)}},{key:"_DataSetUpdate",value:function(t,e){return new l.DataSet.update(t,e)}},{key:"_DataSetTransferCoordinate",value:function(t,e,n,i){return new l.DataSet.transferCoordinate(t,e,n,i)}},{key:"_DataSetinitGeometry",value:function(t){return new l.DataSet.initGeometry(t)}},{key:"_DataSetGetMax",value:function(t){return new l.DataSet.getMax(t)}},{key:"_DataSetGetSum",value:function(t){return new l.DataSet.getSum(t)}},{key:"_DataSetGetMin",value:function(t){return new l.DataSet.getMin(t)}},{key:"_DataSetUnique",value:function(t){return new l.DataSet.getUnique(t)}},{key:"_getDataSet",value:function(t){return new l.geojson.getDataSet(t)}},{key:"_getCurvePoints",value:function(t){return new l.utilCurve.getPoints(t)}},{key:"_getCenterByCityName",value:function(t){var e=new l.utilCityCenter.getCenterByCityName(t);return void 0===e.lng?void 0:e}},{key:"_getProvinceNameByCityName",value:function(t){return new l.utilCityCenter.getProvinceNameByCityName(t)}},{key:"show",get:function(){return this._show},set:function(t){t?this._MapV.show():this._MapV.hide(),this._show=t}},{key:"utilCurve",get:function(){return{getPoints:this._getCurvePoints}}},{key:"utilCityCenter",get:function(){return{getCenterByCityName:this._getCenterByCityName,getProvinceNameByCityName:this._getProvinceNameByCityName}}},{key:"geojson",get:function(){return{getDataSet:this._getDataSet}}},{key:"DataSet",get:function(){return{add:this._DataSetAdd,Reset:this._DataSetReset,get:this._DataSetGet,set:this._DataSetSet,clear:this._DataSetClear,remove:this._DataSetRemove,update:this._DataSetUpdate,transferCoordinate:this._DataSetTransferCoordinate,initGeometry:this._DataSetinitGeometry,getMax:this._DataSetGetMax,getSum:this._DataSetGetSum,getMin:this._DataSetGetMin,getUnique:this._DataSetUnique}}}]),t}(),e.MapVOpt=function t(e,n){r(this,t),this.data=e,this.options=n}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=n(127),u=l?l.baiduMapLayer:null,c=u?u.__proto__:Function,h=Cesium.Math.toRadians(95),f=0,p=function(t){function e(t,n,o,a){i(this,e);var s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,o));return c?(s.map=t,s.scene=t.scene,s.dataSet=n,o=o||{},s.init(o),s.argCheck(o),s.initDevicePixelRatio(),s.canvasLayer=a,s.stopAniamation=!1,s.animation=o.animation,s.clickEvent=s.clickEvent.bind(s),s.mousemoveEvent=s.mousemoveEvent.bind(s),s.bindEvent(),s):r(s)}return o(e,t),a(e,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function(t){var n=t.point;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clickEvent",this).call(this,n,t)}},{key:"mousemoveEvent",value:function(t){var n=t.point;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mousemoveEvent",this).call(this,n,t)}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(){this.map,this.options.methods&&(this.options.methods.click,this.options.methods.mousemove)}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"_canvasUpdate",value:function(t){this.map;var e=this.scene;if(this.canvasLayer&&!this.stopAniamation){var n=this.options.animation,i=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void this.clear(i);"2d"===this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore())}else this.clear(i);if("2d"===this.context)for(var r in this.options)i[r]=this.options[r];else i.clear(i.COLOR_BUFFER_BIT);var o=(this.canvasLayer,{transferCoordinate:function(t){var n=[99999,99999],i=Cesium.Cartesian3.fromDegrees(t[0],t[1]);if(!i)return n;var r=e.cartesianToCanvasCoordinates(i);if(!r)return n;if(e.mode===Cesium.SceneMode.SCENE3D){var o=Cesium.Cartesian3.angleBetween(e.camera.position,i);if(o>h)return n}return[r.x,r.y]}});void 0!==t&&(o.filter=function(e){var i=n.trails||10;return!!(t&&e.time>t-i&&e.time<t)});var a=this.dataSet.get(o);this.processData(a),"m"==this.options.unit&&this.options.size,this.options._size=this.options.size;var s=Cesium.SceneTransforms.wgs84ToWindowCoordinates(e,Cesium.Cartesian3.fromDegrees(0,0));this.drawContext(i,new l.DataSet(a),this.options,s),this.options.updateCallback&&this.options.updateCallback(t)}}},{key:"updateData",value:function(t,n){var i=t;i&&i.get&&(i=i.get()),void 0!=i&&this.dataSet.set(i),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,{options:n})}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"destroy",value:function(){this.unbindEvent(),this.clear(this.getContext()),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}}]),e}(c),d=function(){function t(e,n,r,o){i(this,t),this.map=e,this.scene=e.scene,this.MapVBaseLayer=new p(e,n,r,this),this.MapVOptions=r,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),void 0!=o?(this.container=o,o.appendChild(this.canvas)):(this.container=e.container,this.addInnerContainer()),this.bindEvent(),this._reset()}return a(t,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){var t=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);var e=new Cesium.ScreenSpaceEventHandler(this.canvas);e.setInputAction(function(e){t.innerMoveEnd()},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(e){t.innerMoveEnd()},Cesium.ScreenSpaceEventType.MIDDLE_UP),this.handler=e}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.MapVBaseLayer&&this.MapVBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this)}},{key:"moveEndEvent",value:function(){this.scene.postRender.removeEventListener(this._reset,this),this.MapVBaseLayer&&this.MapVBaseLayer.animatorMoveendEvent(),this._reset()}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(t,e){void 0!=this.MapVBaseLayer&&this.MapVBaseLayer.addData(t,e)}},{key:"updateData",value:function(t,e){void 0!=this.MapVBaseLayer&&this.MapVBaseLayer.updateData(t,e)}},{key:"getData",value:function(){return this.MapVBaseLayer&&(this.dataSet=this.MapVBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(t){void 0!=this.MapVBaseLayer&&this.MapVBaseLayer&&this.MapVBaseLayer.removeData(t)}},{key:"removeAllData",value:function(){void 0!=this.MapVBaseLayer&&this.MapVBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block"}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none"}},{key:"_createCanvas",value:function(){var t=document.createElement("canvas");t.id=this.MapVOptions.layerid||"MapV"+f++,t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.MapVOptions.zIndex||100,t.width=parseInt(this.map.canvas.width),t.height=parseInt(this.map.canvas.height),t.style.width=this.map.canvas.style.width,t.style.height=this.map.canvas.style.height;var e=this.devicePixelRatio;return"2d"==this.MapVOptions.context&&t.getContext(this.MapVOptions.context).scale(e,e),t}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.unbindEvent(),this.remove()}},{key:"remove",value:function(){void 0!=this.MapVBaseLayer&&(this.removeAllData(),this.MapVBaseLayer.destroy(),this.MapVBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(t){void 0!=t&&this.updateData(t.data,t.options)}},{key:"resizeCanvas",value:function(){if(void 0!=this.canvas&&null!=this.canvas){var t=this.canvas;t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.width=parseInt(this.map.canvas.width),t.height=parseInt(this.map.canvas.height),t.style.width=this.map.canvas.style.width,t.style.height=this.map.canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){void 0!=this.MapVBaseLayer&&this.MapVBaseLayer._canvasUpdate()}}]),t}();e.default=d},function(t,e,n){var i,r,o;(function(n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,s){"object"==a(e)&&"undefined"!=typeof t?s(e):(r=[e],i=s,o="function"==typeof i?i.apply(e,r):i,!(void 0!==o&&(t.exports=o)))}(void 0,function(t){function e(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}function i(){this._subscribers={}}function r(t){var e=t.split("|");return e[0]=e[0].split(","),{lng:parseFloat(e[0][0]),lat:parseFloat(e[0][1])}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:l(r,e,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":a(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=("undefined"==typeof e?"undefined":a(e))&&"function"!=typeof e?t:e}function h(t,e){i.bind(this)(),this._options=e||{},this._data=[],t&&this.add(t)}function f(t,e){if("undefined"!=typeof document){var n=document.createElement("canvas");t&&(n.width=t),e&&(n.height=e)}return n}function p(t){t=t||{},this.gradient=t.gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=t.maxSize||35,this.minSize=t.minSize||0,this.max=t.max||100,this.min=t.min||0,this.initPalette()}function d(t){return t.max||100}function g(t){return t.min||0}function m(t,e,n){var i=d(n),r=g(n),o=n._size;null==o&&null==(o=n.size)&&(o=13);var a,s,l,u,c,h=new p({gradient:n.gradient,max:i,min:r}),m=(u=new f(2*(l=(a=o)+(s=a/2)),2*l),(c=u.getContext("2d")).shadowBlur=s,c.shadowColor="black",c.shadowOffsetX=c.shadowOffsetY=1e4,c.beginPath(),c.arc(l-1e4,l-1e4,a,0,2*Math.PI,!0),c.closePath(),c.fill(),u),v=m.width/2,y=m.height/2,_=e,x={};for(var w in _.forEach(function(t,e){var n=void 0===t.count?1:t.count,r=Math.min(1,n/i).toFixed(2);x[r]=x[r]||[],x[r].push(t)}),x)if(!isNaN(w)){var b=x[w];t.beginPath(),n.withoutAlpha||(t.globalAlpha=w),t.strokeStyle=h.getColor(w*i),b.forEach(function(e,r){if(e.geometry){var o=e.geometry._coordinates||e.geometry.coordinates,a=e.geometry.type;if("Point"===a){var s=void 0===e.count?1:e.count;t.globalAlpha=s/i,t.drawImage(m,o[0]-v,o[1]-y)}else"LineString"===a&&(s=void 0===e.count?1:e.count,t.globalAlpha=s/i,t.beginPath(),Pt.draw(t,e,n),t.stroke())}})}}function v(t,e,n){var i=t.createShader(n);return t.shaderSource(i,e),t.compileShader(i),i}function y(t,e,n){var i=v(t,e,t.VERTEX_SHADER),r=v(t,n,t.FRAGMENT_SHADER),o=t.createProgram();return t.attachShader(o,i),t.attachShader(o,r),t.linkProgram(o),t.useProgram(o),o}function _(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=1,e.height=1,n.fillStyle=t,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}function x(t,e,n){n=n||2;var i,r,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,f=w(t,0,h,n,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,n,i){var r,o,a,s,l,u=[];for(r=0,o=e.length;r<o;r++)a=e[r]*i,s=r<o-1?e[r+1]*i:t.length,(l=w(t,a,s,i,!1))===l.next&&(l.steiner=!0),u.push(k(l));for(u.sort(T),r=0;r<u.length;r++)D(u[r],n),n=b(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<i&&(i=s),(l=t[d+1])<r&&(r=l),o<s&&(o=s),a<l&&(a=l);u=Math.max(o-i,a-r)}return C(f,p,n,i,r,u),p}function w(t,e,n,i,r){var o,a;if(r===0<j(t,e,n,i))for(o=e;o<n;o+=i)a=V(o,t[o],t[o+1],a);else for(o=n-i;e<=o;o-=i)a=V(o,t[o],t[o+1],a);return a&&R(a,a.next)&&(G(a),a=a.next),a}function b(t,e){if(!t)return t;e=e||t;var n,i=t;do if(n=!1,i.steiner||!R(i,i.next)&&0!==O(i.prev,i,i.next))i=i.next;else{if(G(i),(i=e=i.prev)===i.next)return null;n=!0}while(n||i!==e);return e}function C(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){for(var r=t;null===r.z&&(r.z=A(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next,r!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,u=1;do{for(n=t,o=t=null,a=0;n;){for(a++,i=n,e=s=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;0<s||0<l&&i;)0===s?(i=(r=i).nextZ,l--):0!==l&&i?n.z<=i.z?(n=(r=n).nextZ,s--):(i=(r=i).nextZ,l--):(n=(r=n).nextZ,s--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(1<a)}(r)}(t,i,r,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?M(t,i,r,o):S(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),G(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?C(t=E(t,e,n),e,n,i,r,o,2):2===a&&I(t,e,n,i,r,o):C(b(t),e,n,i,r,o,1);break}}}function S(t){var e=t.prev,n=t,i=t.next;if(0<=O(e,n,i))return!1;for(var r=t.next.next;r!==t.prev;){if(N(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&0<=O(r.prev,r,r.next))return!1;r=r.next}return!0}function M(t,e,n,i){var r=t.prev,o=t,a=t.next;if(0<=O(r,o,a))return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,u=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=A(s,l,e,n,i),f=A(u,c,e,n,i),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&N(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=O(p.prev,p,p.next))return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&N(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=O(p.prev,p,p.next))return!1;p=p.prevZ}return!0}function E(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!R(r,o)&&F(r,i,i.next,o)&&z(r,o)&&z(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),G(i),G(i.next),i=t=o),i=i.next}while(i!==t);return i}function I(t,e,n,i,r,o){var a,s,l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&(s=u,(a=l).next.i!==s.i&&a.prev.i!==s.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&F(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(a,s)&&z(a,s)&&z(s,a)&&function(t,e){for(var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;n.y>o!=n.next.y>o&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next,n!==t;);return i}(a,s))){var c=B(l,u);return l=b(l,l.next),c=b(c,c.next),C(l,e,n,i,r,o),void C(c,e,n,i,r,o)}u=u.next}l=l.next}while(l!==t)}function T(t,e){return t.x-e.x}function D(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&a<s){if((a=s)===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var l,u=n,c=n.x,h=n.y,f=1/0;for(i=n.next;i!==u;)r>=i.x&&i.x>=c&&N(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<f||l===f&&i.x>n.x)&&z(i,t)&&(n=i,f=l),i=i.next;return n}(t,e)){var n=B(e,t);b(n,n.next)}}function A(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function k(t){for(var e=t,n=t;e.x<n.x&&(n=e),(e=e.next)!==t;);return n}function N(t,e,n,i,r,o,a,s){return 0<=(r-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(i-s)-(n-a)*(e-s)&&0<=(n-a)*(o-s)-(r-a)*(i-s)}function O(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function R(t,e){return t.x===e.x&&t.y===e.y}function F(t,e,n,i){return!!(R(t,e)&&R(n,i)||R(t,i)&&R(n,e))||0<O(t,e,n)!=0<O(t,e,i)&&0<O(n,i,t)!=0<O(n,i,e)}function z(t,e){return O(t.prev,t,t.next)<0?0<=O(t,e,t.next)&&0<=O(t,t.prev,e):O(t,e,t.prev)<0||O(t,t.next,e)<0}function B(t,e){var n=new H(t.i,t.x,t.y),i=new H(e.i,e.x,e.y),r=t.next,o=e.prev;return(t.next=e).prev=t,(n.next=r).prev=n,(i.next=n).prev=i,(o.next=i).prev=o,i}function V(t,e,n,i){var r=new H(t,e,n);return i?(r.next=i.next,(r.prev=i).next.prev=r,i.next=r):(r.prev=r).next=r,r}function G(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function H(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function j(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function U(t,e,n){function i(t){return 1-2*t+t*t}function r(t){return 2*t-2*t*t}function o(t){return t*t}if(!t||!e)return null;var a,s,l,u,c,h,f=[],p=(n=n||40,0),d=0;if(void 0!==e){var g=parseFloat(t.lat),m=parseFloat(e.lat),v=parseFloat(t.lng),y=parseFloat(e.lng);for(v<y&&180<parseFloat(y-v)&&v<0&&(v=parseFloat(360+v),y=parseFloat(360+y)),h=0,s=m==g?(a=0,v-y):y==v?(a=Math.PI/2,g-m):(a=Math.atan((m-g)/(y-v)),(m-g)/Math.sin(a)),0==h&&(h=a+Math.PI/5),c=(l=s/2)*Math.cos(h)+v,u=l*Math.sin(h)+g,p=0;p<n+1;p++){var _=v*i(d)+c*r(d)+y*o(d),x=g*i(d)+u*r(d)+m*o(d),w=t.lng,b=e.lng;f.push([w<0&&0<b?_-360:_,x]),d+=1/n}return f}void 0!==f&&(f=[])}function W(t){this.splitList=t||{other:1}}function q(t){this.splitList=t||[{start:0,value:"red"}]}function Y(t,e,n){if(o(this,Y),!t||!e)return console.warn("id 和 type 为必填项"),!1;if("baidu"==e){if(!BMap)return console.warn("请先引入百度地图JS API"),!1}else console.warn("暂不支持你的地图类型");this.type=e;var i=n&&n.center?n.center:[106.962497,38.208726],r=n&&n.zoom?n.zoom:5,a=this.map=new BMap.Map(t,{enableMapClick:!1});a.centerAndZoom(new BMap.Point(i[0],i[1]),r),a.enableScrollWheelZoom(!0),a.setMapStyle({style:"light"})}function X(t){this.options=t||{},this.paneName=this.options.paneName||"mapPane",this.context=this.options.context||"2d",this.zIndex=this.options.zIndex||0,this.mixBlendMode=this.options.mixBlendMode||null,this.enableMassClear=this.options.enableMassClear,this._map=t.map,this._lastDrawTime=null,this.show()}function Z(t,e){for(var n=0;n<t.length;n++)if(J(t[n],e))return!0;return!1}function J(t,e){var n=Math.min(t.ne.x,e.ne.x),i=Math.min(t.sw.y,e.sw.y),r=Math.max(t.sw.x,e.sw.x),o=Math.max(t.ne.y,e.ne.y);return r<n&&o<i}function K(t,e,n,i){n.save();var r=i.geometry._coordinates||i.geometry.coordinates,o=r[0],a=r[1],s=e.offset||{x:0,y:0},l=i.width||e._width||e.width,u=i.height||e._height||e.height;if(o=o-~~l/2+s.x,a=a-~~u/2+s.y,"string"==typeof t)return n.beginPath(),n.arc(o,a,e.size||5,0,2*Math.PI),n.fillStyle=e.fillStyle||"red",void n.fill();var c=i.deg||e.deg;c&&(n.translate(o,a),n.rotate(c*Math.PI/180),n.translate(-o,-a)),e.sx&&e.sy&&e.swidth&&e.sheight&&e.width&&e.height?n.drawImage(t,e.sx,e.sy,e.swidth,e.sheight,o,a,l,u):l&&u?n.drawImage(t,o,a,l,u):n.drawImage(t,o,a),n.restore()}function $(t,e,n,i,r,o){if(!(r-i<=n)){var a=i+r>>1;!function t(e,n,i,r,o,a){for(;r<o;){if(600<o-r){var s=o-r+1,l=i-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),f=Math.max(r,Math.floor(i-l*c/s+h)),p=Math.min(o,Math.floor(i+(s-l)*c/s+h));t(e,n,i,f,p,a)}var d=n[2*i+a],g=r,m=o;for(Q(e,n,r,i),n[2*o+a]>d&&Q(e,n,r,o);g<m;){for(Q(e,n,g,m),g++,m--;n[2*g+a]<d;)g++;for(;n[2*m+a]>d;)m--}n[2*r+a]===d?Q(e,n,r,m):Q(e,n,++m,o),m<=i&&(r=m+1),i<=m&&(o=m-1)}}(t,e,a,i,r,o%2),$(t,e,n,i,a-1,o+1),$(t,e,n,1+a,r,o+1)}}function Q(t,e,n,i){tt(t,n,i),tt(e,2*n,2*i),tt(e,2*n+1,2*i+1)}function tt(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function et(t,e,n,i){var r=t-n,o=e-i;return r*r+o*o}function nt(t){return t[0]}function it(t){return t[1]}function rt(t,e,n,i,r){void 0===e&&(e=nt),void 0===n&&(n=it),void 0===i&&(i=64),void 0===r&&(r=Float64Array),this.nodeSize=i;for(var o=(this.points=t).length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length),l=0;l<t.length;l++)s[2*(a[l]=l)]=e(t[l]),s[2*l+1]=n(t[l]);$(a,s,i,0,a.length-1,0)}function ot(t){this.options=ct(Object.create(le),t),this.trees=new Array(this.options.maxZoom+1)}function at(t){return{type:"Feature",id:t.id,properties:st(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function st(t){var e=t.numPoints,n=1e4<=e?Math.round(e/1e3)+"k":1e3<=e?Math.round(e/100)/10+"k":e;return ct(ct({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function lt(t){return t/360+.5}function ut(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:1<n?1:n}function ct(t,e){for(var n in e)t[n]=e[n];return t}function ht(t){return t.x}function ft(t){return t.y}function pt(t,e,n){o(this,pt),e instanceof h||(e=new h(e)),this.dataSet=e,this.map=t,"cluster"===n.draw&&this.refreshCluster(n)}function dt(t,e,n){o(this,dt);var i=c(this,(dt.__proto__||Object.getPrototypeOf(dt)).call(this,t,e,n));i.map=t,i.options=n||{},i.dataSet=e;var r=new X({map:t,zIndex:i.options.zIndex,update:i._canvasUpdate.bind(i)});i.init(i.options),i.canvasLayer=r,i.transferToMercator();var a=i;return e.on("change",function(){a.transferToMercator(),r.draw()}),i.ctx=r.canvas.getContext("2d"),i.start(),i}function gt(t,e,n){o(this,gt);var i=c(this,(gt.__proto__||Object.getPrototypeOf(gt)).call(this,t,e,n)),r=i;n=n||{},i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),i.tapEvent=i.tapEvent.bind(i),r.init(n),r.argCheck(n),r.transferToMercator();var a=i.canvasLayer=new X({map:t,context:i.context,updateImmediate:n.updateImmediate,paneName:n.paneName,mixBlendMode:n.mixBlendMode,enableMassClear:n.enableMassClear,zIndex:n.zIndex,update:function(){r._canvasUpdate()}});return e.on("change",function(){r.transferToMercator(),"cluster"===n.draw&&r.refreshCluster(),a.draw()}),i}function mt(t){function e(t,e){return function(){e.apply(t)}}this.isAdded_=!1,this.isAnimated_=!1,this.paneName_=mt.DEFAULT_PANE_NAME_,this.updateHandler_=null,this.resizeHandler_=null,this.topLeft_=null,this.centerListener_=null,this.resizeListener_=null,this.needsResize_=!0,this.requestAnimationFrameId_=null;var n=document.createElement("canvas");n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.pointerEvents="none",this.canvas=n,this.canvasCssWidth_=300,this.canvasCssHeight_=150,this.resolutionScale_=1,this.repositionFunction_=e(this,this.repositionCanvas_),this.resizeFunction_=e(this,this.resize_),this.requestUpdateFunction_=e(this,this.update_),t&&this.setOptions(t)}function vt(t,e,n){o(this,vt);var i=c(this,(vt.__proto__||Object.getPrototypeOf(vt)).call(this,t,e,n)),r=i;n=n||{},r.init(n),r.argCheck(n);var a={map:t,animate:!1,updateHandler:function(){r._canvasUpdate()},resolutionScale:resolutionScale};return i.canvasLayer=new mt(a),i.clickEvent=i.clickEvent.bind(i),i.mousemoveEvent=i.mousemoveEvent.bind(i),i.bindEvent(),i}function yt(){return o(this,yt),c(this,(yt.__proto__||Object.getPrototypeOf(yt)).apply(this,arguments))}function _t(t,e,n){o(this,_t);var i=c(this,(_t.__proto__||Object.getPrototypeOf(_t)).call(this,t,n));return i.options_=n,i.dataSet=e,i._initBaseLayer(n),i}function xt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1],n=arguments[2];o(this,xt);var i=c(this,(xt.__proto__||Object.getPrototypeOf(xt)).call(this,t,e,n));return i.options=n,i.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},i.layer_=null,i.initDataRange(n),i.initAnimator(),i.onEvents(),t.on("complete",function(){this.init(t,n),this.argCheck(n)},i),i}function wt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1],n=arguments[2];o(this,wt);var i=c(this,(wt.__proto__||Object.getPrototypeOf(wt)).call(this,t,e,n));return i.options=n,i.canvasLayer={canvas:null,devicePixelRatio:window.devicePixelRatio},i.layer_=null,i.previousCursor_=void 0,i.init(t,n),i.argCheck(n),i}function bt(t,e,n,i){o(this,bt);var r=c(this,(bt.__proto__||Object.getPrototypeOf(bt)).call(this,t,n,i));if(!ue)return c(r);var a=r;return i=i||{},a.init(i),a.argCheck(i),r.canvasLayer=e,r.clickEvent=r.clickEvent.bind(r),r.mousemoveEvent=r.mousemoveEvent.bind(r),r._moveStartEvent=r.moveStartEvent.bind(r),r._moveEndEvent=r.moveEndEvent.bind(r),r._zoomStartEvent=r.zoomStartEvent.bind(r),r.bindEvent(),r}function Ct(t,e,n,i){o(this,Ct);var r=c(this,(Ct.__proto__||Object.getPrototypeOf(Ct)).call(this,t,e,n));return ue?(r.map=t,r.scene=t.scene,r.dataSet=e,n=n||{},r.init(n),r.argCheck(n),r.initDevicePixelRatio(),r.canvasLayer=i,r.stopAniamation=!1,r.animation=n.animation,r.clickEvent=r.clickEvent.bind(r),r.mousemoveEvent=r.mousemoveEvent.bind(r),r.bindEvent(),r):c(r)}function St(t,e,n,i){if(o(this,St),this.map=t,this.scene=t.scene,this.mapvBaseLayer=new Le(t,e,n,this),this.mapVOptions=n,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),i)this.container=i;else{var r=t.container.querySelector(".cesium-viewer-cesiumWidgetContainer");this.container=r||t.container}this.addInnerContainer(),this.bindEvent(),this._reset()}i.prototype.on=function(t,e){var n=this._subscribers[t];n||(n=[],this._subscribers[t]=n),n.push({callback:e})},i.prototype.off=function(t,e){var n=this._subscribers[t];if(n)for(var i=0;i<n.length;i++)n[i].callback==e&&(n.splice(i,1),i--)},i.prototype._trigger=function(t,e,n){if("*"==t)throw new Error("Cannot trigger event *");var i=[];t in this._subscribers&&(i=i.concat(this._subscribers[t])),"*"in this._subscribers&&(i=i.concat(this._subscribers["*"]));for(var r=0,o=i.length;r<o;r++){var a=i[r];a.callback&&a.callback(t,e,n||null)}};var Mt={municipalities:[{n:"北京",g:"116.395645,39.929986|12"},{n:"上海",g:"121.487899,31.249162|12"},{n:"天津",g:"117.210813,39.14393|12"},{n:"重庆",g:"106.530635,29.544606|12"}],provinces:[{n:"安徽",g:"117.216005,31.859252|8",cities:[{n:"合肥",g:"117.282699,31.866942|12"},{n:"安庆",g:"117.058739,30.537898|13"},{n:"蚌埠",g:"117.35708,32.929499|13"},{n:"亳州",g:"115.787928,33.871211|13"},{n:"巢湖",g:"117.88049,31.608733|13"},{n:"池州",g:"117.494477,30.660019|14"},{n:"滁州",g:"118.32457,32.317351|13"},{n:"阜阳",g:"115.820932,32.901211|13"},{n:"淮北",g:"116.791447,33.960023|13"},{n:"淮南",g:"117.018639,32.642812|13"},{n:"黄山",g:"118.29357,29.734435|13"},{n:"六安",g:"116.505253,31.755558|13"},{n:"马鞍山",g:"118.515882,31.688528|13"},{n:"宿州",g:"116.988692,33.636772|13"},{n:"铜陵",g:"117.819429,30.94093|14"},{n:"芜湖",g:"118.384108,31.36602|12"},{n:"宣城",g:"118.752096,30.951642|13"}]},{n:"福建",g:"117.984943,26.050118|8",cities:[{n:"福州",g:"119.330221,26.047125|12"},{n:"龙岩",g:"117.017997,25.078685|13"},{n:"南平",g:"118.181883,26.643626|13"},{n:"宁德",g:"119.542082,26.656527|14"},{n:"莆田",g:"119.077731,25.44845|13"},{n:"泉州",g:"118.600362,24.901652|12"},{n:"三明",g:"117.642194,26.270835|14"},{n:"厦门",g:"118.103886,24.489231|12"},{n:"漳州",
g:"117.676205,24.517065|12"}]},{n:"甘肃",g:"102.457625,38.103267|6",cities:[{n:"兰州",g:"103.823305,36.064226|12"},{n:"白银",g:"104.171241,36.546682|13"},{n:"定西",g:"104.626638,35.586056|13"},{n:"甘南州",g:"102.917442,34.992211|14"},{n:"嘉峪关",g:"98.281635,39.802397|13"},{n:"金昌",g:"102.208126,38.516072|13"},{n:"酒泉",g:"98.508415,39.741474|13"},{n:"临夏州",g:"103.215249,35.598514|13"},{n:"陇南",g:"104.934573,33.39448|14"},{n:"平凉",g:"106.688911,35.55011|13"},{n:"庆阳",g:"107.644227,35.726801|13"},{n:"天水",g:"105.736932,34.584319|13"},{n:"武威",g:"102.640147,37.933172|13"},{n:"张掖",g:"100.459892,38.93932|13"}]},{n:"广东",g:"113.394818,23.408004|8",cities:[{n:"广州",g:"113.30765,23.120049|12"},{n:"潮州",g:"116.630076,23.661812|13"},{n:"东莞",g:"113.763434,23.043024|12"},{n:"佛山",g:"113.134026,23.035095|13"},{n:"河源",g:"114.713721,23.757251|12"},{n:"惠州",g:"114.410658,23.11354|12"},{n:"江门",g:"113.078125,22.575117|13"},{n:"揭阳",g:"116.379501,23.547999|13"},{n:"茂名",g:"110.931245,21.668226|13"},{n:"梅州",g:"116.126403,24.304571|13"},{n:"清远",g:"113.040773,23.698469|13"},{n:"汕头",g:"116.72865,23.383908|13"},{n:"汕尾",g:"115.372924,22.778731|14"},{n:"韶关",g:"113.594461,24.80296|13"},{n:"深圳",g:"114.025974,22.546054|12"},{n:"阳江",g:"111.97701,21.871517|14"},{n:"云浮",g:"112.050946,22.937976|13"},{n:"湛江",g:"110.365067,21.257463|13"},{n:"肇庆",g:"112.479653,23.078663|13"},{n:"中山",g:"113.42206,22.545178|12"},{n:"珠海",g:"113.562447,22.256915|13"}]},{n:"广西",g:"108.924274,23.552255|7",cities:[{n:"南宁",g:"108.297234,22.806493|12"},{n:"百色",g:"106.631821,23.901512|13"},{n:"北海",g:"109.122628,21.472718|13"},{n:"崇左",g:"107.357322,22.415455|14"},{n:"防城港",g:"108.351791,21.617398|15"},{n:"桂林",g:"110.26092,25.262901|12"},{n:"贵港",g:"109.613708,23.103373|13"},{n:"河池",g:"108.069948,24.699521|14"},{n:"贺州",g:"111.552594,24.411054|14"},{n:"来宾",g:"109.231817,23.741166|14"},{n:"柳州",g:"109.422402,24.329053|12"},{n:"钦州",g:"108.638798,21.97335|13"},{n:"梧州",g:"111.305472,23.485395|13"},{n:"玉林",g:"110.151676,22.643974|14"}]},{n:"贵州",g:"106.734996,26.902826|8",cities:[{n:"贵阳",g:"106.709177,26.629907|12"},{n:"安顺",g:"105.92827,26.228595|13"},{n:"毕节地区",g:"105.300492,27.302612|14"},{n:"六盘水",g:"104.852087,26.591866|13"},{n:"铜仁地区",g:"109.196161,27.726271|14"},{n:"遵义",g:"106.93126,27.699961|13"},{n:"黔西南州",g:"104.900558,25.095148|11"},{n:"黔东南州",g:"107.985353,26.583992|11"},{n:"黔南州",g:"107.523205,26.264536|11"}]},{n:"海南",g:"109.733755,19.180501|9",cities:[{n:"海口",g:"110.330802,20.022071|13"},{n:"白沙",g:"109.358586,19.216056|12"},{n:"保亭",g:"109.656113,18.597592|12"},{n:"昌江",g:"109.0113,19.222483|12"},{n:"儋州",g:"109.413973,19.571153|13"},{n:"澄迈",g:"109.996736,19.693135|13"},{n:"东方",g:"108.85101,18.998161|13"},{n:"定安",g:"110.32009,19.490991|13"},{n:"琼海",g:"110.414359,19.21483|13"},{n:"琼中",g:"109.861849,19.039771|12"},{n:"乐东",g:"109.062698,18.658614|12"},{n:"临高",g:"109.724101,19.805922|13"},{n:"陵水",g:"109.948661,18.575985|12"},{n:"三亚",g:"109.522771,18.257776|12"},{n:"屯昌",g:"110.063364,19.347749|13"},{n:"万宁",g:"110.292505,18.839886|13"},{n:"文昌",g:"110.780909,19.750947|13"},{n:"五指山",g:"109.51775,18.831306|13"}]},{n:"河北",g:"115.661434,38.61384|7",cities:[{n:"石家庄",g:"114.522082,38.048958|12"},{n:"保定",g:"115.49481,38.886565|13"},{n:"沧州",g:"116.863806,38.297615|13"},{n:"承德",g:"117.933822,40.992521|14"},{n:"邯郸",g:"114.482694,36.609308|13"},{n:"衡水",g:"115.686229,37.746929|13"},{n:"廊坊",g:"116.703602,39.518611|13"},{n:"秦皇岛",g:"119.604368,39.945462|12"},{n:"唐山",g:"118.183451,39.650531|13"},{n:"邢台",g:"114.520487,37.069531|13"},{n:"张家口",g:"114.893782,40.811188|13"}]},{n:"河南",g:"113.486804,34.157184|7",cities:[{n:"郑州",g:"113.649644,34.75661|12"},{n:"安阳",g:"114.351807,36.110267|12"},{n:"鹤壁",g:"114.29777,35.755426|13"},{n:"焦作",g:"113.211836,35.234608|13"},{n:"开封",g:"114.351642,34.801854|13"},{n:"洛阳",g:"112.447525,34.657368|12"},{n:"漯河",g:"114.046061,33.576279|13"},{n:"南阳",g:"112.542842,33.01142|13"},{n:"平顶山",g:"113.300849,33.745301|13"},{n:"濮阳",g:"115.026627,35.753298|12"},{n:"三门峡",g:"111.181262,34.78332|13"},{n:"商丘",g:"115.641886,34.438589|13"},{n:"新乡",g:"113.91269,35.307258|13"},{n:"信阳",g:"114.085491,32.128582|13"},{n:"许昌",g:"113.835312,34.02674|13"},{n:"周口",g:"114.654102,33.623741|13"},{n:"驻马店",g:"114.049154,32.983158|13"}]},{n:"黑龙江",g:"128.047414,47.356592|6",cities:[{n:"哈尔滨",g:"126.657717,45.773225|12"},{n:"大庆",g:"125.02184,46.596709|12"},{n:"大兴安岭地区",g:"124.196104,51.991789|10"},{n:"鹤岗",g:"130.292472,47.338666|13"},{n:"黑河",g:"127.50083,50.25069|14"},{n:"鸡西",g:"130.941767,45.32154|13"},{n:"佳木斯",g:"130.284735,46.81378|12"},{n:"牡丹江",g:"129.608035,44.588521|13"},{n:"七台河",g:"131.019048,45.775005|14"},{n:"齐齐哈尔",g:"123.987289,47.3477|13"},{n:"双鸭山",g:"131.171402,46.655102|13"},{n:"绥化",g:"126.989095,46.646064|13"},{n:"伊春",g:"128.910766,47.734685|14"}]},{n:"湖北",g:"112.410562,31.209316|8",cities:[{n:"武汉",g:"114.3162,30.581084|12"},{n:"鄂州",g:"114.895594,30.384439|14"},{n:"恩施",g:"109.517433,30.308978|14"},{n:"黄冈",g:"114.906618,30.446109|14"},{n:"黄石",g:"115.050683,30.216127|13"},{n:"荆门",g:"112.21733,31.042611|13"},{n:"荆州",g:"112.241866,30.332591|12"},{n:"潜江",g:"112.768768,30.343116|13"},{n:"神农架林区",g:"110.487231,31.595768|13"},{n:"十堰",g:"110.801229,32.636994|13"},{n:"随州",g:"113.379358,31.717858|13"},{n:"天门",g:"113.12623,30.649047|13"},{n:"仙桃",g:"113.387448,30.293966|13"},{n:"咸宁",g:"114.300061,29.880657|13"},{n:"襄阳",g:"112.176326,32.094934|12"},{n:"孝感",g:"113.935734,30.927955|13"},{n:"宜昌",g:"111.310981,30.732758|13"}]},{n:"湖南",g:"111.720664,27.695864|7",cities:[{n:"长沙",g:"112.979353,28.213478|12"},{n:"常德",g:"111.653718,29.012149|12"},{n:"郴州",g:"113.037704,25.782264|13"},{n:"衡阳",g:"112.583819,26.898164|13"},{n:"怀化",g:"109.986959,27.557483|13"},{n:"娄底",g:"111.996396,27.741073|13"},{n:"邵阳",g:"111.461525,27.236811|13"},{n:"湘潭",g:"112.935556,27.835095|13"},{n:"湘西州",g:"109.745746,28.317951|14"},{n:"益阳",g:"112.366547,28.588088|13"},{n:"永州",g:"111.614648,26.435972|13"},{n:"岳阳",g:"113.146196,29.378007|13"},{n:"张家界",g:"110.48162,29.124889|13"},{n:"株洲",g:"113.131695,27.827433|13"}]},{n:"江苏",g:"119.368489,33.013797|8",cities:[{n:"南京",g:"118.778074,32.057236|12"},{n:"常州",g:"119.981861,31.771397|12"},{n:"淮安",g:"119.030186,33.606513|12"},{n:"连云港",g:"119.173872,34.601549|12"},{n:"南通",g:"120.873801,32.014665|12"},{n:"苏州",g:"120.619907,31.317987|12"},{n:"宿迁",g:"118.296893,33.95205|13"},{n:"泰州",g:"119.919606,32.476053|13"},{n:"无锡",g:"120.305456,31.570037|12"},{n:"徐州",g:"117.188107,34.271553|12"},{n:"盐城",g:"120.148872,33.379862|12"},{n:"扬州",g:"119.427778,32.408505|13"},{n:"镇江",g:"119.455835,32.204409|13"}]},{n:"江西",g:"115.676082,27.757258|7",cities:[{n:"南昌",g:"115.893528,28.689578|12"},{n:"抚州",g:"116.360919,27.954545|13"},{n:"赣州",g:"114.935909,25.845296|13"},{n:"吉安",g:"114.992039,27.113848|13"},{n:"景德镇",g:"117.186523,29.303563|12"},{n:"九江",g:"115.999848,29.71964|13"},{n:"萍乡",g:"113.859917,27.639544|13"},{n:"上饶",g:"117.955464,28.457623|13"},{n:"新余",g:"114.947117,27.822322|13"},{n:"宜春",g:"114.400039,27.81113|13"},{n:"鹰潭",g:"117.03545,28.24131|13"}]},{n:"吉林",g:"126.262876,43.678846|7",cities:[{n:"长春",g:"125.313642,43.898338|12"},{n:"白城",g:"122.840777,45.621086|13"},{n:"白山",g:"126.435798,41.945859|13"},{n:"吉林",g:"126.564544,43.871988|12"},{n:"辽源",g:"125.133686,42.923303|13"},{n:"四平",g:"124.391382,43.175525|12"},{n:"松原",g:"124.832995,45.136049|13"},{n:"通化",g:"125.94265,41.736397|13"},{n:"延边",g:"129.485902,42.896414|13"}]},{n:"辽宁",g:"122.753592,41.6216|8",cities:[{n:"沈阳",g:"123.432791,41.808645|12"},{n:"鞍山",g:"123.007763,41.118744|13"},{n:"本溪",g:"123.778062,41.325838|12"},{n:"朝阳",g:"120.446163,41.571828|13"},{n:"大连",g:"121.593478,38.94871|12"},{n:"丹东",g:"124.338543,40.129023|12"},{n:"抚顺",g:"123.92982,41.877304|12"},{n:"阜新",g:"121.660822,42.01925|14"},{n:"葫芦岛",g:"120.860758,40.74303|13"},{n:"锦州",g:"121.147749,41.130879|13"},{n:"辽阳",g:"123.172451,41.273339|14"},{n:"盘锦",g:"122.073228,41.141248|13"},{n:"铁岭",g:"123.85485,42.299757|13"},{n:"营口",g:"122.233391,40.668651|13"}]},{n:"内蒙古",g:"114.415868,43.468238|5",cities:[{n:"呼和浩特",g:"111.660351,40.828319|12"},{n:"阿拉善盟",g:"105.695683,38.843075|14"},{n:"包头",g:"109.846239,40.647119|12"},{n:"巴彦淖尔",g:"107.423807,40.76918|12"},{n:"赤峰",g:"118.930761,42.297112|12"},{n:"鄂尔多斯",g:"109.993706,39.81649|12"},{n:"呼伦贝尔",g:"119.760822,49.201636|12"},{n:"通辽",g:"122.260363,43.633756|12"},{n:"乌海",g:"106.831999,39.683177|13"},{n:"乌兰察布",g:"113.112846,41.022363|12"},{n:"锡林郭勒盟",g:"116.02734,43.939705|11"},{n:"兴安盟",g:"122.048167,46.083757|11"}]},{n:"宁夏",g:"106.155481,37.321323|8",cities:[{n:"银川",g:"106.206479,38.502621|12"},{n:"固原",g:"106.285268,36.021523|13"},{n:"石嘴山",g:"106.379337,39.020223|13"},{n:"吴忠",g:"106.208254,37.993561|14"},{n:"中卫",g:"105.196754,37.521124|14"}]},{n:"青海",g:"96.202544,35.499761|7",cities:[{n:"西宁",g:"101.767921,36.640739|12"},{n:"果洛州",g:"100.223723,34.480485|11"},{n:"海东地区",g:"102.085207,36.51761|11"},{n:"海北州",g:"100.879802,36.960654|11"},{n:"海南州",g:"100.624066,36.284364|11"},{n:"海西州",g:"97.342625,37.373799|11"},{n:"黄南州",g:"102.0076,35.522852|11"},{n:"玉树州",g:"97.013316,33.00624|14"}]},{n:"山东",g:"118.527663,36.09929|8",cities:[{n:"济南",g:"117.024967,36.682785|12"},{n:"滨州",g:"117.968292,37.405314|12"},{n:"东营",g:"118.583926,37.487121|12"},{n:"德州",g:"116.328161,37.460826|12"},{n:"菏泽",g:"115.46336,35.26244|13"},{n:"济宁",g:"116.600798,35.402122|13"},{n:"莱芜",g:"117.684667,36.233654|13"},{n:"聊城",g:"115.986869,36.455829|12"},{n:"临沂",g:"118.340768,35.072409|12"},{n:"青岛",g:"120.384428,36.105215|12"},{n:"日照",g:"119.50718,35.420225|12"},{n:"泰安",g:"117.089415,36.188078|13"},{n:"威海",g:"122.093958,37.528787|13"},{n:"潍坊",g:"119.142634,36.716115|12"},{n:"烟台",g:"121.309555,37.536562|12"},{n:"枣庄",g:"117.279305,34.807883|13"},{n:"淄博",g:"118.059134,36.804685|12"}]},{n:"山西",g:"112.515496,37.866566|7",cities:[{n:"太原",g:"112.550864,37.890277|12"},{n:"长治",g:"113.120292,36.201664|12"},{n:"大同",g:"113.290509,40.113744|12"},{n:"晋城",g:"112.867333,35.499834|13"},{n:"晋中",g:"112.738514,37.693362|13"},{n:"临汾",g:"111.538788,36.099745|13"},{n:"吕梁",g:"111.143157,37.527316|14"},{n:"朔州",g:"112.479928,39.337672|13"},{n:"忻州",g:"112.727939,38.461031|12"},{n:"阳泉",g:"113.569238,37.869529|13"},{n:"运城",g:"111.006854,35.038859|13"}]},{n:"陕西",g:"109.503789,35.860026|7",cities:[{n:"西安",g:"108.953098,34.2778|12"},{n:"安康",g:"109.038045,32.70437|13"},{n:"宝鸡",g:"107.170645,34.364081|12"},{n:"汉中",g:"107.045478,33.081569|13"},{n:"商洛",g:"109.934208,33.873907|13"},{n:"铜川",g:"108.968067,34.908368|13"},{n:"渭南",g:"109.483933,34.502358|13"},{n:"咸阳",g:"108.707509,34.345373|13"},{n:"延安",g:"109.50051,36.60332|13"},{n:"榆林",g:"109.745926,38.279439|12"}]},{n:"四川",g:"102.89916,30.367481|7",cities:[{n:"成都",g:"104.067923,30.679943|12"},{n:"阿坝州",g:"102.228565,31.905763|15"},{n:"巴中",g:"106.757916,31.869189|14"},{n:"达州",g:"107.494973,31.214199|14"},{n:"德阳",g:"104.402398,31.13114|13"},{n:"甘孜州",g:"101.969232,30.055144|15"},{n:"广安",g:"106.63572,30.463984|13"},{n:"广元",g:"105.819687,32.44104|13"},{n:"乐山",g:"103.760824,29.600958|13"},{n:"凉山州",g:"102.259591,27.892393|14"},{n:"泸州",g:"105.44397,28.89593|14"},{n:"南充",g:"106.105554,30.800965|13"},{n:"眉山",g:"103.84143,30.061115|13"},{n:"绵阳",g:"104.705519,31.504701|12"},{n:"内江",g:"105.073056,29.599462|13"},{n:"攀枝花",g:"101.722423,26.587571|14"},{n:"遂宁",g:"105.564888,30.557491|12"},{n:"雅安",g:"103.009356,29.999716|13"},{n:"宜宾",g:"104.633019,28.769675|13"},{n:"资阳",g:"104.63593,30.132191|13"},{n:"自贡",g:"104.776071,29.359157|13"}]},{n:"西藏",g:"89.137982,31.367315|6",cities:[{n:"拉萨",g:"91.111891,29.662557|13"},{n:"阿里地区",g:"81.107669,30.404557|11"},{n:"昌都地区",g:"97.185582,31.140576|15"},{n:"林芝地区",g:"94.349985,29.666941|11"},{n:"那曲地区",g:"92.067018,31.48068|14"},{n:"日喀则地区",g:"88.891486,29.269023|14"},{n:"山南地区",g:"91.750644,29.229027|11"}]},{n:"新疆",g:"85.614899,42.127001|6",cities:[{n:"乌鲁木齐",g:"87.564988,43.84038|12"},{n:"阿拉尔",g:"81.291737,40.61568|13"},{n:"阿克苏地区",g:"80.269846,41.171731|12"},{n:"阿勒泰地区",g:"88.137915,47.839744|13"},{n:"巴音郭楞",g:"86.121688,41.771362|12"},{n:"博尔塔拉州",g:"82.052436,44.913651|11"},{n:"昌吉州",g:"87.296038,44.007058|13"},{n:"哈密地区",g:"93.528355,42.858596|13"},{n:"和田地区",g:"79.930239,37.116774|13"},{n:"喀什地区",g:"75.992973,39.470627|12"},{n:"克拉玛依",g:"84.88118,45.594331|13"},{n:"克孜勒苏州",g:"76.137564,39.750346|11"},{n:"石河子",g:"86.041865,44.308259|13"},{n:"塔城地区",g:"82.974881,46.758684|12"},{n:"图木舒克",g:"79.198155,39.889223|13"},{n:"吐鲁番地区",g:"89.181595,42.96047|13"},{n:"五家渠",g:"87.565449,44.368899|13"},{n:"伊犁州",g:"81.297854,43.922248|11"}]},{n:"云南",g:"101.592952,24.864213|7",cities:[{n:"昆明",g:"102.714601,25.049153|12"},{n:"保山",g:"99.177996,25.120489|13"},{n:"楚雄州",g:"101.529382,25.066356|13"},{n:"大理州",g:"100.223675,25.5969|14"},{n:"德宏州",g:"98.589434,24.44124|14"},{n:"迪庆州",g:"99.713682,27.831029|14"},{n:"红河州",g:"103.384065,23.367718|11"},{n:"丽江",g:"100.229628,26.875351|13"},{n:"临沧",g:"100.092613,23.887806|14"},{n:"怒江州",g:"98.859932,25.860677|14"},{n:"普洱",g:"100.980058,22.788778|14"},{n:"曲靖",g:"103.782539,25.520758|12"},{n:"昭通",g:"103.725021,27.340633|13"},{n:"文山",g:"104.089112,23.401781|14"},{n:"西双版纳",g:"100.803038,22.009433|13"},{n:"玉溪",g:"102.545068,24.370447|13"}]},{n:"浙江",g:"119.957202,29.159494|8",cities:[{n:"杭州",g:"120.219375,30.259244|12"},{n:"湖州",g:"120.137243,30.877925|12"},{n:"嘉兴",g:"120.760428,30.773992|13"},{n:"金华",g:"119.652576,29.102899|12"},{n:"丽水",g:"119.929576,28.4563|13"},{n:"宁波",g:"121.579006,29.885259|12"},{n:"衢州",g:"118.875842,28.95691|12"},{n:"绍兴",g:"120.592467,30.002365|13"},{n:"台州",g:"121.440613,28.668283|13"},{n:"温州",g:"120.690635,28.002838|12"},{n:"舟山",g:"122.169872,30.03601|13"}]}],other:[{n:"香港",g:"114.186124,22.293586|11"},{n:"澳门",g:"113.557519,22.204118|13"},{n:"台湾",g:"120.961454,23.80406|8"}]},Et={getProvinceNameByCityName:function(t){for(var e=Mt.provinces,n=0;n<e.length;n++)for(var i=e[n].n,r=e[n].cities,o=0;o<r.length;o++)if(r[o].n==t)return i;return null},getCenterByCityName:function(t){t=t.replace("市","");for(var e=0;e<Mt.municipalities.length;e++)if(Mt.municipalities[e].n==t)return r(Mt.municipalities[e].g);for(e=0;e<Mt.other.length;e++)if(Mt.other[e].n==t)return r(Mt.other[e].g);var n=Mt.provinces;for(e=0;e<n.length;e++){if(n[e].n==t)return r(n[e].g);for(var i=n[e].cities,o=0;o<i.length;o++)if(i[o].n==t)return r(i[o].g)}return null}},It=function(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t},Tt=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};(h.prototype=Object.create(i.prototype)).add=function(t,e){if(Array.isArray(t)){for(var n=0,i=t.length;n<i;n++)if(t[n]){if(t[n].time&&14==t[n].time.length&&"20"==t[n].time.substr(0,2)){var r=t[n].time;t[n].time=new Date(r.substr(0,4)+"-"+r.substr(4,2)+"-"+r.substr(6,2)+" "+r.substr(8,2)+":"+r.substr(10,2)+":"+r.substr(12,2)).getTime()}this._data.push(t[n])}}else{if(!(t instanceof Object))throw new Error("Unknown dataType");this._data.push(t)}this._dataCache=JSON.parse(JSON.stringify(this._data))},h.prototype.reset=function(){this._data=JSON.parse(JSON.stringify(this._dataCache))},h.prototype.get=function(t){t=t||{},new Date;var e=this._data;if(new Date,t.filter){for(var n=[],i=0;i<e.length;i++)t.filter(e[i])&&n.push(e[i]);e=n}return t.transferCoordinate&&(e=this.transferCoordinate(e,t.transferCoordinate,t.fromColumn,t.toColumn)),e},h.prototype.set=function(t){this._set(t),this._trigger("change")},h.prototype._set=function(t){this.clear(),this.add(t)},h.prototype.clear=function(t){this._data=[]},h.prototype.remove=function(t){},h.prototype.update=function(t,e){for(var n=this._data,i=0;i<n.length;i++)if(e){var r=!0;for(var o in e)n[i][o]!=e[o]&&(r=!1);r&&t&&t(n[i])}else t&&t(n[i]);this._dataCache=JSON.parse(JSON.stringify(this._data)),this._trigger("change")},h.prototype.transferCoordinate=function(t,e,n,i){function r(t){for(var n=[],i=0;i<t.length;i++){for(var r=t[i],o=[],a=0;a<r.length;a++)o.push(e(r[a]));n.push(o)}return n}i=i||"_coordinates",n=n||"coordinates";for(var o=0;o<t.length;o++){var a=t[o].geometry,s=a[n];switch(a.type){case"Point":a[i]=e(s);break;case"LineString":for(var l=[],u=0;u<s.length;u++)l.push(e(s[u]));a[i]=l;break;case"MultiLineString":case"Polygon":l=r(s),a[i]=l;break;case"MultiPolygon":l=[];for(var c=0;c<s.length;c++){var h=r(h=s[c]);l.push(h)}a[i]=l}}return t},h.prototype.initGeometry=function(t){t?this._data.forEach(function(e){e.geometry=t(e)}):this._data.forEach(function(t){if(!t.geometry)if(t.lng&&t.lat)t.geometry={type:"Point",coordinates:[t.lng,t.lat]};else if(t.city){var e=Et.getCenterByCityName(t.city);e&&(t.geometry={type:"Point",coordinates:[e.lng,e.lat]})}})},h.prototype.getMax=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),i=1;i<e.length;i++){var r=parseFloat(e[i][t]);n<r&&(n=r)}return n}},h.prototype.getSum=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=0,i=0;i<e.length;i++)e[i][t]&&(n+=parseFloat(e[i][t]));return n}},h.prototype.getMin=function(t){var e=this._data;if(e&&!(e.length<=0)){for(var n=parseFloat(e[0][t]),i=1;i<e.length;i++){var r=parseFloat(e[i][t]);r<n&&(n=r)}return n}},h.prototype.getUnique=function(t){if((i=this._data)&&!(i.length<=0)){for(var e={},n=1;n<i.length;n++)e[i[n][t]]=!0;var i=[];for(var r in e)i.push(r);return i}};var Pt={drawDataSet:function(t,e,n){for(var i=e instanceof h?e.get():e,r=0,o=i.length;r<o;r++){var a=i[r];this.draw(t,a,n)}},draw:function(t,e,n){var i=e.geometry.type,r=e.geometry._coordinates||e.geometry.coordinates,o=e.symbol||n.symbol||"circle";switch(i){case"Point":var a=e._size||e.size||n._size||n.size||5;"circle"===o?("Point"===n.bigData&&t.moveTo(r[0],r[1]),t.arc(r[0],r[1],a,0,2*Math.PI)):"rect"===o?t.rect(r[0]-a/2,r[1]-a/2,a,a):"honeycomb"===o&&function(t,e,n,i){for(var r=0;r<6;r++){var o=(a={x:e,y:n},s=i,l=60*r+30,u=Math.PI/180*l,[a.x+s*Math.cos(u),a.y+s*Math.sin(u)]);t.lineTo(o[0],o[1])}var a,s,l,u}(t,r[0],r[1],a);break;case"LineString":this.drawLineString(t,r);break;case"MultiLineString":for(var s=0;s<r.length;s++){var l=r[s];this.drawLineString(t,l)}break;case"Polygon":this.drawPolygon(t,r);break;case"MultiPolygon":for(s=0;s<r.length;s++){var u=r[s];if(this.drawPolygon(t,u),n.multiPolygonDraw){var c=n.multiPolygonDraw();if(c)return c}}break;default:console.error("type"+i+"is not support now!")}},drawLineString:function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0],r=e[n][1];0==n?t.moveTo(i,r):t.lineTo(i,r)}},drawPolygon:function(t,e){t.beginPath();for(var n=0;n<e.length;n++){var i=e[n];t.moveTo(i[0][0],i[0][1]);for(var r=1;r<i.length;r++)t.lineTo(i[r][0],i[r][1]);t.lineTo(i[0][0],i[0][1]),t.closePath()}}},Lt={draw:function(t,e,n){var i=e instanceof h?e.get():e;for(var r in t.save(),n)t[r]=n[r];if(n.bigData){t.save(),t.beginPath();for(var o=0,a=i.length;o<a;o++){var s=i[o];Pt.draw(t,s,n)}"Point"==(l=n.bigData)||"Polygon"==l||"MultiPolygon"==l?(t.fill(),t.lineDash&&t.setLineDash(t.lineDash),s.lineDash&&t.setLineDash(s.lineDash),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"!=l&&"MultiLineString"!=l||t.stroke(),t.restore()}else for(o=0,a=i.length;o<a;o++){s=i[o],t.save(),(s.fillStyle||s._fillStyle)&&(t.fillStyle=s.fillStyle||s._fillStyle),(s.strokeStyle||s._strokeStyle)&&(t.strokeStyle=s.strokeStyle||s._strokeStyle),t.lineDash&&t.setLineDash(t.lineDash),s.lineDash&&t.setLineDash(s.lineDash);var l=s.geometry.type;t.beginPath(),n.multiPolygonDraw=function(){t.fill(),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()},Pt.draw(t,s,n),"Point"==l||"Polygon"==l||"MultiPolygon"==l?(t.fill(),(s.strokeStyle||n.strokeStyle)&&n.lineWidth&&t.stroke()):"LineString"!=l&&"MultiLineString"!=l||((s.lineWidth||s._lineWidth)&&(t.lineWidth=s.lineWidth||s._lineWidth),t.stroke()),t.restore()}t.restore()}};p.prototype.setMax=function(t){this.max=t||100},p.prototype.setMin=function(t){this.min=t||0},p.prototype.setMaxSize=function(t){this.maxSize=t||35},p.prototype.setMinSize=function(t){this.minSize=t||0},p.prototype.initPalette=function(){var t=this.gradient,e=new f(256,1),n=this.paletteCtx=e.getContext("2d"),i=n.createLinearGradient(0,0,256,1);for(var r in t)i.addColorStop(parseFloat(r),t[r]);n.fillStyle=i,n.fillRect(0,0,256,1)},p.prototype.getColor=function(t){var e=this.getImageData(t);return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]/256+")"},p.prototype.getImageData=function(t){var e=this.paletteCtx.getImageData(0,0,256,1).data;if(void 0===t)return e;var n=this.max,i=this.min;n<t&&(t=n),t<i&&(t=i);var r=4*Math.floor((t-i)/(n-i)*255);return[e[r],e[1+r],e[2+r],e[3+r]]},p.prototype.getSize=function(t){var e=this.max,n=this.min,i=this.maxSize,r=this.minSize;return e<t&&(t=e),t<n&&(t=n),n<e?r+(t-n)/(e-n)*(i-r):i},p.prototype.getLegend=function(t){var e=this.gradient,n=t.width||20,i=t.height||180,r=new f(n,i),o=r.getContext("2d"),a=o.createLinearGradient(0,i,0,0);for(var s in e)a.addColorStop(parseFloat(s),e[s]);return o.fillStyle=a,o.fillRect(0,0,n,i),r};var Dt=("undefined"==typeof window?{}:window).devicePixelRatio||1,At={draw:function(t,e,n){if(!(t.canvas.width<=0||t.canvas.height<=0)){var i=n.strength||.3;t.strokeStyle="rgba(0,0,0,"+i+")";var r=new f(t.canvas.width,t.canvas.height),o=r.getContext("2d");o.scale(Dt,Dt),n=n||{};var a=e instanceof h?e.get():e;t.save();var s=new p({gradient:n.gradient});if(m(o,a,n),!n.absolute){var l=o.getImageData(0,0,t.canvas.width,t.canvas.height);!function(t,e,n){var i=d(n),r=g(n),o=i-r,a=0,s=1024;(h=n.range||null)&&2===h.length&&(a=(h[0]-r)/o*1024),h&&2===h.length&&(s=(h[1]-r)/o*1024);for(var l,u=n.maxOpacity||.8,c=n.minOpacity||0,h=n.range,f=3,p=t.length;f<p;f+=4)l=4*t[f],t[f]/256>u&&(t[f]=256*u),t[f]/256<c&&(t[f]=256*c),l&&a<=l&&l<=s?(t[f-3]=e[l],t[f-2]=e[1+l],t[f-1]=e[2+l]):t[f]=0}(l.data,s.getImageData(),n),t.putImageData(l,0,0),t.restore()}r=s=null}}},kt={draw:function(t,e,n){t.save();var i=e instanceof h?e.get():e,r={},o=n._size||n.size||50,a=!("enableCluster"in n)||n.enableCluster,s=n.offset||{x:0,y:0},l=new p({min:n.min||0,max:n.max||100,gradient:n.gradient});if(a){for(var u=0;u<i.length;u++)d=i[u].geometry._coordinates||i[u].geometry.coordinates,r[m=Math.floor((d[0]-s.x)/o)+","+Math.floor((d[1]-s.y)/o)]||(r[m]=0),r[m]+=~~(i[u].count||1);for(var c in r)c=c.split(","),t.beginPath(),t.rect(c[0]*o+.5+s.x,c[1]*o+.5+s.y,o,o),t.fillStyle=l.getColor(r[c]),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}else{for(var f=0;f<i.length;f++){var d;r[m=(d=i[f].geometry._coordinates||i[f].geometry.coordinates).join(",")]=i[f].count||1}for(var g in r)g=g.split(","),t.beginPath(),t.rect(g[0]-o/2,g[1]-o/2,o,o),t.fillStyle=l.getColor(r[g]),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}if(n.label&&!1!==n.label.show)for(var m in t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur),r){var v=r[m=m.split(",")],y=t.measureText(v).width;a?t.fillText(v,m[0]*o+.5+s.x+o/2-y/2,m[1]*o+.5+s.y+o/2+5):t.fillText(v,m[0]-y/2,+m[1]+5)}t.restore()}},Nt={draw:function(t,e,n){t.save();var i=e instanceof h?e.get():e;for(var r in n)t[r]=n[r];for(var o=n.offset||{x:10,y:10},a=n._size||n.size||40,s=2*(a=a/2/Math.sin(Math.PI/3))*Math.sin(Math.PI/3),l=1.5*a,u={},c=0;c<i.length;c++){var f=i[c].geometry._coordinates||i[c].geometry.coordinates,d=(f[1]-o.y)/l,g=Math.round(d),m=(f[0]-o.x)/s-(1&g?.5:0),v=Math.round(m),y=d-g;if(1<3*Math.abs(y)){var _=m-v,x=v+(m<v?-1:1)/2,w=g+(d<g?-1:1),b=m-x,C=d-w;b*b+C*C<_*_+y*y&&(v=x+(1&g?1:-1)/2,g=w)}var S=v+"-"+g,M=u[S];M?M.push(i[c]):((M=u[S]=[i[c]]).i=v,M.j=g,M.x=(v+(1&g?.5:0))*s,M.y=g*l)}var E,I,T,P,L=new p({max:n.max||100,maxSize:a,gradient:n.gradient});for(var r in u){var D=u[r];t.beginPath();for(var A=0;A<6;A++){var k=(E={x:D.x+o.x,y:D.y+o.y},I=a,T=60*A+30,P=Math.PI/180*T,[E.x+I*Math.cos(P),E.y+I*Math.sin(P)]);t.lineTo(k[0],k[1])}t.closePath();var N=0;for(c=0;c<D.length;c++)N+=D[c].count||1;D.count=N,t.fillStyle=L.getColor(N),t.fill(),n.strokeStyle&&n.lineWidth&&t.stroke()}if(n.label&&!1!==n.label.show)for(var r in t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur),u){var O=(D=u[r]).count;O=O<0?O.toFixed(2):~~O;var R=t.measureText(O).width;t.fillText(O,D.x+o.x-R/2,D.y+o.y+5)}t.restore()}},Ot=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),Rt=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),Ft={draw:function(t,e,n){if(e){var i=y(t,Ot,Rt);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),t.clear(t.COLOR_BUFFER_BIT);var r=t.canvas.width/2,o=t.canvas.height/2,a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a);var s=t.getAttribLocation(i,"a_Position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(i,"u_FragColor"),u=_(n.strokeStyle||"red");t.uniform4f(l,u[0]/255,u[1]/255,u[2]/255,u[3]/255),t.lineWidth(n.lineWidth||1);for(var c=0,h=e.length;c<h;c++){for(var f=e[c].geometry._coordinates,p=[],d=0;d<f.length;d++){var g=f[d],m=(g[0]-r)/r,v=(o-g[1])/o;p.push(m,v)}var x=new Float32Array(p);t.bufferData(t.ARRAY_BUFFER,x,t.STATIC_DRAW),t.drawArrays(t.LINE_STRIP,0,f.length)}}}},zt=["attribute vec4 a_Position;","attribute float a_PointSize;","void main() {","gl_Position = a_Position;","gl_PointSize = a_PointSize;","}"].join(""),Bt=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),Vt={draw:function(t,e,n){if(e){var i=y(t,zt,Bt),r=t.getAttribLocation(i,"a_Position"),o=t.getAttribLocation(i,"a_PointSize"),a=t.getUniformLocation(i,"u_FragColor");t.clear(t.COLOR_BUFFER_BIT);for(var s=t.canvas.width/2,l=t.canvas.height/2,u=[],c=0,h=0;h<e.length;h++){var f=e[h].geometry._coordinates,p=(f[0]-s)/s,d=(l-f[1])/l;p<-1||1<p||d<-1||1<d||(u.push(p,d),c++)}var g=new Float32Array(u),m=c,v=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,v),t.bufferData(t.ARRAY_BUFFER,g,t.STATIC_DRAW),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r),t.vertexAttrib1f(o,n._size);var x=_(n.fillStyle||"red");t.uniform4f(a,x[0]/255,x[1]/255,x[2]/255,x[3]/255),t.drawArrays(t.POINTS,0,m)}}};x.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(j(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(j(t,u,c,n))}var h=0;for(s=0;s<i.length;s+=3){var f=i[s]*n,p=i[s+1]*n,d=i[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[1+p]-t[1+f])-(t[f]-t[p])*(t[1+d]-t[1+f]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},x.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);0<r&&(i+=t[r-1].length,n.holes.push(i))}return n};var Gt=["attribute vec4 a_Position;","void main() {","gl_Position = a_Position;","gl_PointSize = 30.0;","}"].join(""),Ht=["precision mediump float;","uniform vec4 u_FragColor;","void main() {","gl_FragColor = u_FragColor;","}"].join(""),jt={draw:function(t,e,n){if(e){t.clear(t.COLOR_BUFFER_BIT),t.viewport(0,0,t.canvas.width,t.canvas.height);var i=y(t,Gt,Ht);t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE);var r=t.canvas.width/2,o=t.canvas.height/2;t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer());var a=t.getAttribLocation(i,"a_Position");t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);var s=t.getUniformLocation(i,"u_FragColor"),l=_(n.fillStyle||"red");t.uniform4f(s,l[0]/255,l[1]/255,l[2]/255,l[3]/255),t.lineWidth(n.lineWidth||1);for(var u=[],c=[],h=0,f=0,p=e.length;f<p;f++){var d=x.flatten(e[f].geometry._coordinates||e[f].geometry.coordinates),g=d.vertices;h=u.length/2;for(var m=0;m<g.length;m+=2)g[m]=(g[m]-r)/r,g[m+1]=(o-g[m+1])/o;for(65536<(u.length+g.length)/2&&(t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),u.length=0,h=c.length=0),m=0;m<g.length;m++)u.push(g[m]);var v=x(g,d.holes,d.dimensions);for(m=0;m<v.length;m++)c.push(v[m]+h)}t.bufferData(t.ARRAY_BUFFER,new Float32Array(u),t.STATIC_DRAW),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(c),t.STATIC_DRAW),t.drawElements(t.TRIANGLES,c.length,t.UNSIGNED_SHORT,0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}}},Ut={draw:function(t,e,n){var i=e instanceof h?e.get():e;0<i.length&&("LineString"==i[0].geometry.type?Ft.draw(t,i,n):"Polygon"==i[0].geometry.type||"MultiPolygon"==i[0].geometry.type?jt.draw(t,i,n):Vt.draw(t,i,n))}},Wt={getPoints:function(t,e){e=e||{};for(var n=[],i=0;i<t.length-1;i++){var r=U(t[i],t[i+1],e.count);r&&0<r.length&&(n=n.concat(r))}return n}};W.prototype.get=function(t){var e=this.splitList,n=e.other;for(var i in e)if(t==i){n=e[i];break}return n},W.prototype.generateByDataSet=function(t,e){var n=e||["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],i=t.get();this.splitList={};for(var r=0,o=0;o<i.length&&(void 0===this.splitList[i[o].count]&&(this.splitList[i[o].count]=n[r],r++),!(n.length-1<=r));o++);this.splitList.other=n[n.length-1]},W.prototype.getLegend=function(t){var e=this.splitList,n=document.createElement("div");n.style.cssText="background:#fff; padding: 5px; border: 1px solid #ccc;";var i="";for(var r in e)i+='<div style="line-height: 19px;" value="'+r+'"><span style="vertical-align: -2px; display: inline-block; width: 30px;height: 19px;background:'+e[r]+';"></span><span style="margin-left: 3px;">'+r+"<span></div>";return n.innerHTML=i,n},q.prototype.get=function(t){for(var e=this.splitList,n=!1,i=0;i<e.length;i++)if((void 0===e[i].start||void 0!==e[i].start&&t>=e[i].start)&&(void 0===e[i].end||void 0!==e[i].end&&t<e[i].end)){n=e[i].value;break}return n},q.prototype.generateByDataSet=function(t){var e=t.getMin("count"),n=t.getMax("count");this.generateByMinMax(e,n)},q.prototype.generateByMinMax=function(t,e){var n=["rgba(255, 255, 0, 0.8)","rgba(253, 98, 104, 0.8)","rgba(255, 146, 149, 0.8)","rgba(255, 241, 193, 0.8)","rgba(110, 176, 253, 0.8)","rgba(52, 139, 251, 0.8)","rgba(17, 102, 252, 0.8)"],i=Number((e-t)/7);e=Number(e);var r=Number(t);this.splitList=[];for(var o=0;r<e;)this.splitList.push({start:r,end:r+i,value:n[o]}),o++,r+=i},q.prototype.getLegend=function(t){this.splitList};var qt=(It(Y,[{key:"addLayer",value:function(t,e){if("baidu"==this.type)return new mapv.baiduMapLayer(this.map,dataSet,e)}},{key:"getMap",value:function(){return this.map}}]),Y),Yt="undefined"==typeof window?{}:window,Xt=Yt.BMap||Yt.BMapGL;Xt&&((X.prototype=new Xt.Overlay).initialize=function(t){this._map=t;var e=this.canvas=document.createElement("canvas");e.style.cssText="position:absolute;left:0;top:0;z-index:"+this.zIndex+";user-select:none;",e.style.mixBlendMode=this.mixBlendMode,this.adjustSize();var n=t.getPanes()[this.paneName];(n=n||t.getPanes().floatShadow).appendChild(e);var i=this;return t.addEventListener("resize",function(){i.adjustSize(),i._draw()}),t.addEventListener("update",function(){i._draw()}),this.options.updateImmediate&&setTimeout(function(){i._draw()},100),this.canvas},X.prototype.adjustSize=function(){var t=this._map.getSize(),e=this.canvas,n=this.devicePixelRatio=Yt.devicePixelRatio||1;e.width=t.width*n,e.height=t.height*n,"2d"==this.context&&e.getContext(this.context).scale(n,n),e.style.width=t.width+"px",e.style.height=t.height+"px"},X.prototype.draw=function(){var t=this;this.options.updateImmediate?t._draw():(clearTimeout(t.timeoutID),t.timeoutID=setTimeout(function(){t._draw()},15))},X.prototype._draw=function(){var t=this._map,e=t.getSize(),n=t.getCenter();if(n){var i=t.pointToOverlayPixel(n);this.canvas.style.left=i.x-e.width/2+"px",this.canvas.style.top=i.y-e.height/2+"px",
this.dispatchEvent("draw"),this.options.update&&this.options.update.call(this)}},X.prototype.getContainer=function(){return this.canvas},X.prototype.show=function(){this.canvas||this._map.addOverlay(this),this.canvas.style.display="block"},X.prototype.hide=function(){this.canvas.style.display="none"},X.prototype.setZIndex=function(t){this.zIndex=t,this.canvas.style.zIndex=this.zIndex},X.prototype.getZIndex=function(){return this.zIndex});var Zt,Jt,Kt=Kt||(Zt=[],{getAll:function(){return Zt},removeAll:function(){Zt=[]},add:function(t){Zt.push(t)},remove:function(t){var e=Zt.indexOf(t);-1!==e&&Zt.splice(e,1)},update:function(t,e){if(0===Zt.length)return!1;var n=0;for(t=void 0!==t?t:Kt.now();n<Zt.length;)Zt[n].update(t)||e?n++:Zt.splice(n,1);return!0}});"undefined"==typeof window&&"undefined"!=typeof n?Kt.now=function(){var t=n.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?Kt.now=window.performance.now.bind(window.performance):void 0!==Date.now?Kt.now=Date.now:Kt.now=function(){return(new Date).getTime()},Kt.Tween=function(t){var e,n=t,i={},r={},o={},a=1e3,s=0,l=!1,u=!1,c=!1,h=0,f=null,p=Kt.Easing.Linear.None,d=Kt.Interpolation.Linear,g=[],m=null,v=!1,y=null,_=null,x=null;this.to=function(t,e){return r=t,void 0!==e&&(a=e),this},this.start=function(t){for(var e in Kt.add(this),v=!(u=!0),f=void 0!==t?t:Kt.now(),f+=h,r){if(r[e]instanceof Array){if(0===r[e].length)continue;r[e]=[n[e]].concat(r[e])}void 0!==n[e]&&(i[e]=n[e],i[e]instanceof Array==0&&(i[e]*=1),o[e]=i[e]||0)}return this},this.stop=function(){return u&&(Kt.remove(this),u=!1,null!==x&&x.call(n,n),this.stopChainedTweens()),this},this.end=function(){return this.update(f+a),this},this.stopChainedTweens=function(){for(var t=0,e=g.length;t<e;t++)g[t].stop()},this.delay=function(t){return h=t,this},this.repeat=function(t){return s=t,this},this.repeatDelay=function(t){return e=t,this},this.yoyo=function(t){return l=t,this},this.easing=function(t){return p=t,this},this.interpolation=function(t){return d=t,this},this.chain=function(){return g=arguments,this},this.onStart=function(t){return m=t,this},this.onUpdate=function(t){return y=t,this},this.onComplete=function(t){return _=t,this},this.onStop=function(t){return x=t,this},this.update=function(t){var u,x,w;if(t<f)return!0;for(u in!1===v&&(null!==m&&m.call(n,n),v=!0),w=p(x=1<(x=(t-f)/a)?1:x),r)if(void 0!==i[u]){var b=i[u]||0,C=r[u];C instanceof Array?n[u]=d(C,w):("string"==typeof C&&(C="+"===C.charAt(0)||"-"===C.charAt(0)?b+parseFloat(C):parseFloat(C)),"number"==typeof C&&(n[u]=b+(C-b)*w))}if(null!==y&&y.call(n,w),1!==x)return!0;if(0<s){for(u in isFinite(s)&&s--,o){if("string"==typeof r[u]&&(o[u]=o[u]+parseFloat(r[u])),l){var S=o[u];o[u]=r[u],r[u]=S}i[u]=o[u]}return l&&(c=!c),f=void 0!==e?t+e:t+h,!0}null!==_&&_.call(n,n);for(var M=0,E=g.length;M<E;M++)g[M].start(f+a);return!1}},Kt.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-Kt.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Kt.Easing.Bounce.In(2*t):.5*Kt.Easing.Bounce.Out(2*t-1)+.5}}},Kt.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=Kt.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],i):1<e?o(t[n],t[n-1],n-i):o(t[r],t[n<r+1?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=Kt.Interpolation.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-e,i-a)*r(e,a)*t[a]*o(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=Kt.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):1<e?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=Kt.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(Jt=[1],function(t){var e=1;if(Jt[t])return Jt[t];for(var n=t;1<n;n--)e*=n;return Jt[t]=e}),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r;return(2*e-2*n+o+a)*(r*s)+(-3*e+3*n-2*o-a)*s+o*r+e}}};var $t={},Qt={draw:function(t,e,n){var i="http://huiyan.baidu.com/github/tools/gis-drawing/static/images/direction.png";n.arrow&&n.arrow.url&&(i=n.arrow.url),$t[i]||($t[i]=null);var r=$t[i];if(!r){var o=Array.prototype.slice.call(arguments),a=new Image;return a.onload=function(){$t[i]=a,Qt.draw.apply(null,o)},void(a.src=i)}var s=e instanceof h?e.get():e;for(var l in t.save(),n)t[l]=n[l];for(var u,c,f,p,d,g,m,v=[],y=null,_=0,x=s.length;_<x;_++){var w=s[_];t.save(),(w.fillStyle||w._fillStyle)&&(t.fillStyle=w.fillStyle||w._fillStyle),(w.strokeStyle||w._strokeStyle)&&(t.strokeStyle=w.strokeStyle||w._strokeStyle);var b=w.geometry.type;if(t.beginPath(),"LineString"===b)for(var C=w.geometry._coordinates||w.geometry.coordinates,S=void 0!==n.arrow.interval?n.arrow.interval:1,M=0;M<C.length;M+=S)if(C[M]&&C[M+1]){var E=C[M];if(y&&(g=E,m=y,Math.sqrt(Math.pow(g[0]-m[0],2)+Math.pow(g[1]-m[1],2))<30))continue;t.save();var I=(u=C[M],c=C[M+1],d=void 0,f=c[0]-u[0],p=c[1]-u[1],d=360*Math.atan(p/f)/(2*Math.PI),c[0]<u[0]&&(d+=180),d);t.translate(E[0],E[1]),t.rotate(I*Math.PI/180),t.drawImage(r,-r.width/2/2,-r.height/2/2,r.width/2,r.height/2),t.restore(),v.push(E),y=E}t.restore()}t.restore()}},te=function(t,n,i){var r=n instanceof h?n.get():n;t.save(),t.fillStyle=i.fillStyle||"rgba(0, 0, 0, 0.5)",t.fillRect(0,0,t.canvas.width,t.canvas.height),i.multiPolygonDraw=function(){t.save(),t.clip(),e(t),t.restore()};for(var o=0,a=r.length;o<a;o++)t.beginPath(),Pt.drawDataSet(t,[r[o]],i),t.save(),t.clip(),e(t),t.restore();t.restore()},ee={},ne={},ie={draw:function(t,e,n){t.save();for(var i=e instanceof h?e.get():e,r=0;r<i.length;r++){var o=i[r],a=o.geometry._coordinates||o.geometry.coordinates;if(t.beginPath(),o.properties&&o.properties.cluster){if(t.arc(a[0],a[1],o.size,0,2*Math.PI),t.fillStyle=o.fillStyle,t.fill(),n.label&&!1!==n.label.show){t.fillStyle=n.label.fillStyle||"white",n.label.font&&(t.font=n.label.font),n.label.shadowColor&&(t.shadowColor=n.label.shadowColor),n.label.shadowBlur&&(t.shadowBlur=n.label.shadowBlur);var s=o.properties.point_count,l=t.measureText(s).width;t.fillText(s,a[0]+.5-l/2,a[1]+.5+3)}}else this.drawIcon(o,n,t)}t.restore()},drawIcon:function(t,e,n){function i(){n.beginPath(),n.arc(a,s,e.size||5,0,2*Math.PI),n.fillStyle=e.fillStyle||"red",n.fill()}var r=t.geometry._coordinates||t.geometry.coordinates,o=Tt(r,2),a=o[0],s=o[1],l=Object.assign({},e.iconOptions,t.iconOptions);if(l.url){var u=l.width,c=l.height,h=l.offset||{x:0,y:0};a=a-~~u/2+h.x,s=s-~~c/2+h.y;var f,p,d,g,m,v,y,_,x=window.encodeURIComponent(l.url),w=ee[x];w?"error"===w?i():u&&c?n.drawImage(w,a,s,u,c):n.drawImage(w,a,s):(ne[x]||(ne[x]=[],m=x,v=function(t,e){ne[e]&&ne[e].forEach(function(e){return e(t)}),ne[e]=null,ee[e]=t},y=function(t){ne[t]&&ne[t].forEach(function(e){return e("error",t)}),ne[t]=null,ee[t]="error",i()},(_=new Image).onload=function(){v&&v(_,m)},_.onerror=function(){y&&y(m)},_.src=window.decodeURIComponent(m)),ne[x].push((f=a,p=s,d=u,g=c,function(t){"error"===t?i():d&&g?n.drawImage(t,f,p,d,g):n.drawImage(t,f,p)})))}else i()}},re=function(t,e,n){var i=e instanceof h?e.get():e;for(var r in t.save(),n)t[r]=n[r];var o=[],a=n._size||n.size;a?t.font="bold "+a+"px Arial":a=12;var s=n.textKey||"text";if(n.textAlign||(t.textAlign="center"),n.textBaseline||(t.textBaseline="middle"),n.avoid)for(var l=0,u=i.length;l<u;l++){var c=i[l].offset||n.offset||{x:0,y:0},f=(_=i[l].geometry._coordinates||i[l].geometry.coordinates)[0]+c.x,p=_[1]+c.y,d=i[l][s],g=t.measureText(d).width,m=f-g/2,v=p-a/2,y={sw:{x:m,y:v+a},ne:{x:m+g,y:v}};Z(o,y)||(o.push(y),m+=g/2,v+=a/2,t.fillText(d,m,v))}else for(l=0,u=i.length;l<u;l++){var _;c=i[l].offset||n.offset||{x:0,y:0},f=(_=i[l].geometry._coordinates||i[l].geometry.coordinates)[0]+c.x,p=_[1]+c.y,d=i[l][s],t.fillText(d,f,p)}t.restore()},oe={},ae={},se=function(t,e,n){for(var i=e instanceof h?e.get():e,r=function e(){var r,e,a,l,u=i[o];if(u.geometry)if("string"==typeof(s=u.icon||n.icon)){var c=window.encodeURIComponent(s),h=oe[c];h?K(h,n,t,u):(ae[c]||(ae[c]=[],r=c,e=function(t,e){ae[e]&&ae[e].forEach(function(e){return e(t)}),ae[e]=null,oe[e]=t},a=function(t){ae[t]&&ae[t].forEach(function(t){return t("error")}),ae[t]=null,oe[t]="error"},(l=new Image).onload=function(){e&&e(l,r)},l.onerror=function(){a&&a(r)},l.src=window.decodeURIComponent(r)),ae[c].push(function(e){K(e,n,t,u)}))}else K(s,n,t,u)},o=0,a=i.length;o<a;o++){var s;r()}};rt.prototype.range=function(t,e,n,i){return function(t,e,n,i,r,o,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),f=u.pop(),p=u.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=e[2*d],l=e[2*d+1],n<=s&&s<=r&&i<=l&&l<=o&&c.push(t[d]);else{var g=Math.floor((p+f)/2);s=e[2*g],l=e[2*g+1],n<=s&&s<=r&&i<=l&&l<=o&&c.push(t[g]);var m=(h+1)%2;(0===h?n<=s:i<=l)&&(u.push(p),u.push(g-1),u.push(m)),(0===h?s<=r:l<=o)&&(u.push(g+1),u.push(f),u.push(m))}}return c}(this.ids,this.coords,t,e,n,i,this.nodeSize)};var le={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!(rt.prototype.within=function(t,e,n){return function(t,e,n,i,r,o){for(var a=[0,t.length-1,0],s=[],l=r*r;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o)for(var f=h;f<=c;f++)et(e[2*f],e[2*f+1],n,i)<=l&&s.push(t[f]);else{var p=Math.floor((h+c)/2),d=e[2*p],g=e[2*p+1];et(d,g,n,i)<=l&&s.push(t[p]);var m=(u+1)%2;(0===u?n-r<=d:i-r<=g)&&(a.push(h),a.push(p-1),a.push(m)),(0===u?d<=n+r:g<=i+r)&&(a.push(p+1),a.push(c),a.push(m))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}),generateId:!1,reduce:null,map:function(t){return t}};ot.prototype.load=function(t){var e=this.options,n=(e.log,e.minZoom),i=e.maxZoom,r=e.nodeSize;t.length,this.points=t;for(var o,a,s,l,u,c=[],h=0;h<t.length;h++)t[h].geometry&&c.push((o=t[h],a=h,s=o.geometry.coordinates,l=s[0],u=s[1],{x:lt(l),y:ut(u),zoom:1/0,index:a,parentId:-1}));this.trees[i+1]=new rt(c,ht,ft,r,Float32Array);for(var f=i;n<=f;f--)Date.now(),c=this._cluster(c,f),this.trees[f]=new rt(c,ht,ft,r,Float32Array);return this},ot.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(360<=t[2]-t[0])n=-180,r=180;else if(r<n){var a=this.getClusters([n,i,180,o],e),s=this.getClusters([-180,i,r,o],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,h=l.range(lt(n),ut(o),lt(r),ut(i));c<h.length;c+=1){var f=h[c],p=l.points[f];u.push(p.numPoints?at(p):this.points[p.index])}return u},ot.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);var o=r.points[e];if(!o)throw new Error(i);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],l=0,u=r.within(o.x,o.y,a);l<u.length;l+=1){var c=u[l],h=r.points[c];h.parentId===t&&s.push(h.numPoints?at(h):this.points[h.index])}if(0===s.length)throw new Error(i);return s},ot.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var i=[];return this._appendLeaves(i,t,e,n,0),i},ot.prototype.getTile=function(t,e,n){var i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius/a,l=(n-s)/r,u=(n+1+s)/r,c={features:[]};return this._addTileFeatures(i.range((e-s)/r,l,(e+1+s)/r,u),i.points,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-s/r,l,1,u),i.points,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,l,s/r,u),i.points,-1,n,r,c),c.features.length?c:null},ot.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},ot.prototype._appendLeaves=function(t,e,n,i,r){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],l=s.properties;if(l&&l.cluster?r+l.point_count<=i?r+=l.point_count:r=this._appendLeaves(t,l.cluster_id,n,i,r):r<i?r++:t.push(s),t.length===n)break}return r},ot.prototype._addTileFeatures=function(t,e,n,i,r,o){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*r-n)),Math.round(this.options.extent*(l.y*r-i))]],tags:u?st(l):this.points[l.index].properties},h=void 0;u?h=l.id:this.options.generateId?h=l.index:this.points[l.index].id&&(h=this.points[l.index].id),void 0!==h&&(c.id=h),o.features.push(c)}},ot.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},ot.prototype._cluster=function(t,e){for(var n=[],i=this.options,r=i.radius,o=i.extent,a=i.reduce,s=i.minPoints,l=r/(o*Math.pow(2,e)),u=0;u<t.length;u++){var c=t[u];if(!(c.zoom<=e)){c.zoom=e;for(var h=this.trees[e+1],f=h.within(c.x,c.y,l),p=c.numPoints||1,d=p,g=0,m=f;g<m.length;g+=1){var v=m[g],y=h.points[v];y.zoom>e&&(d+=y.numPoints||1)}if(s<=d){for(var _=c.x*p,x=c.y*p,w=a&&1<p?this._map(c,!0):null,b=(u<<5)+(e+1)+this.points.length,C=0,S=f;C<S.length;C+=1){var M=S[C],E=h.points[M];if(!(E.zoom<=e)){E.zoom=e;var I=E.numPoints||1;_+=E.x*I,x+=E.y*I,E.parentId=b,a&&a(w=w||this._map(c,!0),this._map(E))}}c.parentId=b,n.push({x:_/d,y:x/d,zoom:1/0,id:b,parentId:-1,numPoints:d,properties:w})}else if(n.push(c),1<d)for(var T=0,P=f;T<P.length;T+=1){var L=P[T],D=h.points[L];D.zoom<=e||(D.zoom=e,n.push(D))}}}return n},ot.prototype._getOriginId=function(t){return t-this.points.length>>5},ot.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},ot.prototype._map=function(t,e){if(t.numPoints)return e?ct({},t.properties):t.properties;var n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?ct({},i):i},"undefined"!=typeof window&&requestAnimationFrame(function t(e){requestAnimationFrame(t),Kt.update(e)});var ue=(It(pt,[{key:"refreshCluster",value:function(t){t=t||this.options,this.supercluster=new ot({maxZoom:t.maxZoom||19,radius:t.clusterRadius||100,minPoints:t.minPoints||2,extent:t.extent||512}),this.supercluster.load(this.dataSet.get()),this.supercluster.trees.forEach(function(t){var e=0,n=1/0;t.points.forEach(function(t){e=Math.max(t.numPoints||0,e),n=Math.min(t.numPoints||1/0,n)}),t.max=e,t.min=n}),this.clusterDataSet=new h}},{key:"getDefaultContextConfig",value:function(){return{globalAlpha:1,globalCompositeOperation:"source-over",imageSmoothingEnabled:!0,strokeStyle:"#000000",fillStyle:"#000000",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)",lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,lineDashOffset:0,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"}}},{key:"initDataRange",value:function(){var t=this;if(t.intensity=new p({maxSize:t.options.maxSize,minSize:t.options.minSize,gradient:t.options.gradient,max:t.options.max||this.dataSet.getMax("count")}),t.category=new W(t.options.splitList),t.choropleth=new q(t.options.splitList),void 0===t.options.splitList&&t.category.generateByDataSet(this.dataSet,t.options.color),void 0===t.options.splitList){var e=t.options.min||this.dataSet.getMin("count"),n=t.options.max||this.dataSet.getMax("count");t.choropleth.generateByMinMax(e,n)}}},{key:"getLegend",value:function(t){return this.options.draw,"intensity"==this.options.draw||"heatmap"==this.options.draw?this.intensity.getLegend(t):"category"==this.options.draw?this.category.getLegend(t):void 0}},{key:"processData",value:function(t){var e=this,n=e.options.draw;if("bubble"==n||"intensity"==n||"category"==n||"choropleth"==n||"simple"==n)for(var i=0;i<t.length;i++){var r=t[i];"bubble"==e.options.draw?t[i]._size=e.intensity.getSize(r.count):t[i]._size=void 0;var o="_fillStyle";"LineString"!==t[i].geometry.type&&"stroke"!==e.options.styleType||(o="_strokeStyle"),"intensity"==e.options.draw?t[i][o]=e.intensity.getColor(r.count):"category"==e.options.draw?t[i][o]=e.category.get(r.count):"choropleth"==e.options.draw&&(t[i][o]=e.choropleth.get(r.count))}}},{key:"isEnabledTime",value:function(){var t=this.options.animation;return t&&!(!1===t.enabled)}},{key:"argCheck",value:function(t){"heatmap"==t.draw&&t.strokeStyle&&console.warn("[heatmap] options.strokeStyle is discard, pleause use options.strength [eg: options.strength = 0.1]")}},{key:"drawContext",value:function(t,e,n,i){var r=this;switch(r.options.draw){case"heatmap":At.draw(t,e,r.options);break;case"grid":case"cluster":case"honeycomb":r.options.offset={x:i.x,y:i.y},"grid"===r.options.draw?kt.draw(t,e,r.options):"cluster"===r.options.draw?ie.draw(t,e,r.options):Nt.draw(t,e,r.options);break;case"text":re(t,e,r.options);break;case"icon":se(t,e,r.options);break;case"clip":te(t,e,r.options);break;default:"webgl"==r.options.context?Ut.draw(r.canvasLayer.canvas.getContext("webgl"),e,r.options):Lt.draw(t,e,r.options)}r.options.arrow&&!1!==r.options.arrow.show&&Qt.draw(t,e,r.options)}},{key:"isPointInPath",value:function(t,e){var n;t=this.canvasLayer.canvas.getContext(this.context),n="cluster"===this.options.draw&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=this.getZoom())?this.clusterDataSet.get():this.dataSet.get();for(var i=0;i<n.length;i++){t.beginPath();var r=this.options,o=e.x*this.canvasLayer.devicePixelRatio,a=e.y*this.canvasLayer.devicePixelRatio;if(r.multiPolygonDraw=function(){if(t.isPointInPath(o,a))return n[i]},Pt.draw(t,n[i],r),-1<(n[i].geometry&&n[i].geometry.type).indexOf("LineString")){if(t.isPointInStroke&&t.isPointInStroke(o,a))return n[i]}else if(t.isPointInPath(o,a))return n[i]}}},{key:"getClusterPoints",value:function(t){var e=this;return"Feature"!==t.type?[]:this.supercluster.getChildren(t.id).map(function(t){return"Feature"===t.type?e.getClusterPoints(t):t}).flat()}},{key:"clickEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);if(n){if("cluster"===this.options.draw){var i=this.getClusterPoints(n);n.children=i}this.options.methods.click(n,e)}else this.options.methods.click(null,e)}}},{key:"mousemoveEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);if(n){if("cluster"===this.options.draw){var i=this.getClusterPoints(n);n.children=i}this.options.methods.mousemove(n,e)}else this.options.methods.mousemove(null,e)}}},{key:"tapEvent",value:function(t,e){if(this.options.methods){var n=this.isPointInPath(this.getContext(),t);if(n){if("cluster"===this.options.draw){var i=this.getClusterPoints(n);n.children=i}this.options.methods.tap(n,e)}else this.options.methods.tap(null,e)}}},{key:"update",value:function(t,e){var n=t.options,i=this.options;for(var r in n)i[r]=n[r];this.init(i),!1!==e&&this.draw()}},{key:"setOptions",value:function(t){this.dataSet.reset(),this.init(t),this.draw()}},{key:"set",value:function(t){var e=this.getContext(),n=this.getDefaultContextConfig();for(var i in n)e[i]=n[i];this.init(t.options),this.draw()}},{key:"destroy",value:function(){this.unbindEvent(),this.hide()}},{key:"initAnimator",value:function(){var t=this,e=t.options.animation;if("time"==t.options.draw||t.isEnabledTime()){e.stepsRange||(e.stepsRange={start:this.dataSet.getMin("time")||0,end:this.dataSet.getMax("time")||0}),this.steps={step:e.stepsRange.start},t.animator=new Kt.Tween(this.steps).onUpdate(function(){t._canvasUpdate(this.step)}).repeat(1/0),this.addAnimatorEvent();var n=1e3*e.duration||5e3;t.animator.to({step:e.stepsRange.end},n),t.animator.start()}else t.animator&&t.animator.stop()}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}}]),pt),ce="undefined"==typeof window?{}:window,he=ce.BMap||ce.BMapGL,fe=(u(dt,ue),It(dt,[{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator()}},{key:"transferToMercator",value:function(){var t,e=this.map,n=e.getMapType();if(t=n.getProjection?n.getProjection():{lngLatToPoint:function(t){var n=e.lnglatToMercator(t.lng,t.lat);return{x:n[0],y:n[1]}}},"bd09mc"!==this.options.coordType){var i=this.dataSet.get();i=this.dataSet.transferCoordinate(i,function(e){var n=t.lngLatToPoint({lng:e[0],lat:e[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),this.dataSet._set(i)}}},{key:"_canvasUpdate",value:function(){var t=this.ctx;if(t){var n,i,r,o=this.map;o.getMapType().getProjection?i=(n=o.getMapType().getProjection()).lngLatToPoint(o.getCenter()):(-180<(i={x:o.getCenter().lng,y:o.getCenter().lat}).x&&i.x<180&&(i={x:(i=o.lnglatToMercator(i.x,i.y))[0],y:i[1]}),n={lngLatToPoint:function(t){var e=o.lnglatToMercator(t.lng,t.lat);return{x:e[0],y:e[1]}}}),r=n.getZoomUnits?n.getZoomUnits(o.getZoom()):Math.pow(2,18-o.getZoom());var a=new he.Pixel(i.x-o.getSize().width/2*r,i.y+o.getSize().height/2*r);e(t);var s={fromColumn:"bd09mc"==this.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){if(t)return[(t[0]-a.x)/r,(a.y-t[1])/r]}};this.data=this.dataSet.get(s),this.processData(this.data),this.drawAnimation()}}},{key:"drawAnimation",value:function(){var t=this.ctx,e=this.data;if(e){t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore(),t.save(),this.options.shadowColor&&(t.shadowColor=this.options.shadowColor),this.options.shadowBlur&&(t.shadowBlur=this.options.shadowBlur),this.options.globalAlpha&&(t.globalAlpha=this.options.globalAlpha),this.options.globalCompositeOperation&&(t.globalCompositeOperation=this.options.globalCompositeOperation);for(var n=this.options,i=0;i<e.length;i++)if("Point"===e[i].geometry.type){t.beginPath();var r=e[i].size||this.options.size,o=e[i].minSize||this.options.minSize||0;void 0===e[i]._size&&(e[i]._size=o),t.arc(e[i].geometry._coordinates[0],e[i].geometry._coordinates[1],e[i]._size,0,2*Math.PI,!0),t.closePath(),e[i]._size++,e[i]._size>r&&(e[i]._size=o),t.lineWidth=1,t.strokeStyle=e[i].strokeStyle||e[i]._strokeStyle||n.strokeStyle||"yellow",t.stroke(),(u=e[i].fillStyle||e[i]._fillStyle||n.fillStyle)&&(t.fillStyle=u,t.fill())}else if("LineString"===e[i].geometry.type){t.beginPath();var a=e[i].size||this.options.size||5;o=e[i].minSize||this.options.minSize||0,void 0===e[i]._index&&(e[i]._index=0);var s=e[i]._index;t.arc(e[i].geometry._coordinates[s][0],e[i].geometry._coordinates[s][1],a,0,2*Math.PI,!0),t.closePath(),e[i]._index++,e[i]._index>=e[i].geometry._coordinates.length&&(e[i]._index=0);var l=e[i].strokeStyle||n.strokeStyle,u=e[i].fillStyle||n.fillStyle||"yellow";t.fillStyle=u,t.fill(),l&&n.lineWidth&&(t.lineWidth=n.lineWidth||1,t.strokeStyle=l,t.stroke())}t.restore()}}},{key:"animate",value:function(){this.drawAnimation();var t=this.options.animateTime||100;this.timeout=setTimeout(this.animate.bind(this),t)}},{key:"start",value:function(){this.stop(),this.animate()}},{key:"stop",value:function(){clearTimeout(this.timeout)}},{key:"unbindEvent",value:function(){}},{key:"hide",value:function(){this.canvasLayer.hide(),this.stop()}},{key:"show",value:function(){this.start()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.stop(),this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),dt),pe="undefined"==typeof window?{}:window,de=pe.BMap||pe.BMapGL,ge=(u(gt,ue),It(gt,[{key:"clickEvent",value:function(t){var e=t.pixel;l(gt.prototype.__proto__||Object.getPrototypeOf(gt.prototype),"clickEvent",this).call(this,e,t)}},{key:"mousemoveEvent",value:function(t){var e=t.pixel;l(gt.prototype.__proto__||Object.getPrototypeOf(gt.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"tapEvent",value:function(t){var e=t.pixel;l(gt.prototype.__proto__||Object.getPrototypeOf(gt.prototype),"tapEvent",this).call(this,e,t)}},{key:"bindEvent",value:function(){this.unbindEvent();var t=this.map,e=0,n=this;this.options.methods&&(this.options.methods.click&&(t.setDefaultCursor("default"),t.addEventListener("click",this.clickEvent)),this.options.methods.mousemove&&t.addEventListener("mousemove",this.mousemoveEvent),"ontouchend"in window.document&&this.options.methods.tap&&(t.addEventListener("touchstart",function(t){e=new Date}),t.addEventListener("touchend",function(t){new Date-e<300&&n.tapEvent(t)})))}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.removeEventListener("click",this.clickEvent),this.options.methods.mousemove&&t.removeEventListener("mousemove",this.mousemoveEvent))}},{key:"transferToMercator",value:function(t){t=t||this.dataSet;var e,n=this.map,i=n.getMapType();if(e=i.getProjection?i.getProjection():{lngLatToPoint:function(t){var e=n.lnglatToMercator(t.lng,t.lat);return{x:e[0],y:e[1]}}},"bd09mc"!==this.options.coordType){var r=t.get();r=t.transferCoordinate(r,function(t){if(t[0]<-180||180<t[0]||t[1]<-90||90<t[1])return t;var n=e.lngLatToPoint({lng:t[0],lat:t[1]});return[n.x,n.y]},"coordinates","coordinates_mercator"),t._set(r)}}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var n,i,r,o=this,a=this.options.animation,s=this.canvasLayer._map;s.getMapType().getProjection?i=(n=s.getMapType().getProjection()).lngLatToPoint(s.getCenter()):(-180<(i={x:s.getCenter().lng,y:s.getCenter().lat}).x&&i.x<180&&(i={x:(i=s.lnglatToMercator(i.x,i.y))[0],y:i[1]}),n={lngLatToPoint:function(t){var e=s.lnglatToMercator(t.lng,t.lat);return{x:e[0],y:e[1]}}}),r=n.getZoomUnits?n.getZoomUnits(s.getZoom()):Math.pow(2,18-s.getZoom());var l=new de.Pixel(i.x-s.getSize().width/2*r,i.y+s.getSize().height/2*r),u=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void e(u);"2d"==this.context&&(u.save(),u.globalCompositeOperation="destination-out",u.fillStyle="rgba(0, 0, 0, .1)",u.fillRect(0,0,u.canvas.width,u.canvas.height),u.restore())}else e(u);if("2d"==this.context)for(var c in this.options)u[c]=this.options[c];else u.clear(u.COLOR_BUFFER_BIT);if(!(this.options.minZoom&&s.getZoom()<this.options.minZoom||this.options.maxZoom&&s.getZoom()>this.options.maxZoom)){var h=1;"2d"!=this.context&&(h=this.canvasLayer.devicePixelRatio);var f,d={fromColumn:"bd09mc"==this.options.coordType?"coordinates":"coordinates_mercator",transferCoordinate:function(t){return[(t[0]-l.x)/r*h,(l.y-t[1])/r*h]}};void 0!==t&&(d.filter=function(e){var n=a.trails||10;return!!(t&&e.time>t-n&&e.time<t)});var g=this.getZoom();if("cluster"===this.options.draw&&(!this.options.maxClusterZoom||this.options.maxClusterZoom>=g)){var m=this.map.getBounds(),v=m.getNorthEast(),y=m.getSouthWest(),_=this.supercluster.getClusters([y.lng,y.lat,v.lng,v.lat],g);this.pointCountMax=this.supercluster.trees[g].max,this.pointCountMin=this.supercluster.trees[g].min;var x={},w=null,b=null;this.pointCountMax===this.pointCountMin?(w=this.options.fillStyle,b=this.options.minSize||8):x=new p({min:this.pointCountMin,max:this.pointCountMax,minSize:this.options.minSize||8,maxSize:this.options.maxSize||30,gradient:this.options.gradient});for(var C=0;C<_.length;C++){var S=_[C];S.properties&&S.properties.cluster_id?(_[C].size=b||x.getSize(S.properties.point_count),_[C].fillStyle=w||x.getColor(S.properties.point_count)):_[C].size=o.options.size}this.clusterDataSet.set(_),this.transferToMercator(this.clusterDataSet),f=o.clusterDataSet.get(d)}else f=o.dataSet.get(d);this.processData(f);var M=s.pointToPixel(new de.Point(0,0));"m"==o.options.unit?(o.options.size&&(o.options._size=o.options.size/r),o.options.width&&(o.options._width=o.options.width/r),o.options.height&&(o.options._height=o.options.height/r)):(o.options._size=o.options.size,o.options._height=o.options.height,o.options._width=o.options.width),this.drawContext(u,f,o.options,M),o.options.updateCallback&&o.options.updateCallback(t)}}}},{key:"init",value:function(t){var e=this;e.options=t,this.initDataRange(t),this.context=e.options.context||"2d",e.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(e.options.zIndex),e.options.max&&this.intensity.setMax(e.options.max),e.options.min&&this.intensity.setMin(e.options.min),this.initAnimator(),this.bindEvent()}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"addAnimatorEvent",value:function(){this.map.addEventListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addEventListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer),this.bindEvent()}},{key:"hide",value:function(){this.unbindEvent(),this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){this.canvasLayer&&this.canvasLayer.draw()}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.map.removeOverlay(this.canvasLayer),this.canvasLayer=null}}]),gt),me="undefined"==typeof window?{}:window;me.google&&me.google.maps&&(mt.prototype=new google.maps.OverlayView,mt.DEFAULT_PANE_NAME_="overlayLayer",mt.CSS_TRANSFORM_=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<e.length;n++){var i=e[n];if(void 0!==t.style[i])return i}return e[0]}(),mt.prototype.requestAnimFrame_=me.requestAnimationFrame||me.webkitRequestAnimationFrame||me.mozRequestAnimationFrame||me.oRequestAnimationFrame||me.msRequestAnimationFrame||function(t){return me.setTimeout(t,1e3/60)},mt.prototype.cancelAnimFrame_=me.cancelAnimationFrame||me.webkitCancelAnimationFrame||me.mozCancelAnimationFrame||me.oCancelAnimationFrame||me.msCancelAnimationFrame||function(t){},mt.prototype.setOptions=function(t){void 0!==t.animate&&this.setAnimate(t.animate),void 0!==t.paneName&&this.setPaneName(t.paneName),
void 0!==t.updateHandler&&this.setUpdateHandler(t.updateHandler),void 0!==t.resizeHandler&&this.setResizeHandler(t.resizeHandler),void 0!==t.resolutionScale&&this.setResolutionScale(t.resolutionScale),void 0!==t.map&&this.setMap(t.map)},mt.prototype.setAnimate=function(t){this.isAnimated_=!!t,this.isAnimated_&&this.scheduleUpdate()},mt.prototype.isAnimated=function(){return this.isAnimated_},mt.prototype.setPaneName=function(t){this.paneName_=t,this.setPane_()},mt.prototype.getPaneName=function(){return this.paneName_},mt.prototype.setPane_=function(){if(this.isAdded_){var t=this.getPanes();if(!t[this.paneName_])throw new Error('"'+this.paneName_+'" is not a valid MapPane name.');t[this.paneName_].appendChild(this.canvas)}},mt.prototype.setResizeHandler=function(t){this.resizeHandler_=t},mt.prototype.setResolutionScale=function(t){"number"==typeof t&&(this.resolutionScale_=t,this.resize_())},mt.prototype.setUpdateHandler=function(t){this.updateHandler_=t},mt.prototype.onAdd=function(){this.isAdded_||(this.isAdded_=!0,this.setPane_(),this.resizeListener_=google.maps.event.addListener(this.getMap(),"resize",this.resizeFunction_),this.centerListener_=google.maps.event.addListener(this.getMap(),"center_changed",this.repositionFunction_),this.resize_(),this.repositionCanvas_())},mt.prototype.onRemove=function(){this.isAdded_&&(this.isAdded_=!1,this.topLeft_=null,this.canvas.parentElement.removeChild(this.canvas),this.centerListener_&&(google.maps.event.removeListener(this.centerListener_),this.centerListener_=null),this.resizeListener_&&(google.maps.event.removeListener(this.resizeListener_),this.resizeListener_=null),this.requestAnimationFrameId_&&(this.cancelAnimFrame_.call(me,this.requestAnimationFrameId_),this.requestAnimationFrameId_=null))},mt.prototype.resize_=function(){if(this.isAdded_){var t=this.getMap(),e=t.getDiv().offsetWidth,n=t.getDiv().offsetHeight,i=e*this.resolutionScale_,r=n*this.resolutionScale_,o=this.canvas.width,a=this.canvas.height;o===i&&a===r||(this.canvas.width=i,this.canvas.height=r,this.needsResize_=!0,this.scheduleUpdate()),this.canvasCssWidth_===e&&this.canvasCssHeight_===n||(this.canvasCssWidth_=e,this.canvasCssHeight_=n,this.canvas.style.width=e+"px",this.canvas.style.height=n+"px")}},mt.prototype.draw=function(){this.repositionCanvas_()},mt.prototype.repositionCanvas_=function(){var t=this.getMap(),e=t.getBounds().getNorthEast().lat(),n=t.getCenter(),i=Math.pow(2,t.getZoom()),r=n.lng()-180*this.canvasCssWidth_/(256*i);this.topLeft_=new google.maps.LatLng(e,r);var o=this.getProjection().fromLatLngToDivPixel(n),a=-Math.round(this.canvasCssWidth_/2-o.x),s=-Math.round(this.canvasCssHeight_/2-o.y);this.canvas.style[mt.CSS_TRANSFORM_]="translate("+a+"px,"+s+"px)",this.scheduleUpdate()},mt.prototype.update_=function(){this.requestAnimationFrameId_=null,this.isAdded_&&(this.isAnimated_&&this.scheduleUpdate(),this.needsResize_&&this.resizeHandler_&&(this.needsResize_=!1,this.resizeHandler_()),this.updateHandler_&&this.updateHandler_())},mt.prototype.getTopLeft=function(){return this.topLeft_},mt.prototype.scheduleUpdate=function(){this.isAdded_&&!this.requestAnimationFrameId_&&(this.requestAnimationFrameId_=this.requestAnimFrame_.call(me,this.requestUpdateFunction_))});var ve,ye,_e=(u(vt,ue),It(vt,[{key:"clickEvent",value:function(t){var e=t.pixel;l(vt.prototype.__proto__||Object.getPrototypeOf(vt.prototype),"clickEvent",this).call(this,e,t)}},{key:"mousemoveEvent",value:function(t){var e=t.pixel;l(vt.prototype.__proto__||Object.getPrototypeOf(vt.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"bindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&(t.setDefaultCursor("default"),t.addListener("click",this.clickEvent)),this.options.methods.mousemove&&t.addListener("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.removeListener("click",this.clickEvent),this.options.methods.mousemove&&t.removeListener("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var n=this,i=n.options.animation,r=this.getContext();if(n.isEnabledTime()){if(void 0===t)return void e(r);"2d"==this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else e(r);if("2d"==this.context)for(var o in n.options)r[o]=n.options[o];else r.clear(r.COLOR_BUFFER_BIT);if(!(n.options.minZoom&&s.getZoom()<n.options.minZoom||n.options.maxZoom&&s.getZoom()>n.options.maxZoom)){var a=1;"2d"!=this.context&&(a=this.canvasLayer.devicePixelRatio);var s=this.map,l=s.getProjection(),u=(a=Math.pow(2,s.zoom)*resolutionScale,l.fromLatLngToPoint(this.canvasLayer.getTopLeft())),c={transferCoordinate:function(t){var e=new google.maps.LatLng(t[1],t[0]),n=l.fromLatLngToPoint(e),i={x:(n.x-u.x)*a,y:(n.y-u.y)*a};return[i.x,i.y]}};void 0!==t&&(c.filter=function(e){var n=i.trails||10;return!!(t&&e.time>t-n&&e.time<t)});var f=n.dataSet.get(c);this.processData(f);var p=new google.maps.LatLng(0,0),d=l.fromLatLngToPoint(p),g={x:(d.x-u.x)*a,y:(d.y-u.y)*a};"m"==n.options.unit&&n.options.size?n.options._size=n.options.size/zoomUnit:n.options._size=n.options.size,this.drawContext(r,new h(f),n.options,g),n.options.updateCallback&&n.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}},{key:"show",value:function(){this.map.addOverlay(this.canvasLayer)}},{key:"hide",value:function(){this.map.removeOverlay(this.canvasLayer)}},{key:"draw",value:function(){self.canvasLayer.draw()}}]),vt),xe=void 0;if("undefined"!=typeof maptalks){ye=maptalks.Layer,u(_t,ye),It(_t,[{key:"_initBaseLayer",value:function(t){var e=this.baseLayer=new ue(null,this.dataSet,t);this.init(t),e.argCheck(t)}},{key:"clickEvent",value:function(t){if(this.baseLayer){var e=t.containerPoint;this.baseLayer.clickEvent(e,t.domEvent)}}},{key:"mousemoveEvent",value:function(t){if(this.baseLayer){var e=t.containerPoint;this.baseLayer.mousemoveEvent(e,t.domEvent)}}},{key:"getEvents",value:function(){return{click:this.clickEvent,mousemove:this.mousemoveEvent}}},{key:"init",value:function(t){var e=this.baseLayer;e.options=t,e.initDataRange(t),e.context=e.options.context||"2d",e.initAnimator()}},{key:"addAnimatorEvent",value:function(){this.map.addListener("movestart",this.animatorMovestartEvent.bind(this)),this.map.addListener("moveend",this.animatorMoveendEvent.bind(this))}}]),xe=_t;var we=(ve=maptalks.renderer.CanvasRenderer,u(yt,ve),It(yt,[{key:"needToRedraw",value:function(){return!!this.layer.baseLayer.isEnabledTime()||l(yt.prototype.__proto__||Object.getPrototypeOf(yt.prototype),"needToRedraw",this).call(this)}},{key:"draw",value:function(){var t=this.layer.baseLayer;this.canvas&&t.isEnabledTime()&&!this._shouldClear||(this.prepareCanvas(),this._shouldClear=!1),this._update(this.gl||this.context,this._mapvFrameTime),delete this._mapvFrameTime,this.completeRender()}},{key:"drawOnInteracting",value:function(){this.draw(),this._shouldClear=!1}},{key:"onSkipDrawOnInteracting",value:function(){this._shouldClear=!0}},{key:"_canvasUpdate",value:function(t){this.setToRedraw(),this._mapvFrameTime=t}},{key:"_update",value:function(t,n){if(this.canvas){var i=this.layer.baseLayer,r=i.options.animation,o=this.getMap();if(i.isEnabledTime()){if(void 0===n)return void e(t);"2d"==i.context&&(t.save(),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(0, 0, 0, .1)",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.restore())}else e(t);if("2d"==i.context)for(var a in i.options)t[a]=i.options[a];else t.clear(t.COLOR_BUFFER_BIT);var s=new maptalks.Coordinate(0,0),l={fromColumn:"bd09mc"===i.options.coordType?"coordinates_mercator":"coordinates",transferCoordinate:function(t){return s.x=t[0],s.y=t[1],o.coordToContainerPoint(s)._multi(1).toArray()}};void 0!==n&&(l.filter=function(t){var e=r.trails||10;return!!(n&&t.time>n-e&&t.time<n)});var u=i.dataSet.get(l);i.processData(u),"m"==i.options.unit?(i.options.size&&(i.options._size=i.options.size/zoomUnit),i.options.width&&(i.options._width=i.options.width/zoomUnit),i.options.height&&(i.options._height=i.options.height/zoomUnit)):(i.options._size=i.options.size,i.options._height=i.options.height,i.options._width=i.options.width);var c=new maptalks.Point(0,0),h=o._pointToContainerPoint(c)._multi(1);i.drawContext(t,u,i.options,h),i.options.updateCallback&&i.options.updateCallback(n)}}},{key:"createCanvas",value:function(){if(!this.canvas){var t=this.getMap(),e=t.getSize(),n=t.getDevicePixelRatio?t.getDevicePixelRatio():maptalks.Browser.retina?2:1,i=n*e.width,r=n*e.height;this.canvas=maptalks.Canvas.createCanvas(i,r,t.CanvasClass),"2d"===this.layer.baseLayer.context?(this.context=this.canvas.getContext("2d"),this.layer.options.globalCompositeOperation&&(this.context.globalCompositeOperation=this.layer.options.globalCompositeOperation),"heatmap"!==this.layer.baseLayer.options.draw&&1!==n&&this.context.scale(n,n)):this.gl=this.canvas.getContext("webgl",{alpha:!0,preserveDrawingBuffer:!0,antialias:!1}),this.onCanvasCreate(),this._bindToMapv(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}}},{key:"_bindToMapv",value:function(){var t=this.layer.baseLayer,e=this.getMap();this.devicePixelRatio=e.getDevicePixelRatio?e.getDevicePixelRatio():maptalks.Browser.retina?2:1,t.canvasLayer=this,t._canvasUpdate=this._canvasUpdate.bind(this),t.getContext=function(){var t=self.getRenderer();return t.gl||t.context}}}]),yt);xe.registerRenderer("canvas",we)}var be,Ce=xe,Se=(u(xt,ue),It(xt,[{key:"init",value:function(t){if(!t)throw new Error("not map object");this.map=t,this.context=this.options.context||"2d",this.getCanvasLayer()}},{key:"_canvasUpdate",value:function(t){this.render(this.canvasLayer.canvas,t)}},{key:"render",value:function(t,n){if(t){var i=this.map,r=t.getContext(this.context),o=this.options.animation;if(this.isEnabledTime()){if(void 0===n)return e(r),this;"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else e(r);if("2d"===this.context)for(var a in this.options)r[a]=this.options[a];else r.clear(r.COLOR_BUFFER_BIT);var s={transferCoordinate:function(t){var e=i.lngLatToContainer(new AMap.LngLat(t[0],t[1]));return[e.x,e.y]}};void 0!==n&&(s.filter=function(t){var e=o.trails||10;return!!(n&&t.time>n-e&&t.time<n)});var l=this.dataSet.get(s);return this.processData(l),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(r,new h(l),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(n),this}}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var t=this.canvasFunction(),e=this.map.getBounds();this.layer_=new AMap.CanvasLayer({canvas:t,bounds:this.options.bounds||e,zooms:this.options.zooms||[0,22]}),this.layer_.setMap(this.map),this.map.on("mapmove",this.canvasFunction,this),this.map.on("zoomchange",this.canvasFunction,this)}}},{key:"canvasFunction",value:function(){var t=[this.map.getSize().width,this.map.getSize().height],e=t[0],n=t[1];if(this.canvasLayer.canvas){this.canvasLayer.canvas.width=e,this.canvasLayer.canvas.height=n;var i=this.map.getBounds();this.layer_&&this.layer_.setBounds(this.options.bounds||i)}else this.canvasLayer.canvas=function(t,e,n){if("undefined"==typeof document)return new n(t,e);var i=document.createElement("canvas");return i.width=t,i.height=e,i}(e,n);return this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"removeLayer",value:function(){this.map&&(this.unEvents(),this.map.removeLayer(this.layer_),delete this.map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(t){var e=t.pixel;l(xt.prototype.__proto__||Object.getPrototypeOf(xt.prototype),"clickEvent",this).call(this,e,t)}},{key:"mousemoveEvent",value:function(t){var e=t.pixel;l(xt.prototype.__proto__||Object.getPrototypeOf(xt.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"addAnimatorEvent",value:function(){this.map.on("movestart",this.animatorMovestartEvent,this),this.map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var t=this.map;this.unEvents(),this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent,this),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent,this),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent,this))}}]),xt),Me=(u(wt,ue),It(wt,[{key:"init",value:function(t,e){if(!(t&&t instanceof ol.Map))throw new Error("not map object");this.$Map=t,this.context=this.options.context||"2d",this.getCanvasLayer(),this.initDataRange(e),this.initAnimator(),this.onEvents()}},{key:"_canvasUpdate",value:function(t){this.render(this.canvasLayer.canvas,t)}},{key:"render",value:function(t,n){var i=this.$Map,r=t.getContext(this.context),o=this.options.animation,a=this.options.hasOwnProperty("projection")?this.options.projection:"EPSG:4326",s=this.$Map.getView().getProjection().getCode();if(this.isEnabledTime()){if(void 0===n)return e(r),this;"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else e(r);if("2d"===this.context)for(var l in this.options)r[l]=this.options[l];else r.clear(r.COLOR_BUFFER_BIT);var u={};u.transferCoordinate=a===s?function(t){return i.getPixelFromCoordinate(t)}:function(t){return i.getPixelFromCoordinate(ol.proj.transform(t,a,s))},void 0!==n&&(u.filter=function(t){var e=o.trails||10;return!!(n&&t.time>n-e&&t.time<n)});var c=this.dataSet.get(u);return this.processData(c),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/zoomUnit),this.options.width&&(this.options._width=this.options.width/zoomUnit),this.options.height&&(this.options._height=this.options.height/zoomUnit)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width),this.drawContext(r,new h(c),this.options,{x:0,y:0}),this.options.updateCallback&&this.options.updateCallback(n),this}},{key:"getCanvasLayer",value:function(){if(!this.canvasLayer.canvas&&!this.layer_){var t=this.getMapExtent();this.layer_=new ol.layer.Image({layerName:this.options.layerName,minResolution:this.options.minResolution,maxResolution:this.options.maxResolution,zIndex:this.options.zIndex,extent:t,source:new ol.source.ImageCanvas({canvasFunction:this.canvasFunction.bind(this),projection:this.$Map.getView().getProjection().getCode(),ratio:this.options.hasOwnProperty("ratio")?this.options.ratio:1})}),this.$Map.addLayer(this.layer_),this.$Map.un("precompose",this.reRender,this),this.$Map.on("precompose",this.reRender,this)}}},{key:"reRender",value:function(){if(this.layer_){var t=this.getMapExtent();this.layer_.setExtent(t)}}},{key:"canvasFunction",value:function(t,e,n,i){return this.canvasLayer.canvas?(this.canvasLayer.canvas.width=i[0],this.canvasLayer.canvas.height=i[1]):this.canvasLayer.canvas=function(t,e){if("undefined"!=typeof document){var n=document.createElement("canvas");return n.width=t,n.height=e,n}}(i[0],i[1]),this.render(this.canvasLayer.canvas),this.canvasLayer.canvas}},{key:"getMapExtent",value:function(){var t=this.$Map.getSize();return this.$Map.getView().calculateExtent(t)}},{key:"addTo",value:function(t){this.init(t,this.options)}},{key:"removeLayer",value:function(){this.$Map&&(this.unEvents(),this.$Map.un("precompose",this.reRender,this),this.$Map.removeLayer(this.layer_),delete this.$Map,delete this.layer_,delete this.canvasLayer.canvas)}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"clickEvent",value:function(t){var e=t.pixel;l(wt.prototype.__proto__||Object.getPrototypeOf(wt.prototype),"clickEvent",this).call(this,{x:e[0],y:e[1]},t)}},{key:"mousemoveEvent",value:function(t){var e=t.pixel;l(wt.prototype.__proto__||Object.getPrototypeOf(wt.prototype),"mousemoveEvent",this).call(this,{x:e[0],y:e[1]},t)}},{key:"addAnimatorEvent",value:function(){this.$Map.on("movestart",this.animatorMovestartEvent,this),this.$Map.on("moveend",this.animatorMoveendEvent,this)}},{key:"onEvents",value:function(){var t=this.$Map;this.unEvents(),this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent,this),this.options.methods.mousemove&&t.on("pointermove",this.mousemoveEvent,this))}},{key:"unEvents",value:function(){var t=this.$Map;this.options.methods&&(this.options.methods.click&&t.un("click",this.clickEvent,this),this.options.methods.pointermove&&t.un("pointermove",this.mousemoveEvent,this))}},{key:"setDefaultCursor",value:function(t,e){if(this.$Map){var n=this.$Map.getTargetElement();e?n.style.cursor!==t&&(this.previousCursor_=n.style.cursor,n.style.cursor=t):void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}}},{key:"show",value:function(){this.$Map.addLayer(this.layer_)}},{key:"hide",value:function(){this.$Map.removeLayer(this.layer_)}}]),wt),Ee=(u(bt,ue),It(bt,[{key:"clickEvent",value:function(t){var e=this.map.containerPointToLayerPoint([0,0]),n=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio,i=t.layerPoint;l(bt.prototype.__proto__||Object.getPrototypeOf(bt.prototype),"clickEvent",this).call(this,L.point((i.x-e.x)/n,(i.y-e.y)/n),t)}},{key:"mousemoveEvent",value:function(t){var e=t.layerPoint;l(bt.prototype.__proto__||Object.getPrototypeOf(bt.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"bindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"update",value:function(t){var e=t||{},n=e.data;n&&n.get&&(n=n.get()),null!=n&&this.dataSet.set(n),l(bt.prototype.__proto__||Object.getPrototypeOf(bt.prototype),"update",this).call(this,{options:e.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,n=e.options.animation,i=this.getContext(),r=this.map;if(e.isEnabledTime()){if(void 0===t)return void this.clear(i);"2d"===this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore())}else this.clear(i);if("2d"===this.context)for(var o in e.options)i[o]=e.options[o];else i.clear(i.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&r.getZoom()<e.options.minZoom||e.options.maxZoom&&r.getZoom()>e.options.maxZoom)){var a=r.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=r.getSize(),c=s/u.x,h=l/u.y,f=this.canvasLayer.getTopLeft(),p=r.latLngToContainerPoint(f),d={transferCoordinate:function(t){var n,i={x:(n="2d"===e.context?r.latLngToContainerPoint(L.latLng(t[1],t[0])):{x:(t[0]-f.lng)/c,y:(f.lat-t[1])/h}).x-p.x,y:n.y-p.y};return[i.x,i.y]}};void 0!==t&&(d.filter=function(e){var i=n.trails||10;return t&&e.time>t-i&&e.time<t});var g=e.dataSet.get(d);this.processData(g),e.options._size=e.options.size;var m=r.latLngToContainerPoint(L.latLng(0,0)),v={x:m.x-p.x,y:m.y-p.y};this.drawContext(i,g,e.options,v),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}]),bt);if("undefined"!=typeof L){var Ie=L.Layer.extend({options:{attributionPrefix:null,attribution:""},initialize:function(t,e,n){n=n||{},this.dataSet=t||{},this.mapVOptions=e||{},this.render=this.render.bind(this),L.Util.setOptions(this,n),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),L.stamp(this)},onAdd:function(t){this._map=t;var e=this.getPane(),n=this.container=L.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",e);n.appendChild(this.canvas);var i=t.getSize();n.style.width=i.x+"px",n.style.height=i.y+"px",this.renderer=new Ee(t,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){L.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(t,e){this.renderer.addData(t,e)},update:function(t){this.renderer.update(t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(t){this.renderer&&this.renderer.removeData(t)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(t){this.canvas.style.zIndex=t},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var t,e=this._map;return e&&(t=e.getBounds().getNorthWest()),t},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||600;var e="undefined"==typeof window?{}:window,n=this.devicePixelRatio=e.devicePixelRatio;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||t.getContext("2d").scale(n,n),t},_resize:function(){var t=this.canvas;if(t){var e=this._map,n=e.getSize();t.width=n.x,t.height=n.y,t.style.width=n.x+"px",t.style.height=n.y+"px";var i=e.getBounds(),r=e.latLngToLayerPoint(i.getNorthWest());L.DomUtil.setPosition(t,r)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}});be=function(t,e,n){return new Ie(t,e,n)}}var Te,Pe=be,Le=(u(Ct,ue),It(Ct,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"clickEvent",value:function(t){var e=t.point;l(Ct.prototype.__proto__||Object.getPrototypeOf(Ct.prototype),"clickEvent",this).call(this,e,t)}},{key:"mousemoveEvent",value:function(t){var e=t.point;l(Ct.prototype.__proto__||Object.getPrototypeOf(Ct.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"addAnimatorEvent",value:function(){}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator}},{key:"bindEvent",value:function(){this.map,this.options.methods&&(this.options.methods.click,this.options.methods.mousemove)}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"_canvasUpdate",value:function(t){this.map;var e=this.scene;if(this.canvasLayer&&!this.stopAniamation){var n=this.options.animation,i=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void this.clear(i);"2d"===this.context&&(i.save(),i.globalCompositeOperation="destination-out",i.fillStyle="rgba(0, 0, 0, .1)",i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore())}else this.clear(i);if("2d"===this.context)for(var r in this.options)i[r]=this.options[r];else i.clear(i.COLOR_BUFFER_BIT);var o={transferCoordinate:function(t){var n=Cesium.Cartesian3.fromDegrees(t[0],t[1]),i=Cesium.SceneTransforms.wgs84ToWindowCoordinates(e,n);return null==i?[-1,-1]:[i.x,i.y]}};void 0!==t&&(o.filter=function(e){var i=n.trails||10;return!!(t&&e.time>t-i&&e.time<t)});var a=this.dataSet.get(o);this.processData(a),"m"==this.options.unit&&this.options.size,this.options._size=this.options.size;var s=Cesium.SceneTransforms.wgs84ToWindowCoordinates(e,Cesium.Cartesian3.fromDegrees(0,0));this.drawContext(i,new h(a),this.options,s),this.options.updateCallback&&this.options.updateCallback(t)}}},{key:"updateData",value:function(t,e){var n=t;n&&n.get&&(n=n.get()),null!=n&&this.dataSet.set(n),l(Ct.prototype.__proto__||Object.getPrototypeOf(Ct.prototype),"update",this).call(this,{options:e})}},{key:"addData",value:function(t,e){var n=t;t&&t.get&&(n=t.get()),this.dataSet.add(n),this.update({options:e})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]),Ct);if("undefined"!=typeof Cesium){var De=0,Ae=(It(St,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addInnerContainer",value:function(){this.container.appendChild(this.canvas)}},{key:"bindEvent",value:function(){var t=this;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.scene.camera.moveStart.addEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.addEventListener(this.innerMoveEnd,this);var e=new Cesium.ScreenSpaceEventHandler(this.scene.canvas);e.setInputAction(function(e){t.innerMoveEnd()},Cesium.ScreenSpaceEventType.LEFT_UP),e.setInputAction(function(e){t.innerMoveEnd()},Cesium.ScreenSpaceEventType.MIDDLE_UP),this.handler=e}},{key:"unbindEvent",value:function(){this.scene.camera.moveStart.removeEventListener(this.innerMoveStart,this),this.scene.camera.moveEnd.removeEventListener(this.innerMoveEnd,this),this.scene.postRender.removeEventListener(this._reset,this),this.handler&&(this.handler.destroy(),this.handler=null)}},{key:"moveStartEvent",value:function(){this.mapvBaseLayer&&(this.mapvBaseLayer.animatorMovestartEvent(),this.scene.postRender.addEventListener(this._reset,this))}},{key:"moveEndEvent",value:function(){this.mapvBaseLayer&&(this.scene.postRender.removeEventListener(this._reset,this),this.mapvBaseLayer.animatorMoveendEvent(),this._reset())}},{key:"zoomStartEvent",value:function(){this._unvisiable()}},{key:"zoomEndEvent",value:function(){this._unvisiable()}},{key:"addData",value:function(t,e){null!=this.mapvBaseLayer&&this.mapvBaseLayer.addData(t,e)}},{key:"updateData",value:function(t,e){null!=this.mapvBaseLayer&&this.mapvBaseLayer.updateData(t,e)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(t){null!=this.mapvBaseLayer&&this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)}},{key:"removeAllData",value:function(){null!=this.mapvBaseLayer&&this.mapvBaseLayer.clearData()}},{key:"_visiable",value:function(){return this.canvas.style.display="block",this}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none",this}},{key:"_createCanvas",value:function(){var t=document.createElement("canvas");t.id=this.mapVOptions.layerid||"mapv"+De++,t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.mapVOptions.zIndex||0,t.width=parseInt(this.map.canvas.width),t.height=parseInt(this.map.canvas.height),t.style.width=this.map.canvas.style.width,t.style.height=this.map.canvas.style.height;var e=this.devicePixelRatio;return"2d"==this.mapVOptions.context&&t.getContext(this.mapVOptions.context).scale(e,e),t}},{key:"_reset",value:function(){this.resizeCanvas(),this.fixPosition(),this.onResize(),this.render()}},{key:"draw",value:function(){this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"destroy",value:function(){this.remove()}},{key:"remove",value:function(){null!=this.mapvBaseLayer&&(this.removeAllData(),this.mapvBaseLayer.clear(this.mapvBaseLayer.getContext()),this.mapvBaseLayer=void 0,this.canvas.parentElement.removeChild(this.canvas))}},{key:"update",value:function(t){null!=t&&this.updateData(t.data,t.options)}},{key:"resizeCanvas",value:function(){if(null!=this.canvas&&null!=this.canvas){var t=this.canvas;t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.width=parseInt(this.map.canvas.width),t.height=parseInt(this.map.canvas.height),t.style.width=this.map.canvas.style.width,t.style.height=this.map.canvas.style.height}}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"render",value:function(){null!=this.mapvBaseLayer&&this.mapvBaseLayer._canvasUpdate()}}]),St);Te=function(t,e,n,i){return new Ae(t,e,n,i)}}var ke=Te,Ne={getDataSet:function(t){var e=[],n=t.features;if(n)for(var i=0;i<n.length;i++){var r=n[i],o=r.geometry,a=r.properties,s={};for(var l in a)s[l]=a[l];s.geometry=o,e.push(s)}return new h(e)}},Oe={CSVToArray:function(t,e){e=e||",";for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],r=null;r=n.exec(t);){
var o,a=r[1];a.length&&a!==e&&i.push([]),o=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],i[i.length-1].push(o)}return i},getDataSet:function(t,e){for(var n=this.CSVToArray(t,e||","),i=[],r=n[0],o=1;o<n.length-1;o++){for(var a=n[o],s={},l=0;l<a.length;l++){var u=a[l];"geometry"==r[l]&&(u=JSON.parse(u)),s[r[l]]=u}i.push(s)}return new h(i)}};t.version="2.0.62",t.canvasClear=e,t.canvasResolutionScale=function(t){var e=window.devicePixelRatio||1;t.canvas.width=t.canvas.width*e,t.canvas.height=t.canvas.height*e,t.canvas.style.width=t.canvas.width/e+"px",t.canvas.style.height=t.canvas.height/e+"px",t.scale(e,e)},t.canvasDrawSimple=Lt,t.canvasDrawHeatmap=At,t.canvasDrawGrid=kt,t.canvasDrawHoneycomb=Nt,t.webglDrawSimple=Ut,t.webglDrawPoint=Vt,t.webglDrawLine=Ft,t.webglDrawPolygon=jt,t.utilCityCenter=Et,t.utilCurve=Wt,t.utilForceEdgeBundling=function(){function t(t){return{x:h[t.target].x-h[t.source].x,y:h[t.target].y-h[t.source].y}}function e(t){return Math.sqrt(Math.pow(h[t.source].x-h[t.target].x,2)+Math.pow(h[t.source].y-h[t.target].y,2))}function n(t){for(var e=0,n=1;n<d[t].length;n++)e+=i(d[t][n],d[t][n-1]);return e}function i(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r(t,e){var n=Math.sqrt((e.target.x-e.source.x)*(e.target.x-e.source.x)+(e.target.y-e.source.y)*(e.target.y-e.source.y)),i=((e.source.y-t.y)*(e.source.y-e.target.y)-(e.source.x-t.x)*(e.target.x-e.source.x))/(n*n);return{x:e.source.x+i*(e.target.x-e.source.x),y:e.source.y+i*(e.target.y-e.source.y)}}function o(t,e){for(var n,i={x:0,y:0},r=p[t],o=0;o<r.length;o++){var a={x:d[r[o]][e].x-d[t][e].x,y:d[r[o]][e].y-d[t][e].y};if(Math.abs(a.x)>b||Math.abs(a.y)>b){var s=1/Math.pow((n={source:d[r[o]][e],target:d[t][e]},Math.sqrt(Math.pow(n.source.x-n.target.x,2)+Math.pow(n.source.y-n.target.y,2))),1);i.x+=a.x*s,i.y+=a.y*s}}return i}function a(t,n,i){for(var r,a,s,l,u,c,h,p,m=g/(e(f[t])*(n+1)),v=[{x:0,y:0}],y=1;y<n+1;y++){var _={x:0,y:0},x=(a=y,s=m,p=h=void 0,l=d[r=t][a-1],u=d[r][a+1],c=d[r][a],h=l.x-c.x+u.x-c.x,p=l.y-c.y+u.y-c.y,{x:h*=s,y:p*=s}),w=o(t,y);_.x=i*(x.x+w.x),_.y=i*(x.y+w.y),v.push(_)}return v.push({x:0,y:0}),v}function s(t){for(var e=0;e<f.length;e++)if(1==t)d[e].push(h[f[e].source]),d[e].push((g=f[e],{x:(h[g.source].x+h[g.target].x)/2,y:(h[g.source].y+h[g.target].y)/2})),d[e].push(h[f[e].target]);else{var r=n(e)/(t+1),o=r,a=[];a.push(h[f[e].source]);for(var s=1;s<d[e].length;s++){for(var l=i(d[e][s],d[e][s-1]);o<l;){var u=o/l,c=d[e][s-1].x,p=d[e][s-1].y;c+=u*(d[e][s].x-d[e][s-1].x),p+=u*(d[e][s].y-d[e][s-1].y),a.push({x:c,y:p}),l-=o,o=r}o-=l}a.push(h[f[e].target]),d[e]=a}var g}function l(t,e){var n=r(h[e.source],{source:h[t.source],target:h[t.target]}),o=r(h[e.target],{source:h[t.source],target:h[t.target]}),a={x:(n.x+o.x)/2,y:(n.y+o.y)/2},s={x:(h[t.source].x+h[t.target].x)/2,y:(h[t.source].y+h[t.target].y)/2};return Math.max(0,1-2*i(s,a)/i(n,o))}function u(n,r){var o,a,s,u,c,f,p,d,g,m,v,y;return g=n,m=r,Math.abs((v=t(g),y=t(m),(v.x*y.x+v.y*y.y)/(e(g)*e(m))))*(p=r,2/((d=(e(f=n)+e(p))/2)/Math.min(e(f),e(p))+Math.max(e(f),e(p))/d))*(u=r,(c=(e(s=n)+e(u))/2)/(c+i({x:(h[s.source].x+h[s.target].x)/2,y:(h[s.source].y+h[s.target].y)/2},{x:(h[u.source].x+h[u.target].x)/2,y:(h[u.source].y+h[u.target].y)/2})))*(o=n,a=r,Math.min(l(o,a),l(a,o)))}function c(){var t=m,e=_,n=1;!function(){for(var t=0;t<f.length;t++)d[t]=[]}(),function(){for(var t=0;t<f.length;t++)p[t]=[]}(),s(n),function(){for(var t=0;t<f.length-1;t++)for(var e=t+1;e<f.length;e++)t!=e&&(n=f[t],i=f[e],u(n,i)>=w&&(p[t].push(e),p[e].push(t)));var n,i}();for(var i=0;i<y;i++){for(var r=0;r<e;r++){for(var o=[],l=0;l<f.length;l++)o[l]=a(l,n,t);for(var c=0;c<f.length;c++)for(var h=0;h<n+1;h++)d[c][h].x+=o[c][h].x,d[c][h].y+=o[c][h].y}t/=2,e*=x,s(n*=2)}return d}var h={},f=[],p=[],d=[],g=.1,m=.1,v=2,y=6,_=70,x=.6666667,w=.6,b=1e-8;return c.nodes=function(t){return 0==arguments.length?h:(h=t,c)},c.edges=function(t){return 0==arguments.length?f:(f=function(t){for(var e=[],n=0;n<t.length;n++)h[t[n].source].x!=h[t[n].target].x&&h[t[n].source].y!=h[t[n].target].y&&e.push(t[n]);return e}(t),c)},c.bundling_stiffness=function(t){return 0==arguments.length?g:(g=t,c)},c.step_size=function(t){return 0==arguments.length?m:(m=t,c)},c.cycles=function(t){return 0==arguments.length?y:(y=t,c)},c.iterations=function(t){return 0==arguments.length?_:(_=t,c)},c.iterations_rate=function(t){return 0==arguments.length?x:(x=t,c)},c.subdivision_points_seed=function(t){return 0==arguments.length?P:(P=t,c)},c.subdivision_rate=function(t){return 0==arguments.length?v:(v=t,c)},c.compatbility_threshold=function(t){return 0==arguments.length?compatbility_threshold:(w=t,c)},c},t.utilDataRangeIntensity=p,t.utilDataRangeCategory=W,t.utilDataRangeChoropleth=q,t.Map=qt,t.baiduMapCanvasLayer=X,t.baiduMapAnimationLayer=fe,t.baiduMapLayer=ge,t.googleMapCanvasLayer=mt,t.googleMapLayer=_e,t.MaptalksLayer=Ce,t.AMapLayer=Se,t.OpenlayersLayer=Me,t.leafletMapLayer=Pe,t.cesiumMapLayer=ke,t.DataSet=h,t.geojson=Ne,t.csv=Oe,Object.defineProperty(t,"__esModule",{value:!0})})}).call(e,n(128))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){g&&p&&(g=!1,p.length?d=p.concat(d):m=-1,d.length&&s())}function s(){if(!g){var t=r(a);g=!0;for(var e=d.length;e;){for(p=d,d=[];++m<e;)p&&p[m].run();m=-1,e=d.length}p=null,g=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var c,h,f=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var p,d=[],g=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new l(t,e)),1!==d.length||g||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.echarts=e.EchartsLayer=void 0;var r=n(130),o=i(r),a=function(t,e){this._GLMap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e};a.prototype.dimensions=["lng","lat"],a.prototype.setMapOffset=function(t){this._mapOffset=t},a.prototype.getBMap=function(){return this._GLMap},a.prototype.dataToPoint=function(t){var e=[99999,99999],n=Cesium.Cartesian3.fromDegrees(t[0],t[1]);if(!n)return e;var i=this._GLMap.cartesianToCanvasCoordinates(n);return i?!(Cesium.Cartesian3.angleBetween(this._GLMap.camera.position,n)>Cesium.Math.toRadians(75))&&[i.x-this._mapOffset[0],i.y-this._mapOffset[1]]:e},a.prototype.pointToData=function(t){var e=this._mapOffset;return t=this._bmap.project([t[0]+e[0],t[1]+e[1]]),[t.lng,t.lat]},a.prototype.getViewRect=function(){var t=this._api;return new o.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())},a.prototype.getRoamTransform=function(){return o.matrix.create()},a.dimensions=a.prototype.dimensions,a.create=function(t,e){var n=void 0;t.eachComponent("GLMap",function(t){var i=(e.getZr().painter.getViewportRoot(),o.glMap);n=new a(i,e),n.setMapOffset(t.__mapOffset||[0,0]),t.coordinateSystem=n}),t.eachSeries(function(t){"GLMap"===t.get("coordinateSystem")&&(t.coordinateSystem=n)})};var s=function(t,e){this._map=t,this._overlay=this._createChartOverlay(),e&&this._registerMap(),this._overlay.setOption(e||{})};s.prototype._registerMap=function(){this._isRegistered||(o.registerCoordinateSystem("GLMap",a),o.registerAction({type:"GLMapRoam",event:"GLMapRoam",update:"updateLayout"},function(t,e){}),o.extendComponentModel({type:"GLMap",getBMap:function(){return this.__GLMap},defaultOption:{roam:!1}}),o.extendComponentView({type:"GLMap",init:function(t,e){this.api=e,o.glMap.postRender.addEventListener(this.moveHandler,this)},moveHandler:function(t,e){this.api.dispatchAction({type:"GLMapRoam"})},render:function(t,e,n){},dispose:function(t){o.glMap.postRender.removeEventListener(this.moveHandler,this)}}),this._isRegistered=!0)},s.prototype._createChartOverlay=function(){var t=this._map.scene;t.canvas.setAttribute("tabIndex",0);var e=document.createElement("div");return e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width=t.canvas.width+"px",e.style.height=t.canvas.height+"px",e.style.pointerEvents="none",e.setAttribute("id","echarts"),e.setAttribute("class","echartMap"),this._map.container.appendChild(e),this._echartsContainer=e,o.glMap=t,this._chart=o.init(e)},s.prototype.dispose=function(){this._echartsContainer&&(this._map.container.removeChild(this._echartsContainer),this._echartsContainer=null),this._overlay&&(this._overlay.dispose(),this._overlay=null)},s.prototype.updateOverlay=function(t){this._overlay&&this._overlay.setOption(t)},s.prototype.getMap=function(){return this._map},s.prototype.getOverlay=function(){return this._overlay},s.prototype.show=function(){this._echartsContainer&&(this._echartsContainer.style.visibility="visible")},s.prototype.hide=function(){this._echartsContainer&&(this._echartsContainer.style.visibility="hidden")},s.prototype.remove=function(){this._chart.clear(),this._echartsContainer.parentNode&&this._echartsContainer.parentNode.removeChild(this._echartsContainer),this._map=void 0},s.prototype.resize=function(){var t=this;window.onresize=function(){var e=t._map.scene;t._echartsContainer.style.width=e.canvas.style.width,t._echartsContainer.style.height=e.canvas.style.height,t._chart.resize()}},e.EchartsLayer=s,e.echarts=o},function(t,e,n){var i=n(131);!function(){for(var t in i){if(null==i||!i.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=i[t]}}();var r=n(255);!function(){for(var t in r){if(null==r||!r.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=r[t]}}(),n(251),n(282),n(311),n(318),n(329),n(333),n(343),n(367),n(376),n(386),n(409),n(413),n(417),n(434),n(440),n(446),n(452),n(456),n(465),n(469),n(472),n(494),n(500),n(506),n(507),n(520),n(473),n(418),n(523),n(527),n(528),n(550),n(480),n(555),n(564),n(565),n(574),n(580),n(583),n(586),n(587),n(595),n(599),n(596),n(603),n(604),n(615),n(618),n(622)},function(t,e,n){function i(t,e){return function(n,i,r){return!e&&this._disposed?void x(this.id):(n=n&&n.toLowerCase(),void it.prototype[t].call(this,n,i,r))}}function r(){it.call(this)}function o(t,e,n){function i(t,e){return t.__prio-e.__prio}n=n||{},"string"==typeof e&&(e=ie[e]),this.id,this.group,this._dom=t;var o="canvas",a=this._zr=$.init(t,{renderer:n.renderer||o,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=vt(Q.bind(a.flush,a),17);var e=Q.clone(e);e&&lt(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new at;var s=this._api=S(this);nt(ne,i),nt(Qt,i),this._scheduler=new wt(this,s,Qt,ne),it.call(this,this._ecEventProcessor=new M),this._messageCenter=new r,this._initEvents(),this.resize=Q.bind(this.resize,this),this._pendingActions=[],a.animation.on("frame",this._onframe,this),p(a,this),Q.setAsPrimitive(this)}function a(t,e,n){if(this._disposed)return void x(this.id);var i,r=this._model,o=this._coordSysMgr.getCoordinateSystems();e=gt.parseFinder(r,e);for(var a=0;a<o.length;a++){var s=o[a];if(s[t]&&null!=(i=s[t](r,e,n)))return i}}function s(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),d(t,"component",e,n),d(t,"chart",e,n),n.plan()}function l(t,e,n,i,r){function o(i){i&&i.__alive&&i[e]&&i[e](i.__model,a,t._api,n)}var a=t._model;if(!i)return void Et(t._componentsViews.concat(t._chartsViews),o);var s={};s[i+"Id"]=n[i+"Id"],s[i+"Index"]=n[i+"Index"],s[i+"Name"]=n[i+"Name"];var l={mainType:i,query:s};r&&(l.subType=r);var u=n.excludeSeriesId;null!=u&&(u=Q.createHashMap(gt.normalizeToArray(u))),a&&a.eachComponent(l,function(e){u&&null!=u.get(e.id)||o(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])},t)}function u(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries(function(t){i.updateStreamModes(t,n[t.__viewId])})}function c(t,e){var n=t.type,i=t.escapeConnect,r=Kt[n],o=r.actionInfo,a=(o.update||"update").split(":"),u=a.pop();a=null!=a[0]&&Pt(a[0]),this[Wt]=!0;var c=[t],h=!1;t.batch&&(h=!0,c=Q.map(t.batch,function(e){return e=Q.defaults(Q.extend({},e),t),e.batch=null,e}));var f,p=[],d="highlight"===n||"downplay"===n;Et(c,function(t){f=r.action(t,this._model,this._api),f=f||Q.extend({},t),f.type=o.event||f.type,p.push(f),d?l(this,u,t,"series"):a&&l(this,u,t,a.main,a.sub)},this),"none"===u||d||a||(this[qt]?(s(this),Zt.update.call(this,t),this[qt]=!1):Zt[u].call(this,t)),f=h?{type:o.event||n,escapeConnect:i,batch:p}:p[0],this[Wt]=!1,!e&&this._messageCenter.trigger(f.type,f)}function h(t){for(var e=this._pendingActions;e.length;){var n=e.shift();c.call(this,n,t)}}function f(t){!t&&this.trigger("updated")}function p(t,e){t.on("rendered",function(){e.trigger("rendered"),!t.animation.isFinished()||e[qt]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})}function d(t,e,n,i){function r(t){var e="_ec_"+t.id+"_"+t.type,r=s[e];if(!r){var c=Pt(t.type),h=o?ft.getClass(c.main,c.sub):pt.getClass(c.sub);r=new h,r.init(n,u),s[e]=r,a.push(r),l.add(r.group)}t.__viewId=r.__id=e,r.__alive=!0,r.__model=t,r.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!o&&i.prepareView(r,t,n,u)}for(var o="component"===e,a=o?t._componentsViews:t._chartsViews,s=o?t._componentsMap:t._chartsMap,l=t._zr,u=t._api,c=0;c<a.length;c++)a[c].__alive=!1;o?n.eachComponent(function(t,e){"series"!==t&&r(e)}):n.eachSeries(r);for(var c=0;c<a.length;){var h=a[c];h.__alive?c++:(!o&&h.renderTask.dispose(),l.remove(h.group),h.dispose(n,u),a.splice(c,1),delete s[h.__id],h.__id=h.group.__ecComponentInfo=null)}}function g(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function m(t,e,n,i){v(t,e,n,i),Et(t._chartsViews,function(t){t.__alive=!1}),y(t,e,n,i),Et(t._chartsViews,function(t){t.__alive||t.remove(e,n)})}function v(t,e,n,i,r){Et(r||t._componentsViews,function(t){var r=t.__model;t.render(r,e,n,i),C(r,t)})}function y(t,e,n,i,r){var o,a=t._scheduler;e.eachSeries(function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var s=n.renderTask;a.updatePayload(s,i),r&&r.get(e.uid)&&s.dirty(),o|=s.perform(a.getPerformArgs(s)),n.group.silent=!!e.get("silent"),C(e,n),b(e,n)}),a.unfinished|=o,w(t,e),_t(t._zr.dom,e)}function _(t,e){Et(ee,function(n){n(t,e)})}function x(t){}function w(t,e){var n=t._zr,i=n.storage,r=0;i.traverse(function(t){r++}),r>e.get("hoverLayerThreshold")&&!et.node&&e.eachSeries(function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse(function(t){t.useHoverLayer=!0})}})}function b(t,e){var n=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle("blend",n)})})}function C(t,e){var n=t.get("z"),i=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=i&&(t.zlevel=i))})}function S(t){var e=t._coordSysMgr;return Q.extend(new ot(t),{getCoordinateSystems:Q.bind(e.getCoordinateSystems,e),getComponentByElement:function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}}})}function M(){this.eventInfo}function E(t){function e(t,e){for(var n=0;n<t.length;n++){var i=t[n];i[o]=e}}var n=0,i=1,r=2,o="__connectUpdateStatus";Et($t,function(a,s){t._messageCenter.on(s,function(a){if(ae[t.group]&&t[o]!==n){if(a&&a.escapeConnect)return;var s=t.makeActionFromEvent(a),l=[];Et(oe,function(e){e!==t&&e.group===t.group&&l.push(e)}),e(l,n),Et(l,function(t){t[o]!==i&&t.dispatchAction(s)}),e(l,r)}})})}function I(t,e,n){var i=D(t);if(i)return i;var r=new o(t,e,n);return r.id="ec_"+se++,oe[r.id]=r,gt.setAttribute(t,ue,r.id),E(r),r}function T(t){if(Q.isArray(t)){var e=t;t=null,Et(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+le++,Et(e,function(e){e.group=t})}return ae[t]=!0,t}function P(t){ae[t]=!1}function L(t){"string"==typeof t?t=oe[t]:t instanceof o||(t=D(t)),t instanceof o&&!t.isDisposed()&&t.dispose()}function D(t){return oe[gt.getAttribute(t,ue)]}function A(t){return oe[t]}function k(t,e){ie[t]=e}function N(t){te.push(t)}function O(t,e){H(Qt,t,e,kt)}function R(t){ee.push(t)}function F(t,e,n){"function"==typeof e&&(n=e,e="");var i=Tt(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,Mt(Yt.test(i)&&Yt.test(e)),Kt[i]||(Kt[i]={action:n,actionInfo:t}),$t[e]=i}function z(t,e){at.register(t,e)}function B(t){var e=at.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}function V(t,e){H(ne,t,e,Ft,"layout")}function G(t,e){H(ne,t,e,Vt,"visual")}function H(t,e,n,i,r){(It(e)||Tt(e))&&(n=e,e=i);var o=wt.wrapStageHandler(n,r);return o.__prio=e,o.__raw=n,t.push(o),o}function j(t,e){re[t]=e}function U(t){return ct.extend(t)}function W(t){return ft.extend(t)}function q(t){return ht.extend(t)}function Y(t){return pt.extend(t)}function X(t){Q.$override("createCanvas",t)}function Z(t,e,n){St.registerMap(t,e,n)}function J(t){var e=St.retrieveMap(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}}var K=n(132),$=(K.__DEV__,n(133)),Q=n(136),tt=n(154),et=n(135),nt=n(159),it=n(140),rt=n(176),ot=n(230),at=n(231),st=n(232),lt=n(233),ut=n(235),ct=n(219),ht=n(236),ft=n(240),pt=n(241),dt=n(184),gt=n(177),mt=n(243),vt=mt.throttle,yt=n(244),_t=n(245),xt=n(247),wt=n(248),bt=n(249),Ct=n(250);n(251);var St=n(252),Mt=Q.assert,Et=Q.each,It=Q.isFunction,Tt=Q.isObject,Pt=ct.parseClassType,Lt="4.9.0",Dt={zrender:"4.3.2"},At=1,kt=1e3,Nt=800,Ot=900,Rt=5e3,Ft=1e3,zt=1100,Bt=2e3,Vt=3e3,Gt=3500,Ht=4e3,jt=5e3,Ut={PROCESSOR:{FILTER:kt,SERIES_FILTER:Nt,STATISTIC:Rt},VISUAL:{LAYOUT:Ft,PROGRESSIVE_LAYOUT:zt,GLOBAL:Bt,CHART:Vt,POST_CHART_LAYOUT:Gt,COMPONENT:Ht,BRUSH:jt}},Wt="__flagInMainProcess",qt="__optionUpdated",Yt=/^[a-zA-Z0-9_]+$/;r.prototype.on=i("on",!0),r.prototype.off=i("off",!0),r.prototype.one=i("one",!0),Q.mixin(r,it);var Xt=o.prototype;Xt._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[qt]){var e=this[qt].silent;this[Wt]=!0,s(this),Zt.update.call(this),this[Wt]=!1,this[qt]=!1,h.call(this,e),f.call(this,e)}else if(t.unfinished){var n=At,i=this._model,r=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),u(this,i),t.performVisualTasks(i),y(this,this._model,r,"remain"),n-=+new Date-o}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},Xt.getDom=function(){return this._dom},Xt.getZr=function(){return this._zr},Xt.setOption=function(t,e,n){if(this._disposed)return void x(this.id);var i;if(Tt(e)&&(n=e.lazyUpdate,i=e.silent,e=e.notMerge),this[Wt]=!0,!this._model||e){var r=new st(this._api),o=this._theme,a=this._model=new rt;a.scheduler=this._scheduler,a.init(null,null,o,r)}this._model.setOption(t,te),n?(this[qt]={silent:i},this[Wt]=!1):(s(this),Zt.update.call(this),this._zr.flush(),this[qt]=!1,this[Wt]=!1,h.call(this,i),f.call(this,i))},Xt.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Xt.getModel=function(){return this._model},Xt.getOption=function(){return this._model&&this._model.getOption()},Xt.getWidth=function(){return this._zr.getWidth()},Xt.getHeight=function(){return this._zr.getHeight()},Xt.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},Xt.getRenderedCanvas=function(t){if(et.canvasSupported){t=t||{},t.pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor");var e=this._zr;return e.painter.getRenderedCanvas(t)}},Xt.getSvgDataURL=function(){if(et.svgSupported){var t=this._zr,e=t.storage.getDisplayList();return Q.each(e,function(t){t.stopAnimation(!0)}),t.painter.toDataURL()}},Xt.getDataURL=function(t){if(this._disposed)return void x(this.id);t=t||{};var e=t.excludeComponents,n=this._model,i=[],r=this;Et(e,function(t){n.eachComponent({mainType:t},function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)})});var o="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Et(i,function(t){t.group.ignore=!1}),o},Xt.getConnectedDataURL=function(t){if(this._disposed)return void x(this.id);if(et.canvasSupported){var e="svg"===t.type,n=this.group,i=Math.min,r=Math.max,o=1/0;if(ae[n]){var a=o,s=o,l=-o,u=-o,c=[],h=t&&t.pixelRatio||1;Q.each(oe,function(o,h){if(o.group===n){var f=e?o.getZr().painter.getSvgDom().innerHTML:o.getRenderedCanvas(Q.clone(t)),p=o.getDom().getBoundingClientRect();a=i(p.left,a),s=i(p.top,s),l=r(p.right,l),u=r(p.bottom,u),c.push({dom:f,left:p.left,top:p.top})}}),a*=h,s*=h,l*=h,u*=h;var f=l-a,p=u-s,d=Q.createCanvas(),g=$.init(d,{renderer:e?"svg":"canvas"});if(g.resize({width:f,height:p}),e){var m="";return Et(c,function(t){var e=t.left-a,n=t.top-s;m+='<g transform="translate('+e+","+n+')">'+t.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=m,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}return t.connectedBackgroundColor&&g.add(new dt.Rect({shape:{x:0,y:0,width:f,height:p},style:{fill:t.connectedBackgroundColor}})),Et(c,function(t){var e=new dt.Image({style:{x:t.left*h-a,y:t.top*h-s,image:t.dom}});g.add(e)}),g.refreshImmediately(),d.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},Xt.convertToPixel=Q.curry(a,"convertToPixel"),Xt.convertFromPixel=Q.curry(a,"convertFromPixel"),Xt.containPixel=function(t,e){if(this._disposed)return void x(this.id);var n,i=this._model;return t=gt.parseFinder(i,t),Q.each(t,function(t,i){i.indexOf("Models")>=0&&Q.each(t,function(t){var r=t.coordinateSystem;if(r&&r.containPoint)n|=!!r.containPoint(e);else if("seriesModels"===i){var o=this._chartsMap[t.__viewId];o&&o.containPoint&&(n|=o.containPoint(e,t))}},this)},this),!!n},Xt.getVisual=function(t,e){var n=this._model;t=gt.parseFinder(n,t,{defaultMainType:"series"});var i=t.seriesModel,r=i.getData(),o=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?r.indexOfRawIndex(t.dataIndex):null;return null!=o?r.getItemVisual(o,e):r.getVisual(e)},Xt.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},Xt.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var Zt={prepareAndUpdate:function(t){s(this),Zt.update.call(this,t)},update:function(t){var e=this._model,n=this._api,i=this._zr,r=this._coordSysMgr,o=this._scheduler;if(e){o.restoreData(e,t),o.performSeriesTasks(e),r.create(e,n),o.performDataProcessorTasks(e,t),u(this,e),r.update(e,n),g(e),o.performVisualTasks(e,t),m(this,e,n,t);var a=e.get("backgroundColor")||"transparent";if(et.canvasSupported)i.setBackgroundColor(a);else{var s=tt.parse(a);a=tt.stringify(s,"rgb"),0===s[3]&&(a="transparent")}_(e,n)}},updateTransform:function(t){var e=this._model,n=this,i=this._api;if(e){var r=[];e.eachComponent(function(o,a){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(a,e,i,t);l&&l.update&&r.push(s)}else r.push(s)});var o=Q.createHashMap();e.eachSeries(function(r){var a=n._chartsMap[r.__viewId];if(a.updateTransform){var s=a.updateTransform(r,e,i,t);s&&s.update&&o.set(r.uid,1)}else o.set(r.uid,1)}),g(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:o}),y(n,e,i,t,o),_(e,this._api)}},updateView:function(t){var e=this._model;e&&(pt.markUpdateMethod(t,"updateView"),g(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),m(this,this._model,this._api,t),_(e,this._api))},updateVisual:function(t){Zt.update.call(this,t)},updateLayout:function(t){Zt.update.call(this,t)}};Xt.resize=function(t){if(this._disposed)return void x(this.id);this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this[Wt]=!0,n&&s(this),Zt.update.call(this),this[Wt]=!1,h.call(this,i),f.call(this,i)}},Xt.showLoading=function(t,e){if(this._disposed)return void x(this.id);if(Tt(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),re[t]){var n=re[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},Xt.hideLoading=function(){return this._disposed?void x(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),void(this._loadingFX=null))},Xt.makeActionFromEvent=function(t){var e=Q.extend({},t);return e.type=$t[t.type],e},Xt.dispatchAction=function(t,e){if(this._disposed)return void x(this.id);if(Tt(e)||(e={silent:!!e}),Kt[t.type]&&this._model){if(this[Wt])return void this._pendingActions.push(t);c.call(this,t,e.silent),e.flush?this._zr.flush(!0):e.flush!==!1&&et.browser.weChat&&this._throttledZrFlush(),h.call(this,e.silent),f.call(this,e.silent)}},Xt.appendData=function(t){if(this._disposed)return void x(this.id);var e=t.seriesIndex,n=this.getModel(),i=n.getSeriesByIndex(e);i.appendData(t),this._scheduler.unfinished=!0},Xt.on=i("on",!1),Xt.off=i("off",!1),Xt.one=i("one",!1);var Jt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];Xt._initEvents=function(){Et(Jt,function(t){var e=function(e){var n,i=this.getModel(),r=e.target,o="globalout"===t;if(o)n={};else if(r&&null!=r.dataIndex){var a=r.dataModel||i.getSeriesByIndex(r.seriesIndex);n=a&&a.getDataParams(r.dataIndex,r.dataType,r)||{}}else r&&r.eventData&&(n=Q.extend({},r.eventData));if(n){var s=n.componentType,l=n.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",l=n.seriesIndex);var u=s&&null!=l&&i.getComponent(s,l),c=u&&this["series"===u.mainType?"_chartsMap":"_componentsMap"][u.__viewId];n.event=e,n.type=t,this._ecEventProcessor.eventInfo={targetEl:r,packedEvent:n,model:u,view:c},this.trigger(t,n)}};e.zrEventfulCallAtLast=!0,this._zr.on(t,e,this)},this),Et($t,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},Xt.isDisposed=function(){return this._disposed},Xt.clear=function(){return this._disposed?void x(this.id):void this.setOption({series:[]},!0)},Xt.dispose=function(){if(this._disposed)return void x(this.id);this._disposed=!0,gt.setAttribute(this.getDom(),ue,"");var t=this._api,e=this._model;Et(this._componentsViews,function(n){n.dispose(e,t)}),Et(this._chartsViews,function(n){n.dispose(e,t)}),this._zr.dispose(),delete oe[this.id]},Q.mixin(o,it),M.prototype={constructor:M,normalizeQuery:function(t){var e={},n={},i={};if(Q.isString(t)){var r=Pt(t);e.mainType=r.main||null,e.subType=r.sub||null}else{var o=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};Q.each(t,function(t,r){for(var s=!1,l=0;l<o.length;l++){var u=o[l],c=r.lastIndexOf(u);if(c>0&&c===r.length-u.length){var h=r.slice(0,c);"data"!==h&&(e.mainType=h,e[u.toLowerCase()]=t,s=!0)}}a.hasOwnProperty(r)&&(n[r]=t,s=!0),s||(i[r]=t)})}return{cptQuery:e,dataQuery:n,otherQuery:i}},filter:function(t,e,n){function i(t,e,n,i){return null==t[n]||e[i||n]===t[n]}var r=this.eventInfo;if(!r)return!0;var o=r.targetEl,a=r.packedEvent,s=r.model,l=r.view;if(!s||!l)return!0;var u=e.cptQuery,c=e.dataQuery;return i(u,s,"mainType")&&i(u,s,"subType")&&i(u,s,"index","componentIndex")&&i(u,s,"name")&&i(u,s,"id")&&i(c,a,"name")&&i(c,a,"dataIndex")&&i(c,a,"dataType")&&(!l.filterForExposedEvent||l.filterForExposedEvent(t,e.otherQuery,o,a))},afterTrigger:function(){this.eventInfo=null}};var Kt={},$t={},Qt=[],te=[],ee=[],ne=[],ie={},re={},oe={},ae={},se=new Date-0,le=new Date-0,ue="_echarts_instance_",ce=P;G(Bt,yt),N(lt),O(Ot,ut),j("default",xt),F({type:"highlight",event:"highlight",update:"highlight"},Q.noop),F({type:"downplay",event:"downplay",update:"downplay"},Q.noop),k("light",bt),k("dark",Ct);var he={};e.version=Lt,e.dependencies=Dt,e.PRIORITY=Ut,e.init=I,e.connect=T,e.disConnect=P,e.disconnect=ce,e.dispose=L,e.getInstanceByDom=D,e.getInstanceById=A,e.registerTheme=k,e.registerPreprocessor=N,e.registerProcessor=O,e.registerPostUpdate=R,e.registerAction=F,e.registerCoordinateSystem=z,e.getCoordinateSystemDimensions=B,e.registerLayout=V,e.registerVisual=G,e.registerLoading=j,e.extendComponentModel=U,e.extendComponentView=W,e.extendSeriesModel=q,e.extendChartView=Y,e.setCanvasCreator=X,e.registerMap=Z,e.getMap=J,e.dataTool=he;var fe=n(255);!function(){for(var t in fe)fe.hasOwnProperty(t)&&(e[t]=fe[t])}()},function(t,e){(function(t){var n;"undefined"!=typeof window?n=window.__DEV__:"undefined"!=typeof t&&(n=t.__DEV__),"undefined"==typeof n&&(n=!0);var i=n;e.__DEV__=i}).call(e,function(){return this}())},function(t,e,n){function i(t,e){var n=new x(l(),t,e);return y[n.id]=n,n}function r(t){if(t)t.dispose();else{for(var e in y)y.hasOwnProperty(e)&&y[e].dispose();y={}}return this}function o(t){return y[t]}function a(t,e){v[t]=e}function s(t){delete y[t]}var l=n(134),u=n(135),c=n(136),h=n(137),f=n(145),p=n(160),d=n(174),g=n(175),m=!u.canvasSupported,v={canvas:p},y={},_="4.3.2",x=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,r=new f,o=n.renderer;if(m){if(!v.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&v[o]||(o="canvas");var a=new v[o](e,r,n,t);this.storage=r,this.painter=a;var s=u.node||u.worker?null:new g(a.getViewportRoot(),a.root);this.handler=new h(r,a,s,a.root),this.animation=new d({stage:{update:c.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var l=r.delFromStorage,p=r.addToStorage;r.delFromStorage=function(t){l.call(r,t),t&&t.removeSelfFromZr(i)},r.addToStorage=function(t){p.call(r,t),t.addSelfToZr(i)}};x.prototype={constructor:x,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e);
},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,s(this.id)}},e.version=_,e.init=i,e.dispose=r,e.getInstance=o,e.registerPainter=a},function(t,e){function n(){return i++}var i=2311;t.exports=n},function(t,e){function n(t){var e={},n={},i=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);return i&&(n.firefox=!0,n.version=i[1]),r&&(n.ie=!0,n.version=r[1]),o&&(n.edge=!0,n.version=o[1]),a&&(n.weChat=!0),{browser:n,os:e,node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!n.ie&&!n.edge,pointerEventsSupported:"onpointerdown"in window&&(n.edge||n.ie&&n.version>=11),domSupported:"undefined"!=typeof document}}var i={};i="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:n(navigator.userAgent);var r=i;t.exports=r},function(t,e){function n(t,e){"createCanvas"===t&&($=null),J[t]=e}function i(t){if(null==t||"object"!=typeof t)return t;var e=t,n=j.call(t);if("[object Array]"===n){if(!R(t)){e=[];for(var r=0,o=t.length;r<o;r++)e[r]=i(t[r])}}else if(H[n]){if(!R(t)){var a=t.constructor;if(t.constructor.from)e=a.from(t);else{e=new a(t.length);for(var r=0,o=t.length;r<o;r++)e[r]=i(t[r])}}}else if(!G[n]&&!R(t)&&!E(t)){e={};for(var s in t)t.hasOwnProperty(s)&&(e[s]=i(t[s]))}return e}function r(t,e,n){if(!C(e)||!C(t))return n?i(e):t;for(var o in e)if(e.hasOwnProperty(o)){var a=t[o],s=e[o];!C(s)||!C(a)||x(s)||x(a)||E(s)||E(a)||S(s)||S(a)||R(s)||R(a)?!n&&o in t||(t[o]=i(e[o],!0)):r(a,s,n)}return t}function o(t,e){for(var n=t[0],i=1,o=t.length;i<o;i++)n=r(n,t[i],e);return n}function a(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function s(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}function l(){return $||($=K().getContext("2d")),$}function u(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function c(t,e){function n(){}var i=t.prototype;n.prototype=e.prototype,t.prototype=new n;for(var r in i)i.hasOwnProperty(r)&&(t.prototype[r]=i[r]);t.prototype.constructor=t,t.superClass=e}function h(t,e,n){t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,s(t,e,n)}function f(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function p(t,e,n){if(t&&e)if(t.forEach&&t.forEach===W)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function d(t,e,n){if(t&&e){if(t.map&&t.map===X)return t.map(e,n);for(var i=[],r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r,t));return i}}function g(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===Z)return t.reduce(e,n,i);for(var r=0,o=t.length;r<o;r++)n=e.call(i,n,t[r],r,t);return n}}function m(t,e,n){if(t&&e){if(t.filter&&t.filter===q)return t.filter(e,n);for(var i=[],r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}}function v(t,e,n){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return t[i]}function y(t,e){var n=Y.call(arguments,2);return function(){return t.apply(e,n.concat(Y.call(arguments)))}}function _(t){var e=Y.call(arguments,1);return function(){return t.apply(this,e.concat(Y.call(arguments)))}}function x(t){return"[object Array]"===j.call(t)}function w(t){return"function"==typeof t}function b(t){return"[object String]"===j.call(t)}function C(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function S(t){return!!G[j.call(t)]}function M(t){return!!H[j.call(t)]}function E(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function I(t){return t!==t}function T(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function P(t,e){return null!=t?t:e}function L(t,e,n){return null!=t?t:null!=e?e:n}function D(){return Function.call.apply(Y,arguments)}function A(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function k(t,e){if(!t)throw new Error(e)}function N(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function O(t){t[Q]=!0}function R(t){return t[Q]}function F(t){function e(t,e){n?i.set(t,e):i.set(e,t)}var n=x(t);this.data={};var i=this;t instanceof F?t.each(e):t&&p(t,e)}function z(t){return new F(t)}function B(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var r=t.length;for(i=0;i<e.length;i++)n[i+r]=e[i];return n}function V(){}var G={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},H={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},j=Object.prototype.toString,U=Array.prototype,W=U.forEach,q=U.filter,Y=U.slice,X=U.map,Z=U.reduce,J={},K=function(){return J.createCanvas()};J.createCanvas=function(){return document.createElement("canvas")};var $,Q="__ec_primitive__";F.prototype={constructor:F,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){void 0!==e&&(t=y(t,e));for(var n in this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}},e.$override=n,e.clone=i,e.merge=r,e.mergeAll=o,e.extend=a,e.defaults=s,e.createCanvas=K,e.getContext=l,e.indexOf=u,e.inherits=c,e.mixin=h,e.isArrayLike=f,e.each=p,e.map=d,e.reduce=g,e.filter=m,e.find=v,e.bind=y,e.curry=_,e.isArray=x,e.isFunction=w,e.isString=b,e.isObject=C,e.isBuiltInObject=S,e.isTypedArray=M,e.isDom=E,e.eqNaN=I,e.retrieve=T,e.retrieve2=P,e.retrieve3=L,e.slice=D,e.normalizeCssArray=A,e.assert=k,e.trim=N,e.setAsPrimitive=O,e.isPrimitive=R,e.createHashMap=z,e.concatArray=B,e.noop=V},function(t,e,n){function i(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:r}}function r(){f.stop(this.event)}function o(){}function a(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,n))return!1;r.silent&&(i=!0),r=r.parent}return!i||d}return!1}function s(t,e,n){var i=t.painter;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}var l=n(136),u=n(138),c=n(139),h=n(140),f=n(141),p=n(144),d="silent";o.prototype.dispose=function(){};var g=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],m=function(t,e,n,i){h.call(this),this.storage=t,this.painter=e,this.painterRoot=i,n=n||new o,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,this._gestureMgr,c.call(this),this.setHandlerProxy(n)};m.prototype={constructor:m,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(l.each(g,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,i=s(this,e,n),r=this._hovered,o=r.target;o&&!o.__zr&&(r=this.findHover(r.x,r.y),o=r.target);var a=this._hovered=i?{x:e,y:n}:this.findHover(e,n),l=a.target,u=this.proxy;u.setCursor&&u.setCursor(l?l.cursor:"default"),o&&l!==o&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(a,"mousemove",t),l&&l!==o&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){var e=t.zrEventControl,n=t.zrIsToLocalDOM;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&!n&&this.trigger("globalout",{type:"globalout",event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){t=t||{};var r=t.target;if(!r||!r.silent){for(var o="on"+e,a=i(e,t,n);r&&(r[o]&&(a.cancelBubble=r[o].call(r,a)),r.trigger(e,a),r=r.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[o]&&t[o].call(t,a),t.trigger&&t.trigger(e,a)}))}},findHover:function(t,e,n){for(var i=this.storage.getDisplayList(),r={x:t,y:e},o=i.length-1;o>=0;o--){var s;if(i[o]!==n&&!i[o].ignore&&(s=a(i[o],t,e))&&(!r.topTarget&&(r.topTarget=i[o]),s!==d)){r.target=i[o];break}}return r},processGesture:function(t,e){this._gestureMgr||(this._gestureMgr=new p);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),i){var r=i.type;t.gestureEvent=r,this.dispatchToElement({target:i.target},r,i.event)}}},l.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){m.prototype[t]=function(e){var n,i,r=e.zrX,o=e.zrY,a=s(this,r,o);if("mouseup"===t&&a||(n=this.findHover(r,o),i=n.target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||u.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}}),l.mixin(m,h),l.mixin(m,c);var v=m;t.exports=v},function(t,e){function n(t,e){var n=new C(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n}function i(t,e){return t[0]=e[0],t[1]=e[1],t}function r(t){var e=new C(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e,n){return t[0]=e,t[1]=n,t}function a(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function s(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function u(t){return Math.sqrt(c(t))}function c(t){return t[0]*t[0]+t[1]*t[1]}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function p(t,e){return t[0]*e[0]+t[1]*e[1]}function d(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function g(t,e){var n=u(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function m(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function v(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function y(t,e){return t[0]=-e[0],t[1]=-e[1],t}function _(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}function x(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function w(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function b(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var C="undefined"==typeof Float32Array?Array:Float32Array,S=u,M=c,E=m,I=v;e.create=n,e.copy=i,e.clone=r,e.set=o,e.add=a,e.scaleAndAdd=s,e.sub=l,e.len=u,e.length=S,e.lenSquare=c,e.lengthSquare=M,e.mul=h,e.div=f,e.dot=p,e.scale=d,e.normalize=g,e.distance=m,e.dist=E,e.distanceSquare=v,e.distSquare=I,e.negate=y,e.lerp=_,e.applyTransform=x,e.min=w,e.max=b},function(t,e){function n(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function i(t,e){return{target:t,topTarget:e&&e.topTarget}}n.prototype={constructor:n,_dragStart:function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(i(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,r=t.offsetY,o=n-this._x,a=r-this._y;this._x=n,this._y=r,e.drift(o,a,t),this.dispatchToElement(i(e,t),"drag",t.event);var s=this.findHover(n,r,e).target,l=this._dropTarget;this._dropTarget=s,e!==s&&(l&&s!==l&&this.dispatchToElement(i(l,t),"dragleave",t.event),s&&s!==l&&this.dispatchToElement(i(s,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(i(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(i(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var r=n;t.exports=r},function(t,e){function n(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}function i(t,e,i,r,o,a){var s=t._$handlers;if("function"==typeof i&&(o=r,r=i,i=null),!r||!e)return t;i=n(t,i),s[e]||(s[e]=[]);for(var l=0;l<s[e].length;l++)if(s[e][l].h===r)return t;var u={h:r,one:a,query:i,ctx:o||t,callAtLast:r.zrEventfulCallAtLast},c=s[e].length-1,h=s[e][c];return h&&h.callAtLast?s[e].splice(c,0,u):s[e].push(u),t}var r=Array.prototype.slice,o=function(t){this._$handlers={},this._$eventProcessor=t};o.prototype={constructor:o,one:function(t,e,n,r){return i(this,t,e,n,r,!0)},on:function(t,e,n,r){return i(this,t,e,n,r,!1)},isSilent:function(t){var e=this._$handlers;return!e[t]||!e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,o=n[t].length;r<o;r++)n[t][r].h!==e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,o=i.length;o>3&&(i=r.call(i,1));for(var a=e.length,s=0;s<a;){var l=e[s];if(n&&n.filter&&null!=l.query&&!n.filter(t,l.query))s++;else{switch(o){case 1:l.h.call(l.ctx);break;case 2:l.h.call(l.ctx,i[1]);break;case 3:l.h.call(l.ctx,i[1],i[2]);break;default:l.h.apply(l.ctx,i)}l.one?(e.splice(s,1),a--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var i=arguments,o=i.length;o>4&&(i=r.call(i,1,i.length-1));for(var a=i[i.length-1],s=e.length,l=0;l<s;){var u=e[l];if(n&&n.filter&&null!=u.query&&!n.filter(t,u.query))l++;else{switch(o){case 1:u.h.call(a);break;case 2:u.h.call(a,i[1]);break;case 3:u.h.call(a,i[1],i[2]);break;default:u.h.apply(a,i)}u.one?(e.splice(l,1),s--):l++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var a=o;t.exports=a},function(t,e,n){function i(t,e,n,i){return n=n||{},i||!f.canvasSupported?r(t,e,n):f.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):r(t,e,n),n}function r(t,e,n){if(f.domSupported&&t.getBoundingClientRect){var i=e.clientX,r=e.clientY;if(d(t)){var o=t.getBoundingClientRect();return n.zrX=i-o.left,void(n.zrY=r-o.top)}if(g(y,t,i,r))return n.zrX=y[0],void(n.zrY=y[1])}n.zrX=n.zrY=0}function o(t){return t||window.event}function a(t,e,n){if(e=o(e),null!=e.zrX)return e;var r=e.type,a=r&&r.indexOf("touch")>=0;if(a){var s="touchend"!==r?e.targetTouches[0]:e.changedTouches[0];s&&i(t,s,e,n)}else i(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var l=e.button;return null==e.which&&void 0!==l&&v.test(e.type)&&(e.which=1&l?1:2&l?3:4&l?2:0),e}function s(t,e,n,i){m?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)}function l(t,e,n,i){m?t.removeEventListener(e,n,i):t.detachEvent("on"+e,n)}function u(t){return 2===t.which||3===t.which}function c(t){return t.which>1}var h=n(140);e.Dispatcher=h;var f=n(135),p=n(142),d=p.isCanvasEl,g=p.transformCoordWithViewport,m="undefined"!=typeof window&&!!window.addEventListener,v=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,y=[],_=m?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};e.clientToLocal=i,e.getNativeEvent=o,e.normalizeEvent=a,e.addEventListener=s,e.removeEventListener=l,e.stop=_,e.isMiddleOrRightButtonOnMouseUpDown=u,e.notLeftMouse=c},function(t,e,n){function i(t,e,n,i,o){return r(f,e,i,o,!0)&&r(t,n,f[0],f[1])}function r(t,e,n,i,r){if(e.getBoundingClientRect&&l.domSupported&&!s(e)){var u=e[h]||(e[h]={}),c=o(e,u),f=a(c,u,r);if(f)return f(t,n,i),!0}return!1}function o(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var i=["left","right"],r=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",r[u]+":0",i[1-l]+":auto",r[1-u]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}function a(t,e,n){for(var i=n?"invTrans":"trans",r=e[i],o=e.srcCoords,a=!0,s=[],l=[],u=0;u<4;u++){var h=t[u].getBoundingClientRect(),f=2*u,p=h.left,d=h.top;s.push(p,d),a=a&&o&&p===o[f]&&d===o[f+1],l.push(t[u].offsetLeft,t[u].offsetTop)}return a&&r?r:(e.srcCoords=s,e[i]=n?c(l,s):c(s,l))}function s(t){return"CANVAS"===t.nodeName.toUpperCase()}var l=n(135),u=n(143),c=u.buildTransformer,h="___zrEVENTSAVED",f=[];e.transformLocalCoord=i,e.transformCoordWithViewport=r,e.isCanvasEl=s},function(t,e){function n(t,e,i,o,a,s){var l=o+"-"+a,u=t.length;if(s.hasOwnProperty(l))return s[l];if(1===e){var c=Math.round(Math.log((1<<u)-1&~a)/r);return t[i][c]}for(var h=o|1<<i,f=i+1;o&1<<f;)f++;for(var p=0,d=0,g=0;d<u;d++){var m=1<<d;m&a||(p+=(g%2?-1:1)*t[i][d]*n(t,e-1,f,h,a|m,s),g++)}return s[l]=p,p}function i(t,e){var i=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],r={},o=n(i,8,0,0,0,r);if(0!==o){for(var a=[],s=0;s<8;s++)for(var l=0;l<8;l++)null==a[l]&&(a[l]=0),a[l]+=((s+l)%2?-1:1)*n(i,7,0===s?1:0,1<<s,1<<l,r)/o*e[s];return function(t,e,n){var i=e*a[6]+n*a[7]+1;t[0]=(e*a[0]+n*a[1]+a[2])/i,t[1]=(e*a[3]+n*a[4]+a[5])/i}}}var r=Math.log(2);e.buildTransformer=i},function(t,e,n){function i(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function r(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var o=n(141),a=function(){this._track=[]};a.prototype={constructor:a,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=o.clientToLocal(n,l,{});r.points.push([u.zrX,u.zrY]),r.touches.push(l)}this._track.push(r)}},_recognize:function(t){for(var e in s)if(s.hasOwnProperty(e)){var n=s[e](this._track,t);if(n)return n}}};var s={pinch:function(t,e){var n=t.length;if(n){var o=(t[n-1]||{}).points,a=(t[n-2]||{}).points||o;if(a&&a.length>1&&o&&o.length>1){var s=i(o)/i(a);!isFinite(s)&&(s=1),e.pinchScale=s;var l=r(o);return e.pinchX=l[0],e.pinchY=l[1],{type:"pinch",target:t[0].target,event:e}}}}},l=a;t.exports=l},function(t,e,n){function i(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var r=n(136),o=n(135),a=n(146),s=n(159),l=function(){this._roots=[],this._displayList=[],this._displayListLen=0};l.prototype={constructor:l,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,a=e.length;r<a;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,o.canvasSupported&&s(n,i)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var r=i,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),o=r,r=r.clipPath}if(t.isGroup){for(var a=t._children,s=0;s<a.length;s++){var l=a[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof a&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var n=this._roots[e];n instanceof a&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var e=0,i=t.length;e<i;e++)this.delRoot(t[e]);else{var o=r.indexOf(this._roots,t);o>=0&&(this.delFromStorage(t),this._roots.splice(o,1),t instanceof a&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:i};var u=l;t.exports=u},function(t,e,n){var i=n(136),r=n(147),o=n(158),a=function(t){t=t||{},r.call(this,t);for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};a.prototype={constructor:a,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof a&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,r=this._children,o=i.indexOf(r,t);return o<0?this:(r.splice(o,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(n)),e&&e.refresh(),this)},removeAll:function(){var t,e,n=this._children,i=this.__storage;for(e=0;e<n.length;e++)t=n[e],i&&(i.delFromStorage(t),t instanceof a&&t.delChildrenFromStorage(i)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof a&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof a&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new o(0,0,0,0),i=t||this._children,r=[],a=0;a<i.length;a++){var s=i[a];if(!s.ignore&&!s.invisible){var l=s.getBoundingRect(),u=s.getLocalTransform(r);u?(n.copy(l),n.applyTransform(u),e=e||n.clone(),e.union(n)):(e=e||l.clone(),e.union(l))}}return e||n}},i.inherits(a,r);var s=a;t.exports=s},function(t,e,n){var i=n(134),r=n(140),o=n(148),a=n(150),s=n(136),l=function(t){o.call(this,t),r.call(this,t),a.call(this,t),this.id=t.id||i()};l.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(s.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},s.mixin(l,a),s.mixin(l,o),s.mixin(l,r);var u=l;t.exports=u},function(t,e,n){function i(t){return t>s||t<-s}var r=n(149),o=n(138),a=r.identity,s=5e-5,l=function(t){t=t||{},t.position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},u=l.prototype;u.transform=null,u.needLocalTransform=function(){return i(this.rotation)||i(this.position[0])||i(this.position[1])||i(this.scale[0]-1)||i(this.scale[1]-1)};var c=[];u.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;if(!n&&!e)return void(i&&a(i));i=i||r.create(),n?this.getLocalTransform(i):a(i),e&&(n?r.mul(i,t.transform,i):r.copy(i,t.transform)),this.transform=i;var o=this.globalScaleRatio;if(null!=o&&1!==o){this.getGlobalScale(c);var s=c[0]<0?-1:1,l=c[1]<0?-1:1,u=((c[0]-s)*o+s)/c[0]||0,h=((c[1]-l)*o+l)/c[1]||0;i[0]*=u,i[1]*=u,i[2]*=h,i[3]*=h}this.invTransform=this.invTransform||r.create(),r.invert(this.invTransform,i)},u.getLocalTransform=function(t){return l.getLocalTransform(this,t)},u.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},u.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var h=[],f=r.create();u.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=this.position,o=this.scale;i(e-1)&&(e=Math.sqrt(e)),i(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),r[0]=t[4],r[1]=t[5],o[0]=e,o[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},u.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(r.mul(h,t.invTransform,e),e=h);var n=this.origin;n&&(n[0]||n[1])&&(f[4]=n[0],f[5]=n[1],r.mul(h,e,f),h[4]-=n[0],h[5]-=n[1],e=h),this.setLocalTransform(e)}},u.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},u.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&o.applyTransform(n,n,i),n},u.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&o.applyTransform(n,n,i),n},l.getLocalTransform=function(t,e){e=e||[],a(e);var n=t.origin,i=t.scale||[1,1],o=t.rotation||0,s=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),r.scale(e,e,i),o&&r.rotate(e,e,o),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=s[0],e[5]+=s[1],e};var p=l;t.exports=p},function(t,e){function n(){var t=new h(6);return i(t),t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function o(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t}function a(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function s(t,e,n){var i=e[0],r=e[2],o=e[4],a=e[1],s=e[3],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=i*c+a*u,t[1]=-i*u+a*c,t[2]=r*c+s*u,t[3]=-r*u+c*s,t[4]=c*o+u*l,t[5]=c*l-u*o,t}function l(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t}function u(t,e){var n=e[0],i=e[2],r=e[4],o=e[1],a=e[3],s=e[5],l=n*a-o*i;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-a*r)*l,t[5]=(o*r-n*s)*l,t):null}function c(t){var e=n();return r(e,t),e}var h="undefined"==typeof Float32Array?Array:Float32Array;e.create=n,e.identity=i,e.copy=r,e.mul=o,e.translate=a,e.rotate=s,e.scale=l,e.invert=u,e.clone=c},function(t,e,n){function i(t,e,n,i,o,a,s,l){function h(){p--,p||a&&a()}u(i)?(a=o,o=i,i=0):c(o)?(a=o,o="linear",i=0):c(i)?(a=i,i=0):c(n)?(a=n,n=500):n||(n=500),t.stopAnimation(),r(t,"",t,e,n,i,l);var f=t.animators.slice(),p=f.length;p||a&&a();for(var d=0;d<f.length;d++)f[d].done(h).start(o,s)}function r(t,e,n,i,a,s,l){var u={},c=0;for(var p in i)i.hasOwnProperty(p)&&(null!=n[p]?h(i[p])&&!f(i[p])?r(t,e?e+"."+p:p,n[p],i[p],a,s,l):(l?(u[p]=n[p],o(t,e,p,i[p])):u[p]=i[p],c++):null==i[p]||l||o(t,e,p,i[p]));c>0&&t.animate(e,!1).when(null==a?500:a,u).delay(s||0)}function o(t,e,n,i){if(e){var r={};r[e]={},r[e][n]=i,t.attr(r)}else t.attr(n,i)}var a=n(151),s=n(156),l=n(136),u=l.isString,c=l.isFunction,h=l.isObject,f=l.isArrayLike,p=l.indexOf,d=function(){this.animators=[]};d.prototype={constructor:d,animate:function(t,e){var n,i=!1,r=this,o=this.__zr;if(t){var l=t.split("."),u=r;i="shape"===l[0];for(var c=0,h=l.length;c<h;c++)u&&(u=u[l[c]]);u&&(n=u)}else n=r;if(!n)return void s('Property "'+t+'" is not existed in element '+r.id);var f=r.animators,d=new a(n,e);return d.during(function(t){r.dirty(i)}).done(function(){f.splice(p(f,d),1)}),f.push(d),o&&o.animation.addAnimator(d),d},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,r,o,a){i(this,t,e,n,r,o,a)},animateFrom:function(t,e,n,r,o,a){i(this,t,e,n,r,o,a,!0)}};var g=d;t.exports=g},function(t,e,n){function i(t,e){return t[e]}function r(t,e,n){t[e]=n}function o(t,e,n){return(e-t)*n+t}function a(t,e,n){return n>.5?e:t}function s(t,e,n,i,r){var a=t.length;if(1===r)for(var s=0;s<a;s++)i[s]=o(t[s],e[s],n);else for(var l=a&&t[0].length,s=0;s<a;s++)for(var u=0;u<l;u++)i[s][u]=o(t[s][u],e[s][u],n)}function l(t,e,n){var i=t.length,r=e.length;if(i!==r){var o=i>r;if(o)t.length=r;else for(var a=i;a<r;a++)t.push(1===n?e[a]:x.call(e[a]))}for(var s=t[0]&&t[0].length,a=0;a<t.length;a++)if(1===n)isNaN(t[a])&&(t[a]=e[a]);else for(var l=0;l<s;l++)isNaN(t[a][l])&&(t[a][l]=e[a][l])}function u(t,e,n){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===n){for(var r=0;r<i;r++)if(t[r]!==e[r])return!1}else for(var o=t[0].length,r=0;r<i;r++)for(var a=0;a<o;a++)if(t[r][a]!==e[r][a])return!1;return!0}function c(t,e,n,i,r,o,a,s,l){var u=t.length;if(1===l)for(var c=0;c<u;c++)s[c]=h(t[c],e[c],n[c],i[c],r,o,a);else for(var f=t[0].length,c=0;c<u;c++)for(var p=0;p<f;p++)s[c][p]=h(t[c][p],e[c][p],n[c][p],i[c][p],r,o,a)}function h(t,e,n,i,r,o,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*r+e}function f(t){if(_(t)){var e=t.length;if(_(t[0])){for(var n=[],i=0;i<e;i++)n.push(x.call(t[i]));return n}return x.call(t)}return t}function p(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),
"rgba("+t.join(",")+")"}function d(t){var e=t[t.length-1].value;return _(e&&e[0])?2:1}function g(t,e,n,i,r,f){var g=t._getter,y=t._setter,x="spline"===e,w=i.length;if(w){var b,C=i[0].value,S=_(C),M=!1,E=!1,I=S?d(i):0;i.sort(function(t,e){return t.time-e.time}),b=i[w-1].time;for(var T=[],P=[],L=i[0].value,D=!0,A=0;A<w;A++){T.push(i[A].time/b);var k=i[A].value;if(S&&u(k,L,I)||!S&&k===L||(D=!1),L=k,"string"==typeof k){var N=v.parse(k);N?(k=N,M=!0):E=!0}P.push(k)}if(f||!D){for(var O=P[w-1],A=0;A<w-1;A++)S?l(P[A],O,I):!isNaN(P[A])||isNaN(O)||E||M||(P[A]=O);S&&l(g(t._target,r),O,I);var R,F,z,B,V,G,H=0,j=0;if(M)var U=[0,0,0,0];var W=function(t,e){var n;if(e<0)n=0;else if(e<j){for(R=Math.min(H+1,w-1),n=R;n>=0&&!(T[n]<=e);n--);n=Math.min(n,w-2)}else{for(n=H;n<w&&!(T[n]>e);n++);n=Math.min(n-1,w-2)}H=n,j=e;var i=T[n+1]-T[n];if(0!==i)if(F=(e-T[n])/i,x)if(B=P[n],z=P[0===n?n:n-1],V=P[n>w-2?w-1:n+1],G=P[n>w-3?w-1:n+2],S)c(z,B,V,G,F,F*F,F*F*F,g(t,r),I);else{var l;if(M)l=c(z,B,V,G,F,F*F,F*F*F,U,1),l=p(U);else{if(E)return a(B,V,F);l=h(z,B,V,G,F,F*F,F*F*F)}y(t,r,l)}else if(S)s(P[n],P[n+1],F,g(t,r),I);else{var l;if(M)s(P[n],P[n+1],F,U,1),l=p(U);else{if(E)return a(P[n],P[n+1],F);l=o(P[n],P[n+1],F)}y(t,r,l)}},q=new m({target:t._target,life:b,loop:t._loop,delay:t._delay,onframe:W,ondestroy:n});return e&&"spline"!==e&&(q.easing=e),q}}}var m=n(152),v=n(154),y=n(136),_=y.isArrayLike,x=Array.prototype.slice,w=function(t,e,n,o){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||i,this._setter=o||r,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};w.prototype={when:function(t,e){var n=this._tracks;for(var i in e)if(e.hasOwnProperty(i)){if(!n[i]){n[i]=[];var r=this._getter(this._target,i);if(null==r)continue;0!==t&&n[i].push({time:0,value:f(r)})}n[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){var n,i=this,r=0,o=function(){r--,r||i._doneCallback()};for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var s=g(this,t,o,this._tracks[a],a,e);s&&(this._clipList.push(s),r++,this.animation&&this.animation.addClip(s),n=s)}if(n){var l=n.onframe;n.onframe=function(t,e){l(t,e);for(var n=0;n<i._onframeList.length;n++)i._onframeList[n](t,e)}}return r||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var r=e[i];t&&r.onframe(this._target,1),n&&n.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var b=w;t.exports=b},function(t,e,n){function i(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}var r=n(153);i.prototype={constructor:i,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)return void(this._pausedTime+=e);var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,o="string"==typeof i?r[i]:i,a="function"==typeof o?o(n):n;return this.fire("frame",a),1===n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){t="on"+t,this[t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var o=i;t.exports=o},function(t,e){var n={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)))},elasticOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},elasticInOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)):n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-n.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*n.bounceIn(2*t):.5*n.bounceOut(2*t-1)+.5}},i=n;t.exports=i},function(t,e,n){function i(t){return t=Math.round(t),t<0?0:t>255?255:t}function r(t){return t=Math.round(t),t<0?0:t>360?360:t}function o(t){return t<0?0:t>1?1:t}function a(t){return i(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function s(t){return o(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function l(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function u(t,e,n){return t+(e-t)*n}function c(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function f(t,e){E&&h(E,e),E=M.put(t,E||e.slice())}function p(t,e){if(t){e=e||[];var n=M.get(t);if(n)return h(e,n);t+="";var i=t.replace(/ /g,"").toLowerCase();if(i in S)return h(e,S[i]),f(t,e),e;if("#"!==i.charAt(0)){var r=i.indexOf("("),o=i.indexOf(")");if(r!==-1&&o+1===i.length){var l=i.substr(0,r),u=i.substr(r+1,o-(r+1)).split(","),p=1;switch(l){case"rgba":if(4!==u.length)return void c(e,0,0,0,1);p=s(u.pop());case"rgb":return 3!==u.length?void c(e,0,0,0,1):(c(e,a(u[0]),a(u[1]),a(u[2]),p),f(t,e),e);case"hsla":return 4!==u.length?void c(e,0,0,0,1):(u[3]=s(u[3]),d(u,e),f(t,e),e);case"hsl":return 3!==u.length?void c(e,0,0,0,1):(d(u,e),f(t,e),e);default:return}}c(e,0,0,0,1)}else{if(4===i.length){var g=parseInt(i.substr(1),16);return g>=0&&g<=4095?(c(e,(3840&g)>>4|(3840&g)>>8,240&g|(240&g)>>4,15&g|(15&g)<<4,1),f(t,e),e):void c(e,0,0,0,1)}if(7===i.length){var g=parseInt(i.substr(1),16);return g>=0&&g<=16777215?(c(e,(16711680&g)>>16,(65280&g)>>8,255&g,1),f(t,e),e):void c(e,0,0,0,1)}}}}function d(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=s(t[1]),o=s(t[2]),a=o<=.5?o*(r+1):o+r-o*r,u=2*o-a;return e=e||[],c(e,i(255*l(u,a,n+1/3)),i(255*l(u,a,n)),i(255*l(u,a,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function g(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(i,r,o),s=Math.max(i,r,o),l=s-a,u=(s+a)/2;if(0===l)e=0,n=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-i)/6+l/2)/l,h=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l;i===s?e=f-h:r===s?e=1/3+c-f:o===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}var p=[360*e,n,u];return null!=t[3]&&p.push(t[3]),p}}function m(t,e){var n=p(t);if(n){for(var i=0;i<3;i++)e<0?n[i]=n[i]*(1-e)|0:n[i]=(255-n[i])*e+n[i]|0,n[i]>255?n[i]=255:t[i]<0&&(n[i]=0);return b(n,4===n.length?"rgba":"rgb")}}function v(t){var e=p(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function y(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var r=t*(e.length-1),a=Math.floor(r),s=Math.ceil(r),l=e[a],c=e[s],h=r-a;return n[0]=i(u(l[0],c[0],h)),n[1]=i(u(l[1],c[1],h)),n[2]=i(u(l[2],c[2],h)),n[3]=o(u(l[3],c[3],h)),n}}function _(t,e,n){if(e&&e.length&&t>=0&&t<=1){var r=t*(e.length-1),a=Math.floor(r),s=Math.ceil(r),l=p(e[a]),c=p(e[s]),h=r-a,f=b([i(u(l[0],c[0],h)),i(u(l[1],c[1],h)),i(u(l[2],c[2],h)),o(u(l[3],c[3],h))],"rgba");return n?{color:f,leftIndex:a,rightIndex:s,value:r}:f}}function x(t,e,n,i){if(t=p(t))return t=g(t),null!=e&&(t[0]=r(e)),null!=n&&(t[1]=s(n)),null!=i&&(t[2]=s(i)),b(d(t),"rgba")}function w(t,e){if(t=p(t),t&&null!=e)return t[3]=o(e),b(t,"rgba")}function b(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}var C=n(155),S={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},M=new C(20),E=null,I=y,T=_;e.parse=p,e.lift=m,e.toHex=v,e.fastLerp=y,e.fastMapToColor=I,e.lerp=_,e.mapToColor=T,e.modifyHSL=x,e.modifyAlpha=w,e.stringify=b},function(t,e){var n=function(){this.head=null,this.tail=null,this._len=0},i=n.prototype;i.insert=function(t){var e=new r(t);return this.insertEntry(e),e},i.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},i.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},i.len=function(){return this._len},i.clear=function(){this.head=this.tail=null,this._len=0};var r=function(t){this.value=t,this.next,this.prev},o=function(t){this._list=new n,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},a=o.prototype;a.put=function(t,e){var n=this._list,i=this._map,o=null;if(null==i[t]){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=e:s=new r(e),s.key=t,n.insertEntry(s),i[t]=s}return o},a.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},a.clear=function(){this._list.clear(),this._map={}};var s=o;t.exports=s},function(t,e,n){var i=n(157),r=i.debugMode,o=function(){};1===r&&(o=console.error);var a=o;t.exports=a},function(t,e){var n=1;"undefined"!=typeof window&&(n=Math.max(window.devicePixelRatio||1,1));var i=0,r=n;e.debugMode=i,e.devicePixelRatio=r},function(t,e,n){function i(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}var r=n(138),o=n(149),a=r.applyTransform,s=Math.min,l=Math.max;i.prototype={constructor:i,union:function(t){var e=s(t.x,this.x),n=s(t.y,this.y);this.width=l(t.x+t.width,this.x+this.width)-e,this.height=l(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:function(){var t=[],e=[],n=[],i=[];return function(r){if(r){t[0]=n[0]=this.x,t[1]=i[1]=this.y,e[0]=i[0]=this.x+this.width,e[1]=n[1]=this.y+this.height,a(t,t,r),a(e,e,r),a(n,n,r),a(i,i,r),this.x=s(t[0],e[0],n[0],i[0]),this.y=s(t[1],e[1],n[1],i[1]);var o=l(t[0],e[0],n[0],i[0]),u=l(t[1],e[1],n[1],i[1]);this.width=o-this.x,this.height=u-this.y}}}(),calculateTransform:function(t){var e=this,n=t.width/e.width,i=t.height/e.height,r=o.create();return o.translate(r,r,[-e.x,-e.y]),o.scale(r,r,[n,i]),o.translate(r,r,[t.x,t.y]),r},intersect:function(t){if(!t)return!1;t instanceof i||(t=i.create(t));var e=this,n=e.x,r=e.x+e.width,o=e.y,a=e.y+e.height,s=t.x,l=t.x+t.width,u=t.y,c=t.y+t.height;return!(r<s||l<n||a<u||c<o)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new i(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},i.create=function(t){return new i(t.x,t.y,t.width,t.height)};var u=i;t.exports=u},function(t,e){function n(t){for(var e=0;t>=c;)e|=1&t,t>>=1;return t+e}function i(t,e,n,i){var o=e+1;if(o===n)return 1;if(i(t[o++],t[e])<0){for(;o<n&&i(t[o],t[o-1])<0;)o++;r(t,e,o)}else for(;o<n&&i(t[o],t[o-1])>=0;)o++;return o-e}function r(t,e,n){for(n--;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}function o(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var o,a=t[i],s=e,l=i;s<l;)o=s+l>>>1,r(a,t[o])<0?l=o:s=o+1;var u=i-s;switch(u){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;u>0;)t[s+u]=t[s+u-1],u--}t[s]=a}}function a(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])>0){for(s=i-r;l<s&&o(t,e[n+r+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&o(t,e[n+r-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=r-l,l=r-u}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[n+c])>0?a=c+1:l=c}return l}function s(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])<0){for(s=r+1;l<s&&o(t,e[n+r-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=r-l,l=r-u}else{for(s=i-r;l<s&&o(t,e[n+r+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[n+c])<0?l=c:a=c+1}return l}function l(t,e){function n(t,e){c[y]=t,p[y]=e,y+=1}function i(){for(;y>1;){var t=y-2;if(t>=1&&p[t-1]<=p[t]+p[t+1]||t>=2&&p[t-2]<=p[t]+p[t-1])p[t-1]<p[t+1]&&t--;else if(p[t]>p[t+1])break;o(t)}}function r(){for(;y>1;){var t=y-2;t>0&&p[t-1]<p[t+1]&&t--,o(t)}}function o(n){var i=c[n],r=p[n],o=c[n+1],h=p[n+1];p[n]=r+h,n===y-3&&(c[n+1]=c[n+2],p[n+1]=p[n+2]),y--;var f=s(t[o],t,i,r,0,e);i+=f,r-=f,0!==r&&(h=a(t[i+r-1],t,o,h,h-1,e),0!==h&&(r<=h?l(i,r,o,h):u(i,r,o,h)))}function l(n,i,r,o){var l=0;for(l=0;l<i;l++)_[l]=t[n+l];var u=0,c=r,f=n;if(t[f++]=t[c++],0!==--o){if(1===i){for(l=0;l<o;l++)t[f+l]=t[c+l];return void(t[f+o]=_[u])}for(var p,g,m,v=d;;){p=0,g=0,m=!1;do if(e(t[c],_[u])<0){if(t[f++]=t[c++],g++,p=0,0===--o){m=!0;break}}else if(t[f++]=_[u++],p++,g=0,1===--i){m=!0;break}while((p|g)<v);if(m)break;do{if(p=s(t[c],_,u,i,0,e),0!==p){for(l=0;l<p;l++)t[f+l]=_[u+l];if(f+=p,u+=p,i-=p,i<=1){m=!0;break}}if(t[f++]=t[c++],0===--o){m=!0;break}if(g=a(_[u],t,c,o,0,e),0!==g){for(l=0;l<g;l++)t[f+l]=t[c+l];if(f+=g,c+=g,o-=g,0===o){m=!0;break}}if(t[f++]=_[u++],1===--i){m=!0;break}v--}while(p>=h||g>=h);if(m)break;v<0&&(v=0),v+=2}if(d=v,d<1&&(d=1),1===i){for(l=0;l<o;l++)t[f+l]=t[c+l];t[f+o]=_[u]}else{if(0===i)throw new Error;for(l=0;l<i;l++)t[f+l]=_[u+l]}}else for(l=0;l<i;l++)t[f+l]=_[u+l]}function u(n,i,r,o){var l=0;for(l=0;l<o;l++)_[l]=t[r+l];var u=n+i-1,c=o-1,f=r+o-1,p=0,g=0;if(t[f--]=t[u--],0!==--i){if(1===o){for(f-=i,u-=i,g=f+1,p=u+1,l=i-1;l>=0;l--)t[g+l]=t[p+l];return void(t[f]=_[c])}for(var m=d;;){var v=0,y=0,x=!1;do if(e(_[c],t[u])<0){if(t[f--]=t[u--],v++,y=0,0===--i){x=!0;break}}else if(t[f--]=_[c--],y++,v=0,1===--o){x=!0;break}while((v|y)<m);if(x)break;do{if(v=i-s(_[c],t,n,i,i-1,e),0!==v){for(f-=v,u-=v,i-=v,g=f+1,p=u+1,l=v-1;l>=0;l--)t[g+l]=t[p+l];if(0===i){x=!0;break}}if(t[f--]=_[c--],1===--o){x=!0;break}if(y=o-a(t[u],_,0,o,o-1,e),0!==y){for(f-=y,c-=y,o-=y,g=f+1,p=c+1,l=0;l<y;l++)t[g+l]=_[p+l];if(o<=1){x=!0;break}}if(t[f--]=t[u--],0===--i){x=!0;break}m--}while(v>=h||y>=h);if(x)break;m<0&&(m=0),m+=2}if(d=m,d<1&&(d=1),1===o){for(f-=i,u-=i,g=f+1,p=u+1,l=i-1;l>=0;l--)t[g+l]=t[p+l];t[f]=_[c]}else{if(0===o)throw new Error;for(p=f-(o-1),l=0;l<o;l++)t[p+l]=_[l]}}else for(p=f-(o-1),l=0;l<o;l++)t[p+l]=_[l]}var c,p,d=h,g=0,m=f,v=0,y=0;g=t.length,g<2*f&&(m=g>>>1);var _=[];v=g<120?5:g<1542?10:g<119151?19:40,c=[],p=[],this.mergeRuns=i,this.forceMergeRuns=r,this.pushRun=n}function u(t,e,r,a){r||(r=0),a||(a=t.length);var s=a-r;if(!(s<2)){var u=0;if(s<c)return u=i(t,r,a,e),void o(t,r,a,r+u,e);var h=new l(t,e),f=n(s);do{if(u=i(t,r,a,e),u<f){var p=s;p>f&&(p=f),o(t,r,r+p,r+u,e),u=p}h.pushRun(r,u),h.mergeRuns(),s-=u,r+=u}while(0!==s);h.forceMergeRuns()}}var c=32,h=7,f=256;t.exports=u},function(t,e,n){function i(t){return parseInt(t,10)}function r(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}function o(t,e,n){return C.copy(t.getBoundingRect()),t.transform&&C.applyTransform(t.transform),S.width=e,S.height=n,!C.intersect(S)}function a(t,e){if(t===e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}function s(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.setTransform(e),e.beginPath(),i.buildPath(e,i.shape),e.clip(),i.restoreTransform(e)}}function l(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var u=n(157),c=u.devicePixelRatio,h=n(136),f=n(156),p=n(158),d=n(159),g=n(161),m=n(166),v=n(167),y=n(135),_=1e5,x=314159,w=.01,b=.001,C=new p(0,0,0,0),S=new p(0,0,0,0),M=function(t,e,n){this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=h.extend({},n||{}),this.dpr=n.devicePixelRatio||c,this._singleCanvas=i,this.root=t;var r=t.style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],a=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var s=t.width,u=t.height;null!=n.width&&(s=n.width),null!=n.height&&(u=n.height),this.dpr=n.devicePixelRatio||1,t.width=s*this.dpr,t.height=u*this.dpr,this._width=s,this._height=u;var f=new g(t,this,this.dpr);f.__builtin__=!0,f.initContext(),a[x]=f,f.zlevel=x,o.push(x),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var p=this._domRoot=l(this._width,this._height);t.appendChild(p)}this._hoverlayer=null,this._hoverElements=[]};M.prototype={constructor:M,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var i=0;i<n.length;i++){var r=n[i],o=this._layers[r];if(!o.__builtin__&&o.refresh){var a=0===i?this._backgroundColor:null;o.refresh(a)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return n.__from=t,t.__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,i=h.indexOf(n,e);i>=0&&n.splice(i,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var i=e[n].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){d(t,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(_));var i={};n.ctx.save();for(var r=0;r<e;){var o=t[r],a=o.__from;a&&a.__zr?(r++,a.invisible||(o.transform=a.transform,o.invTransform=a.invTransform,o.__clipPaths=a.__clipPaths,this._doPaintEl(o,n,!0,i))):(t.splice(r,1),a.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(_)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var r=this;m(function(){r._paintList(t,e,n)})}}},_compositeManually:function(){var t=this.getLayer(x).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)})},_doPaintList:function(t,e){for(var n=[],i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i],o=this._layers[r];o.__builtin__&&o!==this._hoverlayer&&(o.__dirty||e)&&n.push(o)}for(var a=!0,s=0;s<n.length;s++){var o=n[s],l=o.ctx,u={};l.save();var c=e?o.__startIndex:o.__drawIndex,f=!e&&o.incremental&&Date.now,p=f&&Date.now(),d=o.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(o.__startIndex===o.__endIndex)o.clear(!1,d);else if(c===o.__startIndex){var g=t[c];g.incremental&&g.notClear&&!e||o.clear(!1,d)}c===-1&&(console.error("For some unknown reason. drawIndex is -1"),c=o.__startIndex);for(var m=c;m<o.__endIndex;m++){var v=t[m];if(this._doPaintEl(v,o,e,u),v.__dirty=v.__dirtyText=!1,f){var _=Date.now()-p;if(_>15)break}}o.__drawIndex=m,o.__drawIndex<o.__endIndex&&(a=!1),u.prevElClipPaths&&l.restore(),l.restore()}return y.wxa&&h.each(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),a},_doPaintEl:function(t,e,n,i){var r=e.ctx,l=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!l||l[0]||l[3])&&(!t.culling||!o(t,this._width,this._height))){var u=t.__clipPaths,c=i.prevElClipPaths;c&&!a(u,c)||(c&&(r.restore(),i.prevElClipPaths=null,i.prevEl=null),u&&(r.save(),s(u,r),i.prevElClipPaths=u)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,i.prevEl||null),i.prevEl=t,t.afterBrush&&t.afterBrush(r)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=x);var n=this._layers[t];return n||(n=new g("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?h.merge(n,this._layerConfig[t],!0):this._layerConfig[t-w]&&h.merge(n,this._layerConfig[t-w],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,i=this._zlevelList,o=i.length,a=null,s=-1,l=this._domRoot;if(n[t])return void f("ZLevel "+t+" has been used already");if(!r(e))return void f("Layer of zlevel "+t+" is not valid");if(o>0&&t>i[0]){for(s=0;s<o-1&&!(i[s]<t&&i[s+1]>t);s++);a=n[i[s]]}if(i.splice(s+1,0,t),n[t]=e,!e.virtual)if(a){var u=a.dom;u.nextSibling?l.insertBefore(e.dom,u.nextSibling):l.appendChild(e.dom)}else l.firstChild?l.insertBefore(e.dom,l.firstChild):l.appendChild(e.dom)},eachLayer:function(t,e){var n,i,r=this._zlevelList;for(i=0;i<r.length;i++)n=r[i],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)i=o[r],n=this._layers[i],n.__builtin__&&t.call(e,n,i)},eachOtherLayer:function(t,e){var n,i,r,o=this._zlevelList;for(r=0;r<o.length;r++)i=o[r],n=this._layers[i],n.__builtin__||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){o&&(o.__endIndex!==t&&(o.__dirty=!0),o.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}for(var r,o=null,a=0,n=0;n<t.length;n++){var s,i=t[n],l=i.zlevel;r!==l&&(r=l,a=0),i.incremental?(s=this.getLayer(l+b,this._needsManuallyCompositing),s.incremental=!0,a=1):s=this.getLayer(l+(a>0?w:0),this._needsManuallyCompositing),s.__builtin__||f("ZLevel "+l+" has been used by unkown layer "+s.id),s!==o&&(s.__used=!0,s.__startIndex!==n&&(s.__dirty=!0),s.__startIndex=n,s.incremental?s.__drawIndex=-1:s.__drawIndex=n,e(n),o=s),i.__dirty&&(s.__dirty=!0,s.incremental&&s.__drawIndex<0&&(s.__drawIndex=n))}e(n),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?h.merge(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];if(r===t||r===t+w){var o=this._layers[r];h.merge(o,n[t],!0)}}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(h.indexOf(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){n.style.width=t+"px",n.style.height=e+"px";for(var r in this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,e);h.each(this._progressiveLayers,function(n){n.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(x).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[x].dom;var e=new g("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,i=e.dom.height,r=e.ctx;this.eachLayer(function(t){t.__builtin__?r.drawImage(t.dom,0,0,n,i):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var o={},a=this.storage.getDisplayList(!0),s=0;s<a.length;s++){var l=a[s];this._doPaintEl(l,e,!0,o)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var s=this.root,l=document.defaultView.getComputedStyle(s);return(s[r]||i(l[n])||i(s.style[n]))-(i(l[o])||0)-(i(l[a])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.getBoundingRect(),o=t.style,a=o.shadowBlur*e,s=o.shadowOffsetX*e,l=o.shadowOffsetY*e,u=o.hasStroke()?o.lineWidth:0,c=Math.max(u/2,-s+a),h=Math.max(u/2,s+a),f=Math.max(u/2,-l+a),p=Math.max(u/2,l+a),d=r.width+c+h,g=r.height+f+p;n.width=d*e,n.height=g*e,i.scale(e,e),i.clearRect(0,0,d,g),i.dpr=e;var m={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[c-r.x,f-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);var y=v,_=new y({style:{x:0,y:0,image:n}});return null!=m.position&&(_.position=t.position=m.position),null!=m.rotation&&(_.rotation=t.rotation=m.rotation),null!=m.scale&&(_.scale=t.scale=m.scale),_}};var E=M;t.exports=E},function(t,e,n){function i(){return!1}function r(t,e,n){var i=o.createCanvas(),r=e.getWidth(),a=e.getHeight(),s=i.style;return s&&(s.position="absolute",s.left=0,s.top=0,s.width=r+"px",s.height=a+"px",i.setAttribute("data-zr-dom-id",t)),i.width=r*n,i.height=a*n,i}var o=n(136),a=n(157),s=a.devicePixelRatio,l=n(162),u=n(165),c=function(t,e,n){var a;n=n||s,"string"==typeof t?a=r(t,e,n):o.isObject(t)&&(a=t,t=a.id),this.id=t,this.dom=a;var l=a.style;l&&(a.onselectstart=i,l["-webkit-user-select"]="none",l["user-select"]="none",l["-webkit-touch-callout"]="none",l["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",l.padding=0,l.margin=0,l["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};c.prototype={constructor:c,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=r("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,r=i.style,o=this.domBack;r&&(r.width=t+"px",
r.height=e+"px"),i.width=t*n,i.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n=this.dom,i=this.ctx,r=n.width,o=n.height,e=e||this.clearColor,a=this.motionBlur&&!t,s=this.lastFrameAlpha,c=this.dpr;if(a&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,r/c,o/c)),i.clearRect(0,0,r,o),e&&"transparent"!==e){var h;e.colorStops?(h=e.__canvasGradient||l.getGradient(i,e,{x:0,y:0,width:r,height:o}),e.__canvasGradient=h):e.image&&(h=u.prototype.getCanvasPattern.call(e,i)),i.save(),i.fillStyle=h||e,i.fillRect(0,0,r,o),i.restore()}if(a){var f=this.domBack;i.save(),i.globalAlpha=s,i.drawImage(f,0,0,r,o),i.restore()}}};var h=c;t.exports=h},function(t,e,n){function i(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;e.global||(i=i*n.width+n.x,r=r*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),i=isNaN(i)?0:i,r=isNaN(r)?1:r,o=isNaN(o)?0:o,a=isNaN(a)?0:a;var s=t.createLinearGradient(i,o,r,a);return s}function r(t,e,n){var i=n.width,r=n.height,o=Math.min(i,r),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;e.global||(a=a*i+n.x,s=s*r+n.y,l*=o);var u=t.createRadialGradient(a,s,0,a,s,l);return u}var o=n(163),a=n(164),s=a.ContextCachedBy,l=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],u=function(t){this.extendFrom(t,!1)};u.prototype={constructor:u,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){var i=this,r=n&&n.style,a=!r||t.__attrCachedBy!==s.STYLE_BIND;t.__attrCachedBy=s.STYLE_BIND;for(var u=0;u<l.length;u++){var c=l[u],h=c[0];(a||i[h]!==r[h])&&(t[h]=o(t,h,i[h]||c[1]))}if((a||i.fill!==r.fill)&&(t.fillStyle=i.fill),(a||i.stroke!==r.stroke)&&(t.strokeStyle=i.stroke),(a||i.opacity!==r.opacity)&&(t.globalAlpha=null==i.opacity?1:i.opacity),(a||i.blend!==r.blend)&&(t.globalCompositeOperation=i.blend||"source-over"),this.hasStroke()){var f=i.lineWidth;t.lineWidth=f/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||e!==!0&&(e===!1?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var o="radial"===e.type?r:i,a=o(t,e,n),s=e.colorStops,l=0;l<s.length;l++)a.addColorStop(s[l].offset,s[l].color);return a}};for(var c=u.prototype,h=0;h<l.length;h++){var f=l[h];f[0]in c||(c[f[0]]=f[1])}u.getGradient=c.getGradient;var p=u;t.exports=p},function(t,e){function n(t,e,n){return i.hasOwnProperty(e)?n*=t.dpr:n}var i={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1};t.exports=n},function(t,e){var n={NONE:0,STYLE_BIND:1,PLAIN_TEXT:2},i=9;e.ContextCachedBy=n,e.WILL_BE_RESTORED=i},function(t,e){var n=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};n.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var i=n;t.exports=i},function(t,e){var n="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};t.exports=n},function(t,e,n){function i(t){r.call(this,t)}var r=n(168),o=n(158),a=n(136),s=n(172);i.prototype={constructor:i,type:"image",brush:function(t,e){var n=this.style,i=n.image;n.bind(t,this,e);var r=this._image=s.createOrUpdateImage(i,this._image,this,this.onload);if(r&&s.isImageReady(r)){var o=n.x||0,a=n.y||0,l=n.width,u=n.height,c=r.width/r.height;if(null==l&&null!=u?l=u*c:null==u&&null!=l?u=l/c:null==l&&null==u&&(l=r.width,u=r.height),this.setTransform(t),n.sWidth&&n.sHeight){var h=n.sx||0,f=n.sy||0;t.drawImage(r,h,f,n.sWidth,n.sHeight,o,a,l,u)}else if(n.sx&&n.sy){var h=n.sx,f=n.sy,p=l-h,d=u-f;t.drawImage(r,h,f,p,d,o,a,l,u)}else t.drawImage(r,o,a,l,u);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new o(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},a.inherits(i,r);var l=i;t.exports=l},function(t,e,n){function i(t){t=t||{},a.call(this,t);for(var e in t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new o(t.style,this),this._rect=null,this.__clipPaths=null}var r=n(136),o=n(162),a=n(147),s=n(169);i.prototype={constructor:i,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();return i.contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?a.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new o(t,this),this.dirty(!1),this},calculateTextPosition:null},r.inherits(i,a),r.mixin(i,s);var l=i;t.exports=l},function(t,e,n){var i=n(170),r=n(158),o=n(164),a=o.WILL_BE_RESTORED,s=new r,l=function(){};l.prototype={constructor:l,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&i.normalizeTextStyle(n,!0);var r=n.text;if(null!=r&&(r+=""),i.needDrawText(r,n)){t.save();var o=this.transform;n.transformText?this.setTransform(t):o&&(s.copy(e),s.applyTransform(o),e=s),i.renderText(this,t,r,n,e,a),t.restore()}}};var u=l;t.exports=u},function(t,e,n){function i(t){return r(t),S(t.rich,r),t}function r(t){if(t){t.font=T.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||R[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||F[n]?n:"top";var i=t.textPadding;i&&(t.textPadding=M(t.textPadding))}}function o(t,e,n,i,r,o){i.rich?s(t,e,n,i,r,o):a(t,e,n,i,r,o)}function a(t,e,n,i,r,o){"use strict";var a,s=h(i),l=!1,c=e.__attrCachedBy===k.PLAIN_TEXT;o!==N?(o&&(a=o.style,l=!s&&c&&a),e.__attrCachedBy=s?k.NONE:k.PLAIN_TEXT):c&&(e.__attrCachedBy=k.NONE);var p=i.font||O;l&&p===(a.font||O)||(e.font=p);var g=t.__computedFont;t.__styleFont!==p&&(t.__styleFont=p,g=t.__computedFont=e.font);var y=i.textPadding,x=i.textLineHeight,w=t.__textCotentBlock;w&&!t.__dirtyText||(w=t.__textCotentBlock=T.parsePlainText(n,g,y,x,i.truncate));var b=w.outerHeight,C=w.lines,S=w.lineHeight,M=d(V,t,i,r),E=M.baseX,I=M.baseY,P=M.textAlign||"left",L=M.textVerticalAlign;u(e,i,r,E,I);var A=T.adjustTextY(I,b,L),R=E,F=A;if(s||y){var B=T.getWidth(n,g),G=B;y&&(G+=y[1]+y[3]);var H=T.adjustTextX(E,G,P);s&&f(t,e,i,H,A,G,b),y&&(R=_(E,P,y),F+=y[0])}e.textAlign=P,e.textBaseline="middle",e.globalAlpha=i.opacity||1;for(var j=0;j<z.length;j++){var U=z[j],W=U[0],q=U[1],Y=i[W];l&&Y===a[W]||(e[q]=D(e,q,Y||U[2]))}F+=S/2;var X=i.textStrokeWidth,Z=l?a.textStrokeWidth:null,J=!l||X!==Z,K=!l||J||i.textStroke!==a.textStroke,$=m(i.textStroke,X),Q=v(i.textFill);if($&&(J&&(e.lineWidth=X),K&&(e.strokeStyle=$)),Q&&(l&&i.textFill===a.textFill||(e.fillStyle=Q)),1===C.length)$&&e.strokeText(C[0],R,F),Q&&e.fillText(C[0],R,F);else for(var j=0;j<C.length;j++)$&&e.strokeText(C[j],R,F),Q&&e.fillText(C[j],R,F),F+=S}function s(t,e,n,i,r,o){o!==N&&(e.__attrCachedBy=k.NONE);var a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=T.parseRichText(n,i)),l(t,e,a,i,r)}function l(t,e,n,i,r){var o=n.width,a=n.outerWidth,s=n.outerHeight,l=i.textPadding,p=d(V,t,i,r),g=p.baseX,m=p.baseY,v=p.textAlign,y=p.textVerticalAlign;u(e,i,r,g,m);var _=T.adjustTextX(g,a,v),x=T.adjustTextY(m,s,y),w=_,b=x;l&&(w+=l[3],b+=l[0]);var C=w+o;h(i)&&f(t,e,i,_,x,a,s);for(var S=0;S<n.lines.length;S++){for(var M,E=n.lines[S],I=E.tokens,P=I.length,L=E.lineHeight,D=E.width,A=0,k=w,N=C,O=P-1;A<P&&(M=I[A],!M.textAlign||"left"===M.textAlign);)c(t,e,M,i,L,b,k,"left"),D-=M.width,k+=M.width,A++;for(;O>=0&&(M=I[O],"right"===M.textAlign);)c(t,e,M,i,L,b,N,"right"),D-=M.width,N-=M.width,O--;for(k+=(o-(k-w)-(C-N)-D)/2;A<=O;)M=I[A],c(t,e,M,i,L,b,k+M.width/2,"center"),k+=M.width,A++;b+=L}}function u(t,e,n,i,r){if(n&&e.textRotation){var o=e.textOrigin;"center"===o?(i=n.width/2+n.x,r=n.height/2+n.y):o&&(i=o[0]+n.x,r=o[1]+n.y),t.translate(i,r),t.rotate(-e.textRotation),t.translate(-i,-r)}}function c(t,e,n,i,r,o,a,s){var l=i.rich[n.styleName]||{};l.text=n.text;var u=n.textVerticalAlign,c=o+r/2;"top"===u?c=o+n.height/2:"bottom"===u&&(c=o+r-n.height/2),!n.isLineHolder&&h(l)&&f(t,e,l,"right"===s?a-n.width:"center"===s?a-n.width/2:a,c-n.height/2,n.width,n.height);var p=n.textPadding;p&&(a=_(a,s,p),c-=n.height/2-p[2]-n.textHeight/2),g(e,"shadowBlur",C(l.textShadowBlur,i.textShadowBlur,0)),g(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),g(e,"shadowOffsetX",C(l.textShadowOffsetX,i.textShadowOffsetX,0)),g(e,"shadowOffsetY",C(l.textShadowOffsetY,i.textShadowOffsetY,0)),g(e,"textAlign",s),g(e,"textBaseline","middle"),g(e,"font",n.font||O);var d=m(l.textStroke||i.textStroke,x),y=v(l.textFill||i.textFill),x=b(l.textStrokeWidth,i.textStrokeWidth);d&&(g(e,"lineWidth",x),g(e,"strokeStyle",d),e.strokeText(n.text,a,c)),y&&(g(e,"fillStyle",y),e.fillText(n.text,a,c))}function h(t){return!!(t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor)}function f(t,e,n,i,r,o,a){var s=n.textBackgroundColor,l=n.textBorderWidth,u=n.textBorderColor,c=E(s);if(g(e,"shadowBlur",n.textBoxShadowBlur||0),g(e,"shadowColor",n.textBoxShadowColor||"transparent"),g(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),g(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),c||l&&u){e.beginPath();var h=n.textBorderRadius;h?P.buildPath(e,{x:i,y:r,width:o,height:a,r:h}):e.rect(i,r,o,a),e.closePath()}if(c)if(g(e,"fillStyle",s),null!=n.fillOpacity){var f=e.globalAlpha;e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=f}else e.fill();else if(I(s)){var d=s.image;d=L.createOrUpdateImage(d,null,t,p,s),d&&L.isImageReady(d)&&e.drawImage(d,i,r,o,a)}if(l&&u)if(g(e,"lineWidth",l),g(e,"strokeStyle",u),null!=n.strokeOpacity){var f=e.globalAlpha;e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=f}else e.stroke()}function p(t,e){e.image=t}function d(t,e,n,i){var r=n.x||0,o=n.y||0,a=n.textAlign,s=n.textVerticalAlign;if(i){var l=n.textPosition;if(l instanceof Array)r=i.x+y(l[0],i.width),o=i.y+y(l[1],i.height);else{var u=e&&e.calculateTextPosition?e.calculateTextPosition(B,n,i):T.calculateTextPosition(B,n,i);r=u.x,o=u.y,a=a||u.textAlign,s=s||u.textVerticalAlign}var c=n.textOffset;c&&(r+=c[0],o+=c[1])}return t=t||{},t.baseX=r,t.baseY=o,t.textAlign=a,t.textVerticalAlign=s,t}function g(t,e,n){return t[e]=D(t,e,n),t[e]}function m(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function v(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function y(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function _(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function x(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}var w=n(136),b=w.retrieve2,C=w.retrieve3,S=w.each,M=w.normalizeCssArray,E=w.isString,I=w.isObject,T=n(171),P=n(173),L=n(172),D=n(163),A=n(164),k=A.ContextCachedBy,N=A.WILL_BE_RESTORED,O=T.DEFAULT_FONT,R={left:1,right:1,center:1},F={top:1,bottom:1,middle:1},z=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],B={},V={};e.normalizeTextStyle=i,e.renderText=o,e.getBoxPosition=d,e.getStroke=m,e.getFill=v,e.parsePercent=y,e.needDrawText=x},function(t,e,n){function i(t,e){O[t]=e}function r(t,e){e=e||N;var n=t+":"+e;if(L[n])return L[n];for(var i=(t+"").split("\n"),r=0,o=0,a=i.length;o<a;o++)r=Math.max(v(i[o],e).width,r);return D>A&&(D=0,L={}),D++,L[n]=r,r}function o(t,e,n,i,r,o,l,u){return l?s(t,e,n,i,r,o,l,u):a(t,e,n,i,r,o,u)}function a(t,e,n,i,o,a,s){var c=y(t,e,o,a,s),h=r(t,e);o&&(h+=o[1]+o[3]);var f=c.outerHeight,p=l(0,h,n),d=u(0,f,i),g=new b(p,d,h,f);return g.lineHeight=c.lineHeight,g}function s(t,e,n,i,r,o,a,s){var c=_(t,{rich:a,truncate:s,font:e,textAlign:n,textPadding:r,textLineHeight:o}),h=c.outerWidth,f=c.outerHeight,p=l(0,h,n),d=u(0,f,i);return new b(p,d,h,f)}function l(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function u(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function c(t,e,n){var i=e.textPosition,r=e.textDistance,o=n.x,a=n.y;r=r||0;var s=n.height,l=n.width,u=s/2,c="left",h="top";switch(i){case"left":o-=r,a+=u,c="right",h="middle";break;case"right":o+=r+l,a+=u,h="middle";break;case"top":o+=l/2,a-=r,c="center",h="bottom";break;case"bottom":o+=l/2,a+=s+r,c="center";break;case"inside":o+=l/2,a+=u,c="center",h="middle";break;case"insideLeft":o+=r,a+=u,h="middle";break;case"insideRight":o+=l-r,a+=u,c="right",h="middle";break;case"insideTop":o+=l/2,a+=r,c="center";break;case"insideBottom":o+=l/2,a+=s-r,c="center",h="bottom";break;case"insideTopLeft":o+=r,a+=r;break;case"insideTopRight":o+=l-r,a+=r,c="right";break;case"insideBottomLeft":o+=r,a+=s-r,h="bottom";break;case"insideBottomRight":o+=l-r,a+=s-r,c="right",h="bottom"}return t=t||{},t.x=o,t.y=a,t.textAlign=c,t.textVerticalAlign=h,t}function h(t,e,n){var i={textPosition:t,textDistance:n};return c({},i,e)}function f(t,e,n,i,r){if(!e)return"";var o=(t+"").split("\n");r=p(e,n,i,r);for(var a=0,s=o.length;a<s;a++)o[a]=d(o[a],r);return o.join("\n")}function p(t,e,n,i){i=E({},i),i.font=e;var n=I(n,"...");i.maxIterations=I(i.maxIterations,2);var o=i.minChar=I(i.minChar,0);i.cnCharWidth=r("国",e);var a=i.ascCharWidth=r("a",e);i.placeholder=I(i.placeholder,"");for(var s=t=Math.max(0,t-1),l=0;l<o&&s>=a;l++)s-=a;var u=r(n,e);return u>s&&(n="",u=0),s=t-u,i.ellipsis=n,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=t,i}function d(t,e){var n=e.containerWidth,i=e.font,o=e.contentWidth;if(!n)return"";var a=r(t,i);if(a<=n)return t;for(var s=0;;s++){if(a<=o||s>=e.maxIterations){t+=e.ellipsis;break}var l=0===s?g(t,o,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*o/a):0;t=t.substr(0,l),a=r(t,i)}return""===t&&(t=e.placeholder),t}function g(t,e,n,i){for(var r=0,o=0,a=t.length;o<a&&r<e;o++){var s=t.charCodeAt(o);r+=0<=s&&s<=127?n:i}return o}function m(t){return r("国",t)}function v(t,e){return O.measureText(t,e)}function y(t,e,n,i,r){null!=t&&(t+="");var o=I(i,m(e)),a=t?t.split("\n"):[],s=a.length*o,l=s,u=!0;if(n&&(l+=n[0]+n[2]),t&&r){u=!1;var c=r.outerHeight,h=r.outerWidth;if(null!=c&&l>c)t="",a=[];else if(null!=h)for(var f=p(h-(n?n[1]+n[3]:0),e,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),g=0,v=a.length;g<v;g++)a[g]=d(a[g],f)}return{lines:a,height:s,outerHeight:l,lineHeight:o,canCacheByTextString:u}}function _(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var i,o=k.lastIndex=0;null!=(i=k.exec(t));){var a=i.index;a>o&&x(n,t.substring(o,a)),x(n,i[2],i[1]),o=k.lastIndex}o<t.length&&x(n,t.substring(o,t.length));var s=n.lines,l=0,u=0,c=[],h=e.textPadding,p=e.truncate,d=p&&p.outerWidth,g=p&&p.outerHeight;h&&(null!=d&&(d-=h[1]+h[3]),null!=g&&(g-=h[0]+h[2]));for(var v=0;v<s.length;v++){for(var y=s[v],_=0,w=0,b=0;b<y.tokens.length;b++){var S=y.tokens[b],M=S.styleName&&e.rich[S.styleName]||{},E=S.textPadding=M.textPadding,P=S.font=M.font||e.font,L=S.textHeight=I(M.textHeight,m(P));if(E&&(L+=E[0]+E[2]),S.height=L,S.lineHeight=T(M.textLineHeight,e.textLineHeight,L),S.textAlign=M&&M.textAlign||e.textAlign,S.textVerticalAlign=M&&M.textVerticalAlign||"middle",null!=g&&l+S.lineHeight>g)return{lines:[],width:0,height:0};S.textWidth=r(S.text,P);var D=M.textWidth,A=null==D||"auto"===D;if("string"==typeof D&&"%"===D.charAt(D.length-1))S.percentWidth=D,c.push(S),D=0;else{if(A){D=S.textWidth;var N=M.textBackgroundColor,O=N&&N.image;O&&(O=C.findExistImage(O),C.isImageReady(O)&&(D=Math.max(D,O.width*L/O.height)))}var R=E?E[1]+E[3]:0;D+=R;var F=null!=d?d-w:null;null!=F&&F<D&&(!A||F<R?(S.text="",S.textWidth=D=0):(S.text=f(S.text,F-R,P,p.ellipsis,{minChar:p.minChar}),S.textWidth=r(S.text,P),D=S.textWidth+R))}w+=S.width=D,M&&(_=Math.max(_,S.lineHeight))}y.width=w,y.lineHeight=_,l+=_,u=Math.max(u,w)}n.outerWidth=n.width=I(e.textWidth,u),n.outerHeight=n.height=I(e.textHeight,l),h&&(n.outerWidth+=h[1]+h[3],n.outerHeight+=h[0]+h[2]);for(var v=0;v<c.length;v++){var S=c[v],z=S.percentWidth;S.width=parseInt(z,10)/100*u}return n}function x(t,e,n){for(var i=""===e,r=e.split("\n"),o=t.lines,a=0;a<r.length;a++){var s=r[a],l={styleName:n,text:s,isLineHolder:!s&&!i};if(a)o.push({tokens:[l]});else{var u=(o[o.length-1]||(o[0]={tokens:[]})).tokens,c=u.length;1===c&&u[0].isLineHolder?u[0]=l:(s||!c||i)&&u.push(l)}}}function w(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&P(e)||t.textFont||t.font}var b=n(158),C=n(172),S=n(136),M=S.getContext,E=S.extend,I=S.retrieve2,T=S.retrieve3,P=S.trim,L={},D=0,A=5e3,k=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,N="12px sans-serif",O={};O.measureText=function(t,e){var n=M();return n.font=e||N,n.measureText(t)},e.DEFAULT_FONT=N,e.$override=i,e.getWidth=r,e.getBoundingRect=o,e.adjustTextX=l,e.adjustTextY=u,e.calculateTextPosition=c,e.adjustTextPositionOnRect=h,e.truncateText=f,e.getLineHeight=m,e.measureText=v,e.parsePlainText=y,e.parseRichText=_,e.makeFont=w},function(t,e,n){function i(t){if("string"==typeof t){var e=l.get(t);return e&&e.image}return t}function r(t,e,n,i,r){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var s=l.get(t),u={hostEl:n,cb:i,cbPayload:r};return s?(e=s.image,!a(e)&&s.pending.push(u)):(e=new Image,e.onload=e.onerror=o,l.put(t,e.__cachedImgObj={image:e,pending:[u]}),e.src=e.__zrImageSrc=t),e}return t}return e}function o(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function a(t){return t&&t.width&&t.height}var s=n(155),l=new s(50);e.findExistImage=i,e.createOrUpdateImage=r,e.isImageReady=a},function(t,e){function n(t,e){var n,i,r,o,a=e.x,s=e.y,l=e.width,u=e.height,c=e.r;l<0&&(a+=l,l=-l),u<0&&(s+=u,u=-u),"number"==typeof c?n=i=r=o=c:c instanceof Array?1===c.length?n=i=r=o=c[0]:2===c.length?(n=r=c[0],i=o=c[1]):3===c.length?(n=c[0],i=o=c[1],r=c[2]):(n=c[0],i=c[1],r=c[2],o=c[3]):n=i=r=o=0;var h;n+i>l&&(h=n+i,n*=l/h,i*=l/h),r+o>l&&(h=r+o,r*=l/h,o*=l/h),i+r>u&&(h=i+r,i*=u/h,r*=u/h),n+o>u&&(h=n+o,n*=u/h,o*=u/h),t.moveTo(a+n,s),t.lineTo(a+l-i,s),0!==i&&t.arc(a+l-i,s+i,i,-Math.PI/2,0),t.lineTo(a+l,s+u-r),0!==r&&t.arc(a+l-r,s+u-r,r,0,Math.PI/2),t.lineTo(a+o,s+u),0!==o&&t.arc(a+o,s+u-o,o,Math.PI/2,Math.PI),t.lineTo(a,s+n),0!==n&&t.arc(a+n,s+n,n,Math.PI,1.5*Math.PI)}e.buildPath=n},function(t,e,n){var i=n(136),r=n(141),o=r.Dispatcher,a=n(166),s=n(151),l=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,o.call(this)};l.prototype={constructor:l,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=i.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,i=n.length,r=[],o=[],a=0;a<i;a++){var s=n[a],l=s.step(t,e);l&&(r.push(l),o.push(s))}for(var a=0;a<i;)n[a]._needsRemove?(n[a]=n[i-1],n.pop(),i--):a++;i=r.length;for(var a=0;a<i;a++)o[a].fire(r[a]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){function t(){e._running&&(a(t),!e._paused&&e._update())}var e=this;this._running=!0,a(t)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){e=e||{};var n=new s(t,e.loop,e.getter,e.setter);return this.addAnimator(n),n}},i.mixin(l,o);var u=l;t.exports=u},function(t,e,n){function i(t){return"mousewheel"===t&&S.browser.firefox?"DOMMouseScroll":t}function r(t){var e=t.pointerType;return"pen"===e||"touch"===e}function o(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout(function(){t.touching=!1,t.touchTimer=null},700)}function a(t){t&&(t.zrByTouch=!0)}function s(t,e){return x(t.dom,new u(t,e),!0)}function l(t,e){for(var n=e,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return i}function u(t,e){this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}function c(t,e){var n=e.domHandlers;S.pointerEventsSupported?b.each(I.pointer,function(i){f(e,i,function(e){n[i].call(t,e)})}):(S.touchEventsSupported&&b.each(I.touch,function(i){f(e,i,function(r){n[i].call(t,r),o(e)})}),b.each(I.mouse,function(i){f(e,i,function(r){r=w(r),e.touching||n[i].call(t,r)})}))}function h(t,e){function n(n){function i(i){i=w(i),l(t,i.target)||(i=s(t,i),e.domHandlers[n].call(t,i))}f(e,n,i,{capture:!0})}S.pointerEventsSupported?b.each(T.pointer,n):S.touchEventsSupported||b.each(T.mouse,n)}function f(t,e,n,r){t.mounted[e]=n,t.listenerOpts[e]=r,y(t.domTarget,i(e),n,r)}function p(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&_(t.domTarget,i(n),e[n],t.listenerOpts[n]);t.mounted={}}function d(t,e){if(t._mayPointerCapture=null,E&&t._pointerCapturing^e){t._pointerCapturing=e;var n=t._globalHandlerScope;e?h(t,n):p(n)}}function g(t,e){this.domTarget=t,this.domHandlers=e,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function m(t,e){C.call(this),this.dom=t,this.painterRoot=e,this._localHandlerScope=new g(t,L),E&&(this._globalHandlerScope=new g(document,D)),this._pointerCapturing=!1,this._mayPointerCapture=null,c(this,this._localHandlerScope)}var v=n(141),y=v.addEventListener,_=v.removeEventListener,x=v.normalizeEvent,w=v.getNativeEvent,b=n(136),C=n(140),S=n(135),M=300,E=S.domSupported,I=function(){var t=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=b.map(t,function(t){var e=t.replace("mouse","pointer");return n.hasOwnProperty(e)?e:t});return{mouse:t,touch:e,pointer:i}}(),T={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},P=u.prototype;P.stopPropagation=P.stopImmediatePropagation=P.preventDefault=b.noop;var L={mousedown:function(t){t=x(this.dom,t),this._mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=x(this.dom,t);var e=this._mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||d(this,!0),this.trigger("mousemove",t)},mouseup:function(t){t=x(this.dom,t),d(this,!1),this.trigger("mouseup",t)},mouseout:function(t){t=x(this.dom,t),this._pointerCapturing&&(t.zrEventControl="no_globalout");var e=t.toElement||t.relatedTarget;t.zrIsToLocalDOM=l(this,e),this.trigger("mouseout",t)},touchstart:function(t){t=x(this.dom,t),a(t),this._lastTouchMoment=new Date,this.handler.processGesture(t,"start"),L.mousemove.call(this,t),L.mousedown.call(this,t)},touchmove:function(t){t=x(this.dom,t),a(t),this.handler.processGesture(t,"change"),L.mousemove.call(this,t)},touchend:function(t){t=x(this.dom,t),a(t),this.handler.processGesture(t,"end"),L.mouseup.call(this,t),+new Date-this._lastTouchMoment<M&&L.click.call(this,t)},pointerdown:function(t){L.mousedown.call(this,t)},pointermove:function(t){r(t)||L.mousemove.call(this,t)},pointerup:function(t){L.mouseup.call(this,t)},pointerout:function(t){r(t)||L.mouseout.call(this,t)}};b.each(["click","mousewheel","dblclick","contextmenu"],function(t){L[t]=function(e){e=x(this.dom,e),this.trigger(t,e)}});var D={pointermove:function(t){r(t)||D.mousemove.call(this,t)},pointerup:function(t){D.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this._pointerCapturing;d(this,!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}},A=m.prototype;A.dispose=function(){p(this._localHandlerScope),E&&p(this._globalHandlerScope)},A.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},b.mixin(m,C);var k=m;t.exports=k},function(t,e,n){function i(t,e){if(e){var n=e.seiresIndex,i=e.seriesId,r=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=r&&t.name!==r}}function r(t,e){var n=t.color&&!t.colorLayer;p(e,function(e,i){"colorLayer"===i&&n||T.hasClass(i)||("object"==typeof e?t[i]=t[i]?C(t[i],e,!1):b(e):null==t[i]&&(t[i]=e))})}function o(t){t=t,this.option={},this.option[k]=1,this._componentsMap=x({series:[]}),this._seriesIndices,this._seriesIndicesMap,r(t,this._theme.option),C(t,P,!1),this.mergeOption(t)}function a(t,e){m(e)||(e=e?[e]:[]);var n={};return p(e,function(e){n[e]=(t.get(e)||[]).slice()}),n}function s(t,e,n){var i=e.type?e.type:n?n.subType:T.determineSubType(t,e);return i}function l(t,e){t._seriesIndicesMap=x(t._seriesIndices=g(e,function(t){return t.componentIndex})||[])}function u(t,e){return e.hasOwnProperty("subType")?d(t,function(t){return t.subType===e.subType}):t}function c(t){}var h=n(132),f=(h.__DEV__,n(136)),p=f.each,d=f.filter,g=f.map,m=f.isArray,v=f.indexOf,y=f.isObject,_=f.isString,x=f.createHashMap,w=f.assert,b=f.clone,C=f.merge,S=f.extend,M=f.mixin,E=n(177),I=n(178),T=n(219),P=n(225),L=n(226),D=n(227),A=D.resetSourceDefaulter,k="\0_ec_inner",N=I.extend({init:function(t,e,n,i){n=n||{},this.option=null,this._theme=new I(n),this._optionManager=i},setOption:function(t,e){w(!(k in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var i=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(i)):o.call(this,i),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var r=n.getTimelineOption(this);r&&(this.mergeOption(r),e=!0)}if(!t||"recreate"===t||"media"===t){var a=n.getMediaOption(this,this._api);a.length&&p(a,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(t){function e(e,r){var o=E.normalizeToArray(t[e]),u=E.mappingToExists(i.get(e),o);E.makeIdAndName(u),p(u,function(t,n){var i=t.option;y(i)&&(t.keyInfo.mainType=e,t.keyInfo.subType=s(e,i,t.exist))});var c=a(i,r);n[e]=[],i.set(e,[]),p(u,function(t,r){var o=t.exist,a=t.option;if(w(y(a)||o,"Empty component definition"),a){var s=T.getClass(e,t.keyInfo.subType,!0);if(o&&o.constructor===s)o.name=t.keyInfo.name,o.mergeOption(a,this),o.optionUpdated(a,!1);else{var l=S({dependentModels:c,componentIndex:r},t.keyInfo);o=new s(a,this,this,l),S(o,l),o.init(a,this,this,l),o.optionUpdated(null,!0)}}else o.mergeOption({},this),o.optionUpdated({},!1);i.get(e)[r]=o,n[e][r]=o.option},this),"series"===e&&l(this,i.get("series"))}var n=this.option,i=this._componentsMap,r=[];A(this),p(t,function(t,e){null!=t&&(T.hasClass(e)?e&&r.push(e):n[e]=null==n[e]?b(t):C(n[e],t,!0))}),T.topologicalTravel(r,T.getAllClassMainTypes(),e,this),this._seriesIndicesMap=x(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=b(this.option);return p(t,function(e,n){if(T.hasClass(n)){for(var e=E.normalizeToArray(e),i=e.length-1;i>=0;i--)E.isIdInner(e[i])&&e.splice(i,1);t[n]=e}}),delete t[k],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n=t.index,i=t.id,r=t.name,o=this._componentsMap.get(e);if(!o||!o.length)return[];var a;if(null!=n)m(n)||(n=[n]),a=d(g(n,function(t){return o[t]}),function(t){return!!t});else if(null!=i){var s=m(i);a=d(o,function(t){return s&&v(i,t.id)>=0||!s&&t.id===i})}else if(null!=r){var l=m(r);a=d(o,function(t){return l&&v(r,t.name)>=0||!l&&t.name===r})}else a=o.slice();return u(a,t)},findComponents:function(t){function e(t){var e=r+"Index",n=r+"Id",i=r+"Name";return!t||null==t[e]&&null==t[n]&&null==t[i]?null:{mainType:r,index:t[e],id:t[n],name:t[i]}}function n(e){return t.filter?d(e,t.filter):e}var i=t.query,r=t.mainType,o=e(i),a=o?this.queryComponents(o):this._componentsMap.get(r);return n(u(a,t))},eachComponent:function(t,e,n){var i=this._componentsMap;if("function"==typeof t)n=e,e=t,i.each(function(t,i){p(t,function(t,r){e.call(n,i,t,r)})});else if(_(t))p(i.get(t),e,n);else if(y(t)){var r=this.findComponents(t);p(r,e,n)}},getSeriesByName:function(t){var e=this._componentsMap.get("series");return d(e,function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){var e=this._componentsMap.get("series");return d(e,function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){c(this),p(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)},this)},eachRawSeries:function(t,e){p(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){c(this),p(this._seriesIndices,function(i){var r=this._componentsMap.get("series")[i];r.subType===t&&e.call(n,r,i)},this)},eachRawSeriesByType:function(t,e,n){return p(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return c(this),null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){c(this);var n=d(this._componentsMap.get("series"),t,e);l(this,n)},restoreData:function(t){var e=this._componentsMap;l(this,e.get("series"));var n=[];e.each(function(t,e){n.push(e)}),T.topologicalTravel(n,T.getAllClassMainTypes(),function(n,r){p(e.get(n),function(e){("series"!==n||!i(e,t))&&e.restoreData()})})}});M(N,L);var O=N;t.exports=O},function(t,e,n){function i(t){
return t instanceof Array?t:null==t?[]:[t]}function r(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=n.length;i<r;i++){var o=n[i];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}function o(t){return!C(t)||S(t)||t instanceof Date?t:t.value}function a(t){return C(t)&&!(t instanceof Array)}function s(t,e){e=(e||[]).slice();var n=x.map(t||[],function(t,e){return{exist:t}});return b(e,function(t,i){if(C(t)){for(var r=0;r<n.length;r++)if(!n[r].option&&null!=t.id&&n[r].exist.id===t.id+"")return n[r].option=t,void(e[i]=null);for(var r=0;r<n.length;r++){var o=n[r].exist;if(!(n[r].option||null!=o.id&&null!=t.id||null==t.name||c(t)||c(o)||o.name!==t.name+""))return n[r].option=t,void(e[i]=null)}}}),b(e,function(t,e){if(C(t)){for(var i=0;i<n.length;i++){var r=n[i].exist;if(!n[i].option&&!c(r)&&null==t.id){n[i].option=t;break}}i>=n.length&&n.push({option:t})}}),n}function l(t){var e=x.createHashMap();b(t,function(t,n){var i=t.exist;i&&e.set(i.id,t)}),b(t,function(t,n){var i=t.option;x.assert(!i||null==i.id||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),b(t,function(t,n){var i=t.exist,r=t.option,o=t.keyInfo;if(C(r)){if(o.name=null!=r.name?r.name+"":i?i.name:M+n,i)o.id=i.id;else if(null!=r.id)o.id=r.id+"";else{var a=0;do o.id="\0"+o.name+"\0"+a++;while(e.get(o.id))}e.set(o.id,t)}})}function u(t){var e=t.name;return!(!e||!e.indexOf(M))}function c(t){return C(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function h(t,e){function n(t,e,n){for(var r=0,o=t.length;r<o;r++)for(var a=t[r].seriesId,s=i(t[r].dataIndex),l=n&&n[a],u=0,c=s.length;u<c;u++){var h=s[u];l&&l[h]?l[h]=null:(e[a]||(e[a]={}))[h]=1}}function r(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var o=r(t[i],!0);o.length&&n.push({seriesId:i,dataIndex:o})}return n}var o={},a={};return n(t||[],o),n(e||[],a,o),[r(o),r(a)]}function f(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?x.isArray(e.dataIndex)?x.map(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?x.isArray(e.name)?x.map(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0}function p(){var t="__\0ec_inner_"+I++ +"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}function d(t,e,n){if(x.isString(e)){var i={};i[e+"Index"]=0,e=i}var r=n&&n.defaultMainType;!r||g(e,r+"Index")||g(e,r+"Id")||g(e,r+"Name")||(e[r+"Index"]=0);var o={};return b(e,function(i,r){var i=e[r];if("dataIndex"===r||"dataIndexInside"===r)return void(o[r]=i);var a=r.match(/^(\w+)(Index|Id|Name)$/)||[],s=a[1],l=(a[2]||"").toLowerCase();if(!(!s||!l||null==i||"index"===l&&"none"===i||n&&n.includeMainTypes&&x.indexOf(n.includeMainTypes,s)<0)){var u={mainType:s};"index"===l&&"all"===i||(u[l]=i);var c=t.queryComponents(u);o[s+"Models"]=c,o[s+"Model"]=c[0]}}),o}function g(t,e){return t&&t.hasOwnProperty(e)}function m(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function v(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function y(t){return"auto"===t?w.domSupported?"html":"richText":t||"html"}function _(t,e){var n=x.createHashMap(),i=[];return x.each(t,function(t){var r=e(t);(n.get(r)||(i.push(r),n.set(r,[]))).push(t)}),{keys:i,buckets:n}}var x=n(136),w=n(135),b=x.each,C=x.isObject,S=x.isArray,M="series\0",E=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],I=0;e.normalizeToArray=i,e.defaultEmphasis=r,e.TEXT_STYLE_OPTIONS=E,e.getDataItemValue=o,e.isDataItemOption=a,e.mappingToExists=s,e.makeIdAndName=l,e.isNameSpecified=u,e.isIdInner=c,e.compressBatches=h,e.queryDataIndex=f,e.makeInner=p,e.parseFinder=d,e.setAttribute=m,e.getAttribute=v,e.getTooltipRenderMode=y,e.groupData=_},function(t,e,n){function i(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function r(t,e,n){for(var i=0;i<e.length&&(!e[i]||(t=t&&"object"==typeof t?t[e[i]]:null,null!=t));i++);return null==t&&n&&(t=n.get(e)),t}function o(t,e){var n=y(t).getParent;return n?n.call(t,e):t.parentModel}var a=n(136),s=n(135),l=n(177),u=l.makeInner,c=n(179),h=c.enableClassExtend,f=c.enableClassCheck,p=n(180),d=n(182),g=n(183),m=n(218),v=a.mixin,y=u();i.prototype={constructor:i,init:null,mergeOption:function(t){a.merge(this.option,t,!0)},get:function(t,e){return null==t?this.option:r(this.option,this.parsePath(t),!e&&o(this,t))},getShallow:function(t,e){var n=this.option,i=null==n?n:n[t],r=!e&&o(this,t);return null==i&&r&&(i=r.getShallow(t)),i},getModel:function(t,e){var n,a=null==t?this.option:r(this.option,t=this.parsePath(t));return e=e||(n=o(this,t))&&n.getModel(t),new i(a,e,this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var t=this.constructor;return new t(a.clone(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){y(this).getParent=t},isAnimationEnabled:function(){if(!s.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},h(i),f(i),v(i,p),v(i,d),v(i,g),v(i,m);var _=i;t.exports=_},function(t,e,n){function i(t){var e={main:"",sub:""};return t&&(t=t.split(p),e.main=t[0]||"",e.sub=t[1]||""),e}function r(t){f.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function o(t,e){t.$constructor=t,t.extend=function(t){var e=this,n=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return f.extend(n.prototype,t),n.extend=this.extend,n.superCall=s,n.superApply=l,f.inherits(n,this),n.superClass=e,n}}function a(t){var e=["__\0is_clz",g++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function s(t,e){var n=f.slice(arguments,2);return this.superClass.prototype[e].apply(t,n)}function l(t,e,n){return this.superClass.prototype[e].apply(t,n)}function u(t,e){function n(t){var e=o[t.main];return e&&e[d]||(e=o[t.main]={},e[d]=!0),e}e=e||{};var o={};if(t.registerClass=function(t,e){if(e)if(r(e),e=i(e),e.sub){if(e.sub!==d){var a=n(e);a[e.sub]=t}}else o[e.main]=t;return t},t.getClass=function(t,e,n){var i=o[t];if(i&&i[d]&&(i=e?i[e]:null),n&&!i)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return i},t.getClassesByMainType=function(t){t=i(t);var e=[],n=o[t.main];return n&&n[d]?f.each(n,function(t,n){n!==d&&e.push(t)}):e.push(n),e},t.hasClass=function(t){return t=i(t),!!o[t.main]},t.getAllClassMainTypes=function(){var t=[];return f.each(o,function(e,n){t.push(n)}),t},t.hasSubTypes=function(t){t=i(t);var e=o[t.main];return e&&e[d]},t.parseClassType=i,e.registerWhenExtend){var a=t.extend;a&&(t.extend=function(e){var n=a.call(this,e);return t.registerClass(n,e.type)})}return t}function c(t,e){}var h=n(132),f=(h.__DEV__,n(136)),p=".",d="___EC__COMPONENT__CONTAINER___",g=0;e.parseClassType=i,e.enableClassExtend=o,e.enableClassCheck=a,e.enableClassManagement=u,e.setReadOnly=c},function(t,e,n){var i=n(181),r=i([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),o={getLineStyle:function(t){var e=r(this,t);return e.lineDash=this.getLineDash(e.lineWidth),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),i=4*t;return"solid"!==e&&null!=e&&("dashed"===e?[i,i]:[n,n])}};t.exports=o},function(t,e,n){function i(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,n,i){for(var o={},a=0;a<t.length;a++){var s=t[a][1];if(!(n&&r.indexOf(n,s)>=0||i&&r.indexOf(i,s)<0)){var l=e.getShallow(s);null!=l&&(o[t[a][0]]=l)}}return o}}var r=n(136);t.exports=i},function(t,e,n){var i=n(181),r=i([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),o={getAreaStyle:function(t,e){return r(this,t,e)}};t.exports=o},function(t,e,n){var i=n(171),r=n(184),o=["textStyle","color"],a={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(o):null)},getFont:function(){return r.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return i.getBoundingRect(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}};t.exports=a},function(t,e,n){function i(t){return at.extend(t)}function r(t,e){return nt.extendFromString(t,e)}function o(t,e){Ot[t]=e}function a(t){if(Ot.hasOwnProperty(t))return Ot[t]}function s(t,e,n,i){var r=nt.createFromString(t,e);return n&&("center"===i&&(n=u(n,r.getBoundingRect())),c(r,n)),r}function l(t,e,n){var i=new lt({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var r={width:t.width,height:t.height};i.setStyle(u(e,r))}}});return i}function u(t,e){var n,i=e.width/e.height,r=t.height*i;r<=t.width?n=t.height:(r=t.width,n=r/i);var o=t.x+t.width/2,a=t.y+t.height/2;return{x:o-r/2,y:a-n/2,width:r,height:n}}function c(t,e){if(t.applyTransform){var n=t.getBoundingRect(),i=n.calculateTransform(e);t.applyTransform(i)}}function h(t){return Mt.subPixelOptimizeLine(t.shape,t.shape,t.style),t}function f(t){return Mt.subPixelOptimizeRect(t.shape,t.shape,t.style),t}function p(t){return null!=t&&"none"!==t}function d(t){if("string"!=typeof t)return t;var e=zt.get(t);return e||(e=it.lift(t,-.1),Bt<1e4&&(zt.set(t,e),Bt++)),e}function g(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(!e)return void(t.__cachedNormalStl=t.__cachedNormalZ2=null);var n=t.__cachedNormalStl={};t.__cachedNormalZ2=t.z2;var i=t.style;for(var r in e)null!=e[r]&&(n[r]=i[r]);n.fill=i.fill,n.stroke=i.stroke}}function m(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var n=t.__zr,i=t.useHoverLayer&&n&&"canvas"===n.painter.type;if(t.__highlighted=i?"layer":"plain",!(t.isGroup||!n&&t.useHoverLayer)){var r=t,o=t.style;i&&(r=n.addHover(t),o=r.style),B(o),i||g(r),o.extendFrom(e),v(o,e,"fill"),v(o,e,"stroke"),z(o),i||(t.dirty(!1),t.z2+=Pt)}}}function v(t,e,n){!p(e[n])&&p(t[n])&&(t[n]=d(t[n]))}function y(t){var e=t.__highlighted;if(e&&(t.__highlighted=!1,!t.isGroup))if("layer"===e)t.__zr&&t.__zr.removeHover(t);else{var n=t.style,i=t.__cachedNormalStl;i&&(B(n),t.setStyle(i),z(n));var r=t.__cachedNormalZ2;null!=r&&t.z2-r===Pt&&(t.z2=r)}}function _(t,e,n){var i,r=At,o=At;t.__highlighted&&(r=Dt,i=!0),e(t,n),t.__highlighted&&(o=Dt,i=!0),t.isGroup&&t.traverse(function(t){!t.isGroup&&e(t,n)}),i&&t.__highDownOnUpdate&&t.__highDownOnUpdate(r,o)}function x(t,e){e=t.__hoverStl=e!==!1&&(t.hoverStyle||e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(t.__cachedNormalStl=null,y(t),m(t))}function w(t){!M(this,t)&&!this.__highByOuter&&_(this,m)}function b(t){!M(this,t)&&!this.__highByOuter&&_(this,y)}function C(t){this.__highByOuter|=1<<(t||0),_(this,m)}function S(t){!(this.__highByOuter&=~(1<<(t||0)))&&_(this,y)}function M(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function E(t,e){I(t,!0),_(t,x,e)}function I(t,e){var n=e===!1;if(t.__highDownSilentOnTouch=t.highDownSilentOnTouch,t.__highDownOnUpdate=t.highDownOnUpdate,!n||t.__highDownDispatcher){var i=n?"off":"on";t[i]("mouseover",w)[i]("mouseout",b),t[i]("emphasis",C)[i]("normal",S),t.__highByOuter=t.__highByOuter||0,t.__highDownDispatcher=!n}}function T(t){return!(!t||!t.__highDownDispatcher)}function P(t){var e=Nt[t];return null==e&&kt<=32&&(e=Nt[t]=kt++),e}function L(t,e,n,i,r,o,a){r=r||Tt;var s,l=r.labelFetcher,u=r.labelDataIndex,c=r.labelDimIndex,h=r.labelProp,f=n.getShallow("show"),p=i.getShallow("show");(f||p)&&(l&&(s=l.getFormattedLabel(u,"normal",null,c,h)),null==s&&(s=et.isFunction(r.defaultText)?r.defaultText(u,r):r.defaultText));var d=f?s:null,g=p?et.retrieve2(l?l.getFormattedLabel(u,"emphasis",null,c,h):null,s):null;null==d&&null==g||(A(t,n,o,r),A(e,i,a,r,!0)),t.text=d,e.text=g}function D(t,e,n){var i=t.style;e&&(B(i),t.setStyle(e),z(i)),i=t.__hoverStl,n&&i&&(B(i),et.extend(i,n),z(i))}function A(t,e,n,i,r){return N(t,e,i,r),n&&et.extend(t,n),t}function k(t,e,n){var i,r={isRectText:!0};n===!1?i=!0:r.autoColor=n,N(t,e,r,i)}function N(t,e,n,i){if(n=n||Tt,n.isRectText){var r;n.getTextPosition?r=n.getTextPosition(e,i):(r=e.getShallow("position")||(i?null:"inside"),"outside"===r&&(r="top")),t.textPosition=r,t.textOffset=e.getShallow("offset");var o=e.getShallow("rotate");null!=o&&(o*=Math.PI/180),t.textRotation=o,t.textDistance=et.retrieve2(e.getShallow("distance"),i?null:5)}var a,s=e.ecModel,l=s&&s.option.textStyle,u=O(e);if(u){a={};for(var c in u)if(u.hasOwnProperty(c)){var h=e.getModel(["rich",c]);R(a[c]={},h,l,n,i)}}return t.rich=a,R(t,e,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function O(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||Tt).rich;if(n){e=e||{};for(var i in n)n.hasOwnProperty(i)&&(e[i]=1)}t=t.parentModel}return e}function R(t,e,n,i,r,o){n=!r&&n||Tt,t.textFill=F(e.getShallow("color"),i)||n.color,t.textStroke=F(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=et.retrieve2(e.getShallow("textBorderWidth"),n.textBorderWidth),r||(o&&(t.insideRollbackOpt=i,z(t)),null==t.textFill&&(t.textFill=i.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),o&&i.disableBox||(t.textBackgroundColor=F(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=F(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function F(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function z(t){var e,n=t.textPosition,i=t.insideRollbackOpt;if(i&&null==t.textFill){var r=i.autoColor,o=i.isRectText,a=i.useInsideStyle,s=a!==!1&&(a===!0||o&&n&&"string"==typeof n&&n.indexOf("inside")>=0),l=!s&&null!=r;(s||l)&&(e={textFill:t.textFill,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth}),s&&(t.textFill="#fff",null==t.textStroke&&(t.textStroke=r,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),l&&(t.textFill=r)}t.insideRollback=e}function B(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function V(t,e){var n=e&&e.getModel("textStyle");return et.trim([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function G(t,e,n,i,r,o){"function"==typeof r&&(o=r,r=null);var a=i&&i.isAnimationEnabled();if(a){var s=t?"Update":"",l=i.getShallow("animationDuration"+s),u=i.getShallow("animationEasing"+s),c=i.getShallow("animationDelay"+s);"function"==typeof c&&(c=c(r,i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null)),"function"==typeof l&&(l=l(r)),l>0?e.animateTo(n,l,c||0,u,o,!!o):(e.stopAnimation(),e.attr(n),o&&o())}else e.stopAnimation(),e.attr(n),o&&o()}function H(t,e,n,i,r){G(!0,t,e,n,i,r)}function j(t,e,n,i,r){G(!1,t,e,n,i,r)}function U(t,e){for(var n=rt.identity([]);t&&t!==e;)rt.mul(n,t.getLocalTransform(),n),t=t.parent;return n}function W(t,e,n){return e&&!et.isArrayLike(e)&&(e=st.getLocalTransform(e)),n&&(e=rt.invert([],e)),ot.applyTransform([],t,e)}function q(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return o=W(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function Y(t,e,n,i){function r(t){var e={};return t.traverse(function(t){!t.isGroup&&t.anid&&(e[t.anid]=t)}),e}function o(t){var e={position:ot.clone(t.position),rotation:t.rotation};return t.shape&&(e.shape=et.extend({},t.shape)),e}if(t&&e){var a=r(t);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=a[t.anid];if(e){var i=o(t);t.attr(o(e)),H(t,i,n,t.dataIndex)}}})}}function X(t,e){return et.map(t,function(t){var n=t[0];n=Et(n,e.x),n=It(n,e.x+e.width);var i=t[1];return i=Et(i,e.y),i=It(i,e.y+e.height),[n,i]})}function Z(t,e){var n=Et(t.x,e.x),i=It(t.x+t.width,e.x+e.width),r=Et(t.y,e.y),o=It(t.y+t.height,e.y+e.height);if(i>=n&&o>=r)return{x:n,y:r,width:i-n,height:o-r}}function J(t,e,n){e=et.extend({rectHover:!0},e);var i=e.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),et.defaults(i,n),new lt(e)):s(t.replace("path://",""),e,n,"center")}function K(t,e,n,i,r){for(var o=0,a=r[r.length-1];o<r.length;o++){var s=r[o];if($(t,e,n,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function $(t,e,n,i,r,o,a,s){var l=n-t,u=i-e,c=a-r,h=s-o,f=Q(c,h,l,u);if(tt(f))return!1;var p=t-r,d=e-o,g=Q(p,d,l,u)/f;if(g<0||g>1)return!1;var m=Q(p,d,c,h)/f;return!(m<0||m>1)}function Q(t,e,n,i){return t*i-n*e}function tt(t){return t<=1e-6&&t>=-1e-6}var et=n(136),nt=n(185),it=n(154),rt=n(149),ot=n(138),at=n(186),st=n(148),lt=n(167);e.Image=lt;var ut=n(146);e.Group=ut;var ct=n(198);e.Text=ct;var ht=n(199);e.Circle=ht;var ft=n(200);e.Sector=ft;var pt=n(202);e.Ring=pt;var dt=n(203);e.Polygon=dt;var gt=n(207);e.Polyline=gt;var mt=n(208);e.Rect=mt;var vt=n(210);e.Line=vt;var yt=n(211);e.BezierCurve=yt;var _t=n(212);e.Arc=_t;var xt=n(213);e.CompoundPath=xt;var wt=n(214);e.LinearGradient=wt;var bt=n(216);e.RadialGradient=bt;var Ct=n(158);e.BoundingRect=Ct;var St=n(217);e.IncrementalDisplayable=St;var Mt=n(209),Et=Math.max,It=Math.min,Tt={},Pt=1,Lt={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},Dt="emphasis",At="normal",kt=1,Nt={},Ot={},Rt=nt.mergePath,Ft=Mt.subPixelOptimize,zt=et.createHashMap(),Bt=0;o("circle",ht),o("sector",ft),o("ring",pt),o("polygon",dt),o("polyline",gt),o("rect",mt),o("line",vt),o("bezierCurve",yt),o("arc",_t),e.Z2_EMPHASIS_LIFT=Pt,e.CACHED_LABEL_STYLE_PROPERTIES=Lt,e.extendShape=i,e.extendPath=r,e.registerShape=o,e.getShapeClass=a,e.makePath=s,e.makeImage=l,e.mergePath=Rt,e.resizePath=c,e.subPixelOptimizeLine=h,e.subPixelOptimizeRect=f,e.subPixelOptimize=Ft,e.setElementHoverStyle=x,e.setHoverStyle=E,e.setAsHighDownDispatcher=I,e.isHighDownDispatcher=T,e.getHighlightDigit=P,e.setLabelStyle=L,e.modifyLabelStyle=D,e.setTextStyle=A,e.setText=k,e.getFont=V,e.updateProps=H,e.initProps=j,e.getTransform=U,e.applyTransform=W,e.transformDirection=q,e.groupTransition=Y,e.clipPointsByRect=X,e.clipRectByRect=Z,e.createIcon=J,e.linePolygonIntersect=K,e.lineLineIntersect=$},function(t,e,n){function i(t,e,n,i,r,o,a,s,l,u,c){var h=l*(g/180),m=d(h)*(t-n)/2+p(h)*(e-i)/2,_=-1*p(h)*(t-n)/2+d(h)*(e-i)/2,x=m*m/(a*a)+_*_/(s*s);x>1&&(a*=f(x),s*=f(x));var w=(r===o?-1:1)*f((a*a*(s*s)-a*a*(_*_)-s*s*(m*m))/(a*a*(_*_)+s*s*(m*m)))||0,b=w*a*_/s,C=w*-s*m/a,S=(t+n)/2+d(h)*b-p(h)*C,M=(e+i)/2+p(h)*b+d(h)*C,E=y([1,0],[(m-b)/a,(_-C)/s]),I=[(m-b)/a,(_-C)/s],T=[(-1*m-b)/a,(-1*_-C)/s],P=y(I,T);v(I,T)<=-1&&(P=g),v(I,T)>=1&&(P=0),0===o&&P>0&&(P-=2*g),1===o&&P<0&&(P+=2*g),c.addData(u,S,M,a,s,E,P,h,o)}function r(t){if(!t)return new c;for(var e,n=0,r=0,o=n,a=r,s=new c,l=c.CMD,u=t.match(_),h=0;h<u.length;h++){for(var f,p=u[h],d=p.charAt(0),g=p.match(x)||[],m=g.length,v=0;v<m;v++)g[v]=parseFloat(g[v]);for(var y=0;y<m;){var w,b,C,S,M,E,I,T=n,P=r;switch(d){case"l":n+=g[y++],r+=g[y++],f=l.L,s.addData(f,n,r);break;case"L":n=g[y++],r=g[y++],f=l.L,s.addData(f,n,r);break;case"m":n+=g[y++],r+=g[y++],f=l.M,s.addData(f,n,r),o=n,a=r,d="l";break;case"M":n=g[y++],r=g[y++],f=l.M,s.addData(f,n,r),o=n,a=r,d="L";break;case"h":n+=g[y++],f=l.L,s.addData(f,n,r);break;case"H":n=g[y++],f=l.L,s.addData(f,n,r);break;case"v":r+=g[y++],f=l.L,s.addData(f,n,r);break;case"V":r=g[y++],f=l.L,s.addData(f,n,r);break;case"C":f=l.C,s.addData(f,g[y++],g[y++],g[y++],g[y++],g[y++],g[y++]),n=g[y-2],r=g[y-1];break;case"c":f=l.C,s.addData(f,g[y++]+n,g[y++]+r,g[y++]+n,g[y++]+r,g[y++]+n,g[y++]+r),n+=g[y-2],r+=g[y-1];break;case"S":w=n,b=r;var L=s.len(),D=s.data;e===l.C&&(w+=n-D[L-4],b+=r-D[L-3]),f=l.C,T=g[y++],P=g[y++],n=g[y++],r=g[y++],s.addData(f,w,b,T,P,n,r);break;case"s":w=n,b=r;var L=s.len(),D=s.data;e===l.C&&(w+=n-D[L-4],b+=r-D[L-3]),f=l.C,T=n+g[y++],P=r+g[y++],n+=g[y++],r+=g[y++],s.addData(f,w,b,T,P,n,r);break;case"Q":T=g[y++],P=g[y++],n=g[y++],r=g[y++],f=l.Q,s.addData(f,T,P,n,r);break;case"q":T=g[y++]+n,P=g[y++]+r,n+=g[y++],r+=g[y++],f=l.Q,s.addData(f,T,P,n,r);break;case"T":w=n,b=r;var L=s.len(),D=s.data;e===l.Q&&(w+=n-D[L-4],b+=r-D[L-3]),n=g[y++],r=g[y++],f=l.Q,s.addData(f,w,b,n,r);break;case"t":w=n,b=r;var L=s.len(),D=s.data;e===l.Q&&(w+=n-D[L-4],b+=r-D[L-3]),n+=g[y++],r+=g[y++],f=l.Q,s.addData(f,w,b,n,r);break;case"A":C=g[y++],S=g[y++],M=g[y++],E=g[y++],I=g[y++],T=n,P=r,n=g[y++],r=g[y++],f=l.A,i(T,P,n,r,E,I,C,S,M,f,s);break;case"a":C=g[y++],S=g[y++],M=g[y++],E=g[y++],I=g[y++],T=n,P=r,n+=g[y++],r+=g[y++],f=l.A,i(T,P,n,r,E,I,C,S,M,f,s)}}"z"!==d&&"Z"!==d||(f=l.Z,s.addData(f),n=o,r=a),e=f}return s.toStatic(),s}function o(t,e){var n=r(t);return e=e||{},e.buildPath=function(t){if(t.setData){t.setData(n.data);var e=t.getContext();e&&t.rebuildPath(e)}else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){h(n,t),this.dirty(!0)},e}function a(t,e){return new u(o(t,e))}function s(t,e){return u.extend(o(t,e))}function l(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var o=t[r];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),n.push(o.path)}var a=new u(e);return a.createPathProxy(),a.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},a}var u=n(186),c=n(187),h=n(197),f=Math.sqrt,p=Math.sin,d=Math.cos,g=Math.PI,m=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},v=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(m(t)*m(e))},y=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(v(t,e))},_=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,x=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;e.createFromString=a,e.extendFromString=s,e.mergePath=l},function(t,e,n){function i(t){r.call(this,t),this.path=null}var r=n(168),o=n(136),a=n(187),s=n(190),l=n(165),u=l.prototype.getCanvasPattern,c=Math.abs,h=new a(!0);i.prototype={constructor:i,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(t,e){var n=this.style,i=this.path||h,r=n.hasStroke(),o=n.hasFill(),a=n.fill,s=n.stroke,l=o&&!!a.colorStops,c=r&&!!s.colorStops,f=o&&!!a.image,p=r&&!!s.image;if(n.bind(t,this,e),this.setTransform(t),this.__dirty){var d;l&&(d=d||this.getBoundingRect(),this._fillGradient=n.getGradient(t,a,d)),c&&(d=d||this.getBoundingRect(),this._strokeGradient=n.getGradient(t,s,d))}l?t.fillStyle=this._fillGradient:f&&(t.fillStyle=u.call(a,t)),c?t.strokeStyle=this._strokeGradient:p&&(t.strokeStyle=u.call(s,t));var g=n.lineDash,m=n.lineDashOffset,v=!!t.setLineDash,y=this.getGlobalScale();if(i.setScale(y[0],y[1],this.segmentIgnoreThreshold),this.__dirtyPath||g&&!v&&r?(i.beginPath(t),g&&!v&&(i.setLineDash(g),i.setLineDashOffset(m)),this.buildPath(i,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),o)if(null!=n.fillOpacity){var _=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,i.fill(t),t.globalAlpha=_}else i.fill(t);if(g&&v&&(t.setLineDash(g),t.lineDashOffset=m),r)if(null!=n.strokeOpacity){var _=t.globalAlpha;t.globalAlpha=n.strokeOpacity*n.opacity,i.stroke(t),t.globalAlpha=_}else i.stroke(t);g&&v&&t.setLineDash([]),null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new a},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var i=this.path;i||(i=this.path=new a),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){r.copy(t);var o=e.lineWidth,s=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),s>1e-10&&(r.width+=o/s,r.height+=o/s,r.x-=o/s/2,r.y-=o/s/2)}return r}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=n[0],e=n[1],i.contain(t,e)){var o=this.path.data;if(r.hasStroke()){var a=r.lineWidth,l=r.strokeNoScale?this.getLineScale():1;if(l>1e-10&&(r.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),s.containStroke(o,a/l,t,e)))return!0}if(r.hasFill())return s.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):r.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(o.isObject(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&c(t[0]-1)>1e-10&&c(t[3]-1)>1e-10?Math.sqrt(c(t[0]*t[3]-t[2]*t[1])):1}},i.extend=function(t){var e=function(e){i.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var r=this.shape;for(var o in n)!r.hasOwnProperty(o)&&n.hasOwnProperty(o)&&(r[o]=n[o])}t.init&&t.init.call(this,e)};o.inherits(e,i);for(var n in t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},o.inherits(i,r);var f=i;t.exports=f},function(t,e,n){var i=n(188),r=n(138),o=n(189),a=n(158),s=n(157),l=s.devicePixelRatio,u={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},c=[],h=[],f=[],p=[],d=Math.min,g=Math.max,m=Math.cos,v=Math.sin,y=Math.sqrt,_=Math.abs,x="undefined"!=typeof Float32Array,w=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};w.prototype={constructor:w,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e,n){n=n||0,this._ux=_(n/l/t)||0,this._uy=_(n/l/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(u.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=_(t-this._xi)>this._ux||_(e-this._yi)>this._uy||this._len<5;return this.addData(u.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,i,r,o){return this.addData(u.C,t,e,n,i,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,r,o):this._ctx.bezierCurveTo(t,e,n,i,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,n,i){return this.addData(u.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,r,o){return this.addData(u.A,t,e,n,n,i,r-i,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,o),this._xi=m(r)*n+t,this._yi=v(r)*n+e,this},arcTo:function(t,e,n,i,r){return this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(u.R,t,e,n,i),this},closePath:function(){this.addData(u.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length===e||!x||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();x&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var r=0;r<e;r++)for(var o=t[r].data,a=0;a<o.length;a++)this.data[i++]=o[a];this._len=i},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,r=this._dashSum,o=this._dashOffset,a=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,c=t-l,h=e-u,f=y(c*c+h*h),p=l,m=u,v=a.length;for(c/=f,h/=f,o<0&&(o=r+o),o%=r,p-=o*c,m-=o*h;c>0&&p<=t||c<0&&p>=t||0===c&&(h>0&&m<=e||h<0&&m>=e);)i=this._dashIdx,n=a[i],p+=c*n,m+=h*n,this._dashIdx=(i+1)%v,c>0&&p<l||c<0&&p>l||h>0&&m<u||h<0&&m>u||s[i%2?"moveTo":"lineTo"](c>=0?d(p,t):g(p,t),h>=0?d(m,e):g(m,e));c=p-t,h=m-e,this._dashOffset=-y(c*c+h*h)},_dashedBezierTo:function(t,e,n,r,o,a){var s,l,u,c,h,f=this._dashSum,p=this._dashOffset,d=this._lineDash,g=this._ctx,m=this._xi,v=this._yi,_=i.cubicAt,x=0,w=this._dashIdx,b=d.length,C=0;for(p<0&&(p=f+p),p%=f,s=0;s<1;s+=.1)l=_(m,t,n,o,s+.1)-_(m,t,n,o,s),u=_(v,e,r,a,s+.1)-_(v,e,r,a,s),x+=y(l*l+u*u);for(;w<b&&(C+=d[w],!(C>p));w++);for(s=(C-p)/x;s<=1;)c=_(m,t,n,o,s),h=_(v,e,r,a,s),w%2?g.moveTo(c,h):g.lineTo(c,h),s+=d[w]/x,w=(w+1)%b;w%2!==0&&g.lineTo(o,a),l=o-c,u=a-h,this._dashOffset=-y(l*l+u*u)},_dashedQuadraticTo:function(t,e,n,i){var r=n,o=i;n=(n+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,i,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,x&&(this.data=new Float32Array(t)))},getBoundingRect:function(){c[0]=c[1]=f[0]=f[1]=Number.MAX_VALUE,h[0]=h[1]=p[0]=p[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,i=0,s=0,l=0;l<t.length;){var d=t[l++];switch(1===l&&(e=t[l],n=t[l+1],i=e,s=n),d){case u.M:i=t[l++],s=t[l++],e=i,n=s,f[0]=i,f[1]=s,p[0]=i,p[1]=s;break;case u.L:o.fromLine(e,n,t[l],t[l+1],f,p),e=t[l++],n=t[l++];break;case u.C:o.fromCubic(e,n,t[l++],t[l++],t[l++],t[l++],t[l],t[l+1],f,p),e=t[l++],n=t[l++];break;case u.Q:o.fromQuadratic(e,n,t[l++],t[l++],t[l],t[l+1],f,p),e=t[l++],n=t[l++];break;case u.A:var g=t[l++],y=t[l++],_=t[l++],x=t[l++],w=t[l++],b=t[l++]+w;l+=1;var C=1-t[l++];1===l&&(i=m(w)*_+g,s=v(w)*x+y),o.fromArc(g,y,_,x,w,b,C,f,p),e=m(b)*_+g,n=v(b)*x+y;break;case u.R:i=e=t[l++],s=n=t[l++];var S=t[l++],M=t[l++];o.fromLine(i,s,i+S,s+M,f,p);break;case u.Z:e=i,n=s}r.min(c,c,f),r.max(h,h,p)}return 0===l&&(c[0]=c[1]=h[0]=h[1]=0),
new a(c[0],c[1],h[0]-c[0],h[1]-c[1])},rebuildPath:function(t){for(var e,n,i,r,o,a,s=this.data,l=this._ux,c=this._uy,h=this._len,f=0;f<h;){var p=s[f++];switch(1===f&&(i=s[f],r=s[f+1],e=i,n=r),p){case u.M:e=i=s[f++],n=r=s[f++],t.moveTo(i,r);break;case u.L:o=s[f++],a=s[f++],(_(o-i)>l||_(a-r)>c||f===h-1)&&(t.lineTo(o,a),i=o,r=a);break;case u.C:t.bezierCurveTo(s[f++],s[f++],s[f++],s[f++],s[f++],s[f++]),i=s[f-2],r=s[f-1];break;case u.Q:t.quadraticCurveTo(s[f++],s[f++],s[f++],s[f++]),i=s[f-2],r=s[f-1];break;case u.A:var d=s[f++],g=s[f++],y=s[f++],x=s[f++],w=s[f++],b=s[f++],C=s[f++],S=s[f++],M=y>x?y:x,E=y>x?1:y/x,I=y>x?x/y:1,T=Math.abs(y-x)>.001,P=w+b;T?(t.translate(d,g),t.rotate(C),t.scale(E,I),t.arc(0,0,M,w,P,1-S),t.scale(1/E,1/I),t.rotate(-C),t.translate(-d,-g)):t.arc(d,g,M,w,P,1-S),1===f&&(e=m(w)*y+d,n=v(w)*x+g),i=m(P)*y+d,r=v(P)*x+g;break;case u.R:e=i=s[f],n=r=s[f+1],t.rect(s[f++],s[f++],s[f++],s[f++]);break;case u.Z:t.closePath(),i=e,r=n}}}},w.CMD=u;var b=w;t.exports=b},function(t,e,n){function i(t){return t>-b&&t<b}function r(t){return t>b||t<-b}function o(t,e,n,i,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*i+3*o*n)}function a(t,e,n,i,r){var o=1-r;return 3*(((e-t)*o+2*(n-e)*r)*o+(i-n)*r*r)}function s(t,e,n,r,o,a){var s=r+3*(e-n)-t,l=3*(n-2*e+t),u=3*(e-t),c=t-o,h=l*l-3*s*u,f=l*u-9*s*c,p=u*u-3*l*c,d=0;if(i(h)&&i(f))if(i(l))a[0]=0;else{var g=-u/l;g>=0&&g<=1&&(a[d++]=g)}else{var m=f*f-4*h*p;if(i(m)){var v=f/h,g=-l/s+v,y=-v/2;g>=0&&g<=1&&(a[d++]=g),y>=0&&y<=1&&(a[d++]=y)}else if(m>0){var _=w(m),b=h*l+1.5*s*(-f+_),C=h*l+1.5*s*(-f-_);b=b<0?-x(-b,M):x(b,M),C=C<0?-x(-C,M):x(C,M);var g=(-l-(b+C))/(3*s);g>=0&&g<=1&&(a[d++]=g)}else{var E=(2*h*l-3*s*f)/(2*w(h*h*h)),I=Math.acos(E)/3,T=w(h),P=Math.cos(I),g=(-l-2*T*P)/(3*s),y=(-l+T*(P+S*Math.sin(I)))/(3*s),L=(-l+T*(P-S*Math.sin(I)))/(3*s);g>=0&&g<=1&&(a[d++]=g),y>=0&&y<=1&&(a[d++]=y),L>=0&&L<=1&&(a[d++]=L)}}return d}function l(t,e,n,o,a){var s=6*n-12*e+6*t,l=9*e+3*o-3*t-9*n,u=3*e-3*t,c=0;if(i(l)){if(r(s)){var h=-u/s;h>=0&&h<=1&&(a[c++]=h)}}else{var f=s*s-4*l*u;if(i(f))a[0]=-s/(2*l);else if(f>0){var p=w(f),h=(-s+p)/(2*l),d=(-s-p)/(2*l);h>=0&&h<=1&&(a[c++]=h),d>=0&&d<=1&&(a[c++]=d)}}return c}function u(t,e,n,i,r,o){var a=(e-t)*r+t,s=(n-e)*r+e,l=(i-n)*r+n,u=(s-a)*r+a,c=(l-s)*r+s,h=(c-u)*r+u;o[0]=t,o[1]=a,o[2]=u,o[3]=h,o[4]=h,o[5]=c,o[6]=l,o[7]=i}function c(t,e,n,i,r,a,s,l,u,c,h){var f,p,d,g,m,v=.005,y=1/0;E[0]=u,E[1]=c;for(var x=0;x<1;x+=.05)I[0]=o(t,n,r,s,x),I[1]=o(e,i,a,l,x),g=_(E,I),g<y&&(f=x,y=g);y=1/0;for(var b=0;b<32&&!(v<C);b++)p=f-v,d=f+v,I[0]=o(t,n,r,s,p),I[1]=o(e,i,a,l,p),g=_(I,E),p>=0&&g<y?(f=p,y=g):(T[0]=o(t,n,r,s,d),T[1]=o(e,i,a,l,d),m=_(T,E),d<=1&&m<y?(f=d,y=m):v*=.5);return h&&(h[0]=o(t,n,r,s,f),h[1]=o(e,i,a,l,f)),w(y)}function h(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function f(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function p(t,e,n,o,a){var s=t-2*e+n,l=2*(e-t),u=t-o,c=0;if(i(s)){if(r(l)){var h=-u/l;h>=0&&h<=1&&(a[c++]=h)}}else{var f=l*l-4*s*u;if(i(f)){var h=-l/(2*s);h>=0&&h<=1&&(a[c++]=h)}else if(f>0){var p=w(f),h=(-l+p)/(2*s),d=(-l-p)/(2*s);h>=0&&h<=1&&(a[c++]=h),d>=0&&d<=1&&(a[c++]=d)}}return c}function d(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i}function g(t,e,n,i,r){var o=(e-t)*i+t,a=(n-e)*i+e,s=(a-o)*i+o;r[0]=t,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=n}function m(t,e,n,i,r,o,a,s,l){var u,c=.005,f=1/0;E[0]=a,E[1]=s;for(var p=0;p<1;p+=.05){I[0]=h(t,n,r,p),I[1]=h(e,i,o,p);var d=_(E,I);d<f&&(u=p,f=d)}f=1/0;for(var g=0;g<32&&!(c<C);g++){var m=u-c,v=u+c;I[0]=h(t,n,r,m),I[1]=h(e,i,o,m);var d=_(I,E);if(m>=0&&d<f)u=m,f=d;else{T[0]=h(t,n,r,v),T[1]=h(e,i,o,v);var y=_(T,E);v<=1&&y<f?(u=v,f=y):c*=.5}}return l&&(l[0]=h(t,n,r,u),l[1]=h(e,i,o,u)),w(f)}var v=n(138),y=v.create,_=v.distSquare,x=Math.pow,w=Math.sqrt,b=1e-8,C=1e-4,S=w(3),M=1/3,E=y(),I=y(),T=y();e.cubicAt=o,e.cubicDerivativeAt=a,e.cubicRootAt=s,e.cubicExtrema=l,e.cubicSubdivide=u,e.cubicProjectPoint=c,e.quadraticAt=h,e.quadraticDerivativeAt=f,e.quadraticRootAt=p,e.quadraticExtremum=d,e.quadraticSubdivide=g,e.quadraticProjectPoint=m},function(t,e,n){function i(t,e,n){if(0!==t.length){var i,r=t[0],o=r[0],a=r[0],s=r[1],l=r[1];for(i=1;i<t.length;i++)r=t[i],o=c(o,r[0]),a=h(a,r[0]),s=c(s,r[1]),l=h(l,r[1]);e[0]=o,e[1]=s,n[0]=a,n[1]=l}}function r(t,e,n,i,r,o){r[0]=c(t,n),r[1]=c(e,i),o[0]=h(t,n),o[1]=h(e,i)}function o(t,e,n,i,r,o,a,s,l,f){var p,d=u.cubicExtrema,g=u.cubicAt,m=d(t,n,r,a,y);for(l[0]=1/0,l[1]=1/0,f[0]=-(1/0),f[1]=-(1/0),p=0;p<m;p++){var v=g(t,n,r,a,y[p]);l[0]=c(v,l[0]),f[0]=h(v,f[0])}for(m=d(e,i,o,s,_),p=0;p<m;p++){var x=g(e,i,o,s,_[p]);l[1]=c(x,l[1]),f[1]=h(x,f[1])}l[0]=c(t,l[0]),f[0]=h(t,f[0]),l[0]=c(a,l[0]),f[0]=h(a,f[0]),l[1]=c(e,l[1]),f[1]=h(e,f[1]),l[1]=c(s,l[1]),f[1]=h(s,f[1])}function a(t,e,n,i,r,o,a,s){var l=u.quadraticExtremum,f=u.quadraticAt,p=h(c(l(t,n,r),1),0),d=h(c(l(e,i,o),1),0),g=f(t,n,r,p),m=f(e,i,o,d);a[0]=c(t,r,g),a[1]=c(e,o,m),s[0]=h(t,r,g),s[1]=h(e,o,m)}function s(t,e,n,i,r,o,a,s,u){var c=l.min,h=l.max,y=Math.abs(r-o);if(y%d<1e-4&&y>1e-4)return s[0]=t-n,s[1]=e-i,u[0]=t+n,void(u[1]=e+i);if(g[0]=p(r)*n+t,g[1]=f(r)*i+e,m[0]=p(o)*n+t,m[1]=f(o)*i+e,c(s,g,m),h(u,g,m),r%=d,r<0&&(r+=d),o%=d,o<0&&(o+=d),r>o&&!a?o+=d:r<o&&a&&(r+=d),a){var _=o;o=r,r=_}for(var x=0;x<o;x+=Math.PI/2)x>r&&(v[0]=p(x)*n+t,v[1]=f(x)*i+e,c(s,v,s),h(u,v,u))}var l=n(138),u=n(188),c=Math.min,h=Math.max,f=Math.sin,p=Math.cos,d=2*Math.PI,g=l.create(),m=l.create(),v=l.create(),y=[],_=[];e.fromPoints=i,e.fromLine=r,e.fromCubic=o,e.fromQuadratic=a,e.fromArc=s},function(t,e,n){function i(t,e){return Math.abs(t-e)<b}function r(){var t=S[0];S[0]=S[1],S[1]=t}function o(t,e,n,i,o,a,s,l,u,c){if(c>e&&c>i&&c>a&&c>l||c<e&&c<i&&c<a&&c<l)return 0;var h=y.cubicRootAt(e,i,a,l,c,C);if(0===h)return 0;for(var f,p,d=0,g=-1,m=0;m<h;m++){var v=C[m],_=0===v||1===v?.5:1,x=y.cubicAt(t,n,o,s,v);x<u||(g<0&&(g=y.cubicExtrema(e,i,a,l,S),S[1]<S[0]&&g>1&&r(),f=y.cubicAt(e,i,a,l,S[0]),g>1&&(p=y.cubicAt(e,i,a,l,S[1]))),d+=2===g?v<S[0]?f<e?_:-_:v<S[1]?p<f?_:-_:l<p?_:-_:v<S[0]?f<e?_:-_:l<f?_:-_)}return d}function a(t,e,n,i,r,o,a,s){if(s>e&&s>i&&s>o||s<e&&s<i&&s<o)return 0;var l=y.quadraticRootAt(e,i,o,s,C);if(0===l)return 0;var u=y.quadraticExtremum(e,i,o);if(u>=0&&u<=1){for(var c=0,h=y.quadraticAt(e,i,o,u),f=0;f<l;f++){var p=0===C[f]||1===C[f]?.5:1,d=y.quadraticAt(t,n,r,C[f]);d<a||(c+=C[f]<u?h<e?p:-p:o<h?p:-p)}return c}var p=0===C[0]||1===C[0]?.5:1,d=y.quadraticAt(t,n,r,C[0]);return d<a?0:o<e?p:-p}function s(t,e,n,i,r,o,a,s){if(s-=e,s>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);C[0]=-l,C[1]=l;var u=Math.abs(i-r);if(u<1e-4)return 0;if(u%w<1e-4){i=0,r=w;var c=o?1:-1;return a>=C[0]+t&&a<=C[1]+t?c:0}if(o){var l=i;i=v(r),r=v(l)}else i=v(i),r=v(r);i>r&&(r+=w);for(var h=0,f=0;f<2;f++){var p=C[f];if(p+t>a){var d=Math.atan2(s,p),c=o?1:-1;d<0&&(d=w+d),(d>=i&&d<=r||d+w>=i&&d+w<=r)&&(d>Math.PI/2&&d<1.5*Math.PI&&(c=-c),h+=c)}}return h}function l(t,e,n,r,l){for(var u=0,c=0,h=0,m=0,v=0,y=0;y<t.length;){var w=t[y++];switch(w===x.M&&y>1&&(n||(u+=_(c,h,m,v,r,l))),1===y&&(c=t[y],h=t[y+1],m=c,v=h),w){case x.M:m=t[y++],v=t[y++],c=m,h=v;break;case x.L:if(n){if(f.containStroke(c,h,t[y],t[y+1],e,r,l))return!0}else u+=_(c,h,t[y],t[y+1],r,l)||0;c=t[y++],h=t[y++];break;case x.C:if(n){if(p.containStroke(c,h,t[y++],t[y++],t[y++],t[y++],t[y],t[y+1],e,r,l))return!0}else u+=o(c,h,t[y++],t[y++],t[y++],t[y++],t[y],t[y+1],r,l)||0;c=t[y++],h=t[y++];break;case x.Q:if(n){if(d.containStroke(c,h,t[y++],t[y++],t[y],t[y+1],e,r,l))return!0}else u+=a(c,h,t[y++],t[y++],t[y],t[y+1],r,l)||0;c=t[y++],h=t[y++];break;case x.A:var b=t[y++],C=t[y++],S=t[y++],M=t[y++],E=t[y++],I=t[y++];y+=1;var T=1-t[y++],P=Math.cos(E)*S+b,L=Math.sin(E)*M+C;y>1?u+=_(c,h,P,L,r,l):(m=P,v=L);var D=(r-b)*M/S+b;if(n){if(g.containStroke(b,C,M,E,E+I,T,e,D,l))return!0}else u+=s(b,C,M,E,E+I,T,D,l);c=Math.cos(E+I)*S+b,h=Math.sin(E+I)*M+C;break;case x.R:m=c=t[y++],v=h=t[y++];var A=t[y++],k=t[y++],P=m+A,L=v+k;if(n){if(f.containStroke(m,v,P,v,e,r,l)||f.containStroke(P,v,P,L,e,r,l)||f.containStroke(P,L,m,L,e,r,l)||f.containStroke(m,L,m,v,e,r,l))return!0}else u+=_(P,v,P,L,r,l),u+=_(m,L,m,v,r,l);break;case x.Z:if(n){if(f.containStroke(c,h,m,v,e,r,l))return!0}else u+=_(c,h,m,v,r,l);c=m,h=v}}return n||i(h,v)||(u+=_(c,h,m,v,r,l)||0),0!==u}function u(t,e,n){return l(t,0,!1,e,n)}function c(t,e,n,i){return l(t,e,!0,n,i)}var h=n(187),f=n(191),p=n(192),d=n(193),g=n(194),m=n(195),v=m.normalizeRadian,y=n(188),_=n(196),x=h.CMD,w=2*Math.PI,b=1e-4,C=[-1,-1,-1],S=[-1,-1];e.contain=u,e.containStroke=c},function(t,e){function n(t,e,n,i,r,o,a){if(0===r)return!1;var s=r,l=0,u=t;if(a>e+s&&a>i+s||a<e-s&&a<i-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;l=(e-i)/(t-n),u=(t*i-n*e)/(t-n);var c=l*o-a+u,h=c*c/(l*l+1);return h<=s/2*s/2}e.containStroke=n},function(t,e,n){function i(t,e,n,i,o,a,s,l,u,c,h){if(0===u)return!1;var f=u;if(h>e+f&&h>i+f&&h>a+f&&h>l+f||h<e-f&&h<i-f&&h<a-f&&h<l-f||c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f)return!1;var p=r.cubicProjectPoint(t,e,n,i,o,a,s,l,c,h,null);return p<=f/2}var r=n(188);e.containStroke=i},function(t,e,n){function i(t,e,n,i,r,a,s,l,u){if(0===s)return!1;var c=s;if(u>e+c&&u>i+c&&u>a+c||u<e-c&&u<i-c&&u<a-c||l>t+c&&l>n+c&&l>r+c||l<t-c&&l<n-c&&l<r-c)return!1;var h=o(t,e,n,i,r,a,l,u,null);return h<=c/2}var r=n(188),o=r.quadraticProjectPoint;e.containStroke=i},function(t,e,n){function i(t,e,n,i,r,s,l,u,c){if(0===l)return!1;var h=l;u-=t,c-=e;var f=Math.sqrt(u*u+c*c);if(f-h>n||f+h<n)return!1;if(Math.abs(i-r)%a<1e-4)return!0;if(s){var p=i;i=o(r),r=o(p)}else i=o(i),r=o(r);i>r&&(r+=a);var d=Math.atan2(c,u);return d<0&&(d+=a),d>=i&&d<=r||d+a>=i&&d+a<=r}var r=n(195),o=r.normalizeRadian,a=2*Math.PI;e.containStroke=i},function(t,e){function n(t){return t%=i,t<0&&(t+=i),t}var i=2*Math.PI;e.normalizeRadian=n},function(t,e){function n(t,e,n,i,r,o){if(o>e&&o>i||o<e&&o<i)return 0;if(i===e)return 0;var a=i<e?1:-1,s=(o-e)/(i-e);1!==s&&0!==s||(a=i<e?.5:-.5);var l=s*(n-t)+t;return l===r?1/0:l>r?a:0}t.exports=n},function(t,e,n){function i(t,e){var n,i,r,o,h,f,p=t.data,d=s.M,g=s.C,m=s.L,v=s.R,y=s.A,_=s.Q;for(r=0,o=0;r<p.length;){switch(n=p[r++],o=r,i=0,n){case d:i=1;break;case m:i=1;break;case g:i=3;break;case _:i=2;break;case y:var x=e[4],w=e[5],b=u(e[0]*e[0]+e[1]*e[1]),C=u(e[2]*e[2]+e[3]*e[3]),S=c(-e[1]/C,e[0]/b);p[r]*=b,p[r++]+=x,p[r]*=C,p[r++]+=w,p[r++]*=b,p[r++]*=C,p[r++]+=S,p[r++]+=S,r+=2,o=r;break;case v:f[0]=p[r++],f[1]=p[r++],a(f,f,e),p[o++]=f[0],p[o++]=f[1],f[0]+=p[r++],f[1]+=p[r++],a(f,f,e),p[o++]=f[0],p[o++]=f[1]}for(h=0;h<i;h++){var f=l[h];f[0]=p[r++],f[1]=p[r++],a(f,f,e),p[o++]=f[0],p[o++]=f[1]}}}var r=n(187),o=n(138),a=o.applyTransform,s=r.CMD,l=[[],[],[]],u=Math.sqrt,c=Math.atan2;t.exports=i},function(t,e,n){var i=n(168),r=n(136),o=n(171),a=n(170),s=n(164),l=s.ContextCachedBy,u=function(t){i.call(this,t)};u.prototype={constructor:u,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&a.normalizeTextStyle(n,!0),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;return null!=i&&(i+=""),a.needDrawText(i,n)?(this.setTransform(t),a.renderText(this,t,i,n,null,e),void this.restoreTransform(t)):void(t.__attrCachedBy=l.NONE)},getBoundingRect:function(){var t=this.style;if(this.__dirty&&a.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var n=o.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,a.getStroke(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},r.inherits(u,i);var c=u;t.exports=c},function(t,e,n){var i=n(186),r=i.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}});t.exports=r},function(t,e,n){var i=n(186),r=n(201),o=i.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:r(i.prototype.brush),buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=e.startAngle,s=e.endAngle,l=e.clockwise,u=Math.cos(a),c=Math.sin(a);t.moveTo(u*r+n,c*r+i),t.lineTo(u*o+n,c*o+i),t.arc(n,i,o,a,s,!l),t.lineTo(Math.cos(s)*r+n,Math.sin(s)*r+i),0!==r&&t.arc(n,i,r,s,a,l),t.closePath()}});t.exports=o},function(t,e,n){function i(t){return r.browser.ie&&r.browser.version>=11?function(){var e,n=this.__clipPaths,i=this.style;if(n)for(var r=0;r<n.length;r++){var a=n[r],s=a&&a.shape,l=a&&a.type;if(s&&("sector"===l&&s.startAngle===s.endAngle||"rect"===l&&(!s.width||!s.height))){for(var u=0;u<o.length;u++)o[u][2]=i[o[u][0]],i[o[u][0]]=o[u][1];e=!0;break}}if(t.apply(this,arguments),e)for(var u=0;u<o.length;u++)i[o[u][0]]=o[u][2]}:t}var r=n(135),o=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];t.exports=i},function(t,e,n){var i=n(186),r=i.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)}});t.exports=r},function(t,e,n){var i=n(186),r=n(204),o=i.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){r.buildPath(t,e,!0)}});t.exports=o},function(t,e,n){function i(t,e,n){var i=e.points,a=e.smooth;if(i&&i.length>=2){if(a&&"spline"!==a){var s=o(i,a,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var l=i.length,u=0;u<(n?l:l-1);u++){var c=s[2*u],h=s[2*u+1],f=i[(u+1)%l];t.bezierCurveTo(c[0],c[1],h[0],h[1],f[0],f[1])}}else{"spline"===a&&(i=r(i,n)),t.moveTo(i[0][0],i[0][1]);for(var u=1,p=i.length;u<p;u++)t.lineTo(i[u][0],i[u][1])}n&&t.closePath()}}var r=n(205),o=n(206);e.buildPath=i},function(t,e,n){function i(t,e,n,i,r,o,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*r+e}function r(t,e){for(var n=t.length,r=[],o=0,s=1;s<n;s++)o+=a(t[s-1],t[s]);var l=o/2;l=l<n?n:l;for(var s=0;s<l;s++){var u,c,h,f=s/(l-1)*(e?n:n-1),p=Math.floor(f),d=f-p,g=t[p%n];e?(u=t[(p-1+n)%n],c=t[(p+1)%n],h=t[(p+2)%n]):(u=t[0===p?p:p-1],c=t[p>n-2?n-1:p+1],h=t[p>n-3?n-1:p+2]);var m=d*d,v=d*m;r.push([i(u[0],g[0],c[0],h[0],d,m,v),i(u[1],g[1],c[1],h[1],d,m,v)])}return r}var o=n(138),a=o.distance;t.exports=r},function(t,e,n){function i(t,e,n,i){var r,f,p,d,g=[],m=[],v=[],y=[];if(i){p=[1/0,1/0],d=[-(1/0),-(1/0)];for(var _=0,x=t.length;_<x;_++)o(p,p,t[_]),a(d,d,t[_]);o(p,p,i[0]),a(d,d,i[1])}for(var _=0,x=t.length;_<x;_++){var w=t[_];if(n)r=t[_?_-1:x-1],f=t[(_+1)%x];else{if(0===_||_===x-1){g.push(c(t[_]));continue}r=t[_-1],f=t[_+1]}h(m,f,r),s(m,m,e);var b=l(w,r),C=l(w,f),S=b+C;0!==S&&(b/=S,C/=S),s(v,m,-b),s(y,m,C);var M=u([],w,v),E=u([],w,y);i&&(a(M,M,p),o(M,M,d),a(E,E,p),o(E,E,d)),g.push(M),g.push(E)}return n&&g.push(g.shift()),g}var r=n(138),o=r.min,a=r.max,s=r.scale,l=r.distance,u=r.add,c=r.clone,h=r.sub;t.exports=i},function(t,e,n){var i=n(186),r=n(204),o=i.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){r.buildPath(t,e,!1)}});t.exports=o},function(t,e,n){var i=n(186),r=n(173),o=n(209),a=o.subPixelOptimizeRect,s={},l=i.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n,i,o,l;this.subPixelOptimize?(a(s,e,this.style),n=s.x,i=s.y,o=s.width,l=s.height,s.r=e.r,e=s):(n=e.x,i=e.y,o=e.width,l=e.height),e.r?r.buildPath(t,e):t.rect(n,i,o,l),t.closePath()}});t.exports=l},function(t,e){function n(t,e,n){if(e){var i=e.x1,a=e.x2,s=e.y1,l=e.y2;t.x1=i,t.x2=a,t.y1=s,t.y2=l;var u=n&&n.lineWidth;u&&(o(2*i)===o(2*a)&&(t.x1=t.x2=r(i,u,!0)),o(2*s)===o(2*l)&&(t.y1=t.y2=r(s,u,!0)))}}function i(t,e,n){if(e){var i=e.x,o=e.y,a=e.width,s=e.height;t.x=i,t.y=o,t.width=a,t.height=s;var l=n&&n.lineWidth;l&&(t.x=r(i,l,!0),t.y=r(o,l,!0),t.width=Math.max(r(i+a,l,!1)-t.x,0===a?0:1),t.height=Math.max(r(o+s,l,!1)-t.y,0===s?0:1))}}function r(t,e,n){if(!e)return t;var i=o(2*t);return(i+o(e))%2===0?i/2:(i+(n?1:-1))/2}var o=Math.round;e.subPixelOptimizeLine=n,e.subPixelOptimizeRect=i,e.subPixelOptimize=r},function(t,e,n){var i=n(186),r=n(209),o=r.subPixelOptimizeLine,a={},s=i.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n,i,r,s;this.subPixelOptimize?(o(a,e,this.style),n=a.x1,i=a.y1,r=a.x2,s=a.y2):(n=e.x1,i=e.y1,r=e.x2,s=e.y2);var l=e.percent;0!==l&&(t.moveTo(n,i),l<1&&(r=n*(1-l)+r*l,s=i*(1-l)+s*l),t.lineTo(r,s))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});t.exports=s},function(t,e,n){function i(t,e,n){var i=t.cpx2,r=t.cpy2;return null===i||null===r?[(n?f:c)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?f:c)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?h:u)(t.x1,t.cpx1,t.x2,e),(n?h:u)(t.y1,t.cpy1,t.y2,e)]}var r=n(186),o=n(138),a=n(188),s=a.quadraticSubdivide,l=a.cubicSubdivide,u=a.quadraticAt,c=a.cubicAt,h=a.quadraticDerivativeAt,f=a.cubicDerivativeAt,p=[],d=r.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=e.cpx1,u=e.cpy1,c=e.cpx2,h=e.cpy2,f=e.percent;0!==f&&(t.moveTo(n,i),null==c||null==h?(f<1&&(s(n,a,r,f,p),a=p[1],r=p[2],s(i,u,o,f,p),u=p[1],o=p[2]),t.quadraticCurveTo(a,u,r,o)):(f<1&&(l(n,a,c,r,f,p),a=p[1],c=p[2],r=p[3],l(i,u,h,o,f,p),u=p[1],h=p[2],o=p[3]),t.bezierCurveTo(a,u,c,h,r,o)))},pointAt:function(t){return i(this.shape,t,!1)},tangentAt:function(t){var e=i(this.shape,t,!0);return o.normalize(e,e)}});t.exports=d},function(t,e,n){var i=n(186),r=i.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(o),u=Math.sin(o);t.moveTo(l*r+n,u*r+i),t.arc(n,i,r,o,a,!s)}});t.exports=r},function(t,e,n){var i=n(186),r=i.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},buildPath:function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),i.prototype.getBoundingRect.call(this)}});t.exports=r},function(t,e,n){var i=n(136),r=n(215),o=function(t,e,n,i,o,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=a||!1,r.call(this,o)};o.prototype={constructor:o},i.inherits(o,r);var a=o;t.exports=a},function(t,e){var n=function(t){this.colorStops=t||[]};n.prototype={constructor:n,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var i=n;t.exports=i},function(t,e,n){var i=n(136),r=n(215),o=function(t,e,n,i,o){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=o||!1,r.call(this,i)};o.prototype={constructor:o},i.inherits(o,r);var a=o;t.exports=a},function(t,e,n){function i(t){a.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}var r=n(136),o=r.inherits,a=n(168),s=n(158);i.prototype.incremental=!0,i.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},i.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},i.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},i.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(var e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},i.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this,e.update(),e.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},i.prototype.brush=function(t,e){for(var n=this._cursor;n<this._displayables.length;n++){var i=this._displayables[n];i.beforeBrush&&i.beforeBrush(t),i.brush(t,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(t)}this._cursor=n;for(var n=0;n<this._temporaryDisplayables.length;n++){var i=this._temporaryDisplayables[n];i.beforeBrush&&i.beforeBrush(t),i.brush(t,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var l=[];i.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new s(1/0,1/0,-(1/0),-(1/0)),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(l)),t.union(i)}this._rect=t}return this._rect},i.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();if(i.contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++){var o=this._displayables[r];if(o.contain(t,e))return!0}return!1},o(i,a);var u=i;t.exports=u},function(t,e,n){var i=n(181),r=i([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),o={getItemStyle:function(t,e){var n=r(this,t,e),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}};t.exports=o},function(t,e,n){function i(t){var e=[];return r.each(g.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])}),e=r.map(e,function(t){return u(t).main}),"dataset"!==t&&r.indexOf(e,"dataset")<=0&&e.unshift("dataset"),e}var r=n(136),o=n(178),a=n(220),s=n(179),l=s.enableClassManagement,u=s.parseClassType,c=n(177),h=c.makeInner,f=n(221),p=n(224),d=h(),g=o.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,i){o.call(this,t,e,n,i),this.uid=a.getUID("ec_cpt_model")},init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?f.getLayoutParams(t):{},o=e.getTheme();r.merge(t,o.get(this.mainType)),r.merge(t,this.getDefaultOption()),n&&f.mergeLayoutParam(t,i,n)},mergeOption:function(t,e){r.merge(this.option,t,!0);var n=this.layoutMode;n&&f.mergeLayoutParam(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=d(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var o={},a=e.length-1;a>=0;a--)o=r.merge(o,e[a],!0);t.defaultOption=o}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});l(g,{registerWhenExtend:!0}),a.enableSubTypeDefaulter(g),a.enableTopologicalTravel(g,i),r.mixin(g,p);var m=g;t.exports=m},function(t,e,n){function i(t){return[t||"",u++,Math.random().toFixed(5)].join("_")}function r(t){var e={};return t.registerSubTypeDefaulter=function(t,n){t=l(t),e[t.main]=n},t.determineSubType=function(n,i){var r=i.type;if(!r){var o=l(n).main;t.hasSubTypes(n)&&e[o]&&(r=e[o](i))}return r},t}function o(t,e){function n(t){var n={},o=[];return a.each(t,function(s){var l=i(n,s),u=l.originalDeps=e(s),c=r(u,t);l.entryCount=c.length,0===l.entryCount&&o.push(s),a.each(c,function(t){a.indexOf(l.predecessor,t)<0&&l.predecessor.push(t);var e=i(n,t);a.indexOf(e.successor,t)<0&&e.successor.push(s)})}),{graph:n,noEntryList:o}}function i(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}function r(t,e){var n=[];return a.each(t,function(t){a.indexOf(e,t)>=0&&n.push(t)}),n}t.topologicalTravel=function(t,e,i,r){function o(t){u[t].entryCount--,0===u[t].entryCount&&c.push(t)}function s(t){h[t]=!0,o(t)}if(t.length){var l=n(e),u=l.graph,c=l.noEntryList,h={};for(a.each(t,function(t){h[t]=!0});c.length;){var f=c.pop(),p=u[f],d=!!h[f];d&&(i.call(r,f,p.originalDeps.slice()),delete h[f]),a.each(p.successor,d?s:o)}a.each(h,function(){throw new Error("Circle dependency may exists")})}}}var a=n(136),s=n(179),l=s.parseClassType,u=0;e.getUID=i,e.enableSubTypeDefaulter=r,e.enableTopologicalTravel=o},function(t,e,n){function i(t,e,n,i,r){var o=0,a=0;null==i&&(i=1/0),null==r&&(r=1/0);var s=0;e.eachChild(function(l,u){var c,h,f=l.position,p=l.getBoundingRect(),d=e.childAt(u+1),g=d&&d.getBoundingRect();if("horizontal"===t){var m=p.width+(g?-g.x+p.x:0);c=o+m,c>i||l.newline?(o=0,c=m,a+=s+n,s=p.height):s=Math.max(s,p.height)}else{var v=p.height+(g?-g.y+p.y:0);h=a+v,h>r||l.newline?(o+=s+n,a=0,h=v,s=p.width):s=Math.max(s,p.width)}l.newline||(f[0]=o,f[1]=a,"horizontal"===t?o=c+n:a=h+n)})}function r(t,e,n){var i=e.width,r=e.height,o=d(t.x,i),a=d(t.y,r),s=d(t.x2,i),l=d(t.y2,r);return(isNaN(o)||isNaN(parseFloat(t.x)))&&(o=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=i),(isNaN(a)||isNaN(parseFloat(t.y)))&&(a=0),(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=r),n=g.normalizeCssArray(n||0),{width:Math.max(s-o-n[1]-n[3],0),height:Math.max(l-a-n[0]-n[2],0)}}function o(t,e,n){n=g.normalizeCssArray(n||0);var i=e.width,r=e.height,o=d(t.left,i),a=d(t.top,r),s=d(t.right,i),l=d(t.bottom,r),u=d(t.width,i),c=d(t.height,r),h=n[2]+n[0],p=n[1]+n[3],m=t.aspect;switch(isNaN(u)&&(u=i-s-p-o),isNaN(c)&&(c=r-l-h-a),null!=m&&(isNaN(u)&&isNaN(c)&&(m>i/r?u=.8*i:c=.8*r),isNaN(u)&&(u=m*c),isNaN(c)&&(c=u/m)),isNaN(o)&&(o=i-s-u-p),isNaN(a)&&(a=r-l-c-h),t.left||t.right){case"center":o=i/2-u/2-n[3];break;case"right":o=i-u-p}switch(t.top||t.bottom){case"middle":case"center":a=r/2-c/2-n[0];break;case"bottom":a=r-c-h}o=o||0,a=a||0,isNaN(u)&&(u=i-p-o-(s||0)),isNaN(c)&&(c=r-h-a-(l||0));var v=new f(o+n[3],a+n[0],u,c);return v.margin=n,v}function a(t,e,n,i,r){var a=!r||!r.hv||r.hv[0],s=!r||!r.hv||r.hv[1],l=r&&r.boundingMode||"all";if(a||s){var u;if("raw"===l)u="group"===t.type?new f(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(u=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();u=u.clone(),u.applyTransform(c)}e=o(h.defaults({width:u.width,height:u.height},e),n,i);var p=t.position,d=a?e.x-u.x:0,g=s?e.y-u.y:0;t.attr("position","raw"===l?[d,g]:[p[0]+d,p[1]+g])}}function s(t,e){return null!=t[y[e][0]]||null!=t[y[e][1]]&&null!=t[y[e][2]]}function l(t,e,n){function i(n,i){var a={},l=0,u={},c=0,h=2;if(m(n,function(e){u[e]=t[e]}),m(n,function(t){r(e,t)&&(a[t]=u[t]=e[t]),o(a,t)&&l++,o(u,t)&&c++}),s[i])return o(e,n[1])?u[n[2]]=null:o(e,n[2])&&(u[n[1]]=null),u;if(c!==h&&l){if(l>=h)return a;for(var f=0;f<n.length;f++){var p=n[f];if(!r(a,p)&&r(t,p)){a[p]=t[p];break}}return a}return u}function r(t,e){return t.hasOwnProperty(e)}function o(t,e){return null!=t[e]&&"auto"!==t[e]}function a(t,e,n){m(t,function(t){e[t]=n[t]})}!h.isObject(n)&&(n={});var s=n.ignoreSize;!h.isArray(s)&&(s=[s,s]);var l=i(y[0],0),u=i(y[1],1);a(y[0],t,l),a(y[1],t,u)}function u(t){return c({},t)}function c(t,e){return e&&t&&m(v,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var h=n(136),f=n(158),p=n(222),d=p.parsePercent,g=n(223),m=h.each,v=["left","right","top","bottom","width","height"],y=[["width","left","right"],["height","top","bottom"]],_=i,x=h.curry(i,"vertical"),w=h.curry(i,"horizontal");e.LOCATION_PARAMS=v,e.HV_NAMES=y,e.box=_,e.vbox=x,e.hbox=w,e.getAvailableSize=r,e.getLayoutRect=o,e.positionElement=a,e.sizeCalculable=s,e.mergeLayoutParam=l,e.getLayoutParams=u,e.copyLayoutParams=c},function(t,e,n){function i(t){return t.replace(/^\s+|\s+$/g,"")}function r(t,e,n,i){var r=e[1]-e[0],o=n[1]-n[0];if(0===r)return 0===o?n[0]:(n[0]+n[1])/2;if(i)if(r>0){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/r*o+n[0]}function o(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?i(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function a(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function s(t){return t.sort(function(t,e){return t-e}),t}function l(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}function u(t){var e=t.toString(),n=e.indexOf("e");if(n>0){var i=+e.slice(n+1);return i<0?-i:0}var r=e.indexOf(".");return r<0?0:e.length-1-r}function c(t,e){var n=Math.log,i=Math.LN10,r=Math.floor(n(t[1]-t[0])/i),o=Math.round(n(Math.abs(e[1]-e[0]))/i),a=Math.min(Math.max(-r+o,0),20);return isFinite(a)?a:20}function h(t,e,n){if(!t[e])return 0;var i=w.reduce(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===i)return 0;for(var r=Math.pow(10,n),o=w.map(t,function(t){return(isNaN(t)?0:t)/i*r*100}),a=100*r,s=w.map(o,function(t){return Math.floor(t)}),l=w.reduce(s,function(t,e){return t+e},0),u=w.map(o,function(t,e){return t-s[e]});l<a;){for(var c=Number.NEGATIVE_INFINITY,h=null,f=0,p=u.length;f<p;++f)u[f]>c&&(c=u[f],h=f);++s[h],u[h]=0,++l}return s[e]/r}function f(t){var e=2*Math.PI;return(t%e+e)%e}function p(t){return t>-b&&t<b}function d(t){if(t instanceof Date)return t;if("string"==typeof t){var e=S.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))}function g(t){return Math.pow(10,m(t))}function m(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function v(t,e){var n,i=m(t),r=Math.pow(10,i),o=t/r;return n=e?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10,t=n*r,i>=-20?+t.toFixed(i<0?-i:0):t}function y(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r}function _(t){function e(t,n,i){return t.interval[i]<n.interval[i]||t.interval[i]===n.interval[i]&&(t.close[i]-n.close[i]===(i?-1:1)||!i&&e(t,n,1))}t.sort(function(t,n){return e(t,n,0)?-1:1});for(var n=-(1/0),i=1,r=0;r<t.length;){for(var o=t[r].interval,a=t[r].close,s=0;s<2;s++)o[s]<=n&&(o[s]=n,a[s]=s?1:1-i),n=o[s],i=a[s];o[0]===o[1]&&a[0]*a[1]!==1?t.splice(r,1):r++}return t}function x(t){return t-parseFloat(t)>=0}var w=n(136),b=1e-4,C=9007199254740991,S=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;e.linearMap=r,e.parsePercent=o,e.round=a,e.asc=s,e.getPrecision=l,e.getPrecisionSafe=u,e.getPixelPrecision=c,e.getPercentWithPrecision=h,e.MAX_SAFE_INTEGER=C,e.remRadian=f,e.isRadianAroundZero=p,e.parseDate=d,e.quantity=g,e.quantityExponent=m,e.nice=v,e.quantile=y,e.reformIntervals=_,e.isNumeric=x},function(t,e,n){function i(t){return isNaN(t)?"-":(t=(t+"").split("."),t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:""))}function r(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}function o(t){return null==t?"":(t+"").replace(_,function(t,e){return x[e]})}function a(t,e,n){g.isArray(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],a=0;a<r.length;a++){var s=w[a];t=t.replace(b(s),b(s,0))}for(var l=0;l<i;l++)for(var u=0;u<r.length;u++){var c=e[l][r[u]];t=t.replace(b(w[u],l),n?o(c):c)}return t}function s(t,e,n){return g.each(e,function(e,i){t=t.replace("{"+i+"}",n?o(e):e)}),t}function l(t,e){t=g.isString(t)?{color:t,extraCssText:e}:t||{};var n=t.color,i=t.type,e=t.extraCssText,r=t.renderMode||"html",a=t.markerId||"X";return n?"html"===r?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+o(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+o(n)+";"+(e||"")+'"></span>':{
renderMode:r,content:"{marker"+a+"|}  ",style:{color:n}}:""}function u(t,e){return t+="","0000".substr(0,e-t.length)+t}function c(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=v.parseDate(e),r=n?"UTC":"",o=i["get"+r+"FullYear"](),a=i["get"+r+"Month"]()+1,s=i["get"+r+"Date"](),l=i["get"+r+"Hours"](),c=i["get"+r+"Minutes"](),h=i["get"+r+"Seconds"](),f=i["get"+r+"Milliseconds"]();return t=t.replace("MM",u(a,2)).replace("M",a).replace("yyyy",o).replace("yy",o%100).replace("dd",u(s,2)).replace("d",s).replace("hh",u(l,2)).replace("h",l).replace("mm",u(c,2)).replace("m",c).replace("ss",u(h,2)).replace("s",h).replace("SSS",u(f,3))}function h(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}function f(t){return m.getBoundingRect(t.text,t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.textLineHeight,t.rich,t.truncate)}function p(t,e,n,i,r,o,a,s){return m.getBoundingRect(t,e,n,i,r,s,o,a)}function d(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location=t}else window.open(t,e)}var g=n(136),m=n(171),v=n(222),y=g.normalizeCssArray,_=/([&<>"'])/g,x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},w=["a","b","c","d","e","f","g"],b=function(t,e){return"{"+t+(null==e?"":e)+"}"},C=m.truncateText;e.addCommas=i,e.toCamelCase=r,e.normalizeCssArray=y,e.encodeHTML=o,e.formatTpl=a,e.formatTplSimple=s,e.getTooltipMarker=l,e.formatTime=c,e.capitalFirst=h,e.truncateText=C,e.getTextBoundingRect=f,e.getTextRect=p,e.windowOpen=d},function(t,e){var n={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}};t.exports=n},function(t,e){var n="";"undefined"!=typeof navigator&&(n=navigator.platform||"");var i={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:n.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};t.exports=i},function(t,e,n){function i(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}var r=n(177),o=r.makeInner,a=r.normalizeToArray,s=o(),l={clearColorPalette:function(){s(this).colorIdx=0,s(this).colorNameMap={}},getColorFromPalette:function(t,e,n){e=e||this;var r=s(e),o=r.colorIdx||0,l=r.colorNameMap=r.colorNameMap||{};if(l.hasOwnProperty(t))return l[t];var u=a(this.get("color",!0)),c=this.get("colorLayer",!0),h=null!=n&&c?i(c,n):u;if(h=h||u,h&&h.length){var f=h[o];return t&&(l[t]=f),r.colorIdx=(o+1)%h.length,f}}};t.exports=l},function(t,e,n){function i(t){var e=t.option.source,n=R;if(I(e))n=F;else if(S(e)){0===e.length&&(n=k);for(var i=0,r=e.length;i<r;i++){var o=e[i];if(null!=o){if(S(o)){n=k;break}if(E(o)){n=N;break}}}}else if(E(e)){for(var a in e)if(e.hasOwnProperty(a)&&T(e[a])){n=O;break}}else if(null!=e)throw new Error("Invalid data");V(t).sourceFormat=n}function r(t){return V(t).source}function o(t){V(t).datasetMap=w()}function a(t){var e=t.option,n=e.data,i=I(n)?F:A,r=!1,o=e.seriesLayoutBy,a=e.sourceHeader,l=e.dimensions,u=p(t);if(u){var c=u.option;n=c.source,i=V(u).sourceFormat,r=!0,o=o||c.seriesLayoutBy,null==a&&(a=c.sourceHeader),l=l||c.dimensions}var h=s(n,i,o,a,l);V(t).source=new L({data:n,fromDataset:r,seriesLayoutBy:o,sourceFormat:i,dimensionsDefine:h.dimensionsDefine,startIndex:h.startIndex,dimensionsDetectCount:h.dimensionsDetectCount,encodeDefine:e.encode})}function s(t,e,n,i,r){if(!t)return{dimensionsDefine:l(r)};var o,a;if(e===k)"auto"===i||null==i?u(function(t){null!=t&&"-"!==t&&(M(t)?null==a&&(a=1):a=0)},n,t,10):a=i?1:0,r||1!==a||(r=[],u(function(t,e){r[e]=null!=t?t:""},n,t)),o=r?r.length:n===z?t.length:t[0]?t[0].length:null;else if(e===N)r||(r=c(t));else if(e===O)r||(r=[],b(t,function(t,e){r.push(e)}));else if(e===A){var s=_(t[0]);o=S(s)&&s.length||1}return{startIndex:a,dimensionsDefine:l(r),dimensionsDetectCount:o}}function l(t){if(t){var e=w();return C(t,function(t,n){if(t=P({},E(t)?t:{name:t}),null==t.name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var i=e.get(t.name);return i?t.name+="-"+i.count++:e.set(t.name,{count:1}),t})}}function u(t,e,n,i){if(null==i&&(i=1/0),e===z)for(var r=0;r<n.length&&r<i;r++)t(n[r]?n[r][0]:null,r);else for(var o=n[0]||[],r=0;r<o.length&&r<i;r++)t(o[r],r)}function c(t){for(var e,n=0;n<t.length&&!(e=t[n++]););if(e){var i=[];return b(e,function(t,e){i.push(e)}),i}}function h(t,e,n){function i(t,e,n){for(var i=0;i<n;i++)t.push(e+i)}function r(t){var e=t.dimsDef;return e?e.length:1}var o={},a=p(e);if(!a||!t)return o;var s,l,u=[],c=[],h=e.ecModel,f=V(h).datasetMap,d=a.uid+"_"+n.seriesLayoutBy;t=t.slice(),b(t,function(e,n){!E(e)&&(t[n]={name:e}),"ordinal"===e.type&&null==s&&(s=n,l=r(t[n])),o[e.name]=[]});var g=f.get(d)||f.set(d,{categoryWayDim:l,valueWayDim:0});return b(t,function(t,e){var n=t.name,a=r(t);if(null==s){var l=g.valueWayDim;i(o[n],l,a),i(c,l,a),g.valueWayDim+=a}else if(s===e)i(o[n],0,a),i(u,0,a);else{var l=g.categoryWayDim;i(o[n],l,a),i(c,l,a),g.categoryWayDim+=a}}),u.length&&(o.itemName=u),c.length&&(o.seriesName=c),o}function f(t,e,n){var i={},r=p(t);if(!r)return i;var o,a=e.sourceFormat,s=e.dimensionsDefine;a!==N&&a!==O||b(s,function(t,e){"name"===(E(t)?t.name:t)&&(o=e)});var l=function(){function t(t){return null!=t.v&&null!=t.n}for(var i={},r={},l=[],u=0,c=Math.min(5,n);u<c;u++){var h=g(e.data,a,e.seriesLayoutBy,s,e.startIndex,u);l.push(h);var f=h===B.Not;if(f&&null==i.v&&u!==o&&(i.v=u),(null==i.n||i.n===i.v||!f&&l[i.n]===B.Not)&&(i.n=u),t(i)&&l[i.n]!==B.Not)return i;f||(h===B.Might&&null==r.v&&u!==o&&(r.v=u),null!=r.n&&r.n!==r.v||(r.n=u))}return t(i)?i:t(r)?r:null}();if(l){i.value=l.v;var u=null!=o?o:l.n;i.itemName=[u],i.seriesName=[u]}return i}function p(t){var e=t.option,n=e.data;if(!n)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}function d(t,e){return g(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function g(t,e,n,i,r,o){function a(t){var e=M(t);return null!=t&&isFinite(t)&&""!==t?e?B.Might:B.Not:e&&"-"!==t?B.Must:void 0}var s,l=5;if(I(t))return B.Not;var u,c;if(i){var h=i[o];E(h)?(u=h.name,c=h.type):M(h)&&(u=h)}if(null!=c)return"ordinal"===c?B.Must:B.Not;if(e===k)if(n===z){for(var f=t[o],p=0;p<(f||[]).length&&p<l;p++)if(null!=(s=a(f[r+p])))return s}else for(var p=0;p<t.length&&p<l;p++){var d=t[r+p];if(d&&null!=(s=a(d[o])))return s}else if(e===N){if(!u)return B.Not;for(var p=0;p<t.length&&p<l;p++){var g=t[p];if(g&&null!=(s=a(g[u])))return s}}else if(e===O){if(!u)return B.Not;var f=t[u];if(!f||I(f))return B.Not;for(var p=0;p<f.length&&p<l;p++)if(null!=(s=a(f[p])))return s}else if(e===A)for(var p=0;p<t.length&&p<l;p++){var g=t[p],m=_(g);if(!S(m))return B.Not;if(null!=(s=a(m[o])))return s}return B.Not}var m=n(132),v=(m.__DEV__,n(177)),y=v.makeInner,_=v.getDataItemValue,x=n(136),w=x.createHashMap,b=x.each,C=x.map,S=x.isArray,M=x.isString,E=x.isObject,I=x.isTypedArray,T=x.isArrayLike,P=x.extend,L=(x.assert,n(228)),D=n(229),A=D.SOURCE_FORMAT_ORIGINAL,k=D.SOURCE_FORMAT_ARRAY_ROWS,N=D.SOURCE_FORMAT_OBJECT_ROWS,O=D.SOURCE_FORMAT_KEYED_COLUMNS,R=D.SOURCE_FORMAT_UNKNOWN,F=D.SOURCE_FORMAT_TYPED_ARRAY,z=D.SERIES_LAYOUT_BY_ROW,B={Must:1,Might:2,Not:3},V=y();e.BE_ORDINAL=B,e.detectSourceFormat=i,e.getSource=r,e.resetSourceDefaulter=o,e.prepareSource=a,e.makeSeriesEncodeForAxisCoordSys=h,e.makeSeriesEncodeForNameBased=f,e.guessOrdinal=d},function(t,e,n){function i(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===d?{}:[]),this.sourceFormat=t.sourceFormat||f,this.seriesLayoutBy=t.seriesLayoutBy||h,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&o(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}var r=n(136),o=r.createHashMap,a=r.isTypedArray,s=n(179),l=s.enableClassCheck,u=n(229),c=u.SOURCE_FORMAT_ORIGINAL,h=u.SERIES_LAYOUT_BY_COLUMN,f=u.SOURCE_FORMAT_UNKNOWN,p=u.SOURCE_FORMAT_TYPED_ARRAY,d=u.SOURCE_FORMAT_KEYED_COLUMNS;i.seriesDataToSource=function(t){return new i({data:t,sourceFormat:a(t)?p:c,fromDataset:!1})},l(i);var g=i;t.exports=g},function(t,e){var n="original",i="arrayRows",r="objectRows",o="keyedColumns",a="unknown",s="typedArray",l="column",u="row";e.SOURCE_FORMAT_ORIGINAL=n,e.SOURCE_FORMAT_ARRAY_ROWS=i,e.SOURCE_FORMAT_OBJECT_ROWS=r,e.SOURCE_FORMAT_KEYED_COLUMNS=o,e.SOURCE_FORMAT_UNKNOWN=a,e.SOURCE_FORMAT_TYPED_ARRAY=s,e.SERIES_LAYOUT_BY_COLUMN=l,e.SERIES_LAYOUT_BY_ROW=u},function(t,e,n){function i(t){r.each(o,function(e){this[e]=r.bind(t[e],t)},this)}var r=n(136),o=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"],a=i;t.exports=a},function(t,e,n){function i(){this._coordinateSystems=[]}var r=n(136),o={};i.prototype={constructor:i,create:function(t,e){var n=[];r.each(o,function(i,r){var o=i.create(t,e);n=n.concat(o||[])}),this._coordinateSystems=n},update:function(t,e){r.each(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},i.register=function(t,e){o[t]=e},i.get=function(t){return o[t]};var a=i;t.exports=a},function(t,e,n){function i(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function r(t,e,n){var i,r,o=[],a=[],s=t.timeline;if(t.baseOption&&(r=t.baseOption),(s||t.options)&&(r=r||{},o=(t.options||[]).slice()),t.media){r=r||{};var l=t.media;f(l,function(t){t&&t.option&&(t.query?a.push(t):i||(i=t))})}return r||(r=t),r.timeline||(r.timeline=s),f([r].concat(o).concat(u.map(a,function(t){return t.option})),function(t){f(e,function(e){e(t,n)})}),{baseOption:r,timelineOptions:o,mediaDefault:i,mediaList:a}}function o(t,e,n){var i={width:e,height:n,aspectratio:e/n},r=!0;return u.each(t,function(t,e){var n=e.match(m);if(n&&n[1]&&n[2]){var o=n[1],s=n[2].toLowerCase();a(i[s],t,o)||(r=!1)}}),r}function a(t,e,n){return"min"===n?t>=e:"max"===n?t<=e:t===e}function s(t,e){return t.join(",")===e.join(",")}function l(t,e){e=e||{},f(e,function(e,n){if(null!=e){var i=t[n];if(h.hasClass(n)){e=c.normalizeToArray(e),i=c.normalizeToArray(i);var r=c.mappingToExists(i,e);t[n]=d(r,function(t){return t.option&&t.exist?g(t.exist,t.option,!0):t.exist||t.option})}else t[n]=g(i,e,!0)}})}var u=n(136),c=n(177),h=n(219),f=u.each,p=u.clone,d=u.map,g=u.merge,m=/^(min|max)?(.+)$/;i.prototype={constructor:i,setOption:function(t,e){t&&u.each(c.normalizeToArray(t.series),function(t){t&&t.data&&u.isTypedArray(t.data)&&u.setAsPrimitive(t.data)}),t=p(t);var n=this._optionBackup,i=r.call(this,t,e,!n);this._newBaseOption=i.baseOption,n?(l(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=d(e.timelineOptions,p),this._mediaList=d(e.mediaList,p),this._mediaDefault=p(e.mediaDefault),this._currentMediaIndices=[],p(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=p(n[i.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,a=[],l=[];if(!i.length&&!r)return l;for(var u=0,c=i.length;u<c;u++)o(i[u].query,e,n)&&a.push(u);return!a.length&&r&&(a=[-1]),a.length&&!s(a,this._currentMediaIndices)&&(l=d(a,function(t){return p(t===-1?r.option:i[t].option)})),this._currentMediaIndices=a,l}};var v=i;t.exports=v},function(t,e,n){function i(t,e){e=e.split(",");for(var n=t,i=0;i<e.length&&(n=n&&n[e[i]],null!=n);i++);return n}function r(t,e,n,i){e=e.split(",");for(var r,o=t,a=0;a<e.length-1;a++)r=e[a],null==o[r]&&(o[r]={}),o=o[r];(i||null==o[e[a]])&&(o[e[a]]=n)}function o(t){l(d,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}function a(t,e){h(t,e),t.series=p(t.series),l(t.series,function(t){if(c(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e)null!=t.clockWise&&(t.clockwise=t.clockWise);else if("gauge"===e){var n=i(t,"pointer.color");null!=n&&r(t,"itemStyle.color",n)}o(t)}}),t.dataRange&&(t.visualMap=t.dataRange),l(g,function(e){var n=t[e];n&&(u(n)||(n=[n]),l(n,function(t){o(t)}))})}var s=n(136),l=s.each,u=s.isArray,c=s.isObject,h=n(234),f=n(177),p=f.normalizeToArray,d=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],g=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];t.exports=a},function(t,e,n){function i(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=m.length;n<i;n++){var r=m[n],o=e.normal,a=e.emphasis;o&&o[r]&&(t[r]=t[r]||{},t[r].normal?f.merge(t[r].normal,o[r]):t[r].normal=o[r],o[r]=null),a&&a[r]&&(t[r]=t[r]||{},t[r].emphasis?f.merge(t[r].emphasis,a[r]):t[r].emphasis=a[r],a[r]=null)}}function r(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,r=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,f.defaults(t[e],i)):t[e]=i),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r)}}function o(t){r(t,"itemStyle"),r(t,"lineStyle"),r(t,"areaStyle"),r(t,"label"),r(t,"labelLine"),r(t,"upperLabel"),r(t,"edgeLabel")}function a(t,e){var n=g(t)&&t[e],i=g(n)&&n.textStyle;if(i)for(var r=0,o=p.TEXT_STYLE_OPTIONS.length;r<o;r++){var e=p.TEXT_STYLE_OPTIONS[r];i.hasOwnProperty(e)&&(n[e]=i[e])}}function s(t){t&&(o(t),a(t,"label"),t.emphasis&&a(t.emphasis,"label"))}function l(t){if(g(t)){i(t),o(t),a(t,"label"),a(t,"upperLabel"),a(t,"edgeLabel"),t.emphasis&&(a(t.emphasis,"label"),a(t.emphasis,"upperLabel"),a(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(i(e),s(e));var n=t.markLine;n&&(i(n),s(n));var l=t.markArea;l&&s(l);var u=t.data;if("graph"===t.type){u=u||t.nodes;var c=t.links||t.edges;if(c&&!f.isTypedArray(c))for(var h=0;h<c.length;h++)s(c[h]);f.each(t.categories,function(t){o(t)})}if(u&&!f.isTypedArray(u))for(var h=0;h<u.length;h++)s(u[h]);var e=t.markPoint;if(e&&e.data)for(var p=e.data,h=0;h<p.length;h++)s(p[h]);var n=t.markLine;if(n&&n.data)for(var d=n.data,h=0;h<d.length;h++)f.isArray(d[h])?(s(d[h][0]),s(d[h][1])):s(d[h]);"gauge"===t.type?(a(t,"axisLabel"),a(t,"title"),a(t,"detail")):"treemap"===t.type?(r(t.breadcrumb,"itemStyle"),f.each(t.levels,function(t){o(t)})):"tree"===t.type&&o(t.leaves)}}function u(t){return f.isArray(t)?t:t?[t]:[]}function c(t){return(f.isArray(t)?t[0]:t)||{}}function h(t,e){d(u(t.series),function(t){g(t)&&l(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),d(n,function(e){d(u(t[e]),function(t){t&&(a(t,"axisLabel"),a(t.axisPointer,"label"))})}),d(u(t.parallel),function(t){var e=t&&t.parallelAxisDefault;a(e,"axisLabel"),a(e&&e.axisPointer,"label")}),d(u(t.calendar),function(t){r(t,"itemStyle"),a(t,"dayLabel"),a(t,"monthLabel"),a(t,"yearLabel")}),d(u(t.radar),function(t){a(t,"name")}),d(u(t.geo),function(t){g(t)&&(s(t),d(u(t.regions),function(t){s(t)}))}),d(u(t.timeline),function(t){s(t),r(t,"label"),r(t,"itemStyle"),r(t,"controlStyle",!0);var e=t.data;f.isArray(e)&&f.each(e,function(t){f.isObject(t)&&(r(t,"label"),r(t,"itemStyle"))})}),d(u(t.toolbox),function(t){r(t,"iconStyle"),d(t.feature,function(t){r(t,"iconStyle")})}),a(c(t.axisPointer),"label"),a(c(t.tooltip).axisPointer,"label")}var f=n(136),p=n(177),d=f.each,g=f.isObject,m=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];t.exports=h},function(t,e,n){function i(t){var e=a();t.eachSeries(function(t){var n=t.get("stack");if(n){var i=e.get(n)||e.set(n,[]),r=t.getData(),o={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!o.stackedDimension||!o.isStackedByIndex&&!o.stackedByDimension)return;i.length&&r.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),e.each(r)}function r(t){s(t,function(e,n){var i=[],r=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex,l=a.map(o,function(o,l,u){var c=a.get(e.stackedDimension,u);if(isNaN(c))return r;var h,f;s?f=a.getRawIndex(u):h=a.get(e.stackedByDimension,u);for(var p=NaN,d=n-1;d>=0;d--){var g=t[d];if(s||(f=g.data.rawIndexOf(g.stackedByDimension,h)),f>=0){var m=g.data.getByRawIndex(g.stackResultDimension,f);if(c>=0&&m>0||c<=0&&m<0){c+=m,p=m;break}}}return i[0]=c,i[1]=p,i});a.hostModel.setData(l),e.data=l})}var o=n(136),a=o.createHashMap,s=o.each;t.exports=i},function(t,e,n){function i(t){var e=t.name;_.isNameSpecified(t)||(t.name=r(t)||e)}function r(t){var e=t.getRawData(),n=e.mapDimension("seriesName",!0),i=[];return f.each(n,function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)}),i.join(" ")}function o(t){return t.model.getRawData().count()}function a(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),s}function s(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function l(t,e){f.each(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,f.curry(u,e))})}function u(t){var e=c(t);e&&e.setOutputEnd(this.count())}function c(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(t.uid))}return i}}var h=n(132),f=(h.__DEV__,n(136)),p=n(135),d=n(223),g=d.formatTime,m=d.encodeHTML,v=d.addCommas,y=d.getTooltipMarker,_=n(177),x=n(219),w=n(226),b=n(237),C=n(221),S=C.getLayoutParams,M=C.mergeLayoutParam,E=n(239),I=E.createTask,T=n(227),P=T.prepareSource,L=T.getSource,D=n(238),A=D.retrieveRawValue,k=_.makeInner(),N=x.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,n,r){this.seriesIndex=this.componentIndex,this.dataTask=I({count:o,reset:a}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),P(this);var s=this.getInitialData(t,n);l(s,this),this.dataTask.context.data=s,k(this).dataBeforeProcessed=s,i(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?S(t):{},r=this.subType;x.hasClass(r)&&(r+="Series"),f.merge(t,e.getTheme().get(this.subType)),f.merge(t,this.getDefaultOption()),_.defaultEmphasis(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&M(t,i,n)},mergeOption:function(t,e){t=f.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&M(this.option,t,n),P(this);var r=this.getInitialData(t,e);l(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,k(this).dataBeforeProcessed=r,i(this)},fillDataTextStyle:function(t){if(t&&!f.isTypedArray(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&_.defaultEmphasis(t[n],"label",e)},getInitialData:function(){},appendData:function(t){var e=this.getRawData();e.appendData(t.data)},getData:function(t){var e=c(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return k(this).data},setData:function(t){var e=c(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}k(this).data=t},getSource:function(){return L(this)},getRawData:function(){return k(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n,i){function r(n){function r(t,n){var r=h.getDimensionInfo(n);if(r&&r.otherDims.tooltip!==!1){var f=r.type,p="sub"+a.seriesIndex+"at"+c,d=y({color:b,type:"subItem",renderMode:i,markerId:p}),_="string"==typeof d?d:d.content,x=(o?_+m(r.displayName||"-")+": ":"")+m("ordinal"===f?t+"":"time"===f?e?"":g("yyyy/MM/dd hh:mm:ss",t):v(t));x&&s.push(x),l&&(u[p]=b,++c)}}var o=f.reduce(n,function(t,e,n){var i=h.getDimensionInfo(n);return t|=i&&i.tooltip!==!1&&null!=i.displayName},0),s=[];p.length?f.each(p,function(e){r(A(h,t,e),e)}):f.each(n,r);var d=o?l?"\n":"<br/>":"",_=d+s.join(d||", ");return{renderMode:i,content:_,style:u}}function o(t){return{renderMode:i,content:m(v(t)),style:u}}var a=this;i=i||"html";var s="html"===i?"<br/>":"\n",l="richText"===i,u={},c=0,h=this.getData(),p=h.mapDimension("defaultedTooltip",!0),d=p.length,x=this.getRawValue(t),w=f.isArray(x),b=h.getItemVisual(t,"color");f.isObject(b)&&b.colorStops&&(b=(b.colorStops[0]||{}).color),b=b||"transparent";var C=d>1||w&&!d?r(x):o(d?A(h,t,p[0]):w?x[0]:x),S=C.content,M=a.seriesIndex+"at"+c,E=y({color:b,type:"item",renderMode:i,markerId:M});u[M]=b,++c;var I=h.getName(t),T=this.name;_.isNameSpecified(this)||(T=""),T=T?m(T)+(e?": ":s):"";var P="string"==typeof E?E:E.content,L=e?P+T+S:T+P+(I?m(I)+": "+S:S);return{html:L,markers:u}},isAnimationEnabled:function(){if(p.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var i=this.ecModel,r=w.getColorFromPalette.call(this,t,e,n);return r||(r=i.getColorFromPalette(t,e,n)),r},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});f.mixin(N,b),f.mixin(N,w);var O=N;t.exports=O},function(t,e,n){var i=n(238),r=i.retrieveRawValue,o=n(223),a=o.getTooltipMarker,s=o.formatTpl,l=n(177),u=l.getTooltipRenderMode,c=/\{@(.+?)\}/g,h={getDataParams:function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),o=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"color"),c=n.getItemVisual(t,"borderColor"),h=this.ecModel.getComponent("tooltip"),f=h&&h.get("renderMode"),p=u(f),d=this.mainType,g="series"===d,m=n.userOutput;return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:g?this.subType:null,seriesIndex:this.seriesIndex,seriesId:g?this.id:null,seriesName:g?this.name:null,name:o,dataIndex:r,data:s,dataType:e,value:i,color:l,borderColor:c,dimensionNames:m?m.dimensionNames:null,encode:m?m.encode:null,marker:a({color:l,renderMode:p}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,i,o){e=e||"normal";var a=this.getData(n),l=a.getItemModel(t),u=this.getDataParams(t,n);null!=i&&u.value instanceof Array&&(u.value=u.value[i]);var h=l.get("normal"===e?[o||"label","formatter"]:[e,o||"label","formatter"]);if("function"==typeof h)return u.status=e,u.dimensionIndex=i,h(u);if("string"==typeof h){var f=s(h,u);return f.replace(c,function(e,n){var i=n.length;return"["===n.charAt(0)&&"]"===n.charAt(i-1)&&(n=+n.slice(1,i-1)),r(a,t,n)})}},getRawValue:function(t,e){return r(this.getData(e),t)},formatTooltip:function(){}};t.exports=h},function(t,e,n){function i(t,e){b.isInstance(t)||(t=b.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,i=t.sourceFormat;i===S&&(this._offset=0,this._dimSize=e,this._data=n);var r=P[i===M?i+"_"+t.seriesLayoutBy:i];d(this,r)}function r(){return this._data.length}function o(t){return this._data[t]}function a(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}function s(t,e,n,i){return null!=n?t[n]:t}function l(t,e,n,i){return u(t[i],this._dimensionInfos[e])}function u(t,e){var n=e&&e.type;if("ordinal"===n){var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}return"time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+w(t)),null==t||""===t?NaN:+t}function c(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var r,o,a=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(n);return s&&(r=s.name,o=s.index),L[a](i,e,o,r)}}}function h(t,e,n){if(t){var i=t.getProvider().getSource().sourceFormat;if(i===E||i===I){var r=t.getRawDataItem(e);return i!==E||m(r)||(r=null),r?r[n]:void 0}}}var f=n(132),p=(f.__DEV__,n(136)),d=(p.isTypedArray,p.extend),g=(p.assert,p.each),m=p.isObject,v=n(177),y=v.getDataItemValue,_=v.isDataItemOption,x=n(222),w=x.parseDate,b=n(228),C=n(229),S=C.SOURCE_FORMAT_TYPED_ARRAY,M=C.SOURCE_FORMAT_ARRAY_ROWS,E=C.SOURCE_FORMAT_ORIGINAL,I=C.SOURCE_FORMAT_OBJECT_ROWS,T=i.prototype;T.pure=!1,T.persistent=!0,T.getSource=function(){return this._source};var P={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:a},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,i=0;i<n.length;i++){var r=n[i];e.push(r?r[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:r,getItem:o,appendData:a},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,e=this._data[t];return e?e.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var r=this._data[n[i].name];e.push(r?r[t]:null)}return e},appendData:function(t){var e=this._data;g(t,function(t,n){for(var i=e[n]||(e[n]=[]),r=0;r<(t||[]).length;r++)i.push(t[r])})}},original:{count:r,getItem:o,appendData:a},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t-=this._offset,e=e||[];for(var n=this._dimSize*t,i=0;i<this._dimSize;i++)e[i]=this._data[n+i];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}},L={arrayRows:s,objectRows:function(t,e,n,i){return null!=n?t[i]:t},keyedColumns:s,original:function(t,e,n,i){var r=y(t);return null!=n&&r instanceof Array?r[n]:r},typedArray:s},D={arrayRows:l,objectRows:function(t,e,n,i){return u(t[e],this._dimensionInfos[e])},keyedColumns:l,original:function(t,e,n,i){var r=t&&(null==t.value?t:t.value);return!this._rawData.pure&&_(t)&&(this.hasItemOption=!0),u(r instanceof Array?r[i]:r,this._dimensionInfos[e])},typedArray:function(t,e,n,i){return t[i]}};e.DefaultDataProvider=i,e.defaultDimValueGetters=D,e.retrieveRawValue=c,e.retrieveRawAttr=h},function(t,e,n){function i(t){return new r(t)}function r(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0,this.context}function o(t,e,n,i,r,o){h.reset(n,i,r,o),t._callingProgress=e,t._callingProgress({start:n,end:i,count:i-n,next:h.next},t.context)}function a(t,e){t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null;var n,i;!e&&t._reset&&(n=t._reset(t.context),n&&n.progress&&(i=n.forceFirstProgress,n=n.progress),l(n)&&!n.length&&(n=null)),t._progress=n,t._modBy=t._modDataCount=null;var r=t._downstream;return r&&r.dirty(),i}var s=n(136),l=(s.assert,s.isArray),u=n(132),c=(u.__DEV__,r.prototype);c.perform=function(t){function e(t){return!(t>=1)&&(t=1),t}var n=this._upstream,i=t&&t.skip;if(this._dirty&&n){var r=this.context;r.data=r.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!i&&(s=this._plan(this.context));var u=e(this._modBy),c=this._modDataCount||0,h=e(t&&t.modBy),f=t&&t.modDataCount||0;u===h&&c===f||(s="reset");var p;(this._dirty||"reset"===s)&&(this._dirty=!1,p=a(this,i)),this._modBy=h,this._modDataCount=f;var d=t&&t.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var g=this._dueIndex,m=Math.min(null!=d?this._dueIndex+d:1/0,this._dueEnd);if(!i&&(p||g<m)){var v=this._progress;if(l(v))for(var y=0;y<v.length;y++)o(this,v[y],g,m,h,f);else o(this,v,g,m,h,f)}this._dueIndex=m;var _=null!=this._settedOutputEnd?this._settedOutputEnd:m;this._outputDueEnd=_}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var h=function(){function t(){return i<n?i++:null}function e(){var t=i%a*r+Math.ceil(i/a),e=i>=n?null:t<o?t:i;return i++,e}var n,i,r,o,a,s={reset:function(l,u,c,h){i=l,n=u,r=c,o=h,a=Math.ceil(o/r),s.next=r>1&&o>0?e:t}};return s}();c.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},c.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},c.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},c.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},c.getUpstream=function(){return this._upstream},c.getDownstream=function(){return this._downstream},c.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e.createTask=i},function(t,e,n){var i=n(146),r=n(220),o=n(179),a=function(){this.group=new i,this.uid=r.getUID("viewComponent")};a.prototype={constructor:a,init:function(t,e){},render:function(t,e,n,i){},dispose:function(){},filterForExposedEvent:null};var s=a.prototype;s.updateView=s.updateLayout=s.updateVisual=function(t,e,n,i){},o.enableClassExtend(a),o.enableClassManagement(a,{registerWhenExtend:!0});var l=a;t.exports=l},function(t,e,n){function i(){this.group=new c,this.uid=h.getUID("viewChart"),this.renderTask=m({plan:a,reset:s}),this.renderTask.context={view:this}}function r(t,e,n){if(t&&(t.trigger(e,n),t.isGroup&&!d.isHighDownDispatcher(t)))for(var i=0,o=t.childCount();i<o;i++)r(t.childAt(i),e,n)}function o(t,e,n){var i=p.queryDataIndex(t,e),o=e&&null!=e.highlightKey?d.getHighlightDigit(e.highlightKey):null;null!=i?u(p.normalizeToArray(i),function(e){r(t.getItemGraphicEl(e),n,o)}):t.eachItemGraphicEl(function(t){r(t,n,o)})}function a(t){return _(t.model)}function s(t){var e=t.model,n=t.ecModel,i=t.api,r=t.payload,o=e.pipelineContext.progressiveRender,a=t.view,s=r&&y(r).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](e,n,i,r),w[l]}var l=n(136),u=l.each,c=n(146),h=n(220),f=n(179),p=n(177),d=n(184),g=n(239),m=g.createTask,v=n(242),y=p.makeInner(),_=v();i.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,i){},highlight:function(t,e,n,i){o(t.getData(),i,"emphasis")},downplay:function(t,e,n,i){o(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};var x=i.prototype;x.updateView=x.updateLayout=x.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},f.enableClassExtend(i,["dispose"]),f.enableClassManagement(i,{registerWhenExtend:!0}),i.markUpdateMethod=function(t,e){y(t).updateMethod=e};var w={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},b=i;t.exports=b},function(t,e,n){function i(){var t=o();return function(e){var n=t(e),i=e.pipelineContext,r=n.large,o=n.progressiveRender,a=n.large=i&&i.large,s=n.progressiveRender=i&&i.progressiveRender;return!!(r^a||o^s)&&"reset"}}var r=n(177),o=r.makeInner;t.exports=i},function(t,e){function n(t,e,n){function i(){c=(new Date).getTime(),h=null,t.apply(a,s||[])}var r,o,a,s,l,u=0,c=0,h=null;
e=e||0;var f=function(){r=(new Date).getTime(),a=this,s=arguments;var t=l||e,f=l||n;l=null,o=r-(f?u:c)-t,clearTimeout(h),f?h=setTimeout(i,t):o>=0?i():h=setTimeout(i,-o),u=r};return f.clear=function(){h&&(clearTimeout(h),h=null)},f.debounceNextCall=function(t){l=t},f}function i(t,e,i,r){var l=t[e];if(l){var u=l[o]||l,c=l[s],h=l[a];if(h!==i||c!==r){if(null==i||!r)return t[e]=u;l=t[e]=n(u,i,"debounce"===r),l[o]=u,l[s]=r,l[a]=i}return l}}function r(t,e){var n=t[e];n&&n[o]&&(t[e]=n[o])}var o="\0__throttleOriginMethod",a="\0__throttleRate",s="\0__throttleType";e.throttle=n,e.createOrUpdate=i,e.clear=r},function(t,e,n){var i=n(215),r=n(136),o=r.isFunction,a={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=(t.visualColorAccessPath||"itemStyle.color").split("."),a=t.get(r),s=!o(a)||a instanceof i?null:a;a&&!s||(a=t.getColorFromPalette(t.name,null,e.getSeriesCount())),n.setVisual("color",a);var l=(t.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),u=t.get(l);if(n.setVisual("borderColor",u),!e.isSeriesFiltered(t)){s&&n.each(function(e){n.setItemVisual(e,"color",s(t.getDataParams(e)))});var c=function(t,e){var n=t.getItemModel(e),i=n.get(r,!0),o=n.get(l,!0);null!=i&&t.setItemVisual(e,"color",i),null!=o&&t.setItemVisual(e,"borderColor",o)};return{dataEach:n.hasItemOption?c:null}}}};t.exports=a},function(t,e,n){function i(t,e){function n(t,e){if("string"!=typeof t)return t;var n=t;return r.each(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}function i(t){var e=u.get(t);if(null==e){for(var n=t.split("."),i=o.aria,r=0;r<n.length;++r)i=i[n[r]];return i}return e}function a(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}function l(t){return o.series.typeNames[t]||"自定义图"}var u=e.getModel("aria");if(u.get("show")){if(u.get("description"))return void t.setAttribute("aria-label",u.get("description"));var c=0;e.eachSeries(function(t,e){++c},this);var h,f=u.get("data.maxCount")||10,p=u.get("series.maxCount")||10,d=Math.min(c,p);if(!(c<1)){var g=a();h=g?n(i("general.withTitle"),{title:g}):i("general.withoutTitle");var m=[],v=c>1?"series.multiple.prefix":"series.single.prefix";h+=n(i(v),{seriesCount:c}),e.eachSeries(function(t,e){if(e<d){var r,o=t.get("name"),a="series."+(c>1?"multiple":"single")+".";r=i(o?a+"withName":a+"withoutName"),r=n(r,{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:l(t.subType)});var u=t.getData();window.data=u,r+=u.count()>f?n(i("data.partialData"),{displayCnt:f}):i("data.allData");for(var h=[],p=0;p<u.count();p++)if(p<f){var g=u.getName(p),v=s(u,p);h.push(n(i(g?"data.withName":"data.withoutName"),{name:g,value:v}))}r+=h.join(i("data.separator.middle"))+i("data.separator.end"),m.push(r)}}),h+=m.join(i("series.multiple.separator.middle"))+i("series.multiple.separator.end"),t.setAttribute("aria-label",h)}}}var r=n(136),o=n(246),a=n(238),s=a.retrieveRawValue;t.exports=i},function(t,e){var n={legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};t.exports=n},function(t,e,n){function i(t,e){e=e||{},r.defaults(e,{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new o.Group,i=new o.Rect({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(i);var l=e.fontSize+" sans-serif",u=new o.Rect({style:{fill:"none",text:e.text,font:l,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});if(n.add(u),e.showSpinner){var c=new o.Arc({shape:{startAngle:-s/2,endAngle:-s/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001});c.animateShape(!0).when(1e3,{endAngle:3*s/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:3*s/2}).delay(300).start("circularInOut"),n.add(c)}return n.resize=function(){var n=a.getWidth(e.text,l),r=e.showSpinner?e.spinnerRadius:0,o=(t.getWidth()-2*r-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner?0:n/2),s=t.getHeight()/2;e.showSpinner&&c.setShape({cx:o,cy:s}),u.setShape({x:o-r,y:s-r,width:2*r,height:2*r}),i.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var r=n(136),o=n(184),a=n(171),s=Math.PI;t.exports=i},function(t,e,n){function i(t,e,n,i){this.ecInstance=t,this.api=e,this.unfinished;var n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice();this._allHandlers=n.concat(i),this._stageTaskMap=b()}function r(t,e,n,i,r){function o(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}r=r||{};var a;_(e,function(e,s){if(!r.visualType||r.visualType===e.visualType){var l=t._stageTaskMap.get(e.uid),u=l.seriesTaskMap,c=l.overallTask;if(c){var h,f=c.agentStubMap;f.each(function(t){o(r,t)&&(t.dirty(),h=!0)}),h&&c.dirty(),k(c,i);var p=t.getPerformArgs(c,r.block);f.each(function(t){t.perform(p)}),a|=c.perform(p)}else u&&u.each(function(s,l){o(r,s)&&s.dirty();var u=t.getPerformArgs(s,r.block);u.skip=!e.performRawSeries&&n.isSeriesFiltered(s.context.model),k(s,i),a|=s.perform(u)})}}),t.unfinished|=a}function o(t,e,n,i,r){function o(n){var o=n.uid,s=a.get(o)||a.set(o,M({plan:h,reset:f,count:d}));s.context={model:n,ecModel:i,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},g(t,n,s)}var a=n.seriesTaskMap||(n.seriesTaskMap=b()),s=e.seriesType,l=e.getTargetSeries;e.createOnAllSeries?i.eachRawSeries(o):s?i.eachRawSeriesByType(s,o):l&&l(i,r).each(o);var u=t._pipelineMap;a.each(function(t,e){u.get(e)||(t.dispose(),a.removeKey(e))})}function a(t,e,n,i,r){function o(e){var n=e.uid,i=u.get(n);i||(i=u.set(n,M({reset:l,onDirty:c})),a.dirty()),i.context={model:e,overallProgress:p,modifyOutputEnd:d},i.agent=a,i.__block=p,g(t,e,i)}var a=n.overallTask=n.overallTask||M({reset:s});a.context={ecModel:i,api:r,overallReset:e.overallReset,scheduler:t};var u=a.agentStubMap=a.agentStubMap||b(),h=e.seriesType,f=e.getTargetSeries,p=!0,d=e.modifyOutputEnd;h?i.eachRawSeriesByType(h,o):f?f(i,r).each(o):(p=!1,_(i.getSeries(),o));var m=t._pipelineMap;u.each(function(t,e){m.get(e)||(t.dispose(),a.dirty(),u.removeKey(e))})}function s(t){t.overallReset(t.ecModel,t.api,t.payload)}function l(t,e){return t.overallProgress&&u}function u(){this.agent.dirty(),this.getDownstream().dirty()}function c(){this.agent&&this.agent.dirty()}function h(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function f(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=D(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?x(e,function(t,e){return p(e)}):N}function p(t){return function(e,n){var i=n.data,r=n.resetDefines[t];if(r&&r.dataEach)for(var o=e.start;o<e.end;o++)r.dataEach(i,o);else r&&r.progress&&r.progress(e,i)}}function d(t){return t.data.count()}function g(t,e,n){var i=e.uid,r=t._pipelineMap.get(i);!r.head&&(r.head=n),r.tail&&r.tail.pipe(n),r.tail=n,n.__idxInPipeline=r.count++,n.__pipeline=r}function m(t){O=null;try{t(R,F)}catch(t){}return O}function v(t,e){for(var n in e.prototype)t[n]=C}var y=n(136),_=y.each,x=y.map,w=y.isFunction,b=y.createHashMap,C=y.noop,S=n(239),M=S.createTask,E=n(220),I=E.getUID,T=n(176),P=n(230),L=n(177),D=L.normalizeToArray,A=i.prototype;A.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},A.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,r=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,o=r?n.step:null,a=i&&i.modDataCount,s=null!=a?Math.ceil(a/o):null;return{step:o,modBy:s,modDataCount:a}}},A.getPipeline=function(t){return this._pipelineMap.get(t)},A.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData(),r=i.count(),o=n.progressiveEnabled&&e.incrementalPrepareRender&&r>=n.threshold,a=t.get("large")&&r>=t.get("largeThreshold"),s="mod"===t.get("progressiveChunkMode")?r:null;t.pipelineContext=n.context={progressiveRender:o,modDataCount:s,large:a}},A.restorePipelines=function(t){var e=this,n=e._pipelineMap=b();t.eachSeries(function(t){var i=t.getProgressive(),r=t.uid;n.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),g(e,t,t.dataTask)})},A.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;_(this._allHandlers,function(i){var r=t.get(i.uid)||t.set(i.uid,[]);i.reset&&o(this,i,r,e,n),i.overallReset&&a(this,i,r,e,n)},this)},A.prepareView=function(t,e,n,i){var r=t.renderTask,o=r.context;o.model=e,o.ecModel=n,o.api=i,r.__block=!t.incrementalPrepareRender,g(this,e,r)},A.performDataProcessorTasks=function(t,e){r(this,this._dataProcessorHandlers,t,e,{block:!0})},A.performVisualTasks=function(t,e,n){r(this,this._visualHandlers,t,e,n)},A.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()}),this.unfinished|=e},A.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var k=A.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},N=p(0);i.wrapStageHandler=function(t,e){return w(t)&&(t={overallReset:t,seriesType:m(t)}),t.uid=I("stageHandler"),e&&(t.visualType=e),t};var O,R={},F={};v(R,T),v(F,P),R.eachSeriesByType=R.eachRawSeriesByType=function(t){O=t},R.eachComponent=function(t){"series"===t.mainType&&t.subType&&(O=t.subType)};var z=i;t.exports=z},function(t,e){var n=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],i={color:n,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],n]};t.exports=i},function(t,e){var n="#eee",i=function(){return{axisLine:{lineStyle:{color:n}},axisTick:{lineStyle:{color:n}},axisLabel:{textStyle:{color:n}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:n}}}},r=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],o={color:r,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:n},crossStyle:{color:n},label:{color:"#000"}}},legend:{textStyle:{color:n}},textStyle:{color:n},title:{textStyle:{color:n}},toolbox:{iconStyle:{normal:{borderColor:n}}},dataZoom:{textStyle:{color:n}},visualMap:{textStyle:{color:n}},timeline:{lineStyle:{color:n},itemStyle:{normal:{color:r[1]}},label:{normal:{textStyle:{color:n}}},controlStyle:{normal:{color:n,borderColor:n}}},timeAxis:i(),logAxis:i(),valueAxis:i(),categoryAxis:i(),line:{symbol:"circle"},graph:{color:r},gauge:{title:{textStyle:{color:n}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};o.categoryAxis.splitLine.show=!1;var a=o;t.exports=a},function(t,e,n){var i=n(219),r=n(240),o=n(227),a=o.detectSourceFormat,s=n(229),l=s.SERIES_LAYOUT_BY_COLUMN;i.extend({type:"dataset",defaultOption:{seriesLayoutBy:l,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){a(this)}}),r.extend({type:"dataset"})},function(t,e,n){var i=n(132),r=(i.__DEV__,n(136)),o=r.createHashMap,a=r.isString,s=r.isArray,l=r.each,u=(r.assert,n(253)),c=u.parseXML,h=o(),f={registerMap:function(t,e,n){var i;return s(e)?i=e:e.svg?i=[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),i=[{type:"geoJSON",source:e,specialAreas:n}]),l(i,function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON");var n=p[e];n(t)}),h.set(t,i)},retrieveMap:function(t){return h.get(t)}},p={geoJSON:function(t){var e=t.source;t.geoJSON=a(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=c(t.source)}};t.exports=f},function(t,e,n){function i(t){if(L(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function r(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}function o(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType){var i=n.getAttribute("offset");i=i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var r=n.getAttribute("stop-color")||"#000000";e.addColorStop(i,r)}n=n.nextSibling}}function a(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),A(e.__inheritedStyle,t.__inheritedStyle))}function s(t){for(var e=k(t).split(O),n=[],i=0;i<e.length;i+=2){var r=parseFloat(e[i]),o=parseFloat(e[i+1]);n.push([r,o])}return n}function l(t,e,n,i){var r=e.__inheritedStyle||{},o="text"===e.type;if(1===t.nodeType&&(c(t,e),D(r,h(t)),!i))for(var a in z)if(z.hasOwnProperty(a)){var s=t.getAttribute(a);null!=s&&(r[z[a]]=s)}var l=o?"textFill":"fill",f=o?"textStroke":"stroke";e.style=e.style||new M;var p=e.style;null!=r.fill&&p.set(l,u(r.fill,n)),null!=r.stroke&&p.set(f,u(r.stroke,n)),N(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){var e="lineWidth"===t&&o?"textStrokeWidth":t;null!=r[t]&&p.set(e,parseFloat(r[t]))}),r.textBaseline&&"auto"!==r.textBaseline||(r.textBaseline="alphabetic"),"alphabetic"===r.textBaseline&&(r.textBaseline="bottom"),"start"===r.textAlign&&(r.textAlign="left"),"end"===r.textAlign&&(r.textAlign="right"),N(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(t){null!=r[t]&&p.set(t,r[t])}),r.lineDash&&(e.style.lineDash=k(r.lineDash).split(O)),p[f]&&"none"!==p[f]&&(e[f]=!0),e.__inheritedStyle=r}function u(t,e){var n=e&&t&&t.match(B);if(n){var i=k(n[1]),r=e[i];return r}return t}function c(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=null,r=[];n.replace(V,function(t,e,n){r.push(e,n)});for(var o=r.length-1;o>0;o-=2){var a=r[o],s=r[o-1];switch(i=i||E.create(),s){case"translate":a=k(a).split(O),E.translate(i,i,[parseFloat(a[0]),parseFloat(a[1]||0)]);break;case"scale":a=k(a).split(O),E.scale(i,i,[parseFloat(a[0]),parseFloat(a[1]||a[0])]);break;case"rotate":a=k(a).split(O),E.rotate(i,i,parseFloat(a[0]));break;case"skew":a=k(a).split(O),console.warn("Skew transform is not supported yet");break;case"matrix":var a=k(a).split(O);i[0]=parseFloat(a[0]),i[1]=parseFloat(a[1]),i[2]=parseFloat(a[2]),i[3]=parseFloat(a[3]),i[4]=parseFloat(a[4]),i[5]=parseFloat(a[5])}}e.setLocalTransform(i)}}function h(t){var e=t.getAttribute("style"),n={};if(!e)return n;var i={};G.lastIndex=0;for(var r;null!=(r=G.exec(e));)i[r[1]]=r[2];for(var o in z)z.hasOwnProperty(o)&&null!=i[o]&&(n[z[o]]=i[o]);return n}function f(t,e,n){var i=e/t.width,r=n/t.height,o=Math.min(i,r),a=[o,o],s=[-(t.x+t.width/2)*o+e/2,-(t.y+t.height/2)*o+n/2];return{scale:a,position:s}}function p(t,e){var n=new r;return n.parse(t,e)}var d=n(146),g=n(167),m=n(198),v=n(199),y=n(208),_=n(254),x=n(210),w=n(186),b=n(203),C=n(207),S=n(214),M=n(162),E=n(149),I=n(185),T=I.createFromString,P=n(136),L=P.isString,D=P.extend,A=P.defaults,k=P.trim,N=P.each,O=/[\s,]+/;r.prototype.parse=function(t,e){e=e||{};var n=i(t);if(!n)throw new Error("Illegal svg");var r=new d;this._root=r;var o=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||e.width),s=parseFloat(n.getAttribute("height")||e.height);isNaN(a)&&(a=null),isNaN(s)&&(s=null),l(n,r,null,!0);for(var u=n.firstChild;u;)this._parseNode(u,r),u=u.nextSibling;var c,h;if(o){var p=k(o).split(O);p.length>=4&&(c={x:parseFloat(p[0]||0),y:parseFloat(p[1]||0),width:parseFloat(p[2]),height:parseFloat(p[3])})}if(c&&null!=a&&null!=s&&(h=f(c,a,s),!e.ignoreViewBox)){var g=r;r=new d,r.add(g),g.scale=h.scale.slice(),g.position=h.position.slice()}return e.ignoreRootClip||null==a||null==s||r.setClipPath(new y({shape:{x:0,y:0,width:a,height:s}})),{root:r,width:a,height:s,viewBoxRect:c,viewBoxTransform:h}},r.prototype._parseNode=function(t,e){var n=t.nodeName.toLowerCase();"defs"===n?this._isDefine=!0:"text"===n&&(this._isText=!0);var i;if(this._isDefine){var r=F[n];if(r){var o=r.call(this,t),a=t.getAttribute("id");a&&(this._defs[a]=o)}}else{var r=R[n];r&&(i=r.call(this,t,e),e.add(i))}for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,i),3===s.nodeType&&this._isText&&this._parseText(s,i),s=s.nextSibling;"defs"===n?this._isDefine=!1:"text"===n&&(this._isText=!1)},r.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,i=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(i)}var r=new m({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});a(e,r),l(t,r,this._defs);var o=r.style.fontSize;o&&o<9&&(r.style.fontSize=9,r.scale=r.scale||[1,1],r.scale[0]*=o/9,r.scale[1]*=o/9);var s=r.getBoundingRect();return this._textX+=s.width,e.add(r),r};var R={g:function(t,e){var n=new d;return a(e,n),l(t,n,this._defs),n},rect:function(t,e){var n=new y;return a(e,n),l(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new v;return a(e,n),l(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new x;return a(e,n),l(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new _;return a(e,n),l(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n&&(n=s(n));var i=new b({shape:{points:n||[]}});return a(e,i),l(t,i,this._defs),i},polyline:function(t,e){var n=new w;a(e,n),l(t,n,this._defs);var i=t.getAttribute("points");i&&(i=s(i));var r=new C({shape:{points:i||[]}});return r},image:function(t,e){var n=new g;return a(e,n),l(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,i=t.getAttribute("y")||0,r=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(r),this._textY=parseFloat(i)+parseFloat(o);var s=new d;return a(e,s),l(t,s,this._defs),s},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var r=t.getAttribute("dx")||0,o=t.getAttribute("dy")||0,s=new d;return a(e,s),l(t,s,this._defs),this._textX+=r,this._textY+=o,s},path:function(t,e){var n=t.getAttribute("d")||"",i=T(n);return a(e,i),l(t,i,this._defs),i}},F={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10),n=parseInt(t.getAttribute("y1")||0,10),i=parseInt(t.getAttribute("x2")||10,10),r=parseInt(t.getAttribute("y2")||0,10),a=new S(e,n,i,r);return o(t,a),a},radialgradient:function(t){}},z={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"},B=/url\(\s*#(.*?)\)/,V=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,G=/([^\s:;]+)\s*:\s*([^:;]+)/g;e.parseXML=i,e.makeViewBoxTransform=f,e.parseSVG=p},function(t,e,n){var i=n(186),r=i.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=.5522848,i=e.cx,r=e.cy,o=e.rx,a=e.ry,s=o*n,l=a*n;t.moveTo(i-o,r),t.bezierCurveTo(i-o,r-l,i-s,r-a,i,r-a),t.bezierCurveTo(i+s,r-a,i+o,r-l,i+o,r),t.bezierCurveTo(i+o,r+l,i+s,r+a,i,r+a),t.bezierCurveTo(i-s,r+a,i-o,r+l,i-o,r),t.closePath()}});t.exports=r},function(t,e,n){var i=n(133);e.zrender=i;var r=n(149);e.matrix=r;var o=n(138);e.vector=o;var a=n(136),s=n(154);e.color=s;var l=n(184),u=n(222);e.number=u;var c=n(223);e.format=c;var h=n(243);h.throttle;e.throttle=h.throttle;var f=n(256);e.helper=f;var p=n(277);e.parseGeoJSON=p;var d=n(258);e.List=d;var g=n(178);e.Model=g;var m=n(280);e.Axis=m;var v=n(135);e.env=v;var y=p,_={};a.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){_[t]=a[t]});var x={};a.each(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(t){x[t]=l[t]}),e.parseGeoJson=y,e.util=_,e.graphic=x},function(t,e,n){function i(t){return s(t.getSource(),t)}function r(t,e){var n=e;c.isInstance(e)||(n=new c(e),a.mixin(n,u));var i=l.createScaleByModel(n);return i.setExtent(t[0],t[1]),l.niceScaleExtent(i,n),i}function o(t){a.mixin(t,u)}var a=n(136),s=n(257),l=n(266),u=n(275),c=n(178),h=n(221);h.getLayoutRect;e.getLayoutRect=h.getLayoutRect;var f=n(265),p=f.enableDataStack,d=f.isDimensionStacked,g=f.getStackedDimension,m=n(263);e.completeDimensions=m;var v=n(262);e.createDimensions=v;var y=n(276);e.createSymbol=y.createSymbol;var _={isDimensionStacked:d,enableDataStack:p,getStackedDimension:g};e.createList=i,e.dataStack=_,e.createScale=r,e.mixinAxisModelCommonMethods=o},function(t,e,n){function i(t,e,n){n=n||{},y.isInstance(t)||(t=y.seriesDataToSource(t));var i,o=e.get("coordinateSystem"),u=g.get(o),c=v(e);c&&(i=a.map(c.coordSysDims,function(t){var e={name:t},n=c.axisMap.get(t);if(n){var i=n.get("type");e.type=f(i)}return e})),i||(i=u&&(u.getDimensionsInfo?u.getDimensionsInfo():u.dimensions.slice())||["x","y"]);var h,p,d=l(t,{coordDimensions:i,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?a.curry(b,i,e):null});c&&a.each(d,function(t,e){var n=t.coordDim,i=c.categoryAxisMap.get(n);i&&(null==h&&(h=e),t.ordinalMeta=i.getOrdinalMeta()),null!=t.otherDims.itemName&&(p=!0)}),p||null==h||(d[h].otherDims.itemName=0);var m=x(e,d),_=new s(d,e);_.setCalculationInfo(m);var w=null!=h&&r(t)?function(t,e,n,i){return i===h?n:this.defaultDimValueGetter(t,e,n,i)}:null;return _.hasItemOption=!1,_.initData(t,null,w),_}function r(t){if(t.sourceFormat===c){var e=o(t.data||[]);return null!=e&&!a.isArray(d(e))}}function o(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}var a=n(136),s=n(258),l=n(262),u=n(229),c=u.SOURCE_FORMAT_ORIGINAL,h=n(260),f=h.getDimensionTypeByAxis,p=n(177),d=p.getDataItemValue,g=n(231),m=n(264),v=m.getCoordSysInfoBySeries,y=n(228),_=n(265),x=_.enableDataStack,w=n(227),b=w.makeSeriesEncodeForAxisCoordSys,C=i;t.exports=C},function(t,e,n){function i(t){return t._rawCount>65535?A:N}function r(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function o(t,e){v.each(O.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,v.each(R,function(n){t[n]=v.clone(e[n])}),t._calculationInfo=v.extend(e._calculationInfo)}function a(t,e,n,i,r){var o=D[e.type],a=i-1,s=e.name,l=t[s][a];if(l&&l.length<n){for(var u=new o(Math.min(r-a*n,n)),c=0;c<l.length;c++)u[c]=l[c];t[s][a]=u}for(var h=i*n;h<r;h+=n)t[s].push(new o(Math.min(r-h,n)))}function s(t){var e=t._invertedIndicesMap;v.each(e,function(n,i){var r=t._dimensionInfos[i],o=r.ordinalMeta;if(o){n=e[i]=new k(o.categories.length);for(var a=0;a<n.length;a++)n[a]=P;for(var a=0;a<t._count;a++)n[t.get(i,a)]=a}})}function l(t,e,n){var i;if(null!=e){var r=t._chunkSize,o=Math.floor(n/r),a=n%r,s=t.dimensions[e],l=t._storage[s][o];if(l){i=l[a];var u=t._dimensionInfos[s].ordinalMeta;u&&u.categories.length&&(i=u.categories[i])}}return i}function u(t){return t}function c(t){return t<this._count&&t>=0?this._indices[t]:-1}function h(t,e){var n=t._idList[e];return null==n&&(n=l(t,t._idDimIdx,e)),null==n&&(n=L+e),n}function f(t){return v.isArray(t)||(t=[t]),t}function p(t,e){var n=t.dimensions,i=new F(v.map(n,t.getDimensionInfo,t),t.hostModel);o(i,t);for(var r=i._storage={},a=t._storage,s=0;s<n.length;s++){var l=n[s];a[l]&&(v.indexOf(e,l)>=0?(r[l]=d(a[l]),i._rawExtent[l]=g(),i._extent[l]=null):r[l]=a[l])}return i}function d(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=r(t[n]);return e}function g(){return[1/0,-(1/0)]}var m=n(132),v=(m.__DEV__,n(136)),y=n(178),_=n(259),x=n(228),w=n(238),b=w.defaultDimValueGetters,C=w.DefaultDataProvider,S=n(260),M=S.summarizeDimensions,E=n(261),I=v.isObject,T="undefined",P=-1,L="e\0\0",D={float:typeof Float64Array===T?Array:Float64Array,int:typeof Int32Array===T?Array:Int32Array,ordinal:Array,number:Array,time:Array},A=typeof Uint32Array===T?Array:Uint32Array,k=typeof Int32Array===T?Array:Int32Array,N=typeof Uint16Array===T?Array:Uint16Array,O=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],R=["_extent","_approximateExtent","_rawExtent"],F=function(t,e){t=t||["x","y"];for(var n={},i=[],r={},o=0;o<t.length;o++){var a=t[o];v.isString(a)?a=new E({name:a}):a instanceof E||(a=new E(a));var s=a.name;a.type=a.type||"float",a.coordDim||(a.coordDim=s,a.coordDimIndex=0),a.otherDims=a.otherDims||{},i.push(s),n[s]=a,a.index=o,a.createInvertedIndices&&(r[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=e,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=M(this),this._invertedIndicesMap=r,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},z=F.prototype;z.type="list",z.hasItemOption=!0,z.getDimension=function(t){return"number"!=typeof t&&(isNaN(t)||this._dimensionInfos.hasOwnProperty(t))||(t=this.dimensions[t]),t},z.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},z.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},z.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return e===!0?(i||[]).slice():i&&i[e]},z.initData=function(t,e,n){var i=x.isInstance(t)||v.isArrayLike(t);i&&(t=new C(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=b[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=b.arrayRows,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},z.getProvider=function(){return this._rawData},z.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var i=e.count();e.persistent||(i+=n),this._initDataFromProvider(n,i)},z.appendValues=function(t,e){for(var n=this._chunkSize,i=this._storage,r=this.dimensions,o=r.length,l=this._rawExtent,u=this.count(),c=u+Math.max(t.length,e?e.length:0),h=this._chunkCount,f=0;f<o;f++){var p=r[f];l[p]||(l[p]=g()),i[p]||(i[p]=[]),a(i,this._dimensionInfos[p],n,h,c),this._chunkCount=i[p].length}for(var d=new Array(o),m=u;m<c;m++){for(var v=m-u,y=Math.floor(m/n),_=m%n,x=0;x<o;x++){var p=r[x],w=this._dimValueGetterArrayRows(t[v]||d,p,v,x);i[p][y][_]=w;var b=l[p];w<b[0]&&(b[0]=w),w>b[1]&&(b[1]=w)}e&&(this._nameList[m]=e[v])}this._rawCount=this._count=c,this._extent={},s(this)},z._initDataFromProvider=function(t,e){if(!(t>=e)){for(var n,i=this._chunkSize,r=this._rawData,o=this._storage,l=this.dimensions,u=l.length,c=this._dimensionInfos,h=this._nameList,f=this._idList,p=this._rawExtent,d=this._nameRepeatCount={},m=this._chunkCount,v=0;v<u;v++){var y=l[v];p[y]||(p[y]=g());var _=c[y];0===_.otherDims.itemName&&(n=this._nameDimIdx=v),0===_.otherDims.itemId&&(this._idDimIdx=v),o[y]||(o[y]=[]),a(o,_,i,m,e),this._chunkCount=o[y].length}for(var x=new Array(u),w=t;w<e;w++){x=r.getItem(w,x);for(var b=Math.floor(w/i),C=w%i,S=0;S<u;S++){var y=l[S],M=o[y][b],E=this._dimValueGetter(x,y,w,S);M[C]=E;var I=p[y];E<I[0]&&(I[0]=E),E>I[1]&&(I[1]=E)}if(!r.pure){var T=h[w];if(x&&null==T)if(null!=x.name)h[w]=T=x.name;else if(null!=n){var P=l[n],L=o[P][b];if(L){T=L[C];var D=c[P].ordinalMeta;D&&D.categories.length&&(T=D.categories[T])}}var A=null==x?null:x.id;null==A&&null!=T&&(d[T]=d[T]||0,A=T,d[T]>0&&(A+="__ec__"+d[T]),d[T]++),null!=A&&(f[w]=A)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent={},s(this)}},z.count=function(){return this._count},z.getIndices=function(){var t,e=this._indices;if(e){var n=e.constructor,r=this._count;if(n===Array){t=new n(r);for(var o=0;o<r;o++)t[o]=e[o]}else t=new n(e.buffer,0,r)}else for(var n=i(this),t=new n(this.count()),o=0;o<t.length;o++)t[o]=o;return t},z.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize),r=e%this._chunkSize,o=n[t][i],a=o[r];return a},z.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._storage[t];if(!n)return NaN;var i=Math.floor(e/this._chunkSize),r=e%this._chunkSize,o=n[i];return o[r]},z._getFast=function(t,e){var n=Math.floor(e/this._chunkSize),i=e%this._chunkSize,r=this._storage[t][n];return r[i]},z.getValues=function(t,e){var n=[];v.isArray(t)||(e=t,t=this.dimensions);for(var i=0,r=t.length;i<r;i++)n.push(this.get(t[i],e));return n},z.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this.get(e[n],t)))return!1;return!0},z.getDataExtent=function(t){t=this.getDimension(t);var e=this._storage[t],n=g();if(!e)return n;var i,r=this.count(),o=!this._indices;if(o)return this._rawExtent[t].slice();if(i=this._extent[t])return i.slice();i=n;for(var a=i[0],s=i[1],l=0;l<r;l++){var u=this._getFast(t,this.getRawIndex(l));u<a&&(a=u),u>s&&(s=u)}return i=[a,s],this._extent[t]=i,i},z.getApproximateExtent=function(t){return t=this.getDimension(t),
this._approximateExtent[t]||this.getDataExtent(t)},z.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},z.getCalculationInfo=function(t){return this._calculationInfo[t]},z.setCalculationInfo=function(t,e){I(t)?v.extend(this._calculationInfo,t):this._calculationInfo[t]=e},z.getSum=function(t){var e=this._storage[t],n=0;if(e)for(var i=0,r=this.count();i<r;i++){var o=this.get(t,i);isNaN(o)||(n+=o)}return n},z.getMedian=function(t){var e=[];this.each(t,function(t,n){isNaN(t)||e.push(t)});var n=[].concat(e).sort(function(t,e){return t-e}),i=this.count();return 0===i?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},z.rawIndexOf=function(t,e){var n=t&&this._invertedIndicesMap[t],i=n[e];return null==i||isNaN(i)?P:i},z.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},z.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,r=this._count-1;i<=r;){var o=(i+r)/2|0;if(e[o]<t)i=o+1;else{if(!(e[o]>t))return o;r=o-1}}return-1},z.indicesOfNearest=function(t,e,n){var i=this._storage,r=i[t],o=[];if(!r)return o;null==n&&(n=1/0);for(var a=1/0,s=-1,l=0,u=0,c=this.count();u<c;u++){var h=e-this.get(t,u),f=Math.abs(h);f<=n&&((f<a||f===a&&h>=0&&s<0)&&(a=f,s=h,l=0),h===s&&(o[l++]=u))}return o.length=l,o},z.getRawIndex=u,z.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++){var i=this.dimensions[n];e.push(this.get(i,t))}return e},z.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||l(this,this._nameDimIdx,e)||""},z.getId=function(t){return h(this,this.getRawIndex(t))},z.each=function(t,e,n,i){"use strict";if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this,t=v.map(f(t),this.getDimension,this);for(var r=t.length,o=0;o<this.count();o++)switch(r){case 0:e.call(n,o);break;case 1:e.call(n,this.get(t[0],o),o);break;case 2:e.call(n,this.get(t[0],o),this.get(t[1],o),o);break;default:for(var a=0,s=[];a<r;a++)s[a]=this.get(t[a],o);s[a]=o,e.apply(n,s)}}},z.filterSelf=function(t,e,n,r){"use strict";if(this._count){"function"==typeof t&&(r=n,n=e,e=t,t=[]),n=n||r||this,t=v.map(f(t),this.getDimension,this);for(var o=this.count(),a=i(this),s=new a(o),l=[],h=t.length,p=0,d=t[0],g=0;g<o;g++){var m,y=this.getRawIndex(g);if(0===h)m=e.call(n,g);else if(1===h){var _=this._getFast(d,y);m=e.call(n,_,g)}else{for(var x=0;x<h;x++)l[x]=this._getFast(d,y);l[x]=g,m=e.apply(n,l)}m&&(s[p++]=y)}return p<o&&(this._indices=s),this._count=p,this._extent={},this.getRawIndex=this._indices?c:u,this}},z.selectRange=function(t){"use strict";if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var r=e.length;if(r){var o=this.count(),a=i(this),s=new a(o),l=0,h=e[0],f=t[h][0],p=t[h][1],d=!1;if(!this._indices){var g=0;if(1===r){for(var m=this._storage[e[0]],v=0;v<this._chunkCount;v++)for(var y=m[v],_=Math.min(this._count-v*this._chunkSize,this._chunkSize),x=0;x<_;x++){var w=y[x];(w>=f&&w<=p||isNaN(w))&&(s[l++]=g),g++}d=!0}else if(2===r){for(var m=this._storage[h],b=this._storage[e[1]],C=t[e[1]][0],S=t[e[1]][1],v=0;v<this._chunkCount;v++)for(var y=m[v],M=b[v],_=Math.min(this._count-v*this._chunkSize,this._chunkSize),x=0;x<_;x++){var w=y[x],E=M[x];(w>=f&&w<=p||isNaN(w))&&(E>=C&&E<=S||isNaN(E))&&(s[l++]=g),g++}d=!0}}if(!d)if(1===r)for(var x=0;x<o;x++){var I=this.getRawIndex(x),w=this._getFast(h,I);(w>=f&&w<=p||isNaN(w))&&(s[l++]=I)}else for(var x=0;x<o;x++){for(var T=!0,I=this.getRawIndex(x),v=0;v<r;v++){var P=e[v],w=this._getFast(n,I);(w<t[P][0]||w>t[P][1])&&(T=!1)}T&&(s[l++]=this.getRawIndex(x))}return l<o&&(this._indices=s),this._count=l,this._extent={},this.getRawIndex=this._indices?c:u,this}}},z.mapArray=function(t,e,n,i){"use strict";"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this;var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},n),r},z.map=function(t,e,n,i){"use strict";n=n||i||this,t=v.map(f(t),this.getDimension,this);var r=p(this,t);r._indices=this._indices,r.getRawIndex=r._indices?c:u;for(var o=r._storage,a=[],s=this._chunkSize,l=t.length,h=this.count(),d=[],g=r._rawExtent,m=0;m<h;m++){for(var y=0;y<l;y++)d[y]=this.get(t[y],m);d[l]=m;var _=e&&e.apply(n,d);if(null!=_){"object"!=typeof _&&(a[0]=_,_=a);for(var x=this.getRawIndex(m),w=Math.floor(x/s),b=x%s,C=0;C<_.length;C++){var S=t[C],M=_[C],E=g[S],I=o[S];I&&(I[w][b]=M),M<E[0]&&(E[0]=M),M>E[1]&&(E[1]=M)}}}return r},z.downSample=function(t,e,n,r){for(var o=p(this,[t]),a=o._storage,s=[],l=Math.floor(1/e),u=a[t],h=this.count(),f=this._chunkSize,d=o._rawExtent[t],g=new(i(this))(h),m=0,v=0;v<h;v+=l){l>h-v&&(l=h-v,s.length=l);for(var y=0;y<l;y++){var _=this.getRawIndex(v+y),x=Math.floor(_/f),w=_%f;s[y]=u[x][w]}var b=n(s),C=this.getRawIndex(Math.min(v+r(s,b)||0,h-1)),S=Math.floor(C/f),M=C%f;u[S][M]=b,b<d[0]&&(d[0]=b),b>d[1]&&(d[1]=b),g[m++]=C}return o._count=m,o._indices=g,o.getRawIndex=c,o},z.getItemModel=function(t){var e=this.hostModel;return new y(this.getRawDataItem(t),e,e&&e.ecModel)},z.diff=function(t){var e=this;return new _(t?t.getIndices():[],this.getIndices(),function(e){return h(t,e)},function(t){return h(e,t)})},z.getVisual=function(t){var e=this._visual;return e&&e[t]},z.setVisual=function(t,e){if(I(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},z.setLayout=function(t,e){if(I(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},z.getLayout=function(t){return this._layout[t]},z.getItemLayout=function(t){return this._itemLayouts[t]},z.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?v.extend(this._itemLayouts[t]||{},e):e},z.clearItemLayouts=function(){this._itemLayouts.length=0},z.getItemVisual=function(t,e,n){var i=this._itemVisuals[t],r=i&&i[e];return null!=r||n?r:this.getVisual(e)},z.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{},r=this.hasItemVisual;if(this._itemVisuals[t]=i,I(e))for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o],r[o]=!0);else i[e]=n,r[e]=!0},z.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var B=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};z.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(B,e)),this._graphicEls[t]=e},z.getItemGraphicEl=function(t){return this._graphicEls[t]},z.eachItemGraphicEl=function(t,e){v.each(this._graphicEls,function(n,i){n&&t&&t.call(e,n,i)})},z.cloneShallow=function(t){if(!t){var e=v.map(this.dimensions,this.getDimensionInfo,this);t=new F(e,this.hostModel)}if(t._storage=this._storage,o(t,this),this._indices){var n=this._indices.constructor;t._indices=new n(this._indices)}else t._indices=null;return t.getRawIndex=t._indices?c:u,t},z.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(v.slice(arguments)))})},z.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],z.CHANGABLE_METHODS=["filterSelf","selectRange"];var V=F;t.exports=V},function(t,e){function n(t){return t}function i(t,e,i,r,o){this._old=t,this._new=e,this._oldKeyGetter=i||n,this._newKeyGetter=r||n,this.context=o}function r(t,e,n,i,r){for(var o=0;o<t.length;o++){var a="_ec_"+r[i](t[o],o),s=e[a];null==s?(n.push(a),e[a]=o):(s.length||(e[a]=s=[s]),s.push(o))}}i.prototype={constructor:i,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t,e=this._old,n=this._new,i={},o={},a=[],s=[];for(r(e,i,a,"_oldKeyGetter",this),r(n,o,s,"_newKeyGetter",this),t=0;t<e.length;t++){var l=a[t],u=o[l];if(null!=u){var c=u.length;c?(1===c&&(o[l]=null),u=u.shift()):o[l]=null,this._update&&this._update(u,t)}else this._remove&&this._remove(t)}for(var t=0;t<s.length;t++){var l=s[t];if(o.hasOwnProperty(l)){var u=o[l];if(null==u)continue;if(u.length)for(var h=0,c=u.length;h<c;h++)this._add&&this._add(u[h]);else this._add&&this._add(u)}}}};var o=i;t.exports=o},function(t,e,n){function i(t){var e={},n=e.encode={},i=u(),o=[],s=[],c=e.userOutput={dimensionNames:t.dimensions.slice(),encode:{}};l(t.dimensions,function(e){var l=t.getDimensionInfo(e),u=l.coordDim;if(u){var f=l.coordDimIndex;r(n,u)[f]=e,l.isExtraCoord||(i.set(u,1),a(l.type)&&(o[0]=e),r(c.encode,u)[f]=l.index),l.defaultTooltip&&s.push(e)}h.each(function(t,e){var i=r(n,e),o=l.otherDims[e];null!=o&&o!==!1&&(i[o]=l.name)})});var f=[],p={};i.each(function(t,e){var i=n[e];p[e]=i[0],f=f.concat(i)}),e.dataDimsOnCoord=f,e.encodeFirstDimNotExtra=p;var d=n.label;d&&d.length&&(o=d.slice());var g=n.tooltip;return g&&g.length?s=g.slice():s.length||(s=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=s,e}function r(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function o(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function a(t){return!("ordinal"===t||"time"===t)}var s=n(136),l=s.each,u=s.createHashMap,c=(s.assert,n(132)),h=(c.__DEV__,u(["tooltip","label","itemName","itemId","seriesName"]));e.OTHER_DIMENSIONS=h,e.summarizeDimensions=i,e.getDimensionTypeByAxis=o},function(t,e,n){function i(t){null!=t&&r.extend(this,t),this.otherDims={}}var r=n(136),o=i;t.exports=o},function(t,e,n){function i(t,e){return e=e||{},r(e.coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,encodeDefaulter:e.encodeDefaulter,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})}var r=n(263);t.exports=i},function(t,e,n){function i(t,e,n){function i(t,e,n){null!=w.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,m.set(e,!0))}_.isInstance(e)||(e=_.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var a=(n.dimsDef||[]).slice(),d=s(),m=s(),x=[],C=r(e,t,a,n.dimCount),S=0;S<C;S++){var M=a[S]=h({},f(a[S])?a[S]:{name:a[S]}),E=M.name,I=x[S]=new b;null!=E&&null==d.get(E)&&(I.name=I.displayName=E,d.set(E,S)),null!=M.type&&(I.type=M.type),null!=M.displayName&&(I.displayName=M.displayName)}var T=n.encodeDef;!T&&n.encodeDefaulter&&(T=n.encodeDefaulter(e,C)),T=s(T),T.each(function(t,e){if(t=g(t).slice(),1===t.length&&!u(t[0])&&t[0]<0)return void T.set(e,!1);var n=T.set(e,[]);l(t,function(t,r){u(t)&&(t=d.get(t)),null!=t&&t<C&&(n[r]=t,i(x[t],e,r))})});var P=0;l(t,function(t,e){var n,t,r,o;if(u(t))n=t,t={};else{n=t.name;var a=t.ordinalMeta;t.ordinalMeta=null,t=p(t),t.ordinalMeta=a,r=t.dimsDef,o=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}var s=T.get(n);if(s!==!1){var s=g(s);if(!s.length)for(var h=0;h<(r&&r.length||1);h++){for(;P<x.length&&null!=x[P].coordDim;)P++;P<x.length&&s.push(P++)}l(s,function(e,a){var s=x[e];if(i(c(s,t),n,a),null==s.name&&r){var l=r[a];!f(l)&&(l={name:l}),s.name=s.displayName=l.name,s.defaultTooltip=l.defaultTooltip}o&&c(s.otherDims,o)})}});var L=n.generateCoord,D=n.generateCoordCount,A=null!=D;D=L?D||1:0;for(var k=L||"value",N=0;N<C;N++){var I=x[N]=x[N]||new b,O=I.coordDim;null==O&&(I.coordDim=o(k,m,A),I.coordDimIndex=0,(!L||D<=0)&&(I.isExtraCoord=!0),D--),null==I.name&&(I.name=o(I.coordDim,d)),null!=I.type||v(e,N,I.name)!==y.Must&&(!I.isExtraCoord||null==I.otherDims.itemName&&null==I.otherDims.seriesName)||(I.type="ordinal")}return x}function r(t,e,n,i){var r=Math.max(t.dimensionsDetectCount||1,e.length,n.length,i||0);return l(e,function(t){var e=t.dimsDef;e&&(r=Math.max(r,e.length))}),r}function o(t,e,n){if(n||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}var a=n(136),s=a.createHashMap,l=a.each,u=a.isString,c=a.defaults,h=a.extend,f=a.isObject,p=a.clone,d=n(177),g=d.normalizeToArray,m=n(227),v=m.guessOrdinal,y=m.BE_ORDINAL,_=n(228),x=n(260),w=x.OTHER_DIMENSIONS,b=n(261),C=i;t.exports=C},function(t,e,n){function i(t){this.coordSysName=t,this.coordSysDims=[],this.axisMap=l(),this.categoryAxisMap=l(),this.firstCategoryDimIndex=null}function r(t){var e=t.get("coordinateSystem"),n=new i(e),r=c[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}function o(t){return"category"===t.get("type")}var a=n(132),s=(a.__DEV__,n(136)),l=s.createHashMap,u=(s.retrieve,s.each),c={cartesian2d:function(t,e,n,i){var r=t.getReferringComponents("xAxis")[0],a=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",a),o(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),o(a)&&(i.set("y",a),null==e.firstCategoryDimIndex&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,i){var r=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",r),o(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var r=t.getReferringComponents("polar")[0],a=r.findAxisModel("radiusAxis"),s=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",s),o(a)&&(i.set("radius",a),e.firstCategoryDimIndex=0),o(s)&&(i.set("angle",s),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var r=t.ecModel,a=r.getComponent("parallel",t.get("parallelIndex")),s=e.coordSysDims=a.dimensions.slice();u(a.parallelAxisIndex,function(t,a){var l=r.getComponent("parallelAxis",t),u=s[a];n.set(u,l),o(l)&&null==e.firstCategoryDimIndex&&(i.set(u,l),e.firstCategoryDimIndex=a)})}};e.getCoordSysInfoBySeries=r},function(t,e,n){function i(t,e,n){n=n||{};var i,r,o,a,u=n.byIndex,c=n.stackedCoordDimension,h=!(!t||!t.get("stack"));if(s(e,function(t,n){l(t)&&(e[n]=t={name:t}),h&&!t.isExtraCoord&&(u||i||!t.ordinalMeta||(i=t),r||"ordinal"===t.type||"time"===t.type||c&&c!==t.coordDim||(r=t))}),!r||u||i||(u=!0),r){o="__\0ecstackresult",a="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var f=r.coordDim,p=r.type,d=0;s(e,function(t){t.coordDim===f&&d++}),e.push({name:o,coordDim:f,coordDimIndex:d,type:p,isExtraCoord:!0,isCalculationCoord:!0}),d++,e.push({name:a,coordDim:a,coordDimIndex:d,type:p,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:r&&r.name,stackedByDimension:i&&i.name,isStackedByIndex:u,stackedOverDimension:a,stackResultDimension:o}}function r(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function o(t,e){return r(t,e)?t.getCalculationInfo("stackResultDimension"):e}var a=n(136),s=a.each,l=a.isString;e.enableDataStack=i,e.isDimensionStacked=r,e.getStackedDimension=o},function(t,e,n){function i(t,e){var n,i,o,a=t.type,s=e.getMin(),l=e.getMax(),u=t.getExtent();"ordinal"===a?n=e.getCategories().length:(i=e.get("boundaryGap"),g.isArray(i)||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=_.parsePercent(i[0],1),i[1]=_.parsePercent(i[1],1),o=u[1]-u[0]||Math.abs(u[0])),"dataMin"===s?s=u[0]:"function"==typeof s&&(s=s({min:u[0],max:u[1]})),"dataMax"===l?l=u[1]:"function"==typeof l&&(l=l({min:u[0],max:u[1]}));var c=null!=s,h=null!=l;null==s&&(s="ordinal"===a?n?0:NaN:u[0]-i[0]*o),null==l&&(l="ordinal"===a?n?n-1:NaN:u[1]+i[1]*o),(null==s||!isFinite(s))&&(s=NaN),(null==l||!isFinite(l))&&(l=NaN),t.setBlank(g.eqNaN(s)||g.eqNaN(l)||"ordinal"===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!h&&(l=0));var f=e.ecModel;if(f&&"time"===a){var p,d=w("bar",f);if(g.each(d,function(t){p|=t.getBaseAxis()===e.axis}),p){var m=b(d),v=r(s,l,e,m);s=v.min,l=v.max}}return{extent:[s,l],fixMin:c,fixMax:h}}function r(t,e,n,i){var r=n.axis.getExtent(),o=r[1]-r[0],a=C(i,n.axis);if(void 0===a)return{min:t,max:e};var s=1/0;g.each(a,function(t){s=Math.min(t.offset,s)});var l=-(1/0);g.each(a,function(t){l=Math.max(t.offset+t.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=e-t,h=1-(s+l)/o,f=c/h-c;return e+=f*(l/u),t-=f*(s/u),{min:t,max:e}}function o(t,e){var n=i(t,e),r=n.extent,o=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var a=t.type;t.setExtent(r[0],r[1]),t.niceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===a||"time"===a?e.get("minInterval"):null,maxInterval:"interval"===a||"time"===a?e.get("maxInterval"):null});var s=e.get("interval");null!=s&&t.setInterval&&t.setInterval(s)}function a(t,e){if(e=e||t.get("type"))switch(e){case"category":return new m(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-(1/0)]);case"value":return new v;default:return(y.getClass(e)||v).create(t)}}function s(t){var e=t.scale.getExtent(),n=e[0],i=e[1];return!(n>0&&i>0||n<0&&i<0)}function l(t){var e=t.getLabelModel().get("formatter"),n="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof e?e=function(e){return function(n){return n=t.scale.getLabel(n),e.replace("{value}",null!=n?n:"")}}(e):"function"==typeof e?function(i,r){return null!=n&&(r=i-n),e(u(t,i),r)}:function(e){return t.scale.getLabel(e)}}function u(t,e){return"category"===t.type?t.scale.getLabel(e):e}function c(t){var e=t.model,n=t.scale;if(e.get("axisLabel.show")&&!n.isBlank()){var i,r,o="category"===t.type,a=n.getExtent();o?r=n.count():(i=n.getTicks(),r=i.length);var s,u=t.getLabelModel(),c=l(t),f=1;r>40&&(f=Math.ceil(r/40));for(var p=0;p<r;p+=f){var d=i?i[p]:a[0]+p,g=c(d),m=u.getTextRect(g),v=h(m,u.get("rotate")||0);s?s.union(v):s=v}return s}}function h(t,e){var n=e*Math.PI/180,i=t.plain(),r=i.width,o=i.height,a=r*Math.abs(Math.cos(n))+Math.abs(o*Math.sin(n)),s=r*Math.abs(Math.sin(n))+Math.abs(o*Math.cos(n)),l=new S(i.x,i.y,a,s);return l}function f(t){var e=t.get("interval");return null==e?"auto":e}function p(t){return"category"===t.type&&0===f(t.getLabelModel())}var d=n(132),g=(d.__DEV__,n(136)),m=n(267),v=n(270),y=n(268),_=n(222),x=n(272),w=x.prepareLayoutBarSeries,b=x.makeColumnLayout,C=x.retrieveColumnLayout,S=n(158);n(273),n(274),e.getScaleExtent=i,e.niceScaleExtent=o,e.createScaleByModel=a,e.ifAxisCrossZero=s,e.makeLabelFormatter=l,e.getAxisRawValue=u,e.estimateLabelUnionRect=c,e.getOptionCategoryInterval=f,e.shouldShowAllLabels=p},function(t,e,n){var i=n(136),r=n(268),o=n(269),a=r.prototype,s=r.extend({type:"ordinal",init:function(t,e){t&&!i.isArray(t)||(t=new o({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),a.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return a.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(a.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:i.noop,niceExtent:i.noop});s.create=function(){return new s};var l=s;t.exports=l},function(t,e,n){function i(t){this._setting=t||{},this._extent=[1/0,-(1/0)],this._interval=0,this.init&&this.init.apply(this,arguments)}var r=n(179);i.prototype.parse=function(t){return t},i.prototype.getSetting=function(t){return this._setting[t]},i.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},i.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},i.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},i.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},i.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},i.prototype.getExtent=function(){return this._extent.slice()},i.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},i.prototype.isBlank=function(){return this._isBlank},i.prototype.setBlank=function(t){this._isBlank=t},i.prototype.getLabel=null,r.enableClassExtend(i),r.enableClassManagement(i,{registerWhenExtend:!0});var o=i;t.exports=o},function(t,e,n){function i(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this._map}function r(t){return t._map||(t._map=s(t.categories))}function o(t){return l(t)&&null!=t.value?t.value:t+""}var a=n(136),s=a.createHashMap,l=a.isObject,u=a.map;i.createByAxisModel=function(t){var e=t.option,n=e.data,r=n&&u(n,o);return new i({categories:r,needCollect:!r,deduplication:e.dedplication!==!1})};var c=i.prototype;c.getOrdinal=function(t){return r(this).get(t)},c.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!=typeof t&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var i=r(this);return e=i.get(t),null==e&&(n?(e=this.categories.length,this.categories[e]=t,i.set(t,e)):e=NaN),e};var h=i;t.exports=h},function(t,e,n){var i=n(222),r=n(223),o=n(268),a=n(271),s=i.round,l=o.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),l.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=a.getIntervalPrecision(t)},getTicks:function(t){var e=this._interval,n=this._extent,i=this._niceExtent,r=this._intervalPrecision,o=[];if(!e)return o;var a=1e4;n[0]<i[0]&&(t?o.push(s(i[0]-e,r)):o.push(n[0]));for(var l=i[0];l<=i[1]&&(o.push(l),l=s(l+e,r),l!==o[o.length-1]);)if(o.length>a)return[];var u=o.length?o[o.length-1]:i[1];return n[1]>u&&(t?o.push(s(u+e,r)):o.push(n[1])),o},getMinorTicks:function(t){for(var e=this.getTicks(!0),n=[],r=this.getExtent(),o=1;o<e.length;o++){for(var a=e[o],s=e[o-1],l=0,u=[],c=a-s,h=c/t;l<t-1;){var f=i.round(s+(l+1)*h);f>r[0]&&f<r[1]&&u.push(f),l++}n.push(u)}return n},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=i.getPrecisionSafe(t)||0:"auto"===n&&(n=this._intervalPrecision),t=s(t,n,!0),r.addCommas(t)},niceTicks:function(t,e,n){t=t||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var o=a.intervalScaleNiceTicks(i,t,e,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax?e[0]-=n/2:(e[1]+=n/2,e[0]-=n/2)}else e[1]=1;var i=e[1]-e[0];isFinite(i)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=s(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=s(Math.ceil(e[1]/r)*r))}});l.create=function(){return new l};var u=l;t.exports=u},function(t,e,n){function i(t,e,n,i){var o={},u=t[1]-t[0],c=o.interval=s.nice(u/e,!0);null!=n&&c<n&&(c=o.interval=n),null!=i&&c>i&&(c=o.interval=i);var h=o.intervalPrecision=r(c),f=o.niceTickExtent=[l(Math.ceil(t[0]/c)*c,h),l(Math.floor(t[1]/c)*c,h)];return a(f,t),o}function r(t){return s.getPrecisionSafe(t)+2}function o(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function a(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),o(t,0,e),o(t,1,e),t[0]>t[1]&&(t[0]=t[1])}var s=n(222),l=s.round;e.intervalScaleNiceTicks=i,e.getIntervalPrecision=r,e.fixExtent=a},function(t,e,n){function i(t){return t.get("stack")||w+t.seriesIndex}function r(t){return t.dim+t.index}function o(t){var e=[],n=t.axis,i="axis0";if("category"===n.type){for(var r=n.getBandWidth(),o=0;o<t.count;o++)e.push(g.defaults({bandWidth:r,axisKey:i,stackId:w+o},t));for(var a=u(e),s=[],o=0;o<t.count;o++){var l=a[i][w+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function a(t,e){var n=[];return e.eachSeriesByType(t,function(t){f(t)&&!p(t)&&n.push(t)}),n}function s(t){var e={};g.each(t,function(t){var n=t.coordinateSystem,i=n.getBaseAxis();if("time"===i.type||"value"===i.type)for(var r=t.getData(),o=i.dim+"_"+i.index,a=r.mapDimension(i.dim),s=0,l=r.count();s<l;++s){var u=r.get(a,s);e[o]?e[o].push(u):e[o]=[u]}});var n=[];for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(r){r.sort(function(t,e){return t-e});for(var o=null,a=1;a<r.length;++a){var s=r[a]-r[a-1];s>0&&(o=null===o?s:Math.min(o,s))}n[i]=o}}return n}function l(t){var e=s(t),n=[];return g.each(t,function(t){var o,a=t.coordinateSystem,s=a.getBaseAxis(),l=s.getExtent();if("category"===s.type)o=s.getBandWidth();else if("value"===s.type||"time"===s.type){var u=s.dim+"_"+s.index,c=e[u],h=Math.abs(l[1]-l[0]),f=s.scale.getExtent(),p=Math.abs(f[1]-f[0]);o=c?h/p*c:h}else{var d=t.getData();o=Math.abs(l[1]-l[0])/d.count()}var g=v(t.get("barWidth"),o),m=v(t.get("barMaxWidth"),o),y=v(t.get("barMinWidth")||1,o),_=t.get("barGap"),x=t.get("barCategoryGap");n.push({bandWidth:o,barWidth:g,barMaxWidth:m,barMinWidth:y,barGap:_,barCategoryGap:x,axisKey:r(s),stackId:i(t)})}),u(n)}function u(t){var e={};g.each(t,function(t,n){var i=t.axisKey,r=t.bandWidth,o=e[i]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=o.stacks;e[i]=o;var s=t.stackId;a[s]||o.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(o.remainedWidth,l),o.remainedWidth-=l);var u=t.barMaxWidth;u&&(a[s].maxWidth=u);var c=t.barMinWidth;c&&(a[s].minWidth=c);var h=t.barGap;null!=h&&(o.gap=h);var f=t.barCategoryGap;null!=f&&(o.categoryGap=f)});var n={};return g.each(e,function(t,e){n[e]={};var i=t.stacks,r=t.bandWidth,o=v(t.categoryGap,r),a=v(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,u=(s-o)/(l+(l-1)*a);u=Math.max(u,0),g.each(i,function(t){var e=t.maxWidth,n=t.minWidth;if(t.width){var i=t.width;e&&(i=Math.min(i,e)),n&&(i=Math.max(i,n)),t.width=i,s-=i+a*i,l--}else{var i=u;e&&e<i&&(i=Math.min(e,s)),n&&n>i&&(i=n),i!==u&&(t.width=i,s-=i+a*i,l--)}}),u=(s-o)/(l+(l-1)*a),u=Math.max(u,0);var c,h=0;g.each(i,function(t,e){t.width||(t.width=u),c=t,h+=t.width*(1+a)}),c&&(h-=c.width*a);var f=-h/2;g.each(i,function(t,i){n[e][i]=n[e][i]||{bandWidth:r,offset:f,width:t.width},f+=t.width*(1+a)})}),n}function c(t,e,n){if(t&&e){var o=t[r(e)];return null!=o&&null!=n&&(o=o[i(n)]),o}}function h(t,e){var n=a(t,e),o=l(n),s={},u={};g.each(n,function(t){var e=t.getData(),n=t.coordinateSystem,a=n.getBaseAxis(),l=i(t),c=o[r(a)][l],h=c.offset,f=c.width,p=n.getOtherAxis(a),g=t.get("barMinHeight")||0;s[l]=s[l]||[],u[l]=u[l]||[],e.setLayout({bandWidth:c.bandWidth,offset:h,size:f});for(var m=e.mapDimension(p.dim),v=e.mapDimension(a.dim),y=_(e,m),x=p.isHorizontal(),w=d(a,p,y),b=0,C=e.count();b<C;b++){var S=e.get(m,b),M=e.get(v,b),E=S>=0?"p":"n",I=w;y&&(s[l][M]||(s[l][M]={p:w,n:w}),I=s[l][M][E]);var T,P,L,D;if(x){var A=n.dataToPoint([S,M]);T=I,P=A[1]+h,L=A[0]-w,D=f,Math.abs(L)<g&&(L=(L<0?-1:1)*g),isNaN(L)||y&&(s[l][M][E]+=L)}else{var A=n.dataToPoint([M,S]);T=A[0]+h,P=I,L=f,D=A[1]-w,Math.abs(D)<g&&(D=(D<=0?-1:1)*g),isNaN(D)||y&&(s[l][M][E]+=D)}e.setItemLayout(b,{x:T,y:P,width:L,height:D})}},this)}function f(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function p(t){return t.pipelineContext&&t.pipelineContext.large}function d(t,e,n){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}var g=n(136),m=n(222),v=m.parsePercent,y=n(265),_=y.isDimensionStacked,x=n(242),w="__ec_stack_",b=.5,C="undefined"!=typeof Float32Array?Float32Array:Array,S={seriesType:"bar",plan:x(),reset:function(t){function e(t,e){for(var n,l=t.count,c=new C(2*l),f=new C(2*l),p=new C(l),v=[],y=[],_=0,x=0;null!=(n=t.next());)y[g]=e.get(s,n),y[1-g]=e.get(u,n),v=i.dataToPoint(y,null,v),f[_]=h?r.x+r.width:v[0],c[_++]=v[0],f[_]=h?v[1]:r.y+r.height,c[_++]=v[1],p[x++]=n;e.setLayout({largePoints:c,largeDataIndices:p,largeBackgroundPoints:f,barWidth:m,valueAxisStart:d(o,a,!1),backgroundStart:h?r.x:r.y,valueAxisHorizontal:h})}if(f(t)&&p(t)){var n=t.getData(),i=t.coordinateSystem,r=i.grid.getRect(),o=i.getBaseAxis(),a=i.getOtherAxis(o),s=n.mapDimension(a.dim),u=n.mapDimension(o.dim),h=a.isHorizontal(),g=h?0:1,m=c(l([t]),o,t).width;return m>b||(m=b),{progress:e}}}};e.getLayoutOnAxis=o,e.prepareLayoutBarSeries=a,e.makeColumnLayout=l,e.retrieveColumnLayout=c,e.layout=h,e.largeLayout=S},function(t,e,n){var i=n(136),r=n(222),o=n(223),a=n(271),s=n(270),l=s.prototype,u=Math.ceil,c=Math.floor,h=1e3,f=60*h,p=60*f,d=24*p,g=function(t,e,n,i){for(;n<i;){var r=n+i>>>1;t[r][1]<e?n=r+1:i=r}return n},m=s.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return o.formatTime(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=d,e[1]+=d),e[1]===-(1/0)&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-d}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=r.round(c(e[0]/i)*i)),t.fixMax||(e[1]=r.round(u(e[1]/i)*i))},niceTicks:function(t,e,n){t=t||10;var i=this._extent,o=i[1]-i[0],s=o/t;null!=e&&s<e&&(s=e),null!=n&&s>n&&(s=n);var l=v.length,h=g(v,s,0,l),f=v[Math.min(h,l-1)],p=f[1];if("year"===f[0]){var d=o/p,m=r.nice(d/t,!0);p*=m}var y=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,_=[Math.round(u((i[0]-y)/p)*p+y),Math.round(c((i[1]-y)/p)*p+y)];a.fixExtent(_,i),this._stepLvl=f,this._interval=p,this._niceExtent=_},parse:function(t){return+r.parseDate(t)}});i.each(["contain","normalize"],function(t){m.prototype[t]=function(e){return l[t].call(this,this.parse(e))}});var v=[["hh:mm:ss",h],["hh:mm:ss",5*h],["hh:mm:ss",10*h],["hh:mm:ss",15*h],["hh:mm:ss",30*h],["hh:mm\nMM-dd",f],["hh:mm\nMM-dd",5*f],["hh:mm\nMM-dd",10*f],["hh:mm\nMM-dd",15*f],["hh:mm\nMM-dd",30*f],["hh:mm\nMM-dd",p],["hh:mm\nMM-dd",2*p],["hh:mm\nMM-dd",6*p],["hh:mm\nMM-dd",12*p],["MM-dd\nyyyy",d],["MM-dd\nyyyy",2*d],["MM-dd\nyyyy",3*d],["MM-dd\nyyyy",4*d],["MM-dd\nyyyy",5*d],["MM-dd\nyyyy",6*d],["week",7*d],["MM-dd\nyyyy",10*d],["week",14*d],["week",21*d],["month",31*d],["week",42*d],["month",62*d],["week",70*d],["quarter",95*d],["month",31*d*4],["month",31*d*5],["half-year",380*d/2],["month",31*d*8],["month",31*d*10],["year",380*d]];m.create=function(t){return new m({useUTC:t.ecModel.get("useUTC")})};var y=m;t.exports=y},function(t,e,n){function i(t,e){return h(t,c(e))}var r=n(136),o=n(268),a=n(222),s=n(270),l=o.prototype,u=s.prototype,c=a.getPrecisionSafe,h=a.round,f=Math.floor,p=Math.ceil,d=Math.pow,g=Math.log,m=o.extend({type:"log",base:10,$constructor:function(){o.apply(this,arguments),this._originalScale=new s},getTicks:function(t){var e=this._originalScale,n=this._extent,o=e.getExtent();return r.map(u.getTicks.call(this,t),function(t){var r=a.round(d(this.base,t));return r=t===n[0]&&e.__fixMin?i(r,o[0]):r,r=t===n[1]&&e.__fixMax?i(r,o[1]):r},this)},getMinorTicks:u.getMinorTicks,getLabel:u.getLabel,scale:function(t){return t=l.scale.call(this,t),d(this.base,t)},setExtent:function(t,e){var n=this.base;t=g(t)/g(n),e=g(e)/g(n),u.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=l.getExtent.call(this);e[0]=d(t,e[0]),e[1]=d(t,e[1]);var n=this._originalScale,r=n.getExtent();return n.__fixMin&&(e[0]=i(e[0],r[0])),n.__fixMax&&(e[1]=i(e[1],r[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=g(t[0])/g(e),t[1]=g(t[1])/g(e),l.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var i=a.quantity(n),r=t/n*i;for(r<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var o=[a.round(p(e[0]/i)*i),a.round(f(e[1]/i)*i)];this._interval=i,this._niceExtent=o}},niceExtent:function(t){u.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});r.each(["contain","normalize"],function(t){m.prototype[t]=function(e){return e=g(e)/g(this.base),l[t].call(this,e);
}}),m.create=function(){return new m};var v=m;t.exports=v},function(t,e,n){var i=n(136),r={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!i.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!i.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:i.noop,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}};t.exports=r},function(t,e,n){function i(t,e){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}function r(t,e,n,r,o,l,u){var c=0===t.indexOf("empty");c&&(t=t.substr(5,1).toLowerCase()+t.substr(6));var h;return h=0===t.indexOf("image://")?a.makeImage(t.slice(8),new s(e,n,r,o),u?"center":"cover"):0===t.indexOf("path://")?a.makePath(t.slice(7),{},new s(e,n,r,o),u?"center":"cover"):new v({shape:{symbolType:t,x:e,y:n,width:r,height:o}}),h.__isEmptyBrush=c,h.setColor=i,h.setColor(l),h}var o=n(136),a=n(184),s=n(158),l=n(171),u=l.calculateTextPosition,c=a.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i+o),t.lineTo(n-r,i+o),t.closePath()}}),h=a.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i),t.lineTo(n,i+o),t.lineTo(n-r,i),t.closePath()}}),f=a.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,o=Math.max(r,e.height),a=r/2,s=a*a/(o-a),l=i-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,h=Math.sin(u),f=Math.cos(u),p=.6*a,d=.7*a;t.moveTo(n-c,l+s),t.arc(n,l,a,Math.PI-u,2*Math.PI+u),t.bezierCurveTo(n+c-h*p,l+s+f*p,n,i-d,n,i),t.bezierCurveTo(n,i-d,n-c+h*p,l+s+f*p,n-c,l+s),t.closePath()}}),p=a.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,o=e.y,a=i/3*2;t.moveTo(r,o),t.lineTo(r+a,o+n),t.lineTo(r,o+n/4*3),t.lineTo(r-a,o+n),t.lineTo(r,o),t.closePath()}}),d={line:a.Line,rect:a.Rect,roundRect:a.Rect,square:a.Rect,circle:a.Circle,diamond:h,pin:f,arrow:p,triangle:c},g={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var o=Math.min(n,i);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},m={};o.each(d,function(t,e){m[e]=new t});var v=a.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var i=u(t,e,n),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===e.textPosition&&(i.y=n.y+.4*n.height),i},buildPath:function(t,e,n){var i=e.symbolType;if("none"!==i){var r=m[i];r||(i="rect",r=m[i]),g[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n)}}});e.createSymbol=r},function(t,e,n){function i(t){if(!t.UTF8Encoding)return t;var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,i=0;i<n.length;i++)for(var o=n[i],a=o.geometry,s=a.coordinates,l=a.encodeOffsets,u=0;u<s.length;u++){var c=s[u];if("Polygon"===a.type)s[u]=r(c,l[u],e);else if("MultiPolygon"===a.type)for(var h=0;h<c.length;h++){var f=c[h];c[h]=r(f,l[u][h],e)}}return t.UTF8Encoding=!1,t}function r(t,e,n){for(var i=[],r=e[0],o=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),s+=r,l+=o,r=s,o=l,i.push([s/n,l/n])}return i}function o(t,e){return i(t),a.map(a.filter(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var n=t.properties,i=t.geometry,r=i.coordinates,o=[];"Polygon"===i.type&&o.push({type:"polygon",exterior:r[0],interiors:r.slice(1)}),"MultiPolygon"===i.type&&a.each(r,function(t){t[0]&&o.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var l=new s(n[e||"name"],o,n.cp);return l.properties=n,l})}var a=n(136),s=n(278);t.exports=o},function(t,e,n){function i(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}var r=n(158),o=n(189),a=n(138),s=n(279);i.prototype={constructor:i,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],s=[],l=[],u=this.geometries,c=0;c<u.length;c++)if("polygon"===u[c].type){var h=u[c].exterior;o.fromPoints(h,s,l),a.min(n,n,s),a.max(i,i,l)}return 0===c&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new r(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++)if("polygon"===n[i].type){var o=n[i].exterior,a=n[i].interiors;if(s.contain(o,t[0],t[1])){for(var l=0;l<(a?a.length:0);l++)if(s.contain(a[l]))continue t;return!0}}return!1},transformTo:function(t,e,n,i){var o=this.getBoundingRect(),s=o.width/o.height;n?i||(i=n/s):n=s*i;for(var l=new r(t,e,n,i),u=o.calculateTransform(l),c=this.geometries,h=0;h<c.length;h++)if("polygon"===c[h].type){for(var f=c[h].exterior,p=c[h].interiors,d=0;d<f.length;d++)a.applyTransform(f[d],f[d],u);for(var g=0;g<(p?p.length:0);g++)for(var d=0;d<p[g].length;d++)a.applyTransform(p[g][d],p[g][d],u)}o=this._rect,o.copy(l),this.center=[o.x+o.width/2,o.y+o.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new i(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var l=i;t.exports=l},function(t,e,n){function i(t,e){return Math.abs(t-e)<a}function r(t,e,n){var r=0,a=t[0];if(!a)return!1;for(var s=1;s<t.length;s++){var l=t[s];r+=o(a[0],a[1],l[0],l[1],e,n),a=l}var u=t[0];return i(a[0],u[0])&&i(a[1],u[1])||(r+=o(a[0],a[1],u[0],u[1],e,n)),0!==r}var o=n(196),a=1e-8;e.contain=r},function(t,e,n){function i(t,e){var n=t[1]-t[0],i=e,r=n/i/2;t[0]+=r,t[1]-=r}function r(t,e,n,i){function r(t,e){return t=h(t),e=h(e),d?t>e:t<e}var o=e.length;if(t.onBand&&!n&&o){var s,l,u=t.getExtent();if(1===o)e[0].coord=u[0],s=e[1]={coord:u[0]};else{var c=e[o-1].tickValue-e[0].tickValue,f=(e[o-1].coord-e[0].coord)/c;a(e,function(t){t.coord-=f/2});var p=t.scale.getExtent();l=1+p[1]-e[o-1].tickValue,s={coord:e[o-1].coord+f*l},e.push(s)}var d=u[0]>u[1];r(e[0].coord,u[0])&&(i?e[0].coord=u[0]:e.shift()),i&&r(u[0],e[0].coord)&&e.unshift({coord:u[0]}),r(u[1],s.coord)&&(i?s.coord=u[1]:e.pop()),i&&r(s.coord,u[1])&&e.push({coord:u[1]})}}var o=n(136),a=o.each,s=o.map,l=n(222),u=l.linearMap,c=l.getPixelPrecision,h=l.round,f=n(281),p=f.createAxisTicks,d=f.createAxisLabels,g=f.calculateCategoryInterval,m=[0,1],v=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};v.prototype={constructor:v,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return t>=n&&t<=i},containData:function(t){return this.scale.contain(t)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return c(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&"ordinal"===r.type&&(n=n.slice(),i(n,r.count())),u(t,m,n,e)},coordToData:function(t,e){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&(n=n.slice(),i(n,r.count()));var o=u(t,n,m,e);return this.scale.scale(o)},pointToData:function(t,e){},getTicksCoords:function(t){t=t||{};var e=t.tickModel||this.getTickModel(),n=p(this,e),i=n.ticks,o=s(i,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this),a=e.get("alignWithLabel");return r(this,o,a,t.clamp),o},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var n=this.scale.getMinorTicks(e),i=s(n,function(t){return s(t,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this)},this);return i},getViewLabels:function(){return d(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return g(this)}};var y=v;t.exports=y},function(t,e,n){function i(t){return"category"===t.type?o(t):l(t)}function r(t,e){return"category"===t.type?s(t,e):{ticks:t.scale.getTicks()}}function o(t){var e=t.getLabelModel(),n=a(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function a(t,e){var n=u(t,"labels"),i=C(e),r=c(n,i);if(r)return r;var o,a;return v.isFunction(i)?o=m(t,i):(a="auto"===i?f(t):i,o=g(t,a)),h(n,i,{labels:o,labelCategoryInterval:a})}function s(t,e){var n=u(t,"ticks"),i=C(e),r=c(n,i);if(r)return r;var o,s;if(e.get("show")&&!t.scale.isBlank()||(o=[]),v.isFunction(i))o=m(t,i,!0);else if("auto"===i){var l=a(t,t.getLabelModel());s=l.labelCategoryInterval,o=v.map(l.labels,function(t){return t.tickValue})}else s=i,o=g(t,s,!0);return h(n,i,{ticks:o,tickCategoryInterval:s})}function l(t){var e=t.scale.getTicks(),n=b(t);return{labels:v.map(e,function(e,i){return{formattedLabel:n(e,i),rawLabel:t.scale.getLabel(e),tickValue:e}})}}function u(t,e){return M(t)[e]||(M(t)[e]=[])}function c(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function h(t,e,n){return t.push({key:e,value:n}),n}function f(t){var e=M(t).autoInterval;return null!=e?e:M(t).autoInterval=t.calculateCategoryInterval()}function p(t){var e=d(t),n=b(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=t.scale,o=r.getExtent(),a=r.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=t.dataToCoord(l+1)-t.dataToCoord(l),c=Math.abs(u*Math.cos(i)),h=Math.abs(u*Math.sin(i)),f=0,p=0;l<=o[1];l+=s){var g=0,m=0,v=y.getBoundingRect(n(l),e.font,"center","top");g=1.3*v.width,m=1.3*v.height,f=Math.max(f,g,7),p=Math.max(p,m,7)}var _=f/c,x=p/h;isNaN(_)&&(_=1/0),isNaN(x)&&(x=1/0);var w=Math.max(0,Math.floor(Math.min(_,x))),C=M(t.model),S=t.getExtent(),E=C.lastAutoInterval,I=C.lastTickCount;return null!=E&&null!=I&&Math.abs(E-w)<=1&&Math.abs(I-a)<=1&&E>w&&C.axisExtend0===S[0]&&C.axisExtend1===S[1]?w=E:(C.lastTickCount=a,C.lastAutoInterval=w,C.axisExtend0=S[0],C.axisExtend1=S[1]),w}function d(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function g(t,e,n){function i(t){l.push(n?t:{formattedLabel:r(t),rawLabel:o.getLabel(t),tickValue:t})}var r=b(t),o=t.scale,a=o.getExtent(),s=t.getLabelModel(),l=[],u=Math.max((e||0)+1,1),c=a[0],h=o.count();0!==c&&u>1&&h/u>2&&(c=Math.round(Math.ceil(c/u)*u));var f=S(t),p=s.get("showMinLabel")||f,d=s.get("showMaxLabel")||f;p&&c!==a[0]&&i(a[0]);for(var g=c;g<=a[1];g+=u)i(g);return d&&g-u!==a[1]&&i(a[1]),l}function m(t,e,n){var i=t.scale,r=b(t),o=[];return v.each(i.getTicks(),function(t){var a=i.getLabel(t);e(t,a)&&o.push(n?t:{formattedLabel:r(t),rawLabel:a,tickValue:t})}),o}var v=n(136),y=n(171),_=n(177),x=_.makeInner,w=n(266),b=w.makeLabelFormatter,C=w.getOptionCategoryInterval,S=w.shouldShowAllLabels,M=x();e.createAxisLabels=i,e.createAxisTicks=r,e.calculateCategoryInterval=p},function(t,e,n){var i=n(131);n(283),n(284);var r=n(292),o=n(293),a=n(294);n(295),i.registerVisual(r("line","circle","line")),i.registerLayout(o("line")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,a("line"))},function(t,e,n){var i=n(132),r=(i.__DEV__,n(257)),o=n(236),a=o.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return r(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});t.exports=a},function(t,e,n){function i(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i[0]!==r[0]||i[1]!==r[1])return}return!0}}function r(t,e){var n=[],i=[],r=[],o=[];return g(t,n,i),g(e,r,o),Math.max(Math.abs(n[0]-r[0]),Math.abs(n[1]-r[1]),Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]))}function o(t){return"number"==typeof t?t:t?.5:0}function a(t,e,n){if(!n.valueDim)return[];for(var i=[],r=0,o=e.count();r<o;r++)i.push(I(n,t,e,r));return i}function s(t,e,n){for(var i=e.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,o=[],a=0;a<t.length-1;a++){var s=t[a+1],l=t[a];o.push(l);var u=[];switch(n){case"end":u[r]=s[r],u[1-r]=l[1-r],o.push(u);break;case"middle":var c=(l[r]+s[r])/2,h=[];u[r]=h[r]=c,u[1-r]=l[1-r],h[1-r]=s[1-r],o.push(u),o.push(h);break;default:u[r]=l[r],u[1-r]=s[1-r],o.push(u)}}return t[a]&&o.push(t[a]),o}function l(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var i,r,o=n.length-1;o>=0;o--){var a=n[o].dimension,s=t.dimensions[a],l=t.getDimensionInfo(s);if(i=l&&l.coordDim,"x"===i||"y"===i){r=n[o];break}}if(r){var u=e.getAxis(i),c=p.map(r.stops,function(t){return{coord:u.toGlobalCoord(u.dataToCoord(t.value)),color:t.color}}),h=c.length,f=r.outerColors.slice();h&&c[0].coord>c[h-1].coord&&(c.reverse(),f.reverse());var d=10,g=c[0].coord-d,m=c[h-1].coord+d,v=m-g;if(v<.001)return"transparent";p.each(c,function(t){t.offset=(t.coord-g)/v}),c.push({offset:h?c[h-1].offset:.5,color:f[1]||"transparent"}),c.unshift({offset:h?c[0].offset:.5,color:f[0]||"transparent"});var y=new _.LinearGradient(0,0,0,0,c,!0);return y[i]=g,y[i+"2"]=m,y}}}function u(t,e,n){var i=t.get("showAllSymbol"),r="auto"===i;if(!i||r){var o=n.getAxesByScale("ordinal")[0];if(o&&(!r||!c(o,e))){var a=e.mapDimension(o.dim),s={};return p.each(o.getViewLabels(),function(t){s[t.tickValue]=1}),function(t){return!s.hasOwnProperty(e.get(a,t))}}}}function c(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),o=Math.max(1,Math.round(r/5)),a=0;a<r;a+=o)if(1.5*v.getSymbolSize(e,a)[t.isHorizontal()?1:0]>i)return!1;return!0}function h(t,e,n){if("cartesian2d"===t.type){var i=t.getBaseAxis().isHorizontal(),r=P(t,e,n);if(!n.get("clip",!0)){var o=r.shape,a=Math.max(o.width,o.height);i?(o.y-=a,o.height+=2*a):(o.x-=a,o.width+=2*a)}return r}return L(t,e,n)}var f=n(132),p=(f.__DEV__,n(136)),d=n(189),g=d.fromPoints,m=n(285),v=n(286),y=n(288),_=n(184),x=n(177),w=n(290),b=w.Polyline,C=w.Polygon,S=n(241),M=n(289),E=M.prepareDataCoordInfo,I=M.getStackedOnPoint,T=n(291),P=T.createGridClipPath,L=T.createPolarClipPath,D=S.extend({type:"line",init:function(){var t=new _.Group,e=new m;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var r=t.coordinateSystem,c=this.group,f=t.getData(),d=t.getModel("lineStyle"),g=t.getModel("areaStyle"),m=f.mapArray(f.getItemLayout),v="polar"===r.type,y=this._coordSys,_=this._symbolDraw,x=this._polyline,w=this._polygon,b=this._lineGroup,C=t.get("animation"),S=!g.isEmpty(),M=g.get("origin"),I=E(r,f,M),T=a(r,f,I),P=t.get("showSymbol"),L=P&&!v&&u(t,f,r),D=this._data;D&&D.eachItemGraphicEl(function(t,e){t.__temp&&(c.remove(t),D.setItemGraphicEl(e,null))}),P||_.remove(),c.add(b);var A,k=!v&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(A=r.getArea(),null!=A.width?(A.x-=.1,A.y-=.1,A.width+=.2,A.height+=.2):A.r0&&(A.r0-=.5,A.r1+=.5)),this._clipShapeForSymbol=A,x&&y.type===r.type&&k===this._step?(S&&!w?w=this._newPolygon(m,T,r,C):w&&!S&&(b.remove(w),w=this._polygon=null),b.setClipPath(h(r,!1,t)),P&&_.updateData(f,{isIgnore:L,clipShape:A}),f.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),i(this._stackedOnPoints,T)&&i(this._points,m)||(C?this._updateAnimation(f,T,r,n,k,M):(k&&(m=s(m,r,k),T=s(T,r,k)),x.setShape({points:m}),w&&w.setShape({points:m,stackedOnPoints:T})))):(P&&_.updateData(f,{isIgnore:L,clipShape:A}),k&&(m=s(m,r,k),T=s(T,r,k)),x=this._newPolyline(m,r,C),S&&(w=this._newPolygon(m,T,r,C)),b.setClipPath(h(r,!0,t)));var N=l(f,r)||f.getVisual("color");x.useStyle(p.defaults(d.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"}));var O=t.get("smooth");if(O=o(t.get("smooth")),x.setShape({smooth:O,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),w){var R=f.getCalculationInfo("stackedOnSeries"),F=0;w.useStyle(p.defaults(g.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel"})),R&&(F=o(R.get("smooth"))),w.setShape({smooth:O,stackedOnSmooth:F,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=f,this._coordSys=r,this._stackedOnPoints=T,this._points=m,this._step=k,this._valueOrigin=M},dispose:function(){},highlight:function(t,e,n,i){var r=t.getData(),o=x.queryDataIndex(r,i);if(!(o instanceof Array)&&null!=o&&o>=0){var a=r.getItemGraphicEl(o);if(!a){var s=r.getItemLayout(o);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;a=new v(r,o),a.position=s,a.setZ(t.get("zlevel"),t.get("z")),a.ignore=isNaN(s[0])||isNaN(s[1]),a.__temp=!0,r.setItemGraphicEl(o,a),a.stopSymbolAnimation(!0),this.group.add(a)}a.highlight()}else S.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var r=t.getData(),o=x.queryDataIndex(r,i);if(null!=o&&o>=0){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else S.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new b({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e,e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new C({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n,n},_updateAnimation:function(t,e,n,i,o,a){var l=this._polyline,u=this._polygon,c=t.hostModel,h=y(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),f=h.current,p=h.stackedOnCurrent,d=h.next,g=h.stackedOnNext;if(o&&(f=s(h.current,n,o),p=s(h.stackedOnCurrent,n,o),d=s(h.next,n,o),g=s(h.stackedOnNext,n,o)),r(f,d)>3e3||u&&r(p,g)>3e3)return l.setShape({points:d}),void(u&&u.setShape({points:d,stackedOnPoints:g}));l.shape.__points=h.current,l.shape.points=f,_.updateProps(l,{shape:{points:d}},c),u&&(u.setShape({points:f,stackedOnPoints:p}),_.updateProps(u,{shape:{points:d,stackedOnPoints:g}},c));for(var m=[],v=h.status,x=0;x<v.length;x++){var w=v[x].cmd;if("="===w){var b=t.getItemGraphicEl(v[x].idx1);b&&m.push({el:b,ptIdx:x})}}l.animators&&l.animators.length&&l.animators[0].during(function(){for(var t=0;t<m.length;t++){var e=m[t].el;e.attr("position",l.shape.__points[m[t].ptIdx])}})},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});t.exports=D},function(t,e,n){function i(t){this.group=new s.Group,this._symbolCtor=t||l}function r(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function o(t){return null==t||c(t)||(t={isIgnore:t}),t||{}}function a(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}var s=n(184),l=n(286),u=n(136),c=u.isObject,h=i.prototype;h.updateData=function(t,e){e=o(e);var n=this.group,i=t.hostModel,l=this._data,u=this._symbolCtor,c=a(t);l||n.removeAll(),t.diff(l).add(function(i){var o=t.getItemLayout(i);if(r(t,o,i,e)){var a=new u(t,i,c);a.attr("position",o),t.setItemGraphicEl(i,a),n.add(a)}}).update(function(o,a){var h=l.getItemGraphicEl(a),f=t.getItemLayout(o);return r(t,f,o,e)?(h?(h.updateData(t,o,c),s.updateProps(h,{position:f},i)):(h=new u(t,o),h.attr("position",f)),n.add(h),void t.setItemGraphicEl(o,h)):void n.remove(h)}).remove(function(t){var e=l.getItemGraphicEl(t);e&&e.fadeOut(function(){n.remove(e)})}).execute(),this._data=t},h.isPersistent=function(){return!0},h.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,n){var i=t.getItemLayout(n);e.attr("position",i)})},h.incrementalPrepareUpdate=function(t){this._seriesScope=a(t),this._data=null,this.group.removeAll()},h.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}n=o(n);for(var a=t.start;a<t.end;a++){var s=e.getItemLayout(a);if(r(e,s,a,n)){var l=new this._symbolCtor(e,a,this._seriesScope);l.traverse(i),l.attr("position",s),this.group.add(l),e.setItemGraphicEl(a,l)}}},h.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()};var f=i;t.exports=f},function(t,e,n){function i(t,e,n){c.Group.call(this),this.updateData(t,e,n)}function r(t){return[t[0]/2,t[1]/2]}function o(t,e){this.parent.drift(t,e)}function a(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var n=this.__symbolOriginalScale,i=n[1]/n[0],r={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(r,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}var s=n(136),l=n(276),u=l.createSymbol,c=n(184),h=n(222),f=h.parsePercent,p=n(287),d=p.getDefaultLabel,g=i.prototype,m=i.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};g._createSymbol=function(t,e,n,i,a){this.removeAll();var s=e.getItemVisual(n,"color"),l=u(t,-1,-1,2,2,s,a);l.attr({z2:100,culling:!0,scale:r(i)}),l.drift=o,this._symbolType=t,this.add(l)},g.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},g.getSymbolPath=function(){return this.childAt(0)},g.getScale=function(){return this.childAt(0).scale},g.highlight=function(){this.childAt(0).trigger("emphasis")},g.downplay=function(){this.childAt(0).trigger("normal")},g.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},g.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},g.updateData=function(t,e,n){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",o=t.hostModel,a=m(t,e),s=i!==this._symbolType;if(s){var l=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,a,l)}else{var u=this.childAt(0);u.silent=!1,c.updateProps(u,{scale:r(a)},o,e)}if(this._updateCommon(t,e,a,n),s){var u=this.childAt(0),h=n&&n.fadeIn,f={scale:u.scale.slice()};h&&(f.style={opacity:u.style.opacity}),u.scale=[0,0],h&&(u.style.opacity=0),c.initProps(u,f,o,e)}this._seriesModel=o};var v=["itemStyle"],y=["emphasis","itemStyle"],_=["label"],x=["emphasis","label"];g._updateCommon=function(t,e,n,i){function o(e,n){return D?t.getName(e):d(t,e)}var l=this.childAt(0),u=t.hostModel,h=t.getItemVisual(e,"color");"image"!==l.type?l.useStyle({strokeNoScale:!0}):l.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var p=i&&i.itemStyle,g=i&&i.hoverItemStyle,m=i&&i.symbolOffset,w=i&&i.labelModel,b=i&&i.hoverLabelModel,C=i&&i.hoverAnimation,S=i&&i.cursorStyle;if(!i||t.hasItemOption){var M=i&&i.itemModel?i.itemModel:t.getItemModel(e);p=M.getModel(v).getItemStyle(["color"]),g=M.getModel(y).getItemStyle(),m=M.getShallow("symbolOffset"),w=M.getModel(_),b=M.getModel(x),C=M.getShallow("hoverAnimation"),S=M.getShallow("cursor")}else g=s.extend({},g);var E=l.style,I=t.getItemVisual(e,"symbolRotate");l.attr("rotation",(I||0)*Math.PI/180||0),m&&l.attr("position",[f(m[0],n[0]),f(m[1],n[1])]),S&&l.attr("cursor",S),l.setColor(h,i&&i.symbolInnerColor),l.setStyle(p);var T=t.getItemVisual(e,"opacity");null!=T&&(E.opacity=T);var P=t.getItemVisual(e,"liftZ"),L=l.__z2Origin;null!=P?null==L&&(l.__z2Origin=l.z2,l.z2+=P):null!=L&&(l.z2=L,l.__z2Origin=null);var D=i&&i.useNameLabel;c.setLabelStyle(E,g,w,b,{labelFetcher:u,labelDataIndex:e,defaultText:o,isRectText:!0,autoColor:h}),l.__symbolOriginalScale=r(n),l.hoverStyle=g,l.highDownOnUpdate=C&&u.isAnimationEnabled()?a:null,c.setHoverStyle(l)},g.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,!(e&&e.keepLabel)&&(n.style.text=null),c.updateProps(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},s.inherits(i,c.Group);var w=i;t.exports=w},function(t,e,n){function i(t,e){var n=t.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return o(t,e,n[0]);if(i){for(var r=[],a=0;a<n.length;a++){var s=o(t,e,n[a]);r.push(s)}return r.join(" ")}}var r=n(238),o=r.retrieveRawValue;e.getDefaultLabel=i},function(t,e,n){function i(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}function r(t,e,n,r,o,l,u,c){for(var h=i(t,e),f=[],p=[],d=[],g=[],m=[],v=[],y=[],_=a(o,e,u),x=a(l,t,c),w=0;w<h.length;w++){var b=h[w],C=!0;switch(b.cmd){case"=":var S=t.getItemLayout(b.idx),M=e.getItemLayout(b.idx1);(isNaN(S[0])||isNaN(S[1]))&&(S=M.slice()),f.push(S),p.push(M),d.push(n[b.idx]),g.push(r[b.idx1]),y.push(e.getRawIndex(b.idx1));break;case"+":var E=b.idx;f.push(o.dataToPoint([e.get(_.dataDimsForPoint[0],E),e.get(_.dataDimsForPoint[1],E)])),p.push(e.getItemLayout(E).slice()),d.push(s(_,o,e,E)),g.push(r[E]),y.push(e.getRawIndex(E));break;case"-":var E=b.idx,I=t.getRawIndex(E);I!==E?(f.push(t.getItemLayout(E)),p.push(l.dataToPoint([t.get(x.dataDimsForPoint[0],E),t.get(x.dataDimsForPoint[1],E)])),d.push(n[E]),g.push(s(x,l,t,E)),y.push(I)):C=!1}C&&(m.push(b),v.push(v.length))}v.sort(function(t,e){return y[t]-y[e]});for(var T=[],P=[],L=[],D=[],A=[],w=0;w<v.length;w++){var E=v[w];T[w]=f[E],P[w]=p[E],L[w]=d[E],D[w]=g[E],A[w]=m[E]}return{current:T,next:P,stackedOnCurrent:L,stackedOnNext:D,status:A}}var o=n(289),a=o.prepareDataCoordInfo,s=o.getStackedOnPoint;t.exports=r},function(t,e,n){function i(t,e,n){var i,o=t.getBaseAxis(),a=t.getOtherAxis(o),l=r(a,n),c=o.dim,h=a.dim,f=e.mapDimension(h),p=e.mapDimension(c),d="x"===h||"radius"===h?1:0,g=u(t.dimensions,function(t){return e.mapDimension(t)}),m=e.getCalculationInfo("stackResultDimension");return(i|=s(e,g[0]))&&(g[0]=m),(i|=s(e,g[1]))&&(g[1]=m),{dataDimsForPoint:g,valueStart:l,valueAxisDim:h,baseAxisDim:c,stacked:!!i,valueDim:f,baseDim:p,baseDataOffset:d,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function r(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]),n}function o(t,e,n,i){var r=NaN;t.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var o=t.baseDataOffset,a=[];return a[o]=n.get(t.baseDim,i),a[1-o]=r,e.dataToPoint(a)}var a=n(265),s=a.isDimensionStacked,l=n(136),u=l.map;e.prepareDataCoordInfo=i,e.getStackedOnPoint=o},function(t,e,n){function i(t){return isNaN(t[0])||isNaN(t[1])}function r(t,e,n,i,r,s,l,u,c,h,f){return"none"!==h&&h?o.apply(this,arguments):a.apply(this,arguments)}function o(t,e,n,r,o,a,s,l,u,c,h){for(var f=0,p=n,g=0;g<r;g++){var y=e[p];if(p>=o||p<0)break;if(i(y)){if(h){p+=a;continue}break}if(p===n)t[a>0?"moveTo":"lineTo"](y[0],y[1]);else if(u>0){var _=e[f],x="y"===c?1:0,w=(y[x]-_[x])*u;d(m,_),m[x]=_[x]+w,d(v,y),v[x]=y[x]-w,t.bezierCurveTo(m[0],m[1],v[0],v[1],y[0],y[1])}else t.lineTo(y[0],y[1]);f=p,p+=a}return g}function a(t,e,n,r,o,a,s,l,c,y,_){for(var x=0,w=n,b=0;b<r;b++){var C=e[w];if(w>=o||w<0)break;if(i(C)){if(_){w+=a;continue}break}if(w===n)t[a>0?"moveTo":"lineTo"](C[0],C[1]),d(m,C);else if(c>0){var S=w+a,M=e[S];if(_)for(;M&&i(e[S]);)S+=a,M=e[S];var E=.5,I=e[x],M=e[S];if(!M||i(M))d(v,C);else{i(M)&&!_&&(M=C),u.sub(g,M,I);var T,P;if("x"===y||"y"===y){var L="x"===y?0:1;T=Math.abs(C[L]-I[L]),P=Math.abs(C[L]-M[L])}else T=u.dist(C,I),P=u.dist(C,M);E=P/(P+T),p(v,C,g,-c*(1-E))}h(m,m,l),f(m,m,s),h(v,v,l),f(v,v,s),t.bezierCurveTo(m[0],m[1],v[0],v[1],C[0],C[1]),p(m,C,g,c*E)}else t.lineTo(C[0],C[1]);x=w,w+=a}return b}function s(t,e){var n=[1/0,1/0],i=[-(1/0),-(1/0)];if(e)for(var r=0;r<t.length;r++){var o=t[r];o[0]<n[0]&&(n[0]=o[0]),o[1]<n[1]&&(n[1]=o[1]),o[0]>i[0]&&(i[0]=o[0]),o[1]>i[1]&&(i[1]=o[1])}return{min:e?n:i,max:e?i:n}}var l=n(186),u=n(138),c=n(201),h=u.min,f=u.max,p=u.scaleAndAdd,d=u.copy,g=[],m=[],v=[],y=l.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:c(l.prototype.brush),buildPath:function(t,e){var n=e.points,o=0,a=n.length,l=s(n,e.smoothConstraint);if(e.connectNulls){for(;a>0&&i(n[a-1]);a--);for(;o<a&&i(n[o]);o++);}for(;o<a;)o+=r(t,n,o,a,a,1,l.min,l.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),_=l.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:c(l.prototype.brush),buildPath:function(t,e){var n=e.points,o=e.stackedOnPoints,a=0,l=n.length,u=e.smoothMonotone,c=s(n,e.smoothConstraint),h=s(o,e.smoothConstraint);if(e.connectNulls){for(;l>0&&i(n[l-1]);l--);for(;a<l&&i(n[a]);a++);}for(;a<l;){var f=r(t,n,a,l,l,1,c.min,c.max,e.smooth,u,e.connectNulls);r(t,o,a+f-1,f,l,-1,h.min,h.max,e.stackedOnSmooth,u,e.connectNulls),a+=f+1,t.closePath()}}});e.Polyline=y,e.Polygon=_},function(t,e,n){function i(t,e,n){var i=t.getArea(),r=t.getBaseAxis().isHorizontal(),o=i.x,s=i.y,l=i.width,u=i.height,c=n.get("lineStyle.width")||2;o-=c/2,s-=c/2,l+=c,u+=c,o=Math.floor(o),l=Math.round(l);var h=new a.Rect({shape:{x:o,y:s,width:l,height:u}});return e&&(h.shape[r?"width":"height"]=0,a.initProps(h,{shape:{width:l,height:u}},n)),h}function r(t,e,n){var i=t.getArea(),r=new a.Sector({shape:{cx:l(t.cx,1),cy:l(t.cy,1),r0:l(i.r0,1),r:l(i.r,1),startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return e&&(r.shape.endAngle=i.startAngle,a.initProps(r,{shape:{endAngle:i.endAngle}},n)),r}function o(t,e,n){return t?"polar"===t.type?r(t,e,n):"cartesian2d"===t.type?i(t,e,n):null:null}var a=n(184),s=n(222),l=s.round;e.createGridClipPath=i,e.createPolarClipPath=r,e.createClipPath=o},function(t,e,n){function i(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(t,i,r){function a(e,n){if(g){var i=t.getRawValue(n),r=t.getDataParams(n);f&&e.setItemVisual(n,"symbol",l(i,r)),p&&e.setItemVisual(n,"symbolSize",u(i,r)),d&&e.setItemVisual(n,"symbolRotate",h(i,r))}if(e.hasItemOption){var o=e.getItemModel(n),a=o.getShallow("symbol",!0),s=o.getShallow("symbolSize",!0),c=o.getShallow("symbolRotate",!0),m=o.getShallow("symbolKeepAspect",!0);null!=a&&e.setItemVisual(n,"symbol",a),null!=s&&e.setItemVisual(n,"symbolSize",s),null!=c&&e.setItemVisual(n,"symbolRotate",c),null!=m&&e.setItemVisual(n,"symbolKeepAspect",m)}}var s=t.getData(),l=t.get("symbol"),u=t.get("symbolSize"),c=t.get("symbolKeepAspect"),h=t.get("symbolRotate"),f=o(l),p=o(u),d=o(h),g=f||p||d,m=!f&&l?l:e,v=p?null:u;
if(s.setVisual({legendSymbol:n||m,symbol:m,symbolSize:v,symbolKeepAspect:c,symbolRotate:h}),!i.isSeriesFiltered(t))return{dataEach:s.hasItemOption||g?a:null}}}}var r=n(136),o=r.isFunction;t.exports=i},function(t,e,n){function i(t){return{seriesType:t,plan:a(),reset:function(t){function e(t,e){for(var n=t.end-t.start,r=a&&new Float32Array(n*u),o=t.start,l=0,c=[],h=[];o<t.end;o++){var f;if(1===u){var p=e.get(s[0],o);f=!isNaN(p)&&i.dataToPoint(p,null,h)}else{var p=c[0]=e.get(s[0],o),d=c[1]=e.get(s[1],o);f=!isNaN(p)&&!isNaN(d)&&i.dataToPoint(c,null,h)}a?(r[l++]=f?f[0]:NaN,r[l++]=f?f[1]:NaN):e.setItemLayout(o,f&&f.slice()||[NaN,NaN])}a&&e.setLayout("symbolPoints",r)}var n=t.getData(),i=t.coordinateSystem,r=t.pipelineContext,a=r.large;if(i){var s=o(i.dimensions,function(t){return n.mapDimension(t)}).slice(0,2),u=s.length,c=n.getCalculationInfo("stackResultDimension");return l(n,s[0])&&(s[0]=c),l(n,s[1])&&(s[1]=c),u&&{progress:e}}}}}var r=n(136),o=r.map,a=n(242),s=n(265),l=s.isDimensionStacked;t.exports=i},function(t,e){function n(t){return{seriesType:t,modifyOutputEnd:!0,reset:function(t,e,n){var o=t.getData(),a=t.get("sampling"),s=t.coordinateSystem;if("cartesian2d"===s.type&&a){var l=s.getBaseAxis(),u=s.getOtherAxis(l),c=l.getExtent(),h=Math.abs(c[1]-c[0]),f=Math.round(o.count()/h);if(f>1){var p;"string"==typeof a?p=i[a]:"function"==typeof a&&(p=a),p&&t.setData(o.downSample(o.mapDimension(u.dim),1/f,p,r))}}}}}var i={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-(1/0),n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},r=function(t,e){return Math.round(t.length/2)};t.exports=n},function(t,e,n){var i=n(131),r=n(136),o=n(184);n(296),n(304),i.extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new o.Rect({shape:t.coordinateSystem.getRect(),style:r.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),i.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})},function(t,e,n){function i(t,e,n){return t.getCoordSysModel()===e}function r(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}function o(t,e,n,i){function r(t){return t.dim+"_"+t.index}n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,s=t[e],l=n.model,u=l.get("axisLine.onZero"),c=l.get("axisLine.onZeroAxisIndex");if(u){if(null!=c)a(s[c])&&(o=s[c]);else for(var h in s)if(s.hasOwnProperty(h)&&a(s[h])&&!i[r(s[h])]){o=s[h];break}o&&(i[r(o)]=!0)}}function a(t){return t&&"category"!==t.type&&"time"!==t.type&&x(t)}function s(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}function l(t,e){return d(P,function(e){var n=t.getReferringComponents(e)[0];return n})}function u(t){return"cartesian2d"===t.get("coordinateSystem")}var c=n(132),h=(c.__DEV__,n(136)),f=h.isObject,p=h.each,d=h.map,g=h.indexOf,m=(h.retrieve,n(221)),v=m.getLayoutRect,y=n(266),_=y.createScaleByModel,x=y.ifAxisCrossZero,w=y.niceScaleExtent,b=y.estimateLabelUnionRect,C=n(297),S=n(299),M=n(231),E=n(265),I=E.getStackedDimension;n(300);var T=r.prototype;T.type="grid",T.axisPointerEnabled=!0,T.getRect=function(){return this._rect},T.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),p(n.x,function(t){w(t.scale,t.model)}),p(n.y,function(t){w(t.scale,t.model)});var i={};p(n.x,function(t){o(n,"y",t,i)}),p(n.y,function(t){o(n,"x",t,i)}),this.resize(this.model,e)},T.resize=function(t,e,n){function i(){p(o,function(t){var e=t.isHorizontal(),n=e?[0,r.width]:[0,r.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),s(t,e?r.x:r.y)})}var r=v(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=r;var o=this._axesList;i(),!n&&t.get("containLabel")&&(p(o,function(t){if(!t.model.get("axisLabel.inside")){var e=b(t);if(e){var n=t.isHorizontal()?"height":"width",i=t.model.get("axisLabel.margin");r[n]-=e[n]+i,"top"===t.position?r.y+=e.height+i:"left"===t.position&&(r.x+=e.width+i)}}}),i())},T.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},T.getAxes=function(){return this._axesList.slice()},T.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}f(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===t||r[i].getAxis("y").index===e)return r[i]},T.getCartesians=function(){return this._coordsList.slice()},T.convertToPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},T.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},T._findConvertTarget=function(t,e){var n,i,r=e.seriesModel,o=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0],a=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=e.gridModel,l=this._coordsList;if(r)n=r.coordinateSystem,g(l,n)<0&&(n=null);else if(o&&a)n=this.getCartesian(o.componentIndex,a.componentIndex);else if(o)i=this.getAxis("x",o.componentIndex);else if(a)i=this.getAxis("y",a.componentIndex);else if(s){var u=s.coordinateSystem;u===this&&(n=this._coordsList[0])}return{cartesian:n,axis:i}},T.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},T._initCartesian=function(t,e,n){function r(n){return function(r,l){if(i(r,t,e)){var u=r.get("position");"x"===n?"top"!==u&&"bottom"!==u&&(u=o.bottom?"top":"bottom"):"left"!==u&&"right"!==u&&(u=o.left?"right":"left"),o[u]=!0;var c=new S(n,_(r),[0,0],r.get("type"),u),h="category"===c.type;c.onBand=h&&r.get("boundaryGap"),c.inverse=r.get("inverse"),r.axis=c,c.model=r,c.grid=this,c.index=l,this._axesList.push(c),a[n][l]=c,s[n]++}}}var o={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},s={x:0,y:0};return e.eachComponent("xAxis",r("x"),this),e.eachComponent("yAxis",r("y"),this),s.x&&s.y?(this._axesMap=a,void p(a.x,function(e,n){p(a.y,function(i,r){var o="x"+n+"y"+r,a=new C(o);a.grid=this,a.model=t,this._coordsMap[o]=a,this._coordsList.push(a),a.addAxis(e),a.addAxis(i)},this)},this)):(this._axesMap={},void(this._axesList=[]))},T._updateScale=function(t,e){function n(t,e,n){p(t.mapDimension(e.dim,!0),function(n){e.scale.unionExtentFromData(t,I(t,n))})}p(this._axesList,function(t){t.scale.setExtent(1/0,-(1/0))}),t.eachSeries(function(r){if(u(r)){var o=l(r,t),a=o[0],s=o[1];if(!i(a,e,t)||!i(s,e,t))return;var c=this.getCartesian(a.componentIndex,s.componentIndex),h=r.getData(),f=c.getAxis("x"),p=c.getAxis("y");"list"===h.type&&(n(h,f,r),n(h,p,r))}},this)},T.getTooltipAxes=function(t){var e=[],n=[];return p(this.getCartesians(),function(i){var r=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),o=i.getOtherAxis(r);g(e,r)<0&&e.push(r),g(n,o)<0&&n.push(o)}),{baseAxes:e,otherAxes:n}};var P=["xAxis","yAxis"];r.create=function(t,e){var n=[];return t.eachComponent("grid",function(i,o){var a=new r(i,t,e);a.name="grid_"+o,a.resize(i,e,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(e){if(u(e)){var n=l(e,t),i=n[0],r=n[1],o=i.getCoordSysModel(),a=o.coordinateSystem;e.coordinateSystem=a.getCartesian(i.componentIndex,r.componentIndex)}}),n},r.dimensions=r.prototype.dimensions=C.prototype.dimensions,M.register("cartesian2d",r);var L=r;t.exports=L},function(t,e,n){function i(t){a.call(this,t)}var r=n(136),o=n(158),a=n(298);i.prototype={constructor:i,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var i=this.getAxis("x"),r=this.getAxis("y");return n=n||[],n[0]=i.toGlobalCoord(i.dataToCoord(t[0])),n[1]=r.toGlobalCoord(r.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),o=i.getExtent(),a=n.parse(t[0]),s=i.parse(t[1]);return e=e||[],e[0]=Math.min(Math.max(Math.min(r[0],r[1]),a),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return e=e||[],e[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]),r=Math.max(t[0],t[1])-n,a=Math.max(e[0],e[1])-i,s=new o(n,i,r,a);return s}},r.inherits(i,a);var s=i;t.exports=s},function(t,e,n){function i(t){return this._axes[t]}var r=n(136),o=function(t){this._axes={},this._dimList=[],this.name=t||""};o.prototype={constructor:o,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return r.map(this._dimList,i,this)},getAxesByScale:function(t){return t=t.toLowerCase(),r.filter(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},r=0;r<n.length;r++){var o=n[r],a=this._axes[o];i[o]=a[e](t[o])}return i}};var a=o;t.exports=a},function(t,e,n){var i=n(136),r=n(280),o=function(t,e,n,i,o){r.call(this,t,e,n),this.type=i||"value",this.position=o||"bottom"};o.prototype={constructor:o,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},i.inherits(o,r);var a=o;t.exports=a},function(t,e,n){n(301);var i=n(219),r=i.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});t.exports=r},function(t,e,n){function i(t,e){return e.type||(e.data?"category":"value")}var r=n(136),o=n(219),a=n(302),s=n(275),l=o.extend({type:"cartesian2dAxis",axis:null,init:function(){l.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){l.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){l.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});r.merge(l.prototype,s);var u={offset:0};a("x",l,i,u),a("y",l,i,u);var c=l;t.exports=c},function(t,e,n){function i(t,e,n,i){r.each(h,function(a){e.extend({type:t+"Axis."+a,mergeDefaultAndTheme:function(e,i){var o=this.layoutMode,s=o?l(e):{},c=i.getTheme();r.merge(e,c.get(a+"Axis")),r.merge(e,this.getDefaultOption()),e.type=n(t,e),o&&u(e,s,o)},optionUpdated:function(){var t=this.option;"category"===t.type&&(this.__ordinalMeta=c.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:r.mergeAll([{},o[a+"Axis"],i],!0)})}),a.registerSubTypeDefaulter(t+"Axis",r.curry(n,t))}var r=n(136),o=n(303),a=n(219),s=n(221),l=s.getLayoutParams,u=s.mergeLayoutParam,c=n(269),h=["value","category","time","log"];t.exports=i},function(t,e,n){var i=n(136),r={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},o={};o.categoryAxis=i.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},r),o.valueAxis=i.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},r),o.timeAxis=i.defaults({scale:!0,min:"dataMin",max:"dataMax"},o.valueAxis),o.logAxis=i.defaults({scale:!0,logBase:10},o.valueAxis);var a=o;t.exports=a},function(t,e,n){n(301),n(305)},function(t,e,n){var i=n(136),r=n(184),o=n(306),a=n(307),s=n(309),l=n(310),u=l.rectCoordAxisBuildSplitArea,c=l.rectCoordAxisHandleRemove,h=["axisLine","axisTickLabel","axisName"],f=["splitArea","splitLine","minorSplitLine"],p=a.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,a){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new r.Group,this.group.add(this._axisGroup),t.get("show")){var u=t.getCoordSysModel(),c=s.layout(u,t),d=new o(t,c);i.each(h,d.add,d),this._axisGroup.add(d.getGroup()),i.each(f,function(e){t.get(e+".show")&&this["_"+e](t,u)},this),r.groupTransition(l,this._axisGroup,t),p.superCall(this,"render",t,e,n,a)}},remove:function(){c(this)},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var o=t.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=i.isArray(s)?s:[s];for(var l=e.coordinateSystem.getRect(),u=n.isHorizontal(),c=0,h=n.getTicksCoords({tickModel:o}),f=[],p=[],d=a.getLineStyle(),g=0;g<h.length;g++){var m=n.toGlobalCoord(h[g].coord);u?(f[0]=m,f[1]=l.y,p[0]=m,p[1]=l.y+l.height):(f[0]=l.x,f[1]=m,p[0]=l.x+l.width,p[1]=m);var v=c++%s.length,y=h[g].tickValue;this._axisGroup.add(new r.Line({anid:null!=y?"line_"+h[g].tickValue:null,subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:p[0],y2:p[1]},style:i.defaults({stroke:s[v]},d),silent:!0}))}}},_minorSplitLine:function(t,e){var n=t.axis,i=t.getModel("minorSplitLine"),o=i.getModel("lineStyle"),a=e.coordinateSystem.getRect(),s=n.isHorizontal(),l=n.getMinorTicksCoords();if(l.length)for(var u=[],c=[],h=o.getLineStyle(),f=0;f<l.length;f++)for(var p=0;p<l[f].length;p++){var d=n.toGlobalCoord(l[f][p].coord);s?(u[0]=d,u[1]=a.y,c[0]=d,c[1]=a.y+a.height):(u[0]=a.x,u[1]=d,c[0]=a.x+a.width,c[1]=d),this._axisGroup.add(new r.Line({anid:"minor_line_"+l[f][p].tickValue,subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:c[0],y2:c[1]},style:h,silent:!0}))}},_splitArea:function(t,e){u(this,this._axisGroup,t,e)}});p.extend({type:"xAxis"}),p.extend({type:"yAxis"})},function(t,e,n){function i(t,e,n,i){var r,o,a=b(n-t.rotation),s=i[0]>i[1],l="start"===e&&!s||"start"!==e&&s;return w(a-L/2)?(o=l?"bottom":"top",r="center"):w(a-1.5*L)?(o=l?"top":"bottom",r="center"):(o="middle",r=a<1.5*L&&a>L/2?l?"left":"right":l?"right":"left"),{rotation:a,textAlign:r,textVerticalAlign:o}}function r(t,e,n){if(!P(t.axis)){var i=t.get("axisLabel.showMinLabel"),r=t.get("axisLabel.showMaxLabel");e=e||[],n=n||[];var s=e[0],l=e[1],u=e[e.length-1],c=e[e.length-2],h=n[0],f=n[1],p=n[n.length-1],d=n[n.length-2];i===!1?(o(s),o(h)):a(s,l)&&(i?(o(l),o(f)):(o(s),o(h))),r===!1?(o(u),o(p)):a(c,u)&&(r?(o(c),o(d)):(o(u),o(p)))}}function o(t){t&&(t.ignore=!0)}function a(t,e,n){var i=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(i&&r){var o=M.identity([]);return M.rotate(o,o,-t.rotation),i.applyTransform(M.mul([],o,t.getLocalTransform())),r.applyTransform(M.mul([],o,e.getLocalTransform())),i.intersect(r)}}function s(t){return"middle"===t||"center"===t}function l(t,e,n,i,r){for(var o=[],a=[],s=[],l=0;l<t.length;l++){var u=t[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=n,e&&(I(a,a,e),I(s,s,e));var c=new y.Line({anid:r+"_"+t[l].tickValue,subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,silent:!0});o.push(c)}return o}function u(t,e,n){var i=e.axis,r=e.getModel("axisTick");if(r.get("show")&&!i.scale.isBlank()){for(var o=r.getModel("lineStyle"),a=n.tickDirection*r.get("length"),s=i.getTicksCoords(),u=l(s,t._transform,a,d(o.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),"ticks"),c=0;c<u.length;c++)t.group.add(u[c]);return u}}function c(t,e,n){var i=e.axis,r=e.getModel("minorTick");if(r.get("show")&&!i.scale.isBlank()){var o=i.getMinorTicksCoords();if(o.length)for(var a=r.getModel("lineStyle"),s=n.tickDirection*r.get("length"),u=d(a.getLineStyle(),d(e.getModel("axisTick").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})),c=0;c<o.length;c++)for(var h=l(o[c],t._transform,s,u,"minorticks_"+c),f=0;f<h.length;f++)t.group.add(h[f])}}function h(t,e,n){var i=e.axis,r=p(n.axisLabelShow,e.get("axisLabel.show"));if(r&&!i.scale.isBlank()){var o=e.getModel("axisLabel"),a=o.get("margin"),s=i.getViewLabels(),l=(p(n.labelRotate,o.get("rotate"))||0)*L/180,u=N(n.rotation,l,n.labelDirection),c=e.getCategories&&e.getCategories(!0),h=[],f=O(e),d=e.get("triggerEvent");return m(s,function(r,s){var l=r.tickValue,p=r.formattedLabel,g=r.rawLabel,m=o;c&&c[l]&&c[l].textStyle&&(m=new _(c[l].textStyle,o,e.ecModel));var v=m.getTextColor()||e.get("axisLine.lineStyle.color"),x=i.dataToCoord(l),w=[x,n.labelOffset+n.labelDirection*a],b=new y.Text({anid:"label_"+l,position:w,rotation:u.rotation,silent:f,z2:10});y.setTextStyle(b.style,m,{text:p,textAlign:m.getShallow("align",!0)||u.textAlign,textVerticalAlign:m.getShallow("verticalAlign",!0)||m.getShallow("baseline",!0)||u.textVerticalAlign,textFill:"function"==typeof v?v("category"===i.type?g:"value"===i.type?l+"":l,s):v}),d&&(b.eventData=k(e),b.eventData.targetType="axisLabel",b.eventData.value=g),t._dumbGroup.add(b),b.updateTransform(),h.push(b),t.group.add(b),b.decomposeTransform()}),h}}var f=n(136),p=f.retrieve,d=f.defaults,g=f.extend,m=f.each,v=n(223),y=n(184),_=n(178),x=n(222),w=x.isRadianAroundZero,b=x.remRadian,C=n(276),S=C.createSymbol,M=n(149),E=n(138),I=E.applyTransform,T=n(266),P=T.shouldShowAllLabels,L=Math.PI,D=function(t,e){this.opt=e,this.axisModel=t,d(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new y.Group;var n=new y.Group({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n};D.prototype={constructor:D,hasBuilder:function(t){return!!A[t]},add:function(t){A[t].call(this)},getGroup:function(){return this.group}};var A={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,r=[n[0],0],o=[n[1],0];i&&(I(r,r,i),I(o,o,i));var a=g({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new y.Line({anid:"line",subPixelOptimize:!0,shape:{x1:r[0],y1:r[1],x2:o[0],y2:o[1]},style:a,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1}));var s=e.get("axisLine.symbol"),l=e.get("axisLine.symbolSize"),u=e.get("axisLine.symbolOffset")||0;if("number"==typeof u&&(u=[u,u]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var c=l[0],h=l[1];m([{rotate:t.rotation+Math.PI/2,offset:u[0],r:0},{rotate:t.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((r[0]-o[0])*(r[0]-o[0])+(r[1]-o[1])*(r[1]-o[1]))}],function(e,n){if("none"!==s[n]&&null!=s[n]){var i=S(s[n],-c/2,-h/2,c,h,a.stroke,!0),o=e.r+e.offset,l=[r[0]+o*Math.cos(t.rotation),r[1]-o*Math.sin(t.rotation)];i.attr({rotation:e.rotate,position:l,silent:!0,z2:11}),this.group.add(i)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=u(this,t,e),i=h(this,t,e);r(t,i,n),c(this,t,e)},axisName:function(){var t=this.opt,e=this.axisModel,n=p(t.axisName,e.get("name"));if(n){var r,o=e.get("nameLocation"),a=t.nameDirection,l=e.getModel("nameTextStyle"),u=e.get("nameGap")||0,c=this.axisModel.axis.getExtent(),h=c[0]>c[1]?-1:1,f=["start"===o?c[0]-h*u:"end"===o?c[1]+h*u:(c[0]+c[1])/2,s(o)?t.labelOffset+a*u:0],d=e.get("nameRotate");null!=d&&(d=d*L/180);var m;s(o)?r=N(t.rotation,null!=d?d:t.rotation,a):(r=i(t,o,d||0,c),m=t.axisNameAvailableWidth,null!=m&&(m=Math.abs(m/Math.sin(r.rotation)),!isFinite(m)&&(m=null)));var _=l.getFont(),x=e.get("nameTruncate",!0)||{},w=x.ellipsis,b=p(t.nameTruncateMaxWidth,x.maxWidth,m),C=null!=w&&null!=b?v.truncateText(n,b,_,w,{minChar:2,placeholder:x.placeholder}):n,S=e.get("tooltip",!0),M=e.mainType,E={componentType:M,name:n,$vars:["name"]};E[M+"Index"]=e.componentIndex;var I=new y.Text({anid:"name",__fullText:n,__truncatedText:C,position:f,rotation:r.rotation,silent:O(e),z2:1,tooltip:S&&S.show?g({content:n,formatter:function(){return n},formatterParams:E},S):null});y.setTextStyle(I.style,l,{text:C,textFont:_,textFill:l.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:l.get("align")||r.textAlign,textVerticalAlign:l.get("verticalAlign")||r.textVerticalAlign}),e.get("triggerEvent")&&(I.eventData=k(e),I.eventData.targetType="axisName",I.eventData.name=n),this._dumbGroup.add(I),I.updateTransform(),this.group.add(I),I.decomposeTransform()}}},k=D.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},N=D.innerTextLayout=function(t,e,n){var i,r,o=b(e-t);return w(o)?(r=n>0?"top":"bottom",i="center"):w(o-L)?(r=n>0?"bottom":"top",i="center"):(r="middle",i=o>0&&o<L?n>0?"right":"left":n>0?"left":"right"),{rotation:o,textAlign:i,textVerticalAlign:r}},O=D.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},R=D;t.exports=R},function(t,e,n){function i(t,e,n,i,o,a){var u=l.getAxisPointerClass(t.axisPointerClass);if(u){var c=s.getAxisPointerModel(e);c?(t._axisPointer||(t._axisPointer=new u)).render(e,c,i,a):r(t,i)}}function r(t,e,n){var i=t._axisPointer;i&&i.dispose(e,n),t._axisPointer=null}var o=n(132),a=(o.__DEV__,n(131)),s=n(308),l=a.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,r){this.axisPointerClass&&s.fixValue(t),l.superApply(this,"render",arguments),i(this,t,e,n,r,!0)},updateAxisPointer:function(t,e,n,r,o){i(this,t,e,n,r,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),l.superApply(this,"remove",arguments)},dispose:function(t,e){r(this,e),l.superApply(this,"dispose",arguments)}}),u=[];l.registerAxisPointerClass=function(t,e){u[t]=e},l.getAxisPointerClass=function(t){return t&&u[t]};var c=l;t.exports=c},function(t,e,n){function i(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return r(n,t,e),n.seriesInvolved&&a(n,t),n}function r(t,e,n){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),a=r.get("link",!0)||[],l=[];m(n.getCoordinateSystems(),function(n){function u(i,u,c){var d=c.model.getModel("axisPointer",r),m=d.get("show");if(m&&("auto"!==m||i||f(d))){null==u&&(u=d.get("triggerTooltip")),d=i?o(c,g,r,e,i,u):d;var v=d.get("snap"),y=p(c.model),_=u||v||"category"===c.type,x=t.axesInfo[y]={key:y,axis:c,coordSys:n,axisPointerModel:d,triggerTooltip:u,involveSeries:_,snap:v,useHandle:f(d),seriesModels:[]};h[y]=x,t.seriesInvolved|=_;var w=s(a,c);if(null!=w){var b=l[w]||(l[w]={axesInfo:{}});b.axesInfo[y]=x,b.mapper=a[w].mapper,x.linkGroup=b}}}if(n.axisPointerEnabled){var c=p(n.model),h=t.coordSysAxesInfo[c]={};t.coordSysMap[c]=n;var d=n.model,g=d.getModel("tooltip",i);if(m(n.getAxes(),v(u,!1,null)),n.getTooltipAxes&&i&&g.get("show")){var y="axis"===g.get("trigger"),_="cross"===g.get("axisPointer.type"),x=n.getTooltipAxes(g.get("axisPointer.axis"));(y||_)&&m(x.baseAxes,v(u,!_||"cross",y)),_&&m(x.otherAxes,v(u,"cross",!1))}}})}function o(t,e,n,i,r,o){var a=e.getModel("axisPointer"),s={};m(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=d.clone(a.get(t))}),s.snap="category"!==t.type&&!!o,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===r){var u=a.get("label.show");if(l.show=null==u||u,!o){var c=s.lineStyle=a.get("crossStyle");c&&d.defaults(l,c.textStyle)}}return t.model.getModel("axisPointer",new g(s,n,i))}function a(t,e){e.eachSeries(function(e){var n=e.coordinateSystem,i=e.get("tooltip.trigger",!0),r=e.get("tooltip.show",!0);n&&"none"!==i&&i!==!1&&"item"!==i&&r!==!1&&e.get("axisPointer.show",!0)!==!1&&m(t.coordSysAxesInfo[p(n.model)],function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})},this)}function s(t,e){for(var n=e.model,i=e.dim,r=0;r<t.length;r++){var o=t[r]||{};if(l(o[i+"AxisId"],n.id)||l(o[i+"AxisIndex"],n.componentIndex)||l(o[i+"AxisName"],n.name))return r}}function l(t,e){return"all"===t||d.isArray(t)&&d.indexOf(t,e)>=0||t===e}function u(t){var e=c(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,r=n.option,o=n.get("status"),a=n.get("value");null!=a&&(a=i.parse(a));var s=f(n);null==o&&(r.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function c(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[p(t)]}function h(t){var e=c(t);return e&&e.axisPointerModel}function f(t){return!!t.get("handle.show")}function p(t){return t.type+"||"+t.id}var d=n(136),g=n(178),m=d.each,v=d.curry;e.collect=i,e.fixValue=u,e.getAxisInfo=c,e.getAxisPointerModel=h,e.makeKey=p},function(t,e,n){function i(t,e,n){n=n||{};var i=t.coordinateSystem,o=e.axis,a={},s=o.getAxesOnZeroOf()[0],l=o.position,u=s?"onZero":l,c=o.dim,h=i.getRect(),f=[h.x,h.x+h.width,h.y,h.y+h.height],p={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,g="x"===c?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(s){var m=s.toGlobalCoord(s.dataToCoord(0));g[p.onZero]=Math.max(Math.min(m,g[1]),g[0])}a.position=["y"===c?g[p[u]]:f[0],"x"===c?g[p[u]]:f[3]],a.rotation=Math.PI/2*("x"===c?0:1);var v={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=v[l],a.labelOffset=s?g[p[l]]-g[p.onZero]:0,e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),r.retrieve(n.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var y=e.get("axisLabel.rotate");return a.labelRotate="top"===u?-y:y,a.z2=1,a}var r=n(136);e.layout=i},function(t,e,n){function i(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var s=n.getModel("splitArea"),l=s.getModel("areaStyle"),u=l.get("color"),c=i.coordinateSystem.getRect(),h=r.getTicksCoords({tickModel:s,clamp:!0});if(h.length){var f=u.length,p=t.__splitAreaColors,d=o.createHashMap(),g=0;if(p)for(var m=0;m<h.length;m++){var v=p.get(h[m].tickValue);if(null!=v){g=(v+(f-1)*m)%f;break}}var y=r.toGlobalCoord(h[0].coord),_=l.getAreaStyle();u=o.isArray(u)?u:[u];for(var m=1;m<h.length;m++){var x,w,b,C,S=r.toGlobalCoord(h[m].coord);r.isHorizontal()?(x=y,w=c.y,b=S-x,C=c.height,y=x+b):(x=c.x,w=y,b=c.width,C=S-w,y=w+C);var M=h[m-1].tickValue;null!=M&&d.set(M,g),e.add(new a.Rect({anid:null!=M?"area_"+M:null,shape:{x:x,y:w,width:b,height:C},style:o.defaults({fill:u[g]},_),silent:!0})),g=(g+1)%f}t.__splitAreaColors=d}}}function r(t){t.__splitAreaColors=null}var o=n(136),a=n(184);e.rectCoordAxisBuildSplitArea=i,e.rectCoordAxisHandleRemove=r},function(t,e,n){var i=n(131),r=n(136),o=n(272),a=o.layout,s=o.largeLayout;n(296),n(312),n(314),n(295),i.registerLayout(i.PRIORITY.VISUAL.LAYOUT,r.curry(a,"bar")),i.registerLayout(i.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,s),i.registerVisual({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}})},function(t,e,n){var i=n(313),r=i.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});t.exports=r},function(t,e,n){var i=n(236),r=n(257),o=i.extend({type:"series.__base_bar__",getInitialData:function(t,e){return r(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),i=this.getData(),r=i.getLayout("offset"),o=i.getLayout("size"),a=e.getBaseAxis().isHorizontal()?0:1;return n[a]+=r+o/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});t.exports=o},function(t,e,n){function i(t,e){var n=t.getArea&&t.getArea();if("cartesian2d"===t.type){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var r=e.getLayout("bandWidth");i.isHorizontal()?(n.x-=r,n.width+=2*r):(n.y-=r,n.height+=2*r)}}return n}function r(t,e,n){n.style.text=null,y.updateProps(n,{shape:{width:0}},e,t,function(){n.parent&&n.parent.remove(n)})}function o(t,e,n){n.style.text=null,y.updateProps(n,{shape:{r:n.shape.r0}},e,t,function(){n.parent&&n.parent.remove(n)})}function a(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function s(t,e,n,i,r,o,s,l){var u=e.getItemVisual(n,"color"),c=e.getItemVisual(n,"opacity"),h=e.getVisual("borderColor"),f=i.getModel("itemStyle"),p=i.getModel("emphasis.itemStyle").getBarItemStyle();l||t.setShape("r",f.get("barBorderRadius")||0),t.useStyle(v.defaults({stroke:a(r)?"none":h,fill:a(r)?"none":u,opacity:c},f.getBarItemStyle()));var d=i.getShallow("cursor");d&&t.attr("cursor",d);var g=s?r.height>0?"bottom":"top":r.width>0?"left":"right";l||x(t.style,p,i,u,o,n,g),a(r)&&(p.fill=p.stroke="none"),y.setHoverStyle(t,p)}function l(t,e){var n=t.get(L)||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),r=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(n,i,r)}function u(t,e,n){var i=t.getData(),r=[],o=i.getLayout("valueAxisHorizontal")?1:0;r[1-o]=i.getLayout("valueAxisStart");var a=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=t.getModel("backgroundStyle"),u=t.get("showBackground",!0);if(u){var c=i.getLayout("largeBackgroundPoints"),p=[];p[1-o]=i.getLayout("backgroundStart");var d=new z({shape:{points:c},incremental:!!n,__startPoint:p,__baseDimIdx:o,__largeDataIndices:a,__barWidth:s,silent:!0,z2:0});f(d,l,i),e.add(d)}var g=new z({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:r,__baseDimIdx:o,__largeDataIndices:a,__barWidth:s});e.add(g),h(g,t,i),g.seriesIndex=t.seriesIndex,t.get("silent")||(g.on("mousedown",B),g.on("mousemove",B))}function c(t,e,n){var i=t.__baseDimIdx,r=1-i,o=t.shape.points,a=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),l=t.__startPoint[r];D[0]=e,D[1]=n;for(var u=D[i],c=D[1-i],h=u-s,f=u+s,p=0,d=o.length/2;p<d;p++){var g=2*p,m=o[g+i],v=o[g+r];if(m>=h&&m<=f&&(l<=v?c>=l&&c<=v:c>=v&&c<=l))return a[p];
}return-1}function h(t,e,n){var i=n.getVisual("borderColor")||n.getVisual("color"),r=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}function f(t,e,n){var i=e.get("borderColor")||e.get("color"),r=e.getItemStyle(["color","borderColor"]);t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}function p(t,e,n){var i,r="polar"===n.type;return i=r?n.getArea():n.grid.getRect(),r?{cx:i.cx,cy:i.cy,r0:t?i.r0:e.r0,r:t?i.r:e.r,startAngle:t?e.startAngle:0,endAngle:t?e.endAngle:2*Math.PI}:{x:t?e.x:i.x,y:t?i.y:e.y,width:t?e.width:i.width,height:t?i.height:e.height}}function d(t,e,n){var i="polar"===t.type?y.Sector:y.Rect;return new i({shape:p(e,n,t),silent:!0,z2:0})}var g=n(132),m=(g.__DEV__,n(131)),v=n(136),y=n(184),_=n(315),x=_.setLabel,w=n(178),b=n(316),C=n(186),S=n(146),M=n(243),E=M.throttle,I=n(291),T=I.createClipPath,P=n(317),L=["itemStyle","barBorderWidth"],D=[0,0];v.extend(w.prototype,b);var A=m.extendChartView({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var i=t.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var a,l=this.group,u=t.getData(),c=this._data,h=t.coordinateSystem,f=h.getBaseAxis();"cartesian2d"===h.type?a=f.isHorizontal():"polar"===h.type&&(a="angle"===f.dim);var g=t.isAnimationEnabled()?t:null,m=t.get("clip",!0),v=i(h,u);l.removeClipPath();var _=t.get("roundCap",!0),x=t.get("showBackground",!0),w=t.getModel("backgroundStyle"),b=w.get("barBorderRadius")||0,C=[],M=this._backgroundEls||[],E=function(t){var e=F[h.type](u,t),n=d(h,a,e);return n.useStyle(w.getBarItemStyle()),"cartesian2d"===h.type&&n.setShape("r",b),C[t]=n,n};u.diff(c).add(function(e){var n=u.getItemModel(e),i=F[h.type](u,e,n);if(x&&E(e),u.hasValue(e)){if(m){var r=O[h.type](v,i);if(r)return void l.remove(o)}var o=R[h.type](e,i,a,g,!1,_);u.setItemGraphicEl(e,o),l.add(o),s(o,u,e,n,i,t,a,"polar"===h.type)}}).update(function(e,n){var i=u.getItemModel(e),r=F[h.type](u,e,i);if(x){var o;0===M.length?o=E(n):(o=M[n],o.useStyle(w.getBarItemStyle()),"cartesian2d"===h.type&&o.setShape("r",b),C[e]=o);var f=F[h.type](u,e),d=p(a,f,h);y.updateProps(o,{shape:d},g,e)}var S=c.getItemGraphicEl(n);if(!u.hasValue(e))return void l.remove(S);if(m){var I=O[h.type](v,r);if(I)return void l.remove(S)}S?y.updateProps(S,{shape:r},g,e):S=R[h.type](e,r,a,g,!0,_),u.setItemGraphicEl(e,S),l.add(S),s(S,u,e,i,r,t,a,"polar"===h.type)}).remove(function(t){var e=c.getItemGraphicEl(t);"cartesian2d"===h.type?e&&r(t,g,e):e&&o(t,g,e)}).execute();var I=this._backgroundGroup||(this._backgroundGroup=new S);I.removeAll();for(var T=0;T<C.length;++T)I.add(C[T]);l.add(I),this._backgroundEls=C,this._data=u},_renderLarge:function(t,e,n){this._clear(),u(t,this.group);var i=t.get("clip",!0)?T(t.coordinateSystem,!1,t):null;i?this.group.setClipPath(i):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){this._removeBackground(),u(e,this.group,!0)},dispose:v.noop,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(e){"sector"===e.type?o(e.dataIndex,t,e):r(e.dataIndex,t,e)})):e.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}}),k=Math.max,N=Math.min,O={cartesian2d:function(t,e){var n=e.width<0?-1:1,i=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var r=k(e.x,t.x),o=N(e.x+e.width,t.x+t.width),a=k(e.y,t.y),s=N(e.y+e.height,t.y+t.height);e.x=r,e.y=a,e.width=o-r,e.height=s-a;var l=e.width<0||e.height<0;return n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),l},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var i=e.r;e.r=e.r0,e.r0=i}var i=N(e.r,t.r),r=k(e.r0,t.r0);e.r=i,e.r0=r;var o=i-r<0;if(n<0){var i=e.r;e.r=e.r0,e.r0=i}return o}},R={cartesian2d:function(t,e,n,i,r){var o=new y.Rect({shape:v.extend({},e),z2:1});if(o.name="item",i){var a=o.shape,s=n?"height":"width",l={};a[s]=0,l[s]=e[s],y[r?"updateProps":"initProps"](o,{shape:l},i,t)}return o},polar:function(t,e,n,i,r,o){var a=e.startAngle<e.endAngle,s=!n&&o?P:y.Sector,l=new s({shape:v.defaults({clockwise:a},e),z2:1});if(l.name="item",i){var u=l.shape,c=n?"r":"endAngle",h={};u[c]=n?0:e.startAngle,h[c]=e[c],y[r?"updateProps":"initProps"](l,{shape:h},i,t)}return l}},F={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),r=n?l(n,i):0,o=i.width>0?1:-1,a=i.height>0?1:-1;return{x:i.x+o*r/2,y:i.y+a*r/2,width:i.width-o*r,height:i.height-a*r}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}},z=C.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,i=this.__startPoint,r=this.__baseDimIdx,o=0;o<n.length;o+=2)i[r]=n[o+r],t.moveTo(i[0],i[1]),t.lineTo(n[o],n[o+1])}}),B=E(function(t){var e=this,n=c(e,t.offsetX,t.offsetY);e.dataIndex=n>=0?n:null},30,!1);t.exports=A},function(t,e,n){function i(t,e,n,i,a,l,u){var c=n.getModel("label"),h=n.getModel("emphasis.label");o.setLabelStyle(t,e,c,h,{labelFetcher:a,labelDataIndex:l,defaultText:s(a.getData(),l),isRectText:!0,autoColor:i}),r(t),r(e)}function r(t,e){"outside"===t.textPosition&&(t.textPosition=e)}var o=n(184),a=n(287),s=a.getDefaultLabel;e.setLabel=i},function(t,e,n){var i=n(181),r=i([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),o={getBarItemStyle:function(t){var e=r(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}};t.exports=o},function(t,e,n){var i=n(184),r=i.extendShape,o=r({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=.5*(o-r),s=r+a,l=e.startAngle,u=e.endAngle,c=e.clockwise,h=Math.cos(l),f=Math.sin(l),p=Math.cos(u),d=Math.sin(u),g=c?u-l<2*Math.PI:l-u<2*Math.PI;g&&(t.moveTo(h*r+n,f*r+i),t.arc(h*s+n,f*s+i,a,-Math.PI+l,l,!c)),t.arc(n,i,o,l,u,!c),t.moveTo(p*o+n,d*o+i),t.arc(p*s+n,d*s+i,a,u-2*Math.PI,u-Math.PI,!c),0!==r&&(t.arc(n,i,r,u,l,c),t.moveTo(h*r+n,d*r+i)),t.closePath()}});t.exports=o},function(t,e,n){var i=n(131),r=n(136);n(319),n(323);var o=n(324),a=n(325),s=n(326),l=n(328);o("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),i.registerVisual(a("pie")),i.registerLayout(r.curry(s,"pie")),i.registerProcessor(l("pie"))},function(t,e,n){var i=n(131),r=n(320),o=n(136),a=n(177),s=n(222),l=s.getPercentWithPrecision,u=n(321),c=n(238),h=c.retrieveRawAttr,f=n(227),p=f.makeSeriesEncodeForNameBased,d=n(322),g=i.extendSeriesModel({type:"series.pie",init:function(t){g.superApply(this,"init",arguments),this.legendVisualProvider=new d(o.bind(this.getData,this),o.bind(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){g.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return r(this,{coordDimensions:["value"],encodeDefaulter:o.curry(p,this)})},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],i=0,r=t.count();i<r;i++)n.push({name:t.getName(i),value:t.get(e,i),selected:h(t,i,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=g.superCall(this,"getDataParams",t),i=[];return e.each(e.mapDimension("value"),function(t){i.push(t)}),n.percent=l(i,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){a.defaultEmphasis(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});o.mixin(g,u);var m=g;t.exports=m},function(t,e,n){function i(t,e,n){e=l(e)&&{coordDimensions:e}||s({},e);var i=t.getSource(),a=r(i,e),u=new o(a,t);return u.initData(i,n),u}var r=n(262),o=n(258),a=n(136),s=a.extend,l=a.isArray;t.exports=i},function(t,e,n){var i=n(136),r={updateSelectedMap:function(t){this._targetList=i.isArray(t)?t.slice():[],this._selectTargetMap=i.reduce(t||[],function(t,e){return t.set(e.name,e),t},i.createHashMap())},select:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t),i=this.get("selectedMode");"single"===i&&this._selectTargetMap.each(function(t){t.selected=!1}),n&&(n.selected=!0)},unSelect:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);n&&(n.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return n&&n.selected}};t.exports=r},function(t,e){function n(t,e){this.getAllNames=function(){var t=e();return t.mapArray(t.getName)},this.containName=function(t){var n=e();return n.indexOfName(t)>=0},this.indexOfName=function(e){var n=t();return n.indexOfName(e)},this.getItemVisual=function(e,n){var i=t();return i.getItemVisual(e,n)}}var i=n;t.exports=i},function(t,e,n){function i(t,e,n,i){var o=e.getData(),a=this.dataIndex,s=o.getName(a),l=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:s,seriesId:e.id}),o.each(function(t){r(o.getItemGraphicEl(t),o.getItemLayout(t),e.isSelected(o.getName(t)),l,n)})}function r(t,e,n,i,r){var o=(e.startAngle+e.endAngle)/2,a=Math.cos(o),s=Math.sin(o),l=n?i:0,u=[a*l,s*l];r?t.animate().when(200,{position:u}).start("bounceOut"):t.attr("position",u)}function o(t,e){s.Group.call(this);var n=new s.Sector({z2:2}),i=new s.Polyline,r=new s.Text;this.add(n),this.add(i),this.add(r),this.updateData(t,e,!0)}var a=n(136),s=n(184),l=n(241),u=o.prototype;u.updateData=function(t,e,n){var i=this.childAt(0),o=this.childAt(1),l=this.childAt(2),u=t.hostModel,c=t.getItemModel(e),h=t.getItemLayout(e),f=a.extend({},h);f.label=null;var p=u.getShallow("animationTypeUpdate");if(n){i.setShape(f);var d=u.getShallow("animationType");"scale"===d?(i.shape.r=h.r0,s.initProps(i,{shape:{r:h.r}},u,e)):(i.shape.endAngle=h.startAngle,s.updateProps(i,{shape:{endAngle:h.endAngle}},u,e))}else"expansion"===p?i.setShape(f):s.updateProps(i,{shape:f},u,e);var g=t.getItemVisual(e,"color");i.useStyle(a.defaults({lineJoin:"bevel",fill:g},c.getModel("itemStyle").getItemStyle())),i.hoverStyle=c.getModel("emphasis.itemStyle").getItemStyle();var m=c.getShallow("cursor");m&&i.attr("cursor",m),r(this,t.getItemLayout(e),u.isSelected(t.getName(e)),u.get("selectedOffset"),u.get("animation"));var v=!n&&"transition"===p;this._updateLabel(t,e,v),this.highDownOnUpdate=u.get("silent")?null:function(t,e){var n=u.isAnimationEnabled()&&c.get("hoverAnimation");"emphasis"===e?(o.ignore=o.hoverIgnore,l.ignore=l.hoverIgnore,n&&(i.stopAnimation(!0),i.animateTo({shape:{r:h.r+u.get("hoverOffset")}},300,"elasticOut"))):(o.ignore=o.normalIgnore,l.ignore=l.normalIgnore,n&&(i.stopAnimation(!0),i.animateTo({shape:{r:h.r}},300,"elasticOut")))},s.setHoverStyle(this)},u._updateLabel=function(t,e,n){var i=this.childAt(1),r=this.childAt(2),o=t.hostModel,a=t.getItemModel(e),l=t.getItemLayout(e),u=l.label,c=t.getItemVisual(e,"color");if(!u||isNaN(u.x)||isNaN(u.y))return void(r.ignore=r.normalIgnore=r.hoverIgnore=i.ignore=i.normalIgnore=i.hoverIgnore=!0);var h={points:u.linePoints||[[u.x,u.y],[u.x,u.y],[u.x,u.y]]},f={x:u.x,y:u.y};n?(s.updateProps(i,{shape:h},o,e),s.updateProps(r,{style:f},o,e)):(i.attr({shape:h}),r.attr({style:f})),r.attr({rotation:u.rotation,origin:[u.x,u.y],z2:10});var p=a.getModel("label"),d=a.getModel("emphasis.label"),g=a.getModel("labelLine"),m=a.getModel("emphasis.labelLine"),c=t.getItemVisual(e,"color");s.setLabelStyle(r.style,r.hoverStyle={},p,d,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:u.text,autoColor:c,useInsideStyle:!!u.inside},{textAlign:u.textAlign,textVerticalAlign:u.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),r.ignore=r.normalIgnore=!p.get("show"),r.hoverIgnore=!d.get("show"),i.ignore=i.normalIgnore=!g.get("show"),i.hoverIgnore=!m.get("show"),i.setStyle({stroke:c,opacity:t.getItemVisual(e,"opacity")}),i.setStyle(g.getModel("lineStyle").getLineStyle()),i.hoverStyle=m.getModel("lineStyle").getLineStyle();var v=g.get("smooth");v&&v===!0&&(v=.4),i.setShape({smooth:v})},a.inherits(o,s.Group);var c=l.extend({type:"pie",init:function(){var t=new s.Group;this._sectorGroup=t},render:function(t,e,n,r){if(!r||r.from!==this.uid){var s=t.getData(),l=this._data,u=this.group,c=e.get("animation"),h=!l,f=t.get("animationType"),p=t.get("animationTypeUpdate"),d=a.curry(i,this.uid,t,c,n),g=t.get("selectedMode");if(s.diff(l).add(function(t){var e=new o(s,t);h&&"scale"!==f&&e.eachChild(function(t){t.stopAnimation(!0)}),g&&e.on("click",d),s.setItemGraphicEl(t,e),u.add(e)}).update(function(t,e){var n=l.getItemGraphicEl(e);h||"transition"===p||n.eachChild(function(t){t.stopAnimation(!0)}),n.updateData(s,t),n.off("click"),g&&n.on("click",d),u.add(n),s.setItemGraphicEl(t,n)}).remove(function(t){var e=l.getItemGraphicEl(t);u.remove(e)}).execute(),c&&s.count()>0&&(h?"scale"!==f:"transition"!==p)){for(var m=s.getItemLayout(0),v=1;isNaN(m.startAngle)&&v<s.count();++v)m=s.getItemLayout(v);var y=Math.max(n.getWidth(),n.getHeight())/2,_=a.bind(u.removeClipPath,u);u.setClipPath(this._createClipPath(m.cx,m.cy,y,m.startAngle,m.clockwise,_,t,h))}else u.removeClipPath();this._data=s}},dispose:function(){},_createClipPath:function(t,e,n,i,r,o,a,l){var u=new s.Sector({shape:{cx:t,cy:e,r0:0,r:n,startAngle:i,endAngle:i,clockwise:r}}),c=l?s.initProps:s.updateProps;return c(u,{shape:{endAngle:i+(r?1:-1)*Math.PI*2}},a,o),u},containPoint:function(t,e){var n=e.getData(),i=n.getItemLayout(0);if(i){var r=t[0]-i.cx,o=t[1]-i.cy,a=Math.sqrt(r*r+o*o);return a<=i.r&&a>=i.r0}}}),h=c;t.exports=h},function(t,e,n){function i(t,e){o.each(e,function(e){e.update="updateView",r.registerAction(e,function(n,i){var r={};return i.eachComponent({mainType:"series",subType:t,query:n},function(t){t[e.method]&&t[e.method](n.name,n.dataIndex);var i=t.getData();i.each(function(e){var n=i.getName(e);r[n]=t.isSelected(n)||!1})}),{name:n.name,selected:r,seriesId:n.seriesId}})})}var r=n(131),o=n(136);t.exports=i},function(t,e,n){function i(t){return{getTargetSeries:function(e){var n={},i=o();return e.eachSeriesByType(t,function(t){t.__paletteScope=n,i.set(t.uid,t)}),i},reset:function(t,e){var n=t.getRawData(),i={},r=t.getData();r.each(function(t){var e=r.getRawIndex(t);i[e]=t}),n.each(function(e){var o,a=i[e],s=null!=a&&r.getItemVisual(a,"color",!0),l=null!=a&&r.getItemVisual(a,"borderColor",!0);if(s&&l||(o=n.getItemModel(e)),!s){var u=o.get("itemStyle.color")||t.getColorFromPalette(n.getName(e)||e+"",t.__paletteScope,n.count());null!=a&&r.setItemVisual(a,"color",u)}if(!l){var c=o.get("itemStyle.borderColor");null!=a&&r.setItemVisual(a,"borderColor",c)}})}}}var r=n(136),o=r.createHashMap;t.exports=i},function(t,e,n){function i(t,e){return l.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function r(t,e,n,r){e.eachSeriesByType(t,function(t){var e=t.getData(),r=e.mapDimension("value"),o=i(t,n),l=t.get("center"),p=t.get("radius");c.isArray(p)||(p=[0,p]),c.isArray(l)||(l=[l,l]);var d=a(o.width,n.getWidth()),g=a(o.height,n.getHeight()),m=Math.min(d,g),v=a(l[0],d)+o.x,y=a(l[1],g)+o.y,_=a(p[0],m/2),x=a(p[1],m/2),w=-t.get("startAngle")*f,b=t.get("minAngle")*f,C=0;e.each(r,function(t){!isNaN(t)&&C++});var S=e.getSum(r),M=Math.PI/(S||C)*2,E=t.get("clockwise"),I=t.get("roseType"),T=t.get("stillShowZeroSum"),P=e.getDataExtent(r);P[0]=0;var L=h,D=0,A=w,k=E?1:-1;if(e.each(r,function(t,n){var i;if(isNaN(t))return void e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:E,cx:v,cy:y,r0:_,r:I?NaN:x,viewRect:o});i="area"!==I?0===S&&T?M:t*M:h/C,i<b?(i=b,L-=b):D+=t;var r=A+k*i;e.setItemLayout(n,{angle:i,startAngle:A,endAngle:r,clockwise:E,cx:v,cy:y,r0:_,r:I?s(t,P,[_,x]):x,viewRect:o}),A=r}),L<h&&C)if(L<=.001){var N=h/C;e.each(r,function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=N,i.startAngle=w+k*n*N,i.endAngle=w+k*(n+1)*N}})}else M=L/D,A=w,e.each(r,function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),r=i.angle===b?b:t*M;i.startAngle=A,i.endAngle=A+k*r,A+=k*r}});u(t,x,o.width,o.height,o.x,o.y)})}var o=n(222),a=o.parsePercent,s=o.linearMap,l=n(221),u=n(327),c=n(136),h=2*Math.PI,f=Math.PI/180;t.exports=r},function(t,e,n){function i(t,e,n,i,r,o,a,s,l,u){function c(e,n,i,r){for(var o=e;o<n&&!(t[o].y+i>l+a);o++)if(t[o].y+=i,o>e&&o+1<n&&t[o+1].y>t[o].y+t[o].height)return void h(o,i/2);h(n-1,i/2)}function h(e,n){for(var i=e;i>=0&&!(t[i].y-n<l)&&(t[i].y-=n,!(i>0&&t[i].y>t[i-1].y+t[i-1].height));i--);}function f(t,e,n,i,r,o){for(var a=o>0?e?Number.MAX_VALUE:0:e?Number.MAX_VALUE:0,s=0,l=t.length;s<l;s++)if("none"===t[s].labelAlignTo){var u=Math.abs(t[s].y-i),c=t[s].len,h=t[s].len2,f=u<r+c?Math.sqrt((r+c+h)*(r+c+h)-u*u):Math.abs(t[s].x-n);e&&f>=a&&(f=a-10),!e&&f<=a&&(f=a+10),t[s].x=n+f*o,a=f}}t.sort(function(t,e){return t.y-e.y});for(var p,d=0,g=t.length,m=[],v=[],y=0;y<g;y++){if("outer"===t[y].position&&"labelLine"===t[y].labelAlignTo){var _=t[y].x-u;t[y].linePoints[1][0]+=_,t[y].x=u}p=t[y].y-d,p<0&&c(y,g,-p,r),d=t[y].y+t[y].height}a-d<0&&h(g-1,d-a);for(var y=0;y<g;y++)t[y].y>=n?v.push(t[y]):m.push(t[y]);f(m,!1,e,n,i,r),f(v,!0,e,n,i,r)}function r(t,e,n,r,a,l,u,c){for(var h=[],f=[],p=Number.MAX_VALUE,d=-Number.MAX_VALUE,g=0;g<t.length;g++)o(t[g])||(t[g].x<e?(p=Math.min(p,t[g].x),h.push(t[g])):(d=Math.max(d,t[g].x),f.push(t[g])));i(f,e,n,r,1,a,l,u,c,d),i(h,e,n,r,-1,a,l,u,c,p);for(var g=0;g<t.length;g++){var m=t[g];if(!o(m)){var v=m.linePoints;if(v){var y,_="edge"===m.labelAlignTo,x=m.textRect.width;y=_?m.x<e?v[2][0]-m.labelDistance-u-m.labelMargin:u+a-m.labelMargin-v[2][0]-m.labelDistance:m.x<e?m.x-u-m.bleedMargin:u+a-m.x-m.bleedMargin,y<m.textRect.width&&(m.text=s.truncateText(m.text,y,m.font),"edge"===m.labelAlignTo&&(x=s.getWidth(m.text,m.font)));var w=v[1][0]-v[2][0];_?m.x<e?v[2][0]=u+m.labelMargin+x+m.labelDistance:v[2][0]=u+a-m.labelMargin-x-m.labelDistance:(m.x<e?v[2][0]=m.x+m.labelDistance:v[2][0]=m.x-m.labelDistance,v[1][0]=v[2][0]+w),v[1][1]=v[2][1]=m.y}}}}function o(t){return"center"===t.position}function a(t,e,n,i,o,a){var l,h,f=t.getData(),p=[],d=!1,g=(t.get("minShowLabelAngle")||0)*c;f.each(function(i){var r=f.getItemLayout(i),a=f.getItemModel(i),c=a.getModel("label"),m=c.get("position")||a.get("emphasis.label.position"),v=c.get("distanceToLabelLine"),y=c.get("alignTo"),_=u(c.get("margin"),n),x=c.get("bleedMargin"),w=c.getFont(),b=a.getModel("labelLine"),C=b.get("length");C=u(C,n);var S=b.get("length2");if(S=u(S,n),!(r.angle<g)){var M,E,I,T,P=(r.startAngle+r.endAngle)/2,L=Math.cos(P),D=Math.sin(P);l=r.cx,h=r.cy;var A=t.getFormattedLabel(i,"normal")||f.getName(i),k=s.getBoundingRect(A,w,T,"top"),N="inside"===m||"inner"===m;if("center"===m)M=r.cx,E=r.cy,T="center";else{var O=(N?(r.r+r.r0)/2*L:r.r*L)+l,R=(N?(r.r+r.r0)/2*D:r.r*D)+h;if(M=O+3*L,E=R+3*D,!N){var F=O+L*(C+e-r.r),z=R+D*(C+e-r.r),B=F+(L<0?-1:1)*S,V=z;M="edge"===y?L<0?o+_:o+n-_:B+(L<0?-v:v),E=V,I=[[O,R],[F,z],[B,V]]}T=N?"center":"edge"===y?L>0?"right":"left":L>0?"left":"right"}var G,H=c.get("rotate");G="number"==typeof H?H*(Math.PI/180):H?L<0?-P+Math.PI:-P:0,d=!!G,r.label={x:M,y:E,position:m,height:k.height,len:C,len2:S,linePoints:I,textAlign:T,verticalAlign:"middle",rotation:G,inside:N,labelDistance:v,labelAlignTo:y,labelMargin:_,bleedMargin:x,textRect:k,text:A,font:w},N||p.push(r.label)}}),!d&&t.get("avoidLabelOverlap")&&r(p,l,h,e,n,i,o,a)}var s=n(171),l=n(222),u=l.parsePercent,c=Math.PI/180;t.exports=a},function(t,e){function n(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf(function(t){for(var e=i.getName(t),r=0;r<n.length;r++)if(!n[r].isSelected(e))return!1;return!0})}}}}t.exports=n},function(t,e,n){var i=n(131);n(330),n(331);var r=n(292),o=n(293);n(295),i.registerVisual(r("scatter","circle")),i.registerLayout(o("scatter"))},function(t,e,n){var i=n(257),r=n(236),o=r.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return i(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});t.exports=o},function(t,e,n){var i=n(131),r=n(285),o=n(332),a=n(293);i.extendChartView({type:"scatter",render:function(t,e,n){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var r=a().reset(t);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_getClipShape:function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},_updateSymbolDraw:function(t,e){var n=this._symbolDraw,i=e.pipelineContext,a=i.large;return n&&a===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=a?new o:new r,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}})},function(t,e,n){function i(){this.group=new r.Group}var r=n(184),o=n(276),a=o.createSymbol,s=n(217),l=4,u=r.extendShape({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(t,e){var n=e.points,i=e.size,r=this.symbolProxy,o=r.shape,a=t.getContext?t.getContext():t,s=a&&i[0]<l;if(!s)for(var u=0;u<n.length;){var c=n[u++],h=n[u++];isNaN(c)||isNaN(h)||this.softClipShape&&!this.softClipShape.contain(c,h)||(o.x=c-i[0]/2,o.y=h-i[1]/2,o.width=i[0],o.height=i[1],r.buildPath(t,o,!0))}},afterBrush:function(t){var e=this.shape,n=e.points,i=e.size,r=i[0]<l;if(r){this.setTransform(t);for(var o=0;o<n.length;){var a=n[o++],s=n[o++];isNaN(a)||isNaN(s)||this.softClipShape&&!this.softClipShape.contain(a,s)||t.fillRect(a-i[0]/2,s-i[1]/2,i[0],i[1])}this.restoreTransform(t)}},findDataIndex:function(t,e){for(var n=this.shape,i=n.points,r=n.size,o=Math.max(r[0],4),a=Math.max(r[1],4),s=i.length/2-1;s>=0;s--){var l=2*s,u=i[l]-o/2,c=i[l+1]-a/2;if(t>=u&&e>=c&&t<=u+o&&e<=c+a)return s}return-1}}),c=i.prototype;c.isPersistent=function(){return!this._incremental},c.updateData=function(t,e){this.group.removeAll();var n=new u({rectHover:!0,cursor:"default"});n.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(n,t,!1,e),this.group.add(n),this._incremental=null},c.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("symbolPoints");this.group.eachChild(function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),i=4*t.startIndex*2;e=new Float32Array(e.buffer,i,n)}t.setShape("points",e)})}},c.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>2e6?(this._incremental||(this._incremental=new s({silent:!0})),this.group.add(this._incremental)):this._incremental=null},c.incrementalUpdate=function(t,e,n){var i;this._incremental?(i=new u,this._incremental.addDisplayable(i,!0)):(i=new u({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end}),i.incremental=!0,this.group.add(i)),i.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(i,e,!!this._incremental,n)},c._setCommon=function(t,e,n,i){var r=e.hostModel;i=i||{};var o=e.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=i.clipShape||null,t.symbolProxy=a(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<l;t.useStyle(r.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var u=e.getVisual("color");u&&t.setColor(u),n||(t.seriesIndex=r.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>=0&&(t.dataIndex=n+(t.startIndex||0))}))},c.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},c._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var h=i;t.exports=h},function(t,e,n){var i=n(131);n(334),n(339),n(340);var r=n(325),o=n(292),a=n(341),s=n(328),l=n(342);i.registerVisual(r("radar")),i.registerVisual(o("radar","circle")),i.registerLayout(a),i.registerProcessor(s("radar")),i.registerPreprocessor(l)},function(t,e,n){n(335),n(337),n(338)},function(t,e,n){function i(t,e,n){this._model=t,this.dimensions=[],this._indicatorAxes=r.map(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,i=new o(n,"log"===t.get("axisType")?new f:new a);return i.name=t.get("name"),i.model=t,t.axis=i,this.dimensions.push(n),i},this),this.resize(t,n),this.cx,this.cy,this.r,this.r0,this.startAngle}var r=n(136),o=n(336),a=n(270),s=n(222),l=n(266),u=l.getScaleExtent,c=l.niceScaleExtent,h=n(231),f=n(274);i.prototype.getIndicatorAxes=function(){return this._indicatorAxes},i.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},i.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e],i=n.angle,r=this.cx+t*Math.cos(i),o=this.cy-t*Math.sin(i);return[r,o]},i.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var r,o=Math.atan2(-n,e),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],c=Math.abs(o-u.angle);c<a&&(r=u,s=l,a=c)}return[s,+(r&&r.coordToData(i))]},i.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),o=e.getHeight(),a=Math.min(i,o)/2;this.cx=s.parsePercent(n[0],i),this.cy=s.parsePercent(n[1],o),this.startAngle=t.get("startAngle")*Math.PI/180;var l=t.get("radius");"string"!=typeof l&&"number"!=typeof l||(l=[0,l]),this.r0=s.parsePercent(l[0],a),this.r=s.parsePercent(l[1],a),r.each(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},i.prototype.update=function(t,e){function n(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}var i=this._indicatorAxes,o=this._model;r.each(i,function(t){t.scale.setExtent(1/0,-(1/0))}),t.eachSeriesByType("radar",function(e,n){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===o){var a=e.getData();r.each(i,function(t){t.scale.unionExtentFromData(a,a.mapDimension(t.dim))})}},this);var a=o.get("splitNumber");r.each(i,function(t,e){var i=u(t.scale,t.model).extent;c(t.scale,t.model);var r=t.model,o=t.scale,l=r.getMin(),h=r.getMax(),f=o.getInterval();if(null!=l&&null!=h)o.setExtent(+l,+h),o.setInterval((h-l)/a);else if(null!=l){var p;do p=l+f*a,o.setExtent(+l,p),o.setInterval(f),f=n(f);while(p<i[1]&&isFinite(p)&&isFinite(i[1]))}else if(null!=h){var d;do d=h-f*a,o.setExtent(d,+h),o.setInterval(f),f=n(f);while(d>i[0]&&isFinite(d)&&isFinite(i[0]))}else{var g=o.getTicks().length-1;g>a&&(f=n(f));var p=Math.ceil(i[1]/f)*f,d=s.round(p-f*a);o.setExtent(d,p),o.setInterval(f)}})},i.dimensions=[],i.create=function(t,e){var n=[];return t.eachComponent("radar",function(r){var o=new i(r,t,e);n.push(o),r.coordinateSystem=o}),t.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("radarIndex")||0])}),n},h.register("radar",i);var p=i;t.exports=p},function(t,e,n){function i(t,e,n){o.call(this,t,e,n),this.type="value",this.angle=0,this.name="",this.model}var r=n(136),o=n(280);r.inherits(i,o);var a=i;t.exports=a},function(t,e,n){function i(t,e){return o.defaults({show:e},t)}var r=n(131),o=n(136),a=n(303),s=n(178),l=n(275),u=a.valueAxis,c=r.extendComponentModel({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),r=this.get("axisTick"),a=this.get("axisType"),u=this.get("axisLabel"),c=this.get("name"),h=this.get("name.show"),f=this.get("name.formatter"),p=this.get("nameGap"),d=this.get("triggerEvent"),g=o.map(this.get("indicator")||[],function(g){null!=g.max&&g.max>0&&!g.min?g.min=0:null!=g.min&&g.min<0&&!g.max&&(g.max=0);var m=c;if(null!=g.color&&(m=o.defaults({color:g.color},c)),g=o.merge(o.clone(g),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:r,axisType:a,axisLabel:u,name:g.text,nameLocation:"end",nameGap:p,nameTextStyle:m,triggerEvent:d},!1),h||(g.name=""),"string"==typeof f){var v=g.name;g.name=f.replace("{value}",null!=v?v:"")}else"function"==typeof f&&(g.name=f(g.name,g));var y=o.extend(new s(g,null,this.ecModel),l);return y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this.getIndicatorModels=function(){return g}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:o.merge({lineStyle:{color:"#bbb"}},u.axisLine),axisLabel:i(u.axisLabel,!1),axisTick:i(u.axisTick,!1),axisType:"interval",splitLine:i(u.splitLine,!0),splitArea:i(u.splitArea,!0),indicator:[]}}),h=c;t.exports=h},function(t,e,n){var i=n(132),r=(i.__DEV__,n(131)),o=n(136),a=n(306),s=n(184),l=["axisLine","axisTickLabel","axisName"],u=r.extendComponentView({type:"radar",render:function(t,e,n){var i=this.group;i.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),i=o.map(n,function(t){var n=new a(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return n});o.each(i,function(t){o.each(l,t.add,t),this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){function e(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}var n=t.coordinateSystem,i=n.getIndicatorAxes();if(i.length){var r=t.get("shape"),a=t.getModel("splitLine"),l=t.getModel("splitArea"),u=a.getModel("lineStyle"),c=l.getModel("areaStyle"),h=a.get("show"),f=l.get("show"),p=u.get("color"),d=c.get("color");p=o.isArray(p)?p:[p],
d=o.isArray(d)?d:[d];var g=[],m=[];if("circle"===r)for(var v=i[0].getTicksCoords(),y=n.cx,_=n.cy,x=0;x<v.length;x++){if(h){var w=e(g,p,x);g[w].push(new s.Circle({shape:{cx:y,cy:_,r:v[x].coord}}))}if(f&&x<v.length-1){var w=e(m,d,x);m[w].push(new s.Ring({shape:{cx:y,cy:_,r0:v[x].coord,r:v[x+1].coord}}))}}else for(var b,C=o.map(i,function(t,e){var i=t.getTicksCoords();return b=null==b?i.length-1:Math.min(i.length-1,b),o.map(i,function(t){return n.coordToPoint(t.coord,e)})}),S=[],x=0;x<=b;x++){for(var M=[],E=0;E<i.length;E++)M.push(C[E][x]);if(M[0]&&M.push(M[0].slice()),h){var w=e(g,p,x);g[w].push(new s.Polyline({shape:{points:M}}))}if(f&&S){var w=e(m,d,x-1);m[w].push(new s.Polygon({shape:{points:M.concat(S)}}))}S=M.slice().reverse()}var I=u.getLineStyle(),T=c.getAreaStyle();o.each(m,function(t,e){this.group.add(s.mergePath(t,{style:o.defaults({stroke:"none",fill:d[e%d.length]},T),silent:!0}))},this),o.each(g,function(t,e){this.group.add(s.mergePath(t,{style:o.defaults({fill:"none",stroke:p[e%p.length]},I),silent:!0}))},this)}}});t.exports=u},function(t,e,n){var i=n(236),r=n(320),o=n(136),a=n(223),s=a.encodeHTML,l=n(322),u=i.extend({type:"series.radar",dependencies:["radar"],init:function(t){u.superApply(this,"init",arguments),this.legendVisualProvider=new l(o.bind(this.getData,this),o.bind(this.getRawData,this))},getInitialData:function(t,e){return r(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(t,e,n,i){var r=this.getData(),a=this.coordinateSystem,l=a.getIndicatorAxes(),u=this.getData().getName(t),c="html"===i?"<br/>":"\n";return s(""===u?this.name:u)+c+o.map(l,function(e,n){var i=r.get(r.mapDimension(e.dim),t);return s(e.name+" : "+i)}).join(c)},getTooltipPosition:function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,i=e.getValues(o.map(n.dimensions,function(t){return e.mapDimension(t)}),t,!0),r=0,a=i.length;r<a;r++)if(!isNaN(i[r])){var s=n.getIndicatorAxes();return n.coordToPoint(s[r].dataToCoord(i[r]),r)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),c=u;t.exports=c},function(t,e,n){function i(t){return a.isArray(t)||(t=[+t,+t]),t}var r=n(131),o=n(184),a=n(136),s=n(276),l=r.extendChartView({type:"radar",render:function(t,e,n){function r(t,e){var n=t.getItemVisual(e,"symbol")||"circle",r=t.getItemVisual(e,"color");if("none"!==n){var o=i(t.getItemVisual(e,"symbolSize")),a=s.createSymbol(n,-1,-1,2,2,r),l=t.getItemVisual(e,"symbolRotate")||0;return a.attr({style:{strokeNoScale:!0},z2:100,scale:[o[0]/2,o[1]/2],rotation:l*Math.PI/180||0}),a}}function l(e,n,i,a,s,l){i.removeAll();for(var u=0;u<n.length-1;u++){var c=r(a,s);c&&(c.__dimIdx=u,e[u]?(c.attr("position",e[u]),o[l?"initProps":"updateProps"](c,{position:n[u]},t,s)):c.attr("position",n[u]),i.add(c))}}function u(t){return a.map(t,function(t){return[c.cx,c.cy]})}var c=t.coordinateSystem,h=this.group,f=t.getData(),p=this._data;f.diff(p).add(function(e){var n=f.getItemLayout(e);if(n){var i=new o.Polygon,r=new o.Polyline,a={shape:{points:n}};i.shape.points=u(n),r.shape.points=u(n),o.initProps(i,a,t,e),o.initProps(r,a,t,e);var s=new o.Group,c=new o.Group;s.add(r),s.add(i),s.add(c),l(r.shape.points,n,c,f,e,!0),f.setItemGraphicEl(e,s)}}).update(function(e,n){var i=p.getItemGraphicEl(n),r=i.childAt(0),a=i.childAt(1),s=i.childAt(2),u={shape:{points:f.getItemLayout(e)}};u.shape.points&&(l(r.shape.points,u.shape.points,s,f,e,!1),o.updateProps(r,u,t),o.updateProps(a,u,t),f.setItemGraphicEl(e,i))}).remove(function(t){h.remove(p.getItemGraphicEl(t))}).execute(),f.eachItemGraphicEl(function(t,e){var n=f.getItemModel(e),i=t.childAt(0),r=t.childAt(1),s=t.childAt(2),l=f.getItemVisual(e,"color");h.add(t),i.useStyle(a.defaults(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:l})),i.hoverStyle=n.getModel("emphasis.lineStyle").getLineStyle();var u=n.getModel("areaStyle"),c=n.getModel("emphasis.areaStyle"),p=u.isEmpty()&&u.parentModel.isEmpty(),d=c.isEmpty()&&c.parentModel.isEmpty();d=d&&p,r.ignore=p,r.useStyle(a.defaults(u.getAreaStyle(),{fill:l,opacity:.7})),r.hoverStyle=c.getAreaStyle();var g=n.getModel("itemStyle").getItemStyle(["color"]),m=n.getModel("emphasis.itemStyle").getItemStyle(),v=n.getModel("label"),y=n.getModel("emphasis.label");s.eachChild(function(t){t.setStyle(g),t.hoverStyle=a.clone(m);var n=f.get(f.dimensions[t.__dimIdx],e);(null==n||isNaN(n))&&(n=""),o.setLabelStyle(t.style,t.hoverStyle,v,y,{labelFetcher:f.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:n,autoColor:l,isRectText:!0})}),t.highDownOnUpdate=function(t,e){r.attr("ignore","emphasis"===e?d:p)},o.setHoverStyle(t)}),this._data=f},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});t.exports=l},function(t,e,n){function i(t){t.eachSeriesByType("radar",function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){var s=i.getIndicatorAxes();a.each(s,function(t,a){e.each(e.mapDimension(s[a].dim),function(t,e){n[e]=n[e]||[];var s=i.dataToPoint(t,a);n[e][a]=r(s)?s:o(i)})}),e.each(function(t){var s=a.find(n[t],function(t){return r(t)})||o(i);n[t].push(s.slice()),e.setItemLayout(t,n[t])})}})}function r(t){return!isNaN(t[0])&&!isNaN(t[1])}function o(t){return[t.cx,t.cy]}var a=n(136);t.exports=i},function(t,e,n){function i(t){var e=t.polar;if(e){r.isArray(e)||(e=[e]);var n=[];r.each(e,function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],r.isArray(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)}),t.polar=n}r.each(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})}var r=n(136);t.exports=i},function(t,e,n){var i=n(131);n(344),n(352),n(358),n(360);var r=n(363),o=n(364),a=n(365),s=n(366),l=n(324);i.registerLayout(r),i.registerVisual(o),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,a),i.registerPreprocessor(s),l("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},function(t,e,n){var i=n(136),r=n(320),o=n(236),a=n(223),s=a.encodeHTML,l=a.addCommas,u=n(321),c=n(238),h=c.retrieveRawAttr,f=n(345),p=n(227),d=p.makeSeriesEncodeForNameBased,g=o.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(t){for(var e=r(this,{coordDimensions:["value"],encodeDefaulter:i.curry(d,this)}),n=e.mapDimension("value"),o=i.createHashMap(),a=[],s=[],l=0,u=e.count();l<u;l++){var c=e.getName(l);o.set(c,!0),a.push({name:c,value:e.get(n,l),selected:h(e,l,"selected")})}var p=f.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return i.each(p.regions,function(t){var e=t.name;o.get(e)||(a.push({name:e}),s.push(e))}),this.updateSelectedMap(a),e.appendValues([],s),e},getHostGeoModel:function(){var t=this.option.geoIndex;return null!=t?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t,e,n,i){for(var r=this.getData(),o=l(this.getRawValue(t)),a=r.getName(t),u=this.seriesGroup,c=[],h=0;h<u.length;h++){var f=u[h].originalData.indexOfName(a),p=r.mapDimension("value");isNaN(u[h].originalData.get(p,f))||c.push(s(u[h].name))}var d="html"===i?"<br/>":"\n";return c.join(", ")+d+s(a+" : "+o)},getTooltipPosition:function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}});i.mixin(g,u);var m=g;t.exports=m},function(t,e,n){function i(t){return function(e,n){var i=r(e),o=[];return s(i,function(i){var r=p[i.type][t];r&&o.push(r(e,i,n))}),o}}function r(t){var e=u.retrieveMap(t)||[];return e}var o=n(132),a=(o.__DEV__,n(136)),s=a.each,l=a.createHashMap,u=n(252),c=n(346),h=n(351),f=n(158),p={geoJSON:c,svg:h},d={load:function(t,e,n){var i,o=[],a=l(),u=l(),c=r(t);return s(c,function(r){var l=p[r.type].load(t,r,n);s(l.regions,function(t){var n=t.name;e&&e.hasOwnProperty(n)&&(t=t.cloneShallow(n=e[n])),o.push(t),a.set(n,t),u.set(n,t.center)});var c=l.boundingRect;c&&(i?i.union(c):i=c.clone())}),{regions:o,regionsMap:a,nameCoordMap:u,boundingRect:i||new f(0,0,0,0)}},makeGraphic:i("makeGraphic"),removeGraphic:i("removeGraphic")};t.exports=d},function(t,e,n){function i(t){for(var e,n=0;n<t.length;n++){var i=t[n].getBoundingRect();e=e||i.clone(),e.union(i)}return e}var r=n(136),o=r.each,a=n(277),s=n(177),l=s.makeInner,u=n(347),c=n(348),h=n(349),f=n(350),p=l(),d={load:function(t,e,n){var r=p(e).parsed;if(r)return r;var s,l=e.specialAreas||{},d=e.geoJSON;try{s=d?a(d,n):[]}catch(t){throw new Error("Invalid geoJson format\n"+t.message)}return u(t,s),o(s,function(e){var n=e.name;c(t,e),h(t,e),f(t,e);var i=l[n];i&&e.transformTo(i.left,i.top,i.width,i.height)}),p(e).parsed={regions:s,boundingRect:i(s)}}};t.exports=d},function(t,e,n){function i(t,e){"china"===t&&e.push(new o("南海诸岛",r.map(s,function(t){return{type:"polygon",exterior:t}}),a))}for(var r=n(136),o=n(278),a=[126,25],s=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],l=0;l<s.length;l++)for(var u=0;u<s[l].length;u++)s[l][u][0]/=10.5,s[l][u][1]/=-14,s[l][u][0]+=a[0],s[l][u][1]+=a[1];t.exports=i},function(t,e){function n(t,e){if("china"===t){var n=i[e.name];if(n){var r=e.center;r[0]+=n[0]/10.5,r[1]+=-n[1]/14}}}var i={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};t.exports=n},function(t,e){function n(t,e){if("world"===t){var n=i[e.name];if(n){var r=e.center;r[0]=n[0],r[1]=n[1]}}}var i={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};t.exports=n},function(t,e){function n(t,e){"china"===t&&"台湾"===e.name&&e.geometries.push({type:"polygon",exterior:i[0]})}var i=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];t.exports=n},function(t,e,n){function i(t,e){var n,i,r=t.svgXML;try{n=r&&o(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},i=n.root,c(null!=i)}catch(t){throw new Error("Invalid svg format\n"+t.message)}var u=n.width,h=n.height,p=n.viewBoxRect;if(e||(e=null==u||null==h?i.getBoundingRect():new f(0,0,0,0),null!=u&&(e.width=u),null!=h&&(e.height=h)),p){var d=a(p,e.width,e.height),g=i;i=new s,i.add(g),g.scale=d.scale,g.position=d.position}return i.setClipPath(new l({shape:e.plain()})),{root:i,boundingRect:e}}var r=n(253),o=r.parseSVG,a=r.makeViewBoxTransform,s=n(146),l=n(208),u=n(136),c=u.assert,h=u.createHashMap,f=n(158),p=n(177),d=p.makeInner,g=d(),m={load:function(t,e){var n=g(e).originRoot;if(n)return{root:n,boundingRect:g(e).boundingRect};var r=i(e);return g(e).originRoot=r.root,g(e).boundingRect=r.boundingRect,r},makeGraphic:function(t,e,n){var r=g(e),o=r.rootMap||(r.rootMap=h()),a=o.get(n);if(a)return a;var s=r.originRoot,l=r.boundingRect;return r.originRootHostKey?a=i(e,l).root:(r.originRootHostKey=n,a=s),o.set(n,a)},removeGraphic:function(t,e,n){var i=g(e),r=i.rootMap;r&&r.removeKey(n),n===i.originRootHostKey&&(i.originRootHostKey=null)}};t.exports=m},function(t,e,n){function i(t){var e=this[u];e&&e.recordVersion===this[c]&&r(e,t)}function r(t,e){var n=t.circle,i=t.labelModel,r=t.hoverLabelModel,o=t.emphasisText,a=t.normalText;e?(n.style.extendFrom(s.setTextStyle({},r,{text:r.get("show")?o:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=s.Z2_EMPHASIS_LIFT):(s.setTextStyle(n.style,i,{text:i.get("show")?a:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}var o=n(131),a=n(136),s=n(184),l=n(353),u="__seriesMapHighDown",c="__seriesMapCallKey",h=o.extendChartView({type:"map",render:function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var r=this.group;if(r.removeAll(),!t.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id){var o=this._mapDraw;o&&r.add(o.group)}else if(t.needsDrawMap){var o=this._mapDraw||new l(n,!0);r.add(o.group),o.draw(t,e,n,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,e,n){var o=t.originalData,l=this.group;o.each(o.mapDimension("value"),function(e,n){if(!isNaN(e)){var h=o.getItemLayout(n);if(h&&h.point){var f=h.point,p=h.offset,d=new s.Circle({style:{fill:t.getData().getVisual("color")},shape:{cx:f[0]+9*p,cy:f[1],r:3},silent:!0,z2:8+(p?0:s.Z2_EMPHASIS_LIFT+1)});if(!p){var g=t.mainSeries.getData(),m=o.getName(n),v=g.indexOfName(m),y=o.getItemModel(n),_=y.getModel("label"),x=y.getModel("emphasis.label"),w=g.getItemGraphicEl(v),b=a.retrieve2(t.getFormattedLabel(v,"normal"),m),C=a.retrieve2(t.getFormattedLabel(v,"emphasis"),b),S=w[u],M=Math.random();if(!S){S=w[u]={};var E=a.curry(i,!0),I=a.curry(i,!1);w.on("mouseover",E).on("mouseout",I).on("emphasis",E).on("normal",I)}w[c]=M,a.extend(S,{recordVersion:M,circle:d,labelModel:_,hoverLabelModel:x,emphasisText:C,normalText:b}),r(S,!1)}l.add(d)}}})}});t.exports=h},function(t,e,n){function i(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function r(t,e,n,i,r){n.off("click"),n.off("mousedown"),e.get("selectedMode")&&(n.on("mousedown",function(){t._mouseDownFlag=!0}),n.on("click",function(a){if(t._mouseDownFlag){t._mouseDownFlag=!1;for(var l=a.target;!l.__regions;)l=l.parent;if(l){var u={type:("geo"===e.mainType?"geo":"map")+"ToggleSelect",batch:s.map(l.__regions,function(t){return{name:t.name,from:r.uid}})};u[e.mainType+"Id"]=e.id,i.dispatchAction(u),o(e,n)}}}))}function o(t,e){e.eachChild(function(e){s.each(e.__regions,function(n){e.trigger(t.isSelected(n.name)?"emphasis":"normal")})})}function a(t,e){var n=new f.Group;this.uid=g("ec_map_draw"),this._controller=new l(t.getZr()),this._controllerHost={target:e?n:null},this.group=n,this._updateGroup=e,this._mouseDownFlag,this._mapName,this._initialized,n.add(this._regionsGroup=new f.Group),n.add(this._backgroundGroup=new f.Group)}var s=n(136),l=n(354),u=n(356),c=n(357),h=c.onIrrelevantElement,f=n(184),p=n(345),d=n(220),g=d.getUID,m=n(148);a.prototype={constructor:a,draw:function(t,e,n,a,l){var u="geo"===t.mainType,c=t.getData&&t.getData();u&&e.eachComponent({mainType:"series",subType:"map"},function(e){c||e.getHostGeoModel()!==t||(c=e.getData())});var h=t.coordinateSystem;this._updateBackground(h);var p,d=this._regionsGroup,g=this.group,v=h.getTransformInfo(),y=!d.childAt(0)||l;if(y)g.transform=v.roamTransform,g.decomposeTransform(),g.dirty();else{var _=new m;_.transform=v.roamTransform,_.decomposeTransform();var x={scale:_.scale,position:_.position};p=_.scale,f.updateProps(g,x,t)}var w=v.rawScale,b=v.rawPosition;d.removeAll();var C=["itemStyle"],S=["emphasis","itemStyle"],M=["label"],E=["emphasis","label"],I=s.createHashMap();s.each(h.regions,function(e){var n=I.get(e.name)||I.set(e.name,new f.Group),r=new f.CompoundPath({segmentIgnoreThreshold:1,shape:{paths:[]}});n.add(r);var o,a=t.getRegionModel(e.name)||t,l=a.getModel(C),h=a.getModel(S),m=i(l),v=i(h),_=a.getModel(M),x=a.getModel(E);if(c){o=c.indexOfName(e.name);var T=c.getItemVisual(o,"color",!0);T&&(m.fill=T)}var P=function(t){return[t[0]*w[0]+b[0],t[1]*w[1]+b[1]]};s.each(e.geometries,function(t){if("polygon"===t.type){for(var e=[],n=0;n<t.exterior.length;++n)e.push(P(t.exterior[n]));r.shape.paths.push(new f.Polygon({segmentIgnoreThreshold:1,shape:{points:e}}));for(var n=0;n<(t.interiors?t.interiors.length:0);++n){for(var i=t.interiors[n],e=[],o=0;o<i.length;++o)e.push(P(i[o]));r.shape.paths.push(new f.Polygon({segmentIgnoreThreshold:1,shape:{points:e}}))}}}),r.setStyle(m),r.style.strokeNoScale=!0,r.culling=!0;var L=_.get("show"),D=x.get("show"),A=c&&isNaN(c.get(c.mapDimension("value"),o)),k=c&&c.getItemLayout(o);if(u||A&&(L||D)||k&&k.showLabel){var N,O=u?e.name:o;(!c||o>=0)&&(N=t);var R=new f.Text({position:P(e.center.slice()),scale:[1/g.scale[0],1/g.scale[1]],z2:10,silent:!0});if(f.setLabelStyle(R.style,R.hoverStyle={},_,x,{labelFetcher:N,labelDataIndex:O,defaultText:e.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!y){var F=[1/p[0],1/p[1]];f.updateProps(R,{scale:F},t)}n.add(R)}if(c)c.setItemGraphicEl(o,n);else{var a=t.getRegionModel(e.name);r.eventData={componentType:"geo",componentIndex:t.componentIndex,geoIndex:t.componentIndex,name:e.name,region:a&&a.option||{}}}var z=n.__regions||(n.__regions=[]);z.push(e),n.highDownSilentOnTouch=!!t.get("selectedMode"),f.setHoverStyle(n,v),d.add(n)}),this._updateController(t,e,n),r(this,t,d,n,a),o(t,d)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&p.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(t){var e=t.map;this._mapName!==e&&s.each(p.makeGraphic(e,this.uid),function(t){this._backgroundGroup.add(t)},this),this._mapName=e},_updateController:function(t,e,n){function i(){var e={type:"geoRoam",componentType:l};return e[l+"Id"]=t.id,e}var r=t.coordinateSystem,o=this._controller,a=this._controllerHost;a.zoomLimit=t.get("scaleLimit"),a.zoom=r.getZoom(),o.enable(t.get("roam")||!1);var l=t.mainType;o.off("pan").on("pan",function(t){this._mouseDownFlag=!1,u.updateViewOnPan(a,t.dx,t.dy),n.dispatchAction(s.extend(i(),{dx:t.dx,dy:t.dy}))},this),o.off("zoom").on("zoom",function(t){if(this._mouseDownFlag=!1,u.updateViewOnZoom(a,t.scale,t.originX,t.originY),n.dispatchAction(s.extend(i(),{zoom:t.scale,originX:t.originX,originY:t.originY})),this._updateGroup){var e=this.group.scale;this._regionsGroup.traverse(function(t){"text"===t.type&&t.attr("scale",[1/e[0],1/e[1]])})}},this),o.setPointerChecker(function(e,i,o){return r.getViewRectAfterRoam().contain(i,o)&&!h(e,n,t)})}};var v=a;t.exports=v},function(t,e,n){function i(t){this.pointerChecker,this._zr=t,this._opt={};var e=f.bind,n=e(r,this),i=e(o,this),u=e(a,this),c=e(s,this),h=e(l,this);p.call(this),this.setPointerChecker=function(t){this.pointerChecker=t},this.enable=function(e,r){this.disable(),this._opt=f.defaults(f.clone(r)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),e!==!0&&"move"!==e&&"pan"!==e||(t.on("mousedown",n),t.on("mousemove",i),t.on("mouseup",u)),e!==!0&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",c),t.on("pinch",h))},this.disable=function(){t.off("mousedown",n),t.off("mousemove",i),t.off("mouseup",u),t.off("mousewheel",c),t.off("pinch",h)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function r(t){if(!(d.isMiddleOrRightButtonOnMouseUpDown(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}}function o(t){if(this._dragging&&h("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!g.isTaken(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,r=this._y,o=e-i,a=n-r;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&d.stop(t.event),c(this,"pan","moveOnMouseMove",t,{dx:o,dy:a,oldX:i,oldY:r,newX:e,newY:n})}}function a(t){d.isMiddleOrRightButtonOnMouseUpDown(t)||(this._dragging=!1)}function s(t){var e=h("zoomOnMouseWheel",t,this._opt),n=h("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,r=Math.abs(i),o=t.offsetX,a=t.offsetY;if(0!==i&&(e||n)){if(e){var s=r>3?1.4:r>1?1.2:1.1,l=i>0?s:1/s;u(this,"zoom","zoomOnMouseWheel",t,{scale:l,originX:o,originY:a})}if(n){var c=Math.abs(i),f=(i>0?1:-1)*(c>3?.4:c>1?.15:.05);u(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:f,originX:o,originY:a})}}}function l(t){if(!g.isTaken(this._zr,"globalPan")){var e=t.pinchScale>1?1.1:1/1.1;u(this,"zoom",null,t,{scale:e,originX:t.pinchX,originY:t.pinchY})}}function u(t,e,n,i,r){t.pointerChecker&&t.pointerChecker(i,r.originX,r.originY)&&(d.stop(i.event),c(t,e,n,i,r))}function c(t,e,n,i,r){r.isAvailableBehavior=f.bind(h,null,n,i),t.trigger(e,r)}function h(t,e,n){var i=n[t];return!t||i&&(!f.isString(i)||e.event[i+"Key"])}var f=n(136),p=n(140),d=n(141),g=n(355);f.mixin(i,p);var m=i;t.exports=m},function(t,e,n){function i(t,e,n){var i=a(t);i[e]=n}function r(t,e,n){var i=a(t),r=i[e];r===n&&(i[e]=null)}function o(t,e){return!!a(t)[e]}function a(t){return t[l]||(t[l]={})}var s=n(131),l="\0_ec_interaction_mutex";s.registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),e.take=i,e.release=r,e.isTaken=o},function(t,e){function n(t,e,n){var i=t.target,r=i.position;r[0]+=e,r[1]+=n,i.dirty()}function i(t,e,n,i){var r=t.target,o=t.zoomLimit,a=r.position,s=r.scale,l=t.zoom=t.zoom||1;if(l*=e,o){var u=o.min||0,c=o.max||1/0;l=Math.max(Math.min(c,l),u)}var h=l/t.zoom;t.zoom=l,a[0]-=(n-a[0])*(h-1),a[1]-=(i-a[1])*(h-1),s[0]*=h,s[1]*=h,r.dirty()}e.updateViewOnPan=n,e.updateViewOnZoom=i},function(t,e){function n(t,e,n){var r=e.getComponentByElement(t.topTarget),o=r&&r.coordinateSystem;return r&&r!==n&&!i[r.mainType]&&o&&o.model!==n}var i={axisPointer:1,tooltip:1,brush:1};e.onIrrelevantElement=n},function(t,e,n){var i=n(131),r=n(136),o=n(359),a=o.updateCenterAndZoom;i.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){var i=e.coordinateSystem;if("geo"===i.type){var o=a(i,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(o.center),e.setZoom&&e.setZoom(o.zoom),"series"===n&&r.each(e.seriesGroup,function(t){t.setCenter(o.center),t.setZoom(o.zoom)})}})})},function(t,e){function n(t,e,n){var i=t.getZoom(),r=t.getCenter(),o=e.zoom,a=t.dataToPoint(r);if(null!=e.dx&&null!=e.dy){a[0]-=e.dx,a[1]-=e.dy;var r=t.pointToData(a);t.setCenter(r)}if(null!=o){if(n){var s=n.min||0,l=n.max||1/0;o=Math.max(Math.min(i*o,l),s)/i}t.scale[0]*=o,t.scale[1]*=o;var u=t.position,c=(e.originX-u[0])*(o-1),h=(e.originY-u[1])*(o-1);u[0]-=c,u[1]-=h,t.updateTransform();var r=t.pointToData(a);t.setCenter(r),t.setZoom(o*i)}return{center:t.getCenter(),zoom:t.getZoom()}}e.updateCenterAndZoom=n},function(t,e,n){function i(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],r=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(r[0])||isNaN(r[1])||this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}var o,a=this.getBoundingRect(),s=t.get("layoutCenter"),l=t.get("layoutSize"),h=e.getWidth(),f=e.getHeight(),p=a.width/a.height*this.aspectScale,d=!1;s&&l&&(s=[c.parsePercent(s[0],h),c.parsePercent(s[1],f)],l=c.parsePercent(l,Math.min(h,f)),isNaN(s[0])||isNaN(s[1])||isNaN(l)||(d=!0));var g;if(d){var g={};p>1?(g.width=l,g.height=l/p):(g.height=l,g.width=l*p),g.y=s[1]-g.height/2,g.x=s[0]-g.width/2}else o=t.getBoxLayoutParams(),o.aspect=p,g=u.getLayoutRect(o,{width:h,height:f});this.setViewRect(g.x,g.y,g.width,g.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function r(t,e){s.each(e.get("geoCoord"),function(e,n){t.addGeoCoord(n,e)})}var o=n(132),a=(o.__DEV__,n(131)),s=n(136),l=n(361),u=n(221),c=n(222),h=n(345),f=n(252),p={dimensions:l.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("geo",function(t,o){var a=t.get("map"),s=t.get("aspectScale"),u=!0,c=f.retrieveMap(a);c&&c[0]&&"svg"===c[0].type?(null==s&&(s=1),u=!1):null==s&&(s=.75);var h=new l(a+o,a,t.get("nameMap"),u);h.aspectScale=s,h.zoomLimit=t.get("scaleLimit"),n.push(h),r(h,t),t.coordinateSystem=h,h.model=t,h.resize=i,h.resize(t,e)}),t.eachSeries(function(t){var e=t.get("coordinateSystem");if("geo"===e){var i=t.get("geoIndex")||0;t.coordinateSystem=n[i]}});var o={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();o[e]=o[e]||[],o[e].push(t)}}),s.each(o,function(t,o){var a=s.map(t,function(t){return t.get("nameMap")}),u=new l(o,o,s.mergeAll(a));u.zoomLimit=s.retrieve.apply(null,s.map(t,function(t){return t.get("scaleLimit")})),n.push(u),u.resize=i,u.aspectScale=t[0].get("aspectScale"),u.resize(t[0],e),s.each(t,function(t){t.coordinateSystem=u,r(u,t)})}),n},getFilledRegions:function(t,e,n){for(var i=(t||[]).slice(),r=s.createHashMap(),o=0;o<i.length;o++)r.set(i[o].name,i[o]);var a=h.load(e,n);return s.each(a.regions,function(t){var e=t.name;!r.get(e)&&i.push({name:e})}),i}};a.registerCoordinateSystem("geo",p);var d=p;t.exports=d},function(t,e,n){function i(t,e,n,i){s.call(this,t),this.map=e;var r=l.load(e,n);this._nameCoordMap=r.nameCoordMap,this._regionsMap=r.regionsMap,this._invertLongitute=null==i||i,this.regions=r.regions,this._rect=r.boundingRect}function r(t,e,n,i){var r=n.geoModel,o=n.seriesModel,a=r?r.coordinateSystem:o?o.coordinateSystem||(o.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return a===this?a[t](i):null}var o=n(136),a=n(158),s=n(362),l=n(345);i.prototype={constructor:i,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return!0;return!1},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),o=this._invertLongitute;r=r.clone(),o&&(r.y=-r.y-r.height);var s=this._rawTransformable;if(s.transform=r.calculateTransform(new a(t,e,n,i)),s.decomposeTransform(),o){var l=s.scale;l[1]=-l[1]}s.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){return this._rect},dataToPoint:function(t,e,n){if("string"==typeof t&&(t=this.getGeoCoord(t)),t)return s.prototype.dataToPoint.call(this,t,e,n)},convertToPixel:o.curry(r,"dataToPoint"),convertFromPixel:o.curry(r,"pointToData")},o.mixin(i,s);var u=i;t.exports=u},function(t,e,n){function i(){c.call(this)}function r(t){this.name=t,this.zoomLimit,c.call(this),this._roamTransformable=new i,this._rawTransformable=new i,this._center,this._zoom}function o(t,e,n,i){var r=n.seriesModel,o=r?r.coordinateSystem:null;return o===this?o[t](i):null}var a=n(136),s=n(138),l=n(149),u=n(158),c=n(148),h=s.applyTransform;a.mixin(i,c),r.prototype={constructor:r,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,n,i){return this._rect=new u(t,e,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,n,i){this.transformTo(t,e,n,i),this._viewRect=new u(t,e,n,i)},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),o=this._rawTransformable;o.transform=r.calculateTransform(new u(t,e,n,i)),o.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect(),e=t.x+t.width/2,n=t.y+t.height/2;return[e,n]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),r=this.getZoom();i=s.applyTransform([],i,t),n=s.applyTransform([],n,t),e.origin=i,e.position=[n[0]-i[0],n[1]-i[1]],e.scale=[r,r],this._updateTransform()},_updateTransform:function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),l.copy(this.transform||(this.transform=[]),e.transform||l.create()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],l.invert(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var t=this._roamTransformable.transform,e=this._rawTransformable;return{roamTransform:t?a.slice(t):l.create(),rawScale:a.slice(e.scale),rawPosition:a.slice(e.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?h(n,t,i):s.copy(n,t)},pointToData:function(t){var e=this.invTransform;return e?h([],t,e):[t[0],t[1]]},convertToPixel:a.curry(o,"dataToPoint"),convertFromPixel:a.curry(o,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},a.mixin(r,c);var f=r;t.exports=f},function(t,e,n){function i(t){var e={};t.eachSeriesByType("map",function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var o={};r.each(n.seriesGroup,function(e){var n=e.coordinateSystem,i=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&i.each(i.mapDimension("value"),function(t,e){var r=i.getName(e),a=n.getRegion(r);if(a&&!isNaN(t)){var s=o[r]||0,l=n.dataToPoint(a.center);o[r]=s+1,i.setItemLayout(e,{point:l,offset:s})}})});var a=n.getData();a.each(function(t){var e=a.getName(t),n=a.getItemLayout(t)||{};n.showLabel=!o[e],a.setItemLayout(t,n)}),e[i]=!0}})}var r=n(136);t.exports=i},function(t,e){function n(t){t.eachSeriesByType("map",function(t){var e=t.get("color"),n=t.getModel("itemStyle"),i=n.get("areaColor"),r=n.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:i,color:r})})}t.exports=n},function(t,e,n){function i(t,e){var n={};return o.each(t,function(t){t.each(t.mapDimension("value"),function(e,i){var r="ec-"+t.getName(i);n[r]=n[r]||[],isNaN(e)||n[r].push(e)})}),t[0].map(t[0].mapDimension("value"),function(i,r){for(var o="ec-"+t[0].getName(r),a=0,s=1/0,l=-(1/0),u=n[o].length,c=0;c<u;c++)s=Math.min(s,n[o][c]),l=Math.max(l,n[o][c]),a+=n[o][c];var h;return h="min"===e?s:"max"===e?l:"average"===e?a/u:a,0===u?NaN:h})}function r(t){var e={};t.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),i=n?"o"+n.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),o.each(e,function(t,e){for(var n=i(o.map(t,function(t){return t.getData()}),t[0].get("mapValueCalculation")),r=0;r<t.length;r++)t[r].originalData=t[r].getData();for(var r=0;r<t.length;r++)t[r].seriesGroup=t,t[r].needsDrawMap=0===r&&!t[r].getHostGeoModel(),t[r].setData(n.cloneShallow()),t[r].mainSeries=t[0]})}var o=n(136);t.exports=r},function(t,e,n){function i(t){var e=[];r.each(t.series,function(t){t&&"map"===t.type&&(e.push(t),t.map=t.map||t.mapType,r.defaults(t,t.mapLocation))})}var r=n(136);t.exports=i;
},function(t,e,n){var i=n(131);n(368),n(371),n(373);var r=n(292),o=n(374);i.registerVisual(r("tree","circle")),i.registerLayout(o)},function(t,e,n){var i=n(236),r=n(369),o=n(223),a=o.encodeHTML,s=n(178),l=i.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){function e(t){t.wrapMethod("getItemModel",function(t,e){var n=a.getNodeByDataIndex(e);return n.children.length&&n.isExpand||(t.parentModel=o),t})}var n={name:t.name,children:t.data},i=t.leaves||{},o=new s(i,this,this.ecModel),a=r.createTree(n,this,e),l=0;a.eachNode("preorder",function(t){t.depth>l&&(l=t.depth)});var u=t.expandAndCollapse,c=u&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return a.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=c}),a.data},getOrient:function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},formatTooltip:function(t){for(var e=this.getData().tree,n=e.root.children[0],i=e.getNodeByDataIndex(t),r=i.getValue(),o=i.name;i&&i!==n;)o=i.parentNode.name+"."+o,i=i.parentNode;return a(o+(isNaN(r)||null==r?"":" : "+r))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});t.exports=l},function(t,e,n){function i(t){this.root,this.data,this._nodes=[],this.hostModel=t}function r(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}var o=n(136),a=n(370),s=n(258),l=n(262),u=function(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e};u.prototype={constructor:u,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,n){"function"==typeof t&&(n=e,e=t,t=null),t=t||{},o.isString(t)&&(t={order:t});var i,r=t.order||"preorder",a=this[t.attr||"children"];"preorder"===r&&(i=e.call(n,this));for(var s=0;!i&&s<a.length;s++)a[s].eachNode(t,e,n);"postorder"===r&&e.call(n,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].getNodeById(t);if(r)return r}},contains:function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].contains(t);if(r)return r}},getAncestors:function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0)){var e=this.hostTree,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}},setVisual:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}},i.prototype={constructor:i,type:"tree",eachNode:function(t,e,n){this.root.eachNode(t,e,n)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},i.createTree=function(t,e,n){function c(t,e){var n=t.value;p=Math.max(p,o.isArray(n)?n.length:1),f.push(t);var i=new u(t.name,h);e?r(i,e):h.root=i,h._nodes.push(i);var a=t.children;if(a)for(var s=0;s<a.length;s++)c(a[s],i)}var h=new i(e),f=[],p=1;c(t),h.root.updateDepthAndHeight(0);var d=l(f,{coordDimensions:["value"],dimensionsCount:p}),g=new s(d,e);return g.initData(f),n&&n(g),a({mainData:g,struct:h,structAttr:"tree"}),h.update(),h};var c=i;t.exports=c},function(t,e,n){function i(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,u(e,n,t),f(n,function(n){f(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,h.curry(r,t))})}),e.wrapMethod("cloneShallow",h.curry(a,t)),f(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,h.curry(o,t))}),h.assert(n[e.dataType]===e)}function r(t,e){if(l(this)){var n=h.extend({},this[p]);n[this.dataType]=e,u(e,n,t)}else c(e,this.dataType,this[d],t);return e}function o(t,e){return t.struct&&t.struct.update(this),e}function a(t,e){return f(e[p],function(n,i){n!==e&&c(n.cloneShallow(),i,e,t)}),e}function s(t){var e=this[d];return null==t||null==e?e:e[p][t]}function l(t){return t[d]===t}function u(t,e,n){t[p]={},f(e,function(e,i){c(e,i,t,n)})}function c(t,e,n,i){n[p][e]=t,t[d]=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=s}var h=n(136),f=h.each,p="\0__link_datas",d="\0__link_mainData",g=i;t.exports=g},function(t,e,n){function i(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==t.getItemVisual(e,"symbol")}function r(t,e,n){return n.itemModel=e,n.itemStyle=e.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=e.getModel("lineStyle").getLineStyle(),n.labelModel=e.getModel("label"),n.hoverLabelModel=e.getModel("emphasis.label"),t.isExpand===!1&&0!==t.children.length?n.symbolInnerColor=n.itemStyle.fill:n.symbolInnerColor="#fff",n}function o(t,e,n,i,o,s){var l=!n,u=t.tree.getNodeByDataIndex(e),f=u.getModel(),s=r(u,f,s),p=t.tree.root,d=u.parentNode===p?u:u.parentNode||u,g=t.getItemGraphicEl(d.dataIndex),m=d.getLayout(),v=g?{x:g.position[0],y:g.position[1],rawX:g.__radialOldRawX,rawY:g.__radialOldRawY}:m,y=u.getLayout();l?(n=new h(t,e,s),n.attr("position",[v.x,v.y])):n.updateData(t,e,s),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=y.rawX,n.__radialRawY=y.rawY,i.add(n),t.setItemGraphicEl(e,n),c.updateProps(n,{position:[y.x,y.y]},o);var _=n.getSymbolPath();if("radial"===s.layout){var x,w,b=p.children[0],C=b.getLayout(),S=b.children.length;if(y.x===C.x&&u.isExpand===!0){var M={};M.x=(b.children[0].getLayout().x+b.children[S-1].getLayout().x)/2,M.y=(b.children[0].getLayout().y+b.children[S-1].getLayout().y)/2,x=Math.atan2(M.y-C.y,M.x-C.x),x<0&&(x=2*Math.PI+x),w=M.x<C.x,w&&(x-=Math.PI)}else x=Math.atan2(y.y-C.y,y.x-C.x),x<0&&(x=2*Math.PI+x),0===u.children.length||0!==u.children.length&&u.isExpand===!1?(w=y.x<C.x,w&&(x-=Math.PI)):(w=y.x>C.x,w||(x-=Math.PI));var E=w?"left":"right",I=s.labelModel.get("rotate"),T=I*(Math.PI/180);_.setStyle({textPosition:s.labelModel.get("position")||E,textRotation:null==I?-x:T,textOrigin:"center",verticalAlign:"middle"})}a(o,u,p,n,v,m,y,i,s)}function a(t,e,n,i,r,o,a,s,h){var f=h.edgeShape,p=i.__edge;if("curve"===f)e.parentNode&&e.parentNode!==n&&(p||(p=i.__edge=new c.BezierCurve({shape:l(h,r,r),style:u.defaults({opacity:0,strokeNoScale:!0},h.lineStyle)})),c.updateProps(p,{shape:l(h,o,a),style:u.defaults({opacity:1},h.lineStyle)},t));else if("polyline"===f&&"orthogonal"===h.layout&&e!==n&&e.children&&0!==e.children.length&&e.isExpand===!0){for(var d=e.children,g=[],m=0;m<d.length;m++){var v=d[m].getLayout();g.push([v.x,v.y])}p||(p=i.__edge=new S({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:h.orient,forkPosition:h.edgeForkPosition},style:u.defaults({opacity:0,strokeNoScale:!0},h.lineStyle)})),c.updateProps(p,{shape:{parentPoint:[a.x,a.y],childPoints:g},style:u.defaults({opacity:1},h.lineStyle)},t)}s.add(p)}function s(t,e,n,i,o,a){for(var s,u=t.tree.getNodeByDataIndex(e),h=t.tree.root,f=u.getModel(),a=r(u,f,a),p=u.parentNode===h?u:u.parentNode||u,d=a.edgeShape;s=p.getLayout(),null==s;)p=p.parentNode===h?p:p.parentNode||p;c.updateProps(n,{position:[s.x+1,s.y+1]},o,function(){i.remove(n),t.setItemGraphicEl(e,null)}),n.fadeOut(null,{keepLabel:!0});var g=t.getItemGraphicEl(p.dataIndex),m=g.__edge,v=n.__edge||(p.isExpand===!1||1===p.children.length?m:void 0),d=a.edgeShape;v&&("curve"===d?c.updateProps(v,{shape:l(a,s,s),style:{opacity:0}},o,function(){i.remove(v)}):"polyline"===d&&"orthogonal"===a.layout&&c.updateProps(v,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},o,function(){i.remove(v)}))}function l(t,e,n){var i,r,o,a,s,l,u,c,h=t.orient;if("radial"===t.layout){s=e.rawX,u=e.rawY,l=n.rawX,c=n.rawY;var f=p(s,u),d=p(s,u+(c-u)*t.curvature),g=p(l,c+(u-c)*t.curvature),m=p(l,c);return{x1:f.x,y1:f.y,x2:m.x,y2:m.y,cpx1:d.x,cpy1:d.y,cpx2:g.x,cpy2:g.y}}return s=e.x,u=e.y,l=n.x,c=n.y,"LR"!==h&&"RL"!==h||(i=s+(l-s)*t.curvature,r=u,o=l+(s-l)*t.curvature,a=c),"TB"!==h&&"BT"!==h||(i=s,r=u+(c-u)*t.curvature,o=l,a=c+(u-c)*t.curvature),{x1:s,y1:u,x2:l,y2:c,cpx1:i,cpy1:r,cpx2:o,cpy2:a}}var u=n(136),c=n(184),h=n(286),f=n(372),p=f.radialCoordinate,d=n(131),g=n(189),m=n(362),v=n(356),y=n(354),_=n(357),x=_.onIrrelevantElement,w=n(132),b=(w.__DEV__,n(222)),C=b.parsePercent,S=c.extendShape({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.childPoints,i=n.length,r=e.parentPoint,o=n[0],a=n[i-1];if(1===i)return t.moveTo(r[0],r[1]),void t.lineTo(o[0],o[1]);var s=e.orient,l="TB"===s||"BT"===s?0:1,u=1-l,c=C(e.forkPosition,1),h=[];h[l]=r[l],h[u]=r[u]+(a[u]-r[u])*c,t.moveTo(r[0],r[1]),t.lineTo(h[0],h[1]),t.moveTo(o[0],o[1]),h[l]=o[l],t.lineTo(h[0],h[1]),h[l]=a[l],t.lineTo(h[0],h[1]),t.lineTo(a[0],a[1]);for(var f=1;f<i-1;f++){var p=n[f];t.moveTo(p[0],p[1]),h[l]=p[l],t.lineTo(h[0],h[1])}}}),M=d.extendChartView({type:"tree",init:function(t,e){this._oldTree,this._mainGroup=new c.Group,this._controller=new y(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(t,e,n,r){var a=t.getData(),l=t.layoutInfo,u=this._mainGroup,c=t.get("layout");"radial"===c?u.attr("position",[l.x+l.width/2,l.y+l.height/2]):u.attr("position",[l.x,l.y]),this._updateViewCoordSys(t,l,c),this._updateController(t,e,n);var h=this._data,f={expandAndCollapse:t.get("expandAndCollapse"),layout:c,edgeShape:t.get("edgeShape"),edgeForkPosition:t.get("edgeForkPosition"),orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};a.diff(h).add(function(e){i(a,e)&&o(a,e,null,u,t,f)}).update(function(e,n){var r=h.getItemGraphicEl(n);return i(a,e)?void o(a,e,r,u,t,f):void(r&&s(h,n,r,u,t,f))}).remove(function(e){var n=h.getItemGraphicEl(e);n&&s(h,e,n,u,t,f)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),f.expandAndCollapse===!0&&a.eachItemGraphicEl(function(e,i){e.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})})}),this._data=a},_updateViewCoordSys:function(t){var e=t.getData(),n=[];e.each(function(t){var i=e.getItemLayout(t);!i||isNaN(i.x)||isNaN(i.y)||n.push([+i.x,+i.y])});var i=[],r=[];g.fromPoints(n,i,r);var o=this._min,a=this._max;r[0]-i[0]===0&&(i[0]=o?o[0]:i[0]-1,r[0]=a?a[0]:r[0]+1),r[1]-i[1]===0&&(i[1]=o?o[1]:i[1]-1,r[1]=a?a[1]:r[1]+1);var s=t.coordinateSystem=new m;s.zoomLimit=t.get("scaleLimit"),s.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1]),s.setCenter(t.get("center")),s.setZoom(t.get("zoom")),this.group.attr({position:s.position,scale:s.scale}),this._viewCoordSys=s,this._min=i,this._max=r},_updateController:function(t,e,n){var i=this._controller,r=this._controllerHost,o=this.group;i.setPointerChecker(function(e,i,r){var a=o.getBoundingRect();return a.applyTransform(o.transform),a.contain(i,r)&&!x(e,n,t)}),i.enable(t.get("roam")),r.zoomLimit=t.get("scaleLimit"),r.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(e){v.updateViewOnPan(r,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})},this).on("zoom",function(e){v.updateViewOnZoom(r,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(t)},this)},_updateNodeAndLinkScale:function(t){var e=t.getData(),n=this._getNodeGlobalScale(t),i=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scale,r=i&&i[0]||1,o=e.getZoom(),a=(o-1)*n+1;return a/r},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}});t.exports=M},function(t,e,n){function i(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e,n,i=[t];e=i.pop();)if(n=e.children,e.isExpand&&n.length)for(var r=n.length,o=r-1;o>=0;o--){var a=n[o];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},i.push(a)}}function r(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,r=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){u(t);var o=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;r?(t.hierNode.prelim=r.hierNode.prelim+e(t,r),t.hierNode.modifier=t.hierNode.prelim-o):t.hierNode.prelim=o}else r&&(t.hierNode.prelim=r.hierNode.prelim+e(t,r));t.parentNode.hierNode.defaultAncestor=c(t,r,t.parentNode.hierNode.defaultAncestor||i[0],e)}function o(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function a(t){return arguments.length?t:g}function s(t,e){var n={};return t-=Math.PI/2,n.x=e*Math.cos(t),n.y=e*Math.sin(t),n}function l(t,e){return m.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function u(t){for(var e=t.children,n=e.length,i=0,r=0;--n>=0;){var o=e[n];o.hierNode.prelim+=i,o.hierNode.modifier+=i,r+=o.hierNode.change,i+=o.hierNode.shift+r}}function c(t,e,n,i){if(e){for(var r=t,o=t,a=o.parentNode.children[0],s=e,l=r.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,g=s.hierNode.modifier;s=h(s),o=f(o),s&&o;){r=h(r),a=f(a),r.hierNode.ancestor=t;var m=s.hierNode.prelim+g-o.hierNode.prelim-u+i(s,o);m>0&&(d(p(s,t,n),t,m),u+=m,l+=m),g+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=r.hierNode.modifier,c+=a.hierNode.modifier}s&&!h(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=g-l),o&&!f(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,n=t)}return n}function h(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function f(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function p(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function d(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}function g(t,e){return t.parentNode===e.parentNode?1:2}var m=n(221);e.init=i,e.firstWalk=r,e.secondWalk=o,e.separation=a,e.radialCoordinate=s,e.getViewRect=l},function(t,e,n){var i=n(131),r=n(359),o=r.updateCenterAndZoom;i.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,i=e.getData().tree,r=i.getNodeByDataIndex(n);r.isExpand=!r.isExpand})}),i.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=e.coordinateSystem,i=o(n,t);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)})})},function(t,e,n){function i(t,e){t.eachSeriesByType("tree",function(t){r(t,e)})}function r(t,e){var n=d(t,e);t.layoutInfo=n;var i=t.get("layout"),r=0,o=0,l=null;"radial"===i?(r=2*Math.PI,o=Math.min(n.height,n.width)/2,l=f(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(r=n.width,o=n.height,l=f());var g=t.getData().tree.root,m=g.children[0];if(m){u(g),a(m,c,l),g.hierNode.modifier=-m.hierNode.prelim,s(m,h);var v=m,y=m,_=m;s(m,function(t){var e=t.getLayout().x;e<v.getLayout().x&&(v=t),e>y.getLayout().x&&(y=t),t.depth>_.depth&&(_=t)});var x=v===y?1:l(v,y)/2,w=x-v.getLayout().x,b=0,C=0,S=0,M=0;if("radial"===i)b=r/(y.getLayout().x+x+w),C=o/(_.depth-1||1),s(m,function(t){S=(t.getLayout().x+w)*b,M=(t.depth-1)*C;var e=p(S,M);t.setLayout({x:e.x,y:e.y,rawX:S,rawY:M},!0)});else{var E=t.getOrient();"RL"===E||"LR"===E?(C=o/(y.getLayout().x+x+w),b=r/(_.depth-1||1),s(m,function(t){M=(t.getLayout().x+w)*C,S="LR"===E?(t.depth-1)*b:r-(t.depth-1)*b,t.setLayout({x:S,y:M},!0)})):"TB"!==E&&"BT"!==E||(b=r/(y.getLayout().x+x+w),C=o/(_.depth-1||1),s(m,function(t){S=(t.getLayout().x+w)*b,M="TB"===E?(t.depth-1)*C:o-(t.depth-1)*C,t.setLayout({x:S,y:M},!0)}))}}}var o=n(375),a=o.eachAfter,s=o.eachBefore,l=n(372),u=l.init,c=l.firstWalk,h=l.secondWalk,f=l.separation,p=l.radialCoordinate,d=l.getViewRect;t.exports=i},function(t,e){function n(t,e,n){for(var i,r=[t],o=[];i=r.pop();)if(o.push(i),i.isExpand){var a=i.children;if(a.length)for(var s=0;s<a.length;s++)r.push(a[s])}for(;i=o.pop();)e(i,n)}function i(t,e){for(var n,i=[t];n=i.pop();)if(e(n),n.isExpand){var r=n.children;if(r.length)for(var o=r.length-1;o>=0;o--)i.push(r[o])}}e.eachAfter=n,e.eachBefore=i},function(t,e,n){var i=n(131);n(377),n(379),n(382);var r=n(383),o=n(385);i.registerVisual(r),i.registerLayout(o)},function(t,e,n){function i(t){var e=0;o.each(t.children,function(t){i(t);var n=t.value;o.isArray(n)&&(n=n[0]),e+=n});var n=t.value;o.isArray(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),o.isArray(t.value)?t.value[0]=n:t.value=n}function r(t,e){var n=e.get("color");if(n){t=t||[];var i;if(o.each(t,function(t){var e=new l(t),n=e.get("color");(e.get("itemStyle.color")||n&&"none"!==n)&&(i=!0)}),!i){var r=t[0]||(t[0]={});r.color=n.slice()}return t}}var o=n(136),a=n(236),s=n(369),l=n(178),u=n(223),c=u.encodeHTML,h=u.addCommas,f=n(378),p=f.wrapTreePathInfo,d=a.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){function n(t){t.wrapMethod("getItemModel",function(t,e){var n=p.getNodeByDataIndex(e),i=f[n.depth];return t.parentModel=i||h,t})}var a={name:t.name,children:t.data};i(a);var u=t.levels||[],c=this.designatedVisualItemStyle={},h=new l({itemStyle:c},this,e);u=t.levels=r(u,e);var f=o.map(u||[],function(t){return new l(t,h,e)},this),p=s.createTree(a,this,n);return p.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),i=h(o.isArray(n)?n[0]:n),r=e.getName(t);return c(r+": "+i)},getDataParams:function(t){var e=a.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=p(n,this),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},o.extend(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=o.createHashMap(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});t.exports=d},function(t,e,n){function i(t,e,n){if(t&&s.indexOf(e,t.type)>=0){var i=n.getData().tree.root,r=t.targetNode;if("string"==typeof r&&(r=i.getNodeById(r)),r&&i.contains(r))return{node:r};var o=t.targetNodeId;if(null!=o&&(r=i.getNodeById(o)))return{node:r}}}function r(t){for(var e=[];t;)t=t.parentNode,t&&e.push(t);return e.reverse()}function o(t,e){var n=r(t);return s.indexOf(n,e)>=0}function a(t,e){for(var n=[];t;){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}var s=n(136);e.retrieveTargetInfo=i,e.getPathToRoot=r,e.aboveViewRoot=o,e.wrapTreePathInfo=a},function(t,e,n){function i(){return{nodeGroup:[],background:[],content:[]}}function r(t,e,n,i,r,a,u,c,h,f){function p(e,n,i){if(n.dataIndex=u.dataIndex,n.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:k,height:N}),R)g(n);else{n.invisible=!1;var r=u.getVisual("borderColor",!0),o=j.get("borderColor"),a=A(H);a.fill=r;var s=D(j);if(s.fill=o,i){var c=k-2*O;m(a,s,r,c,V,{x:O,y:0,width:c,height:V})}else a.text=s.text=null;n.setStyle(a),l.setElementHoverStyle(n,s)}e.add(n)}function d(e,n){n.dataIndex=u.dataIndex,n.seriesIndex=t.seriesIndex;var i=Math.max(k-2*O,0),r=Math.max(N-2*O,0);if(n.culling=!0,n.setShape({x:O,y:O,width:i,height:r}),R)g(n);else{n.invisible=!1;var o=u.getVisual("color",!0),a=A(H);a.fill=o;var s=D(j);m(a,s,o,i,r),n.setStyle(a),l.setElementHoverStyle(n,s)}e.add(n)}function g(t){!t.invisible&&a.push(t)}function m(e,n,i,r,o,a){var c=W.get("name"),h=W.getModel(a?E:S),f=W.getModel(a?I:M),p=h.getShallow("show");l.setLabelStyle(e,n,h,f,{defaultText:p?c:null,autoColor:i,isRectText:!0,labelFetcher:t,labelDataIndex:u.dataIndex,labelProp:a?"upperLabel":"label"}),v(e,a,C),v(n,a,C),a&&(e.textRect=s.clone(a)),e.truncate=p&&h.get("ellipsis")?{outerWidth:r,outerHeight:o,minChar:2}:null}function v(e,n,i){var r=e.text;if(!n&&i.isLeafRoot&&null!=r){var o=t.get("drillDownIcon",!0);e.text=o?o+" "+r:r}}function y(t,i,a,s){var l=null!=z&&n[t][z],u=r[t];return l?(n[t][z]=null,_(u,l,t)):R||(l=new i({z:o(a,s)}),l.__tmDepth=a,l.__tmStorageName=t,b(u,l,t)),e[t][F]=l}function _(t,e,n){var i=t[F]={};i.old="nodeGroup"===n?e.position.slice():s.extend({},e.shape)}function b(t,e,n){var o=t[F]={},a=u.parentNode;if(a&&(!i||"drillDown"===i.direction)){var s=0,l=0,c=r.background[a.getRawIndex()];!i&&c&&c.old&&(s=c.old.width,l=c.old.height),o.old="nodeGroup"===n?[0,l]:{x:s,y:l,width:0,height:0}}o.fadein="nodeGroup"!==n}if(u){var C=u.getLayout(),T=t.getData();if(T.setItemGraphicEl(u.dataIndex,null),C&&C.isInView){var k=C.width,N=C.height,O=C.borderWidth,R=C.invisible,F=u.getRawIndex(),z=c&&c.getRawIndex(),B=u.viewChildren,V=C.upperHeight,G=B&&B.length,H=u.getModel("itemStyle"),j=u.getModel("emphasis.itemStyle"),U=y("nodeGroup",x);if(U){if(h.add(U),U.attr("position",[C.x||0,C.y||0]),U.__tmNodeWidth=k,U.__tmNodeHeight=N,C.isAboveViewRoot)return U;var W=u.getModel(),q=y("background",w,f,P);if(q&&p(U,q,G&&C.upperLabelHeight),G)l.isHighDownDispatcher(U)&&l.setAsHighDownDispatcher(U,!1),q&&(l.setAsHighDownDispatcher(q,!0),T.setItemGraphicEl(u.dataIndex,q));else{var Y=y("content",w,f,L);Y&&d(U,Y),q&&l.isHighDownDispatcher(q)&&l.setAsHighDownDispatcher(q,!1),l.setAsHighDownDispatcher(U,!0),T.setItemGraphicEl(u.dataIndex,U)}return U}}}}function o(t,e){var n=t*T+e;return(n-1)/n}var a=n(131),s=n(136),l=n(184),u=n(259),c=n(378),h=n(380),f=n(354),p=n(158),d=n(149),g=n(381),m=n(181),v=n(223),y=v.windowOpen,_=s.bind,x=l.Group,w=l.Rect,b=s.each,C=3,S=["label"],M=["emphasis","label"],E=["upperLabel"],I=["emphasis","upperLabel"],T=10,P=1,L=2,D=m([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),A=function(t){var e=D(t);return e.stroke=e.fill=e.lineWidth=null,e},k=a.extendChartView({type:"treemap",init:function(t,e){this._containerGroup,this._storage=i(),this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(t,e,n,i){var r=e.findComponents({mainType:"series",subType:"treemap",query:i});if(!(s.indexOf(r,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var o=["treemapZoomToNode","treemapRootToNode"],a=c.retrieveTargetInfo(i,o,t),l=i&&i.type,u=t.layoutInfo,h=!this._oldTree,f=this._storage,p="treemapRootToNode"===l&&a&&f?{rootNodeGroup:f.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,d=this._giveContainerGroup(u),g=this._doRender(d,t,p);h||l&&"treemapZoomToNode"!==l&&"treemapRootToNode"!==l?g.renderFinally():this._doAnimation(d,g,t,p),this._resetController(n),this._renderBreadcrumb(t,n,a)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new x,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,n){function o(t,e,n,i,r){function a(t){return t.getId()}function l(a,s){var l=null!=a?t[a]:null,u=null!=s?e[s]:null,c=m(l,u,n,r);c&&o(l&&l.viewChildren||[],u&&u.viewChildren||[],c,i,r+1)}i?(e=t,b(t,function(t,e){!t.isRemoved()&&l(e,e)})):new u(e,t,a,a).add(l).update(l).remove(s.curry(l,null)).execute()}function a(t){var e=i();return t&&b(t,function(t,n){var i=e[n];b(t,function(t){t&&(i.push(t),t.__tmWillDelete=1)})}),e}function l(){b(v,function(t){b(t,function(t){t.parent&&t.parent.remove(t)})}),b(g,function(t){t.invisible=!0,t.dirty()})}var c=e.getData().tree,h=this._oldTree,f=i(),p=i(),d=this._storage,g=[],m=s.curry(r,e,p,d,n,f,g);o(c.root?[c.root]:[],h&&h.root?[h.root]:[],t,c===h||!h,0);var v=a(d);return this._oldTree=c,this._storage=p,{lastsForAnimation:f,willDeleteEls:v,renderFinally:l}},_doAnimation:function(t,e,n,i){if(n.get("animation")){var r=n.get("animationDurationUpdate"),o=n.get("animationEasing"),a=g.createWrap();b(e.willDeleteEls,function(t,e){b(t,function(t,n){if(!t.invisible){var s,l=t.parent;if(i&&"drillDown"===i.direction)s=l===i.rootNodeGroup?{shape:{x:0,y:0,width:l.__tmNodeWidth,height:l.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,c=0;l.__tmWillDelete||(u=l.__tmNodeWidth/2,c=l.__tmNodeHeight/2),s="nodeGroup"===e?{position:[u,c],style:{opacity:0}}:{shape:{x:u,y:c,width:0,height:0},style:{opacity:0}}}s&&a.add(t,s,r,o)}})}),b(this._storage,function(t,n){b(t,function(t,i){var l=e.lastsForAnimation[n][i],u={};l&&("nodeGroup"===n?l.old&&(u.position=t.position.slice(),t.attr("position",l.old)):(l.old&&(u.shape=s.extend({},t.shape),t.setShape(l.old)),l.fadein?(t.setStyle("opacity",0),u.style={opacity:1}):1!==t.style.opacity&&(u.style={opacity:1})),a.add(t,u,r,o))})},this),this._state="animating",a.done(_(function(){this._state="ready",e.renderFinally()},this)).start()}},_resetController:function(t){var e=this._controller;e||(e=this._controller=new f(t.getZr()),e.enable(this.seriesModel.get("roam")),e.on("pan",_(this._onPan,this)),e.on("zoom",_(this._onZoom,this)));var n=new p(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,i){return n.contain(e,i)})},_clearController:function(){var t=this._controller;t&&(t.dispose(),t=null)},_onPan:function(t){if("animating"!==this._state&&(Math.abs(t.dx)>C||Math.abs(t.dy)>C)){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},_onZoom:function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;var o=new p(r.x,r.y,r.width,r.height),a=this.seriesModel.layoutInfo;e-=a.x,n-=a.y;var s=d.create();d.translate(s,s,[-e,-n]),d.scale(s,s,[t.scale,t.scale]),d.translate(s,s,[e,n]),o.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x,y:o.y,width:o.width,height:o.height}})}},_initEvents:function(t){t.on("click",function(t){if("ready"===this._state){var e=this.seriesModel.get("nodeClick",!0);if(e){var n=this.findTarget(t.offsetX,t.offsetY);if(n){var i=n.node;if(i.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===e)this._zoomToNode(n);else if("link"===e){var r=i.hostTree.data.getItemModel(i.dataIndex),o=r.get("link",!0),a=r.get("target",!0)||"blank";o&&y(o,a)}}}}},this)},_renderBreadcrumb:function(t,e,n){function i(e){"animating"!==this._state&&(c.aboveViewRoot(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))}n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2),n||(n={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new h(this.group))).render(t,e,n.node,_(i,this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=i(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var n,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},function(i){var r=this._storage.background[i.getRawIndex()];if(r){var o=r.transformCoordToLocal(t,e),a=r.shape;if(!(a.x<=o[0]&&o[0]<=a.x+a.width&&a.y<=o[1]&&o[1]<=a.y+a.height))return!1;n={node:i,offsetX:o[0],offsetY:o[1]}}},this),n}});t.exports=k},function(t,e,n){function i(t){this.group=new a.Group,t.add(this.group)}function r(t,e,n,i,r,o){var a=[[r?t:t-p,e],[t+n,e],[t+n,e+i],[r?t:t-p,e+i]];return!o&&a.splice(2,0,[t+n+p,e+i/2]),!r&&a.push([t,e+i/2]),a}function o(t,e,n){t.eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.componentIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&c(n,e)}}var a=n(184),s=n(221),l=n(136),u=n(378),c=u.wrapTreePathInfo,h=8,f=8,p=5;i.prototype={constructor:i,render:function(t,e,n,i){var r=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),r.get("show")&&n){var a=r.getModel("itemStyle"),l=a.getModel("textStyle"),u={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,u,l),this._renderContent(t,u,a,l,i),s.positionElement(o,u.pos,u.box)}},_prepare:function(t,e,n){for(var i=t;i;i=i.parentNode){var r=i.getModel().get("name"),o=n.getTextRect(r),a=Math.max(o.width+2*h,e.emptyItemWidth);
e.totalWidth+=a+f,e.renderList.push({node:i,text:r,width:a})}},_renderContent:function(t,e,n,i,u){for(var c=0,h=e.emptyItemWidth,p=t.get("breadcrumb.height"),d=s.getAvailableSize(e.pos,e.box),g=e.totalWidth,m=e.renderList,v=m.length-1;v>=0;v--){var y=m[v],_=y.node,x=y.width,w=y.text;g>d.width&&(g-=x-h,x=h,w=null);var b=new a.Polygon({shape:{points:r(c,0,x,p,v===m.length-1,0===v)},style:l.defaults(n.getItemStyle(),{lineJoin:"bevel",text:w,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:l.curry(u,_)});this.group.add(b),o(b,t,_),c+=x+f}},remove:function(){this.group.removeAll()}};var d=i;t.exports=d},function(t,e,n){function i(){var t,e=[],n={};return{add:function(t,i,o,a,s){return r.isString(a)&&(s=a,a=0),!n[t.id]&&(n[t.id]=1,e.push({el:t,target:i,time:o,delay:a,easing:s}),!0)},done:function(e){return t=e,this},start:function(){function i(){r--,r||(e.length=0,n={},t&&t())}for(var r=e.length,o=0,a=e.length;o<a;o++){var s=e[o];s.el.animateTo(s.target,s.time,s.delay,s.easing,i)}return this}}}var r=n(136);e.createWrap=i},function(t,e,n){for(var i=n(131),r=n(378),o=function(){},a=["treemapZoomToNode","treemapRender","treemapMove"],s=0;s<a.length;s++)i.registerAction({type:a[s],update:"updateView"},o);i.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,e){function n(e,n){var i=["treemapZoomToNode","treemapRootToNode"],o=r.retrieveTargetInfo(t,i,e);if(o){var a=e.getViewRoot();a&&(t.direction=r.aboveViewRoot(a,o.node)?"rollUp":"drillDown"),e.resetViewRoot(o.node)}}e.eachComponent({mainType:"series",subType:"treemap",query:t},n)})},function(t,e,n){function i(t,e,n,s){var u=t.getModel(),h=t.getLayout();if(h&&!h.invisible&&h.isInView){var f,d=t.getModel(g),m=r(d,e,s),v=d.get("borderColor"),y=d.get("borderColorSaturation");null!=y&&(f=o(m,t),v=a(y,f)),t.setVisual("borderColor",v);var _=t.viewChildren;if(_&&_.length){var x=l(t,u,h,d,m,_);p.each(_,function(t,e){if(t.depth>=n.length||t===n[t.depth]){var r=c(u,m,t,e,x,s);i(t,r,n,s)}})}else f=o(m,t),t.setVisual("color",f)}}function r(t,e,n){var i=p.extend({},e),r=n.designatedVisualItemStyle;return p.each(["color","colorAlpha","colorSaturation"],function(n){r[n]=e[n];var o=t.get(n);r[n]=null,null!=o&&(i[n]=o)}),i}function o(t){var e=s(t,"color");if(e){var n=s(t,"colorAlpha"),i=s(t,"colorSaturation");return i&&(e=f.modifyHSL(e,null,null,i)),n&&(e=f.modifyAlpha(e,n)),e}}function a(t,e){return null!=e?f.modifyHSL(e,null,null,t):null}function s(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function l(t,e,n,i,r,o){if(o&&o.length){var a=u(e,"color")||null!=r.color&&"none"!==r.color&&(u(e,"colorAlpha")||u(e,"colorSaturation"));if(a){var s=e.get("visualMin"),l=e.get("visualMax"),c=n.dataExtent.slice();null!=s&&s<c[0]&&(c[0]=s),null!=l&&l>c[1]&&(c[1]=l);var f=e.get("colorMappingBy"),p={type:a.name,dataExtent:c,visual:a.range};"color"!==p.type||"index"!==f&&"id"!==f?p.mappingMethod="linear":(p.mappingMethod="category",p.loop=!0);var d=new h(p);return d.__drColorMappingBy=f,d}}}function u(t,e){var n=t.get(e);return d(n)&&n.length?{name:e,range:n}:null}function c(t,e,n,i,r,o){var a=p.extend({},e);if(r){var s=r.type,l="color"===s&&r.__drColorMappingBy,u="index"===l?i:"id"===l?o.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));a[s]=r.mapValueToVisual(u)}return a}var h=n(384),f=n(154),p=n(136),d=p.isArray,g="itemStyle",m={seriesType:"treemap",reset:function(t,e,n,r){var o=t.getData().tree,a=o.root;a.isRemoved()||i(a,{},t.getViewRoot().getAncestors(),t)}};t.exports=m},function(t,e,n){function i(t){var e=t.pieceList;t.hasSpecialVisual=!1,g.each(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}function r(t){var e=t.categories,n=t.visual,i=t.categoryMap={};if(_(e,function(t,e){i[t]=e}),!g.isArray(n)){var r=[];g.isObject(n)?_(n,function(t,e){var n=i[e];r[null!=n?n:w]=t}):r[w]=n,n=p(t,r)}for(var o=e.length-1;o>=0;o--)null==n[o]&&(delete i[e[o]],e.pop())}function o(t,e){var n=t.visual,i=[];g.isObject(n)?_(n,function(t){i.push(t)}):null!=n&&i.push(n);var r={color:1,symbol:1};e||1!==i.length||r.hasOwnProperty(t.type)||(i[1]=i[0]),p(t,i)}function a(t){return{applyVisual:function(e,n,i){e=this.mapValueToVisual(e),i("color",t(n("color"),e))},_doMap:h([0,1])}}function s(t){var e=this.option.visual;return e[Math.round(y(t,[0,1],[0,e.length-1],!0))]||{}}function l(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function u(t){var e=this.option.visual;return e[this.option.loop&&t!==w?t%e.length:t]}function c(){return this.option.visual[0]}function h(t){return{linear:function(e){return y(e,t,this.option.visual,!0)},category:u,piecewise:function(e,n){var i=f.call(this,n);return null==i&&(i=y(e,t,this.option.visual,!0)),i},fixed:c}}function f(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=b.findPieceIndex(t,n),r=n[i];if(r&&r.visual)return r.visual[this.type]}}function p(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=g.map(e,function(t){return m.parse(t)})),e}function d(t,e,n){return t?e<=n:e<n}var g=n(136),m=n(154),v=n(222),y=v.linearMap,_=g.each,x=g.isObject,w=-1,b=function(t){var e=t.mappingMethod,n=t.type,a=this.option=g.clone(t);this.type=n,this.mappingMethod=e,this._normalizeData=S[e];var s=C[n];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._doMap=s._doMap[e],"piecewise"===e?(o(a),i(a)):"category"===e?a.categories?r(a):o(a,!0):(g.assert("linear"!==e||a.dataExtent),o(a))};b.prototype={constructor:b,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return g.bind(this._normalizeData,this)}};var C=b.visualHandlers={color:{applyVisual:l("color"),getColorMapper:function(){var t=this.option;return g.bind("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),u.call(this,t)}:function(e,n,i){var r=!!i;return!n&&(e=this._normalizeData(e)),i=m.fastLerp(e,t.parsedVisual,i),r?i:m.stringify(i,"rgba")},this)},_doMap:{linear:function(t){return m.stringify(m.fastLerp(t,this.option.parsedVisual),"rgba")},category:u,piecewise:function(t,e){var n=f.call(this,e);return null==n&&(n=m.stringify(m.fastLerp(t,this.option.parsedVisual),"rgba")),n},fixed:c}},colorHue:a(function(t,e){return m.modifyHSL(t,e)}),colorSaturation:a(function(t,e){return m.modifyHSL(t,null,e)}),colorLightness:a(function(t,e){return m.modifyHSL(t,null,null,e)}),colorAlpha:a(function(t,e){return m.modifyAlpha(t,e)}),opacity:{applyVisual:l("opacity"),_doMap:h([0,1])},liftZ:{applyVisual:l("liftZ"),_doMap:{linear:c,category:c,piecewise:c,fixed:c}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);if(g.isString(i))n("symbol",i);else if(x(i))for(var r in i)i.hasOwnProperty(r)&&n(r,i[r])},_doMap:{linear:s,category:u,piecewise:function(t,e){var n=f.call(this,e);return null==n&&(n=s.call(this,t)),n},fixed:c}},symbolSize:{applyVisual:l("symbolSize"),_doMap:h([0,1])}},S={linear:function(t){return y(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=b.findPieceIndex(t,e,!0);if(null!=n)return y(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?w:e},fixed:g.noop};b.listVisualTypes=function(){var t=[];return g.each(C,function(e,n){t.push(n)}),t},b.addVisualHandler=function(t,e){C[t]=e},b.isValidType=function(t){return C.hasOwnProperty(t)},b.eachVisual=function(t,e,n){g.isObject(t)?g.each(t,e,n):e.call(n,t)},b.mapVisual=function(t,e,n){var i,r=g.isArray(t)?[]:g.isObject(t)?{}:(i=!0,null);return b.eachVisual(t,function(t,o){var a=e.call(n,t,o);i?r=a:r[o]=a}),r},b.retrieveVisuals=function(t){var e,n={};return t&&_(C,function(i,r){t.hasOwnProperty(r)&&(n[r]=t[r],e=!0)}),e?n:null},b.prepareVisualTypes=function(t){if(x(t)){var e=[];_(t,function(t,n){e.push(n)}),t=e}else{if(!g.isArray(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},b.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},b.findPieceIndex=function(t,e,n){function i(e,n){var i=Math.abs(e-t);i<o&&(o=i,r=n)}for(var r,o=1/0,a=0,s=e.length;a<s;a++){var l=e[a].value;if(null!=l){if(l===t||"string"==typeof l&&l===t+"")return a;n&&i(l,a)}}for(var a=0,s=e.length;a<s;a++){var u=e[a],c=u.interval,h=u.close;if(c){if(c[0]===-(1/0)){if(d(h[1],t,c[1]))return a}else if(c[1]===1/0){if(d(h[0],c[0],t))return a}else if(d(h[0],c[0],t)&&d(h[1],t,c[1]))return a;n&&i(c[0],a),n&&i(c[1],a)}}if(n)return t===1/0?e.length-1:t===-(1/0)?0:r};var M=b;t.exports=M},function(t,e,n){function i(t,e,n,o){var a,s;if(!t.isRemoved()){var c=t.getLayout();a=c.width,s=c.height;var h=t.getModel(),f=h.get(M),d=h.get(E)/2,g=p(h),m=Math.max(f,g),v=f-d,y=m-d,h=t.getModel();t.setLayout({borderWidth:f,upperHeight:m,upperLabelHeight:g},!0),a=w(a-2*v,0),s=w(s-v-y,0);var _=a*s,x=r(t,h,_,e,n,o);if(x.length){var C={x:v,y:y,width:a,height:s},S=b(a,s),I=1/0,T=[];T.area=0;for(var P=0,L=x.length;P<L;){var D=x[P];T.push(D),T.area+=D.getLayout().area;var A=l(T,S,e.squareRatio);A<=I?(P++,I=A):(T.area-=T.pop().getLayout().area,u(T,S,C,d,!1),S=b(C.width,C.height),T.length=T.area=0,I=1/0)}if(T.length&&u(T,S,C,d,!0),!n){var k=h.get("childrenVisibleMin");null!=k&&_<k&&(n=!0)}for(var P=0,L=x.length;P<L;P++)i(x[P],e,n,o+1)}}}function r(t,e,n,i,r,l){var u=t.children||[],c=i.sort;"asc"!==c&&"desc"!==c&&(c=null);var h=null!=i.leafDepth&&i.leafDepth<=l;if(r&&!h)return t.viewChildren=[];u=d.filter(u,function(t){return!t.isRemoved()}),a(u,c);var f=s(e,u,c);if(0===f.sum)return t.viewChildren=[];if(f.sum=o(e,n,f.sum,c,u),0===f.sum)return t.viewChildren=[];for(var p=0,g=u.length;p<g;p++){var m=u[p].getValue()/f.sum*n;u[p].setLayout({area:m})}return h&&(u.length&&t.setLayout({isLeafRoot:!0},!0),u.length=0),t.viewChildren=u,t.setLayout({dataExtent:f.dataExtent},!0),u}function o(t,e,n,i,r){if(!i)return n;for(var o=t.get("visibleMin"),a=r.length,s=a,l=a-1;l>=0;l--){var u=r["asc"===i?a-l-1:l].getValue();u/n*e<o&&(s=l,n-=u)}return"asc"===i?r.splice(0,a-s):r.splice(s,a-s),n}function a(t,e){return e&&t.sort(function(t,n){var i="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===i?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:i}),t}function s(t,e,n){for(var i=0,r=0,o=e.length;r<o;r++)i+=e[r].getValue();var a,s=t.get("visualDimension");if(e&&e.length)if("value"===s&&n)a=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&a.reverse();else{var a=[1/0,-(1/0)];S(e,function(t){var e=t.getValue(s);e<a[0]&&(a[0]=e),e>a[1]&&(a[1]=e)})}else a=[NaN,NaN];return{sum:i,dataExtent:a}}function l(t,e,n){for(var i,r=0,o=1/0,a=0,s=t.length;a<s;a++)i=t[a].getLayout().area,i&&(i<o&&(o=i),i>r&&(r=i));var l=t.area*t.area,u=e*e*n;return l?w(u*r/l,l/(u*o)):1/0}function u(t,e,n,i,r){var o=e===n.width?0:1,a=1-o,s=["x","y"],l=["width","height"],u=n[s[o]],c=e?t.area/e:0;(r||c>n[l[a]])&&(c=n[l[a]]);for(var h=0,f=t.length;h<f;h++){var p=t[h],d={},g=c?p.getLayout().area/c:0,m=d[l[a]]=w(c-2*i,0),v=n[s[o]]+n[l[o]]-u,y=h===f-1||v<g?v:g,_=d[l[o]]=w(y-2*i,0);d[s[a]]=n[s[a]]+b(i,m/2),d[s[o]]=u+b(i,_/2),u+=y,p.setLayout(d,!0)}n[s[a]]+=c,n[l[a]]-=c}function c(t,e,n,i,r){var o=(e||{}).node,a=[i,r];if(!o||o===n)return a;for(var s,l=i*r,u=l*t.option.zoomToNodeRatio;s=o.parentNode;){for(var c=0,h=s.children,f=0,d=h.length;f<d;f++)c+=h[f].getValue();var g=o.getValue();if(0===g)return a;u*=c/g;var m=s.getModel(),v=m.get(M),_=Math.max(v,p(m,v));u+=4*v*v+(3*v+_)*Math.pow(u,.5),u>y&&(u=y),o=s}u<l&&(u=l);var x=Math.pow(u/l,.5);return[i*x,r*x]}function h(t,e,n){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!n)return i;var r=n.node,o=r.getLayout();if(!o)return i;for(var a=[o.width/2,o.height/2],s=r;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}function f(t,e,n,i,r){var o=t.getLayout(),a=n[r],s=a&&a===t;if(!(a&&!s||r===n.length&&t!==i)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(o),isAboveViewRoot:s},!0);var l=new g(e.x-o.x,e.y-o.y,e.width,e.height);S(t.viewChildren||[],function(t){f(t,l,n,i,r+1)})}}function p(t){return t.get(I)?t.get(T):0}var d=n(136),g=n(158),m=n(222),v=m.parsePercent,y=m.MAX_SAFE_INTEGER,_=n(221),x=n(378),w=Math.max,b=Math.min,C=d.retrieve,S=d.each,M=["itemStyle","borderWidth"],E=["itemStyle","gapWidth"],I=["upperLabel","show"],T=["upperLabel","height"],P={seriesType:"treemap",reset:function(t,e,n,r){var o=n.getWidth(),a=n.getHeight(),s=t.option,l=_.getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),u=s.size||[],p=v(C(l.width,u[0]),o),m=v(C(l.height,u[1]),a),y=r&&r.type,w=["treemapZoomToNode","treemapRootToNode"],b=x.retrieveTargetInfo(r,w,t),M="treemapRender"===y||"treemapMove"===y?r.rootRect:null,E=t.getViewRoot(),I=x.getPathToRoot(E);if("treemapMove"!==y){var T="treemapZoomToNode"===y?c(t,b,E,p,m):M?[M.width,M.height]:[p,m],P=s.sort;P&&"asc"!==P&&"desc"!==P&&(P="desc");var L={squareRatio:s.squareRatio,sort:P,leafDepth:s.leafDepth};E.hostTree.clearLayouts();var D={x:0,y:0,width:T[0],height:T[1],area:T[0]*T[1]};E.setLayout(D),i(E,L,!1,0);var D=E.getLayout();S(I,function(t,e){var n=(I[e+1]||E).getValue();t.setLayout(d.extend({dataExtent:[n,n],borderWidth:0,upperHeight:0},D))})}var A=t.getData().tree.root;A.setLayout(h(l,M,b),!0),t.setLayoutInfo(l),f(A,new g(-l.x,-l.y,o,a),I,E,0)}};t.exports=P},function(t,e,n){var i=n(131);n(387),n(391),n(397);var r=n(399),o=n(292),a=n(400),s=n(401),l=n(402),u=n(404),c=n(406),h=n(408);i.registerProcessor(r),i.registerVisual(o("graph","circle",null)),i.registerVisual(a),i.registerVisual(s),i.registerLayout(l),i.registerLayout(i.PRIORITY.VISUAL.POST_CHART_LAYOUT,u),i.registerLayout(c),i.registerCoordinateSystem("graphView",{create:h})},function(t,e,n){var i=n(131),r=n(258),o=n(136),a=n(177),s=a.defaultEmphasis,l=n(178),u=n(223),c=u.encodeHTML,h=n(388),f=n(322),p=n(390),d=p.initCurvenessList,g=p.createEdgeMapForCurveness,m=i.extendSeriesModel({type:"series.graph",init:function(t){function e(){return n._categoriesData}m.superApply(this,"init",arguments);var n=this;this.legendVisualProvider=new f(e,e),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){m.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){m.superApply(this,"mergeDefaultAndTheme",arguments),s(t,["edgeLabel"],["show"])},getInitialData:function(t,e){function n(t,n){function i(t){return t=this.parsePath(t),t&&"label"===t[0]?o:t&&"emphasis"===t[0]&&"label"===t[1]?u:this.parentModel}t.wrapMethod("getItemModel",function(t){var e=a._categoriesModels,n=t.getShallow("category"),i=e[n];return i&&(i.parentModel=t.parentModel,t.parentModel=i),t});var r=a.getModel("edgeLabel"),o=new l({label:r.option},r.parentModel,e),s=a.getModel("emphasis.edgeLabel"),u=new l({emphasis:{label:s.option}},s.parentModel,e);n.wrapMethod("getItemModel",function(t){return t.customizeGetParent(i),t})}var i=t.edges||t.links||[],r=t.data||t.nodes||[],a=this;if(r&&i){d(this);var s=h(r,i,this,!0,n);return o.each(s.edges,function(t){g(t.node1,t.node2,this,t.dataIndex)},this),s.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"===n){var i=this.getData(),r=this.getDataParams(t,n),o=i.graph.getEdgeByIndex(t),a=i.getName(o.node1.dataIndex),s=i.getName(o.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),l=c(l.join(" > ")),r.value&&(l+=" : "+c(r.value)),l}return m.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=o.map(this.option.categories||[],function(t){return null!=t.value?t:o.extend({value:0},t)}),e=new r(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,!0)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return m.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),v=m;t.exports=v},function(t,e,n){function i(t,e,n,i,h){for(var f=new a(i),p=0;p<t.length;p++)f.addNode(r.retrieve(t[p].id,t[p].name,p),p);for(var d=[],g=[],m=0,p=0;p<e.length;p++){var v=e[p],y=v.source,_=v.target;f.addEdge(y,_,m)&&(g.push(v),d.push(r.retrieve(v.id,y+" > "+_)),m++)}var x,w=n.get("coordinateSystem");if("cartesian2d"===w||"polar"===w)x=c(t,n);else{var b=u.get(w),C=b&&"view"!==b.type?b.dimensions||[]:[];r.indexOf(C,"value")<0&&C.concat(["value"]);var S=l(t,{coordDimensions:C});x=new o(S,n),x.initData(t)}var M=new o(["value"],n);return M.initData(g,d),h&&h(x,M),s({mainData:x,struct:f,structAttr:"graph",datas:{node:x,edge:M},datasAttr:{node:"data",edge:"edgeData"}}),f.update(),f}var r=n(136),o=n(258),a=n(389),s=n(370),l=n(262),u=n(231),c=n(257);t.exports=i},function(t,e,n){function i(t){return"_EC_"+t}function r(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==e?-1:e}function o(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}var a=n(132),s=(a.__DEV__,n(136)),l=n(179),u=l.enableClassCheck,c=function(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},h=c.prototype;h.type="graph",h.isDirected=function(){return this._directed},h.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[i(t)]){var o=new r(t,e);return o.hostGraph=this,this.nodes.push(o),n[i(t)]=o,o}},h.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},h.getNodeById=function(t){return this._nodesMap[i(t)]},h.addEdge=function(t,e,n){var a=this._nodesMap,s=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),r.isInstance(t)||(t=a[i(t)]),r.isInstance(e)||(e=a[i(e)]),t&&e){var l=t.id+"-"+e.id,u=new o(t,e,n);return u.hostGraph=this,this._directed&&(t.outEdges.push(u),e.inEdges.push(u)),t.edges.push(u),t!==e&&e.edges.push(u),this.edges.push(u),s[l]=u,u}},h.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},h.getEdge=function(t,e){r.isInstance(t)&&(t=t.id),r.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},h.eachNode=function(t,e){for(var n=this.nodes,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&t.call(e,n[r],r)},h.eachEdge=function(t,e){for(var n=this.edges,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&n[r].node1.dataIndex>=0&&n[r].node2.dataIndex>=0&&t.call(e,n[r],r)},h.breadthFirstTraverse=function(t,e,n,o){if(r.isInstance(e)||(e=this._nodesMap[i(e)]),e){for(var a="out"===n?"outEdges":"in"===n?"inEdges":"edges",s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(!t.call(o,e,null))for(var l=[e];l.length;)for(var u=l.shift(),c=u[a],s=0;s<c.length;s++){var h=c[s],f=h.node1===u?h.node2:h.node1;if(!f.__visited){if(t.call(o,f,u))return;l.push(f),f.__visited=!0}}}},h.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,r=0,o=n.length;r<o;r++)n[r].dataIndex=-1;for(var r=0,o=t.count();r<o;r++)n[t.getRawIndex(r)].dataIndex=r;e.filterSelf(function(t){var n=i[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(var r=0,o=i.length;r<o;r++)i[r].dataIndex=-1;for(var r=0,o=e.count();r<o;r++)i[e.getRawIndex(r)].dataIndex=r},h.clone=function(){for(var t=new c(this._directed),e=this.nodes,n=this.edges,i=0;i<e.length;i++)t.addNode(e[i].id,e[i].dataIndex);for(var i=0;i<n.length;i++){var r=n[i];t.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return t},r.prototype={constructor:r,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}}},o.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.edgeData.getItemModel(this.dataIndex);return n.getModel(t)}};var f=function(t,e){return{getValue:function(n){var i=this[t][e];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[t][e].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}};s.mixin(r,f("hostGraph","data")),s.mixin(o,f("hostGraph","edgeData")),c.Node=r,c.Edge=o,u(r),u(o);var p=c;t.exports=p},function(t,e,n){function i(t){l(t)&&(t.__curvenessList=[],t.__edgeMap={},u(t))}function r(t,e,n,i){if(l(n)){var r=c(t,e,n),o=n.__edgeMap,a=o[h(r)];o[r]&&!a?o[r].isForward=!0:a&&o[r]&&(a.isForward=!0,o[r].isForward=!1),o[r]=o[r]||[],o[r].push(i)}}function o(t,e,n,i){var r=l(e),o=a.isArray(r);if(!r)return null;var s=f(t,e);if(!s)return null;for(var g=-1,m=0;m<s.length;m++)if(s[m]===n){g=m;break}var v=p(t,e);u(e,v),t.lineStyle=t.lineStyle||{};var y=c(t.node1,t.node2,e),_=e.__curvenessList,x=o?0:v%2?0:1;if(s.isForward)return _[x+g];var w=h(y),b=d(w,e),C=_[g+b+x];return i?o?r&&0===r[0]?(b+x)%2?C:-C:((b%2?0:1)+x)%2?C:-C:(b+x)%2?C:-C:_[g+b+x]}var a=n(136),s="-->",l=function(t){return t.get("autoCurveness")||null},u=function(t,e){var n=l(t),i=20,r=[];if("number"==typeof n)i=n;else if(a.isArray(n))return void(t.__curvenessList=n);e>i&&(i=e);var o=i%2?i+2:i+3;r=[];for(var s=0;s<o;s++)r.push((s%2?s+1:s)/10*(s%2?-1:1));t.__curvenessList=r},c=function(t,e,n){var i=[t.id,t.dataIndex].join("."),r=[e.id,e.dataIndex].join(".");return[n.uid,i,r].join(s)},h=function(t){var e=t.split(s);return[e[0],e[2],e[1]].join(s)},f=function(t,e){var n=c(t.node1,t.node2,e);return e.__edgeMap[n]},p=function(t,e){var n=d(c(t.node1,t.node2,e),e),i=d(c(t.node2,t.node1,e),e);return n+i},d=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};e.initCurvenessList=i,e.createEdgeMapForCurveness=r,e.getCurvenessForEdge=o},function(t,e,n){function i(t,e){var n=t.getVisual("opacity");return null!=n?n:t.getModel().get(e)}function r(t,e,n){var r=t.getGraphicEl(),o=i(t,e);null!=n&&(null==o&&(o=1),o*=n),r.downplay&&r.downplay(),r.traverse(function(t){if(!t.isGroup){var e=t.lineLabelOriginalOpacity;null!=e&&null==n||(e=o),t.setStyle("opacity",e)}})}function o(t,e){var n=i(t,e),r=t.getGraphicEl();r.traverse(function(t){!t.isGroup&&t.setStyle("opacity",n)}),r.highlight&&r.highlight()}var a=n(131),s=n(136),l=n(285),u=n(392),c=n(354),h=n(356),f=n(357),p=f.onIrrelevantElement,d=n(184),g=n(395),m=n(396),v=m.getNodeGlobalScale,y="__focusNodeAdjacency",_="__unfocusNodeAdjacency",x=["itemStyle","opacity"],w=["lineStyle","opacity"],b=a.extendChartView({type:"graph",init:function(t,e){var n=new l,i=new u,r=this.group;this._controller=new c(e.getZr()),this._controllerHost={target:r},r.add(n.group),r.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(t,e,n){var i=this,r=t.coordinateSystem;this._model=t;var o=this._symbolDraw,a=this._lineDraw,s=this.group;if("view"===r.type){var l={position:r.position,scale:r.scale};this._firstRender?s.attr(l):d.updateProps(s,l,t)}g(t.getGraph(),v(t));var u=t.getData();o.updateData(u);var c=t.getEdgeData();a.updateData(c),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var h=t.forceLayout,f=t.get("force.layoutAnimation");h&&this._startForceLayoutIteration(h,f),u.eachItemGraphicEl(function(e,r){var o=u.getItemModel(r);e.off("drag").off("dragend");var a=o.get("draggable");a&&e.on("drag",function(){h&&(h.warmUp(),!this._layouting&&this._startForceLayoutIteration(h,f),h.setFixed(r),u.setItemLayout(r,e.position))},this).on("dragend",function(){h&&h.setUnfixed(r)},this),e.setDraggable(a&&h),e[y]&&e.off("mouseover",e[y]),e[_]&&e.off("mouseout",e[_]),o.get("focusNodeAdjacency")&&(e.on("mouseover",e[y]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.on("mouseout",e[_]=function(){i._dispatchUnfocus(n)}))},this),u.graph.eachEdge(function(e){var r=e.getGraphicEl();r[y]&&r.off("mouseover",r[y]),r[_]&&r.off("mouseout",r[_]),e.getModel().get("focusNodeAdjacency")&&(r.on("mouseover",r[y]=function(){i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),r.on("mouseout",r[_]=function(){i._dispatchUnfocus(n)}))});var p="circular"===t.get("layout")&&t.get("circular.rotateLabel"),m=u.getLayout("cx"),x=u.getLayout("cy");u.eachItemGraphicEl(function(t,e){var n=u.getItemModel(e),i=n.get("label.rotate")||0,r=t.getSymbolPath();if(p){var o=u.getItemLayout(e),a=Math.atan2(o[1]-x,o[0]-m);a<0&&(a=2*Math.PI+a);var s=o[0]<m;s&&(a-=Math.PI);var l=s?"left":"right";d.modifyLabelStyle(r,{textRotation:-a,textPosition:l,textOrigin:"center"},{textPosition:l})}else d.modifyLabelStyle(r,{textRotation:i*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(t,e){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var a=t.getData(),l=a.graph,u=i.dataIndex,c=i.edgeDataIndex,h=l.getNodeByIndex(u),f=l.getEdgeByIndex(c);(h||f)&&(l.eachNode(function(t){r(t,x,.1)}),l.eachEdge(function(t){r(t,w,.1)}),h&&(o(h,x),s.each(h.edges,function(t){t.dataIndex<0||(o(t,w),o(t.node1,x),o(t.node2,x))})),f&&(o(f,w),o(f.node1,x),o(f.node2,x)))},unfocusNodeAdjacency:function(t,e,n,i){var o=t.getData().graph;o.eachNode(function(t){r(t,x)}),o.eachEdge(function(t){r(t,w)})},_startForceLayoutIteration:function(t,e){var n=this;!function i(){t.step(function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(i,16):i())})}()},_updateController:function(t,e,n){var i=this._controller,r=this._controllerHost,o=this.group;return i.setPointerChecker(function(e,i,r){var a=o.getBoundingRect();return a.applyTransform(o.transform),a.contain(i,r)&&!p(e,n,t)}),"view"!==t.coordinateSystem.type?void i.disable():(i.enable(t.get("roam")),r.zoomLimit=t.get("scaleLimit"),r.zoom=t.coordinateSystem.getZoom(),void i.off("pan").off("zoom").on("pan",function(e){h.updateViewOnPan(r,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){h.updateViewOnZoom(r,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(),g(t.getGraph(),v(t)),this._lineDraw.updateLayout()},this))},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),n=v(t),i=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},updateLayout:function(t){g(t.getGraph(),v(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}});t.exports=b},function(t,e,n){function i(t){this._ctor=t||h,this.group=new c.Group}function r(t,e,n,i){var r=e.getItemLayout(n);if(u(r)){var o=new t._ctor(e,n,i);e.setItemGraphicEl(n,o),t.group.add(o)}}function o(t,e,n,i,r,o){var a=e.getItemGraphicEl(i);return u(n.getItemLayout(r))?(a?a.updateData(n,r,o):a=new t._ctor(n,r,o),n.setItemGraphicEl(r,a),void t.group.add(a)):void t.group.remove(a)}function a(t){return t.animators&&t.animators.length>0}function s(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}function l(t){return isNaN(t[0])||isNaN(t[1])}function u(t){return!l(t[0])&&!l(t[1])}var c=n(184),h=n(393),f=i.prototype;f.isPersistent=function(){return!0},f.updateData=function(t){var e=this,n=e.group,i=e._lineData;e._lineData=t,i||n.removeAll();var a=s(t);t.diff(i).add(function(n){r(e,t,n,a)}).update(function(n,r){o(e,i,t,r,n,a)}).remove(function(t){n.remove(i.getItemGraphicEl(t))}).execute()},f.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},f.incrementalPrepareUpdate=function(t){this._seriesScope=s(t),this._lineData=null,this.group.removeAll()},f.incrementalUpdate=function(t,e){function n(t){t.isGroup||a(t)||(t.incremental=t.useHoverLayer=!0)}for(var i=t.start;i<t.end;i++){var r=e.getItemLayout(i);if(u(r)){var o=new this._ctor(e,i,this._seriesScope);o.traverse(n),this.group.add(o),e.setItemGraphicEl(i,o)}}},f.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},f._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var p=i;t.exports=p},function(t,e,n){function i(t){return"_"+t+"Type"}function r(t,e,n){var i=e.getItemVisual(n,t);if(i&&"none"!==i){var r=e.getItemVisual(n,"color"),o=e.getItemVisual(n,t+"Size"),a=e.getItemVisual(n,t+"Rotate");u.isArray(o)||(o=[o,o]);var s=h.createSymbol(i,-o[0]/2,-o[1]/2,o[0],o[1],r);return s.__specifiedRotation=null==a||isNaN(a)?void 0:+a*Math.PI/180||0,s.name=t,s}}function o(t){var e=new f({name:"line",subPixelOptimize:!0});return a(e.shape,t),e}function a(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}function s(){var t=this,e=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.childOfName("label");if(e||n||!i.ignore){for(var r=1,o=this.parent;o;)o.scale&&(r/=o.scale[0]),o=o.parent;var a=t.childOfName("line");if(this.__dirty||a.__dirty){var s=a.shape.percent,l=a.pointAt(0),u=a.pointAt(s),h=c.sub([],u,l);if(c.normalize(h,h),e){e.attr("position",l);var f=e.__specifiedRotation;if(null==f){var p=a.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(p[1],p[0]))}else e.attr("rotation",f);e.attr("scale",[r*s,r*s])}if(n){n.attr("position",u);var f=n.__specifiedRotation;if(null==f){var p=a.tangentAt(1);n.attr("rotation",-Math.PI/2-Math.atan2(p[1],p[0]))}else n.attr("rotation",f);n.attr("scale",[r*s,r*s])}if(!i.ignore){i.attr("position",u);var d,g,m,v,y=i.__labelDistance,_=y[0]*r,x=y[1]*r,w=s/2,p=a.tangentAt(w),b=[p[1],-p[0]],C=a.pointAt(w);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var S=p[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var M=-Math.atan2(p[1],p[0]);u[0]<l[0]&&(M=Math.PI+M),i.attr("rotation",M)}var E;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":E=-x,m="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":E=x,m="top";break;default:E=0,m="middle"}switch(i.__position){case"end":d=[h[0]*_+u[0],h[1]*x+u[1]],g=h[0]>.8?"left":h[0]<-.8?"right":"center",m=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":d=[-h[0]*_+l[0],-h[1]*x+l[1]],g=h[0]>.8?"right":h[0]<-.8?"left":"center",m=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":d=[_*S+l[0],l[1]+E],g=p[0]<0?"right":"left",v=[-_*S,-E];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":d=[C[0],C[1]+E],
g="center",v=[0,-E];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":d=[-_*S+u[0],u[1]+E],g=p[0]>=0?"right":"left",v=[_*S,-E]}i.attr({style:{textVerticalAlign:i.__verticalAlign||m,textAlign:i.__textAlign||g},position:d,scale:[r,r],origin:v})}}}}function l(t,e,n){p.Group.call(this),this._createLine(t,e,n)}var u=n(136),c=n(138),h=n(276),f=n(394),p=n(184),d=n(222),g=d.round,m=["fromSymbol","toSymbol"],v=l.prototype;v.beforeUpdate=s,v._createLine=function(t,e,n){var a=t.hostModel,s=t.getItemLayout(e),l=o(s);l.shape.percent=0,p.initProps(l,{shape:{percent:1}},a,e),this.add(l);var c=new p.Text({name:"label",lineLabelOriginalOpacity:1});this.add(c),u.each(m,function(n){var o=r(n,t,e);this.add(o),this[i(n)]=t.getItemVisual(e,n)},this),this._updateCommonStl(t,e,n)},v.updateData=function(t,e,n){var o=t.hostModel,s=this.childOfName("line"),l=t.getItemLayout(e),c={shape:{}};a(c.shape,l),p.updateProps(s,c,o,e),u.each(m,function(n){var o=t.getItemVisual(e,n),a=i(n);if(this[a]!==o){this.remove(this.childOfName(n));var s=r(n,t,e);this.add(s)}this[a]=o},this),this._updateCommonStl(t,e,n)},v._updateCommonStl=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),o=n&&n.lineStyle,a=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||t.hasItemOption){var c=t.getItemModel(e);o=c.getModel("lineStyle").getLineStyle(),a=c.getModel("emphasis.lineStyle").getLineStyle(),s=c.getModel("label"),l=c.getModel("emphasis.label")}var h=t.getItemVisual(e,"color"),f=u.retrieve3(t.getItemVisual(e,"opacity"),o.opacity,1);r.useStyle(u.defaults({strokeNoScale:!0,fill:"none",stroke:h,opacity:f},o)),r.hoverStyle=a,u.each(m,function(t){var e=this.childOfName(t);e&&(e.setColor(h),e.setStyle({opacity:f}))},this);var d,v,y=s.getShallow("show"),_=l.getShallow("show"),x=this.childOfName("label");if((y||_)&&(d=h||"#000",v=i.getFormattedLabel(e,"normal",t.dataType),null==v)){var w=i.getRawValue(e);v=null==w?t.getName(e):isFinite(w)?g(w):w}var b=y?v:null,C=_?u.retrieve2(i.getFormattedLabel(e,"emphasis",t.dataType),v):null,S=x.style;if(null!=b||null!=C){p.setTextStyle(x.style,s,{text:b},{autoColor:d}),x.__textAlign=S.textAlign,x.__verticalAlign=S.textVerticalAlign,x.__position=s.get("position")||"middle";var M=s.get("distance");u.isArray(M)||(M=[M,M]),x.__labelDistance=M}null!=C?x.hoverStyle={text:C,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:x.hoverStyle={text:null},x.ignore=!y&&!_,p.setHoverStyle(this)},v.highlight=function(){this.trigger("emphasis")},v.downplay=function(){this.trigger("normal")},v.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},v.setLinePoints=function(t){var e=this.childOfName("line");a(e.shape,t),e.dirty()},u.inherits(l,p.Group);var y=l;t.exports=y},function(t,e,n){function i(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var r=n(184),o=n(138),a=r.Line.prototype,s=r.BezierCurve.prototype,l=r.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){this[i(e)?"_buildPathLine":"_buildPathCurve"](t,e)},_buildPathLine:a.buildPath,_buildPathCurve:s.buildPath,pointAt:function(t){return this[i(this.shape)?"_pointAtLine":"_pointAtCurve"](t)},_pointAtLine:a.pointAt,_pointAtCurve:s.pointAt,tangentAt:function(t){var e=this.shape,n=i(e)?[e.x2-e.x1,e.y2-e.y1]:this._tangentAtCurve(t);return o.normalize(n,n)},_tangentAtCurve:s.tangentAt});t.exports=l},function(t,e,n){function i(t,e,n){for(var i,r=t[0],o=t[1],a=t[2],s=1/0,l=n*n,g=.1,m=.1;m<=.9;m+=.1){u[0]=f(r[0],o[0],a[0],m),u[1]=f(r[1],o[1],a[1],m);var v=d(p(u,e)-l);v<s&&(s=v,i=m)}for(var y=0;y<32;y++){var _=i+g;c[0]=f(r[0],o[0],a[0],i),c[1]=f(r[1],o[1],a[1],i),h[0]=f(r[0],o[0],a[0],_),h[1]=f(r[1],o[1],a[1],_);var v=p(c,e)-l;if(d(v)<.01)break;var x=p(h,e)-l;g/=2,v<0?x>=0?i+=g:i-=g:x>=0?i-=g:i+=g}return i}function r(t,e){var n=[],r=o.quadraticSubdivide,s=[[],[],[]],u=[[],[]],c=[];e/=2,t.eachEdge(function(t,o){var h=t.getLayout(),f=t.getVisual("fromSymbol"),p=t.getVisual("toSymbol");h.__original||(h.__original=[a.clone(h[0]),a.clone(h[1])],h[2]&&h.__original.push(a.clone(h[2])));var d=h.__original;if(null!=h[2]){if(a.copy(s[0],d[0]),a.copy(s[1],d[2]),a.copy(s[2],d[1]),f&&"none"!==f){var g=l(t.node1),m=i(s,d[0],g*e);r(s[0][0],s[1][0],s[2][0],m,n),s[0][0]=n[3],s[1][0]=n[4],r(s[0][1],s[1][1],s[2][1],m,n),s[0][1]=n[3],s[1][1]=n[4]}if(p&&"none"!==p){var g=l(t.node2),m=i(s,d[1],g*e);r(s[0][0],s[1][0],s[2][0],m,n),s[1][0]=n[1],s[2][0]=n[2],r(s[0][1],s[1][1],s[2][1],m,n),s[1][1]=n[1],s[2][1]=n[2]}a.copy(h[0],s[0]),a.copy(h[1],s[2]),a.copy(h[2],s[1])}else{if(a.copy(u[0],d[0]),a.copy(u[1],d[1]),a.sub(c,u[1],u[0]),a.normalize(c,c),f&&"none"!==f){var g=l(t.node1);a.scaleAndAdd(u[0],u[0],c,g*e)}if(p&&"none"!==p){var g=l(t.node2);a.scaleAndAdd(u[1],u[1],c,-g*e)}a.copy(h[0],u[0]),a.copy(h[1],u[1])}})}var o=n(188),a=n(138),s=n(396),l=s.getSymbolSize,u=[],c=[],h=[],f=o.quadraticAt,p=a.distSquare,d=Math.abs;t.exports=r},function(t,e){function n(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,i=e.scale,r=i&&i[0]||1,o=e.getZoom(),a=(o-1)*n+1;return a/r}function i(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}e.getNodeGlobalScale=n,e.getSymbolSize=i},function(t,e,n){var i=n(131),r=n(359),o=r.updateCenterAndZoom;n(398);var a={type:"graphRoam",event:"graphRoam",update:"none"};i.registerAction(a,function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var n=e.coordinateSystem,i=o(n,t);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)})})},function(t,e,n){var i=n(131);i.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),i.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){})},function(t,e){function n(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),i=t.getGraph(),r=i.data,o=n.mapArray(n.getName);r.filterSelf(function(t){var n=r.getItemModel(t),i=n.getShallow("category");if(null!=i){"number"==typeof i&&(i=o[i]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(i))return!1}return!0})},this)}t.exports=n},function(t,e){function n(t){var e={};t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),i=t.getData(),r={};n.each(function(i){var o=n.getName(i);r["ec-"+o]=i;var a=n.getItemModel(i),s=a.get("itemStyle.color")||t.getColorFromPalette(o,e);n.setItemVisual(i,"color",s);for(var l=["opacity","symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++){var c=a.getShallow(l[u],!0);null!=c&&n.setItemVisual(i,l[u],c)}}),n.count()&&i.each(function(t){var e=i.getItemModel(t),o=e.getShallow("category");if(null!=o){"string"==typeof o&&(o=r["ec-"+o]);for(var a=["color","opacity","symbol","symbolSize","symbolKeepAspect"],s=0;s<a.length;s++)null==i.getItemVisual(t,a[s],!0)&&i.setItemVisual(t,a[s],n.getItemVisual(o,a[s]))}})})}t.exports=n},function(t,e){function n(t){return t instanceof Array||(t=[t,t]),t}function i(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),i=t.getEdgeData(),r=n(t.get("edgeSymbol")),o=n(t.get("edgeSymbolSize")),a="lineStyle.color".split("."),s="lineStyle.opacity".split(".");i.setVisual("fromSymbol",r&&r[0]),i.setVisual("toSymbol",r&&r[1]),i.setVisual("fromSymbolSize",o&&o[0]),i.setVisual("toSymbolSize",o&&o[1]),i.setVisual("color",t.get(a)),i.setVisual("opacity",t.get(s)),i.each(function(t){var r=i.getItemModel(t),o=e.getEdgeByIndex(t),l=n(r.getShallow("symbol",!0)),u=n(r.getShallow("symbolSize",!0)),c=r.get(a),h=r.get(s);switch(c){case"source":c=o.node1.getVisual("color");break;case"target":c=o.node2.getVisual("color")}l[0]&&o.setVisual("fromSymbol",l[0]),l[1]&&o.setVisual("toSymbol",l[1]),u[0]&&o.setVisual("fromSymbolSize",u[0]),u[1]&&o.setVisual("toSymbolSize",u[1]),o.setVisual("color",c),o.setVisual("opacity",h)})})}t.exports=i},function(t,e,n){function i(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var i=t.getData(),r=[];o(n.dimensions,function(t){r=r.concat(i.mapDimension(t,!0))});for(var a=0;a<i.count();a++){for(var u=[],c=!1,h=0;h<r.length;h++){var f=i.get(r[h],a);isNaN(f)||(c=!0),u.push(f)}c?i.setItemLayout(a,n.dataToPoint(u)):i.setItemLayout(a,[NaN,NaN])}l(i.graph,t)}else e&&"none"!==e||s(t)})}var r=n(136),o=r.each,a=n(403),s=a.simpleLayout,l=a.simpleLayoutEdge;t.exports=i},function(t,e,n){function i(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),r(n,t)}}function r(t,e){t.eachEdge(function(t,n){var i=a.retrieve3(t.getModel().get("lineStyle.curveness"),-l(t,e,n,!0),0),r=o.clone(t.node1.getLayout()),s=o.clone(t.node2.getLayout()),u=[r,s];+i&&u.push([(r[0]+s[0])/2-(r[1]-s[1])*i,(r[1]+s[1])/2-(s[0]-r[0])*i]),t.setLayout(u)})}var o=n(138),a=n(136),s=n(390),l=s.getCurvenessForEdge;e.simpleLayout=i,e.simpleLayoutEdge=r},function(t,e,n){function i(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&o(t,"symbolSize")})}var r=n(405),o=r.circularLayout;t.exports=i},function(t,e,n){function i(t,e){var n=t.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),o=t.getData(),a=o.graph,s=i.width/2+i.x,u=i.height/2+i.y,h=Math.min(i.width,i.height)/2,f=o.count();o.setLayout({cx:s,cy:u}),f&&(p[e](t,n,a,o,h,s,u,f),a.eachEdge(function(e,n){var i,o=l.retrieve3(e.getModel().get("lineStyle.curveness"),c(e,t,n),0),a=r.clone(e.node1.getLayout()),h=r.clone(e.node2.getLayout()),f=(a[0]+h[0])/2,p=(a[1]+h[1])/2;+o&&(o*=3,i=[s*o+f*(1-o),u*o+p*(1-o)]),e.setLayout([a,h,i])}))}}var r=n(138),o=n(396),a=o.getSymbolSize,s=o.getNodeGlobalScale,l=n(136),u=n(390),c=u.getCurvenessForEdge,h=Math.PI,f=[],p={value:function(t,e,n,i,r,o,a,s){var l=0,u=i.getSum("value"),c=2*Math.PI/(u||s);n.eachNode(function(t){var e=t.getValue("value"),n=c*(u?e:1)/2;l+=n,t.setLayout([r*Math.cos(l)+o,r*Math.sin(l)+a]),l+=n})},symbolSize:function(t,e,n,i,r,o,l,u){var c=0;f.length=u;var p=s(t);n.eachNode(function(t){var e=a(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=p;var n=Math.asin(e/2/r);isNaN(n)&&(n=h/2),f[t.dataIndex]=n,c+=2*n});var d=(2*h-c)/u/2,g=0;n.eachNode(function(t){var e=d+f[t.dataIndex];g+=e,t.setLayout([r*Math.cos(g)+o,r*Math.sin(g)+l]),g+=e})}};e.circularLayout=i},function(t,e,n){function i(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},i=t.getGraph(),r=i.data,a=i.edgeData,l=t.getModel("force"),c=l.get("initLayout");t.preservedPoints?r.each(function(t){var e=r.getId(t);r.setItemLayout(t,n[e]||[NaN,NaN])}):c&&"none"!==c?"circular"===c&&u(t,"value"):s(t);var d=r.getDataExtent("value"),m=a.getDataExtent("value"),v=l.get("repulsion"),y=l.get("edgeLength");p.isArray(v)||(v=[v,v]),p.isArray(y)||(y=[y,y]),y=[y[1],y[0]];var _=r.mapArray("value",function(t,e){var n=r.getItemLayout(e),i=h(t,d,v);return isNaN(i)&&(i=(v[0]+v[1])/2),{w:i,rep:i,fixed:r.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),x=a.mapArray("value",function(e,n){var r=i.getEdgeByIndex(n),o=h(e,m,y);isNaN(o)&&(o=(y[0]+y[1])/2);var a=r.getModel(),s=p.retrieve3(a.get("lineStyle.curveness"),-g(r,t,n,!0),0);return{n1:_[r.node1.dataIndex],n2:_[r.node2.dataIndex],d:o,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}}),e=t.coordinateSystem,w=e.getBoundingRect(),b=o(_,x,{rect:w,gravity:l.get("gravity"),friction:l.get("friction")}),C=b.step;b.step=function(t){for(var e=0,o=_.length;e<o;e++)_[e].fixed&&f.copy(_[e].p,i.getNodeByIndex(e).getLayout());C(function(e,o,a){for(var s=0,l=e.length;s<l;s++)e[s].fixed||i.getNodeByIndex(s).setLayout(e[s].p),n[r.getId(s)]=e[s].p;for(var s=0,l=o.length;s<l;s++){var u=o[s],c=i.getEdgeByIndex(s),h=u.n1.p,p=u.n2.p,d=c.getLayout();d=d?d.slice():[],d[0]=d[0]||[],d[1]=d[1]||[],f.copy(d[0],h),f.copy(d[1],p),+u.curveness&&(d[2]=[(h[0]+p[0])/2-(h[1]-p[1])*u.curveness,(h[1]+p[1])/2-(p[0]-h[0])*u.curveness]),c.setLayout(d)}t&&t(a)})},t.forceLayout=b,t.preservedPoints=n,b.step()}else t.forceLayout=null})}var r=n(407),o=r.forceLayout,a=n(403),s=a.simpleLayout,l=n(405),u=l.circularLayout,c=n(222),h=c.linearMap,f=n(138),p=n(136),d=n(390),g=d.getCurvenessForEdge;t.exports=i},function(t,e,n){function i(t,e,n){for(var i=n.rect,a=i.width,s=i.height,l=[i.x+a/2,i.y+s/2],u=null==n.gravity?.1:n.gravity,c=0;c<t.length;c++){var h=t[c];h.p||(h.p=r.create(a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=r.clone(h.p),h.edges=null}var f=null==n.friction?.6:n.friction,p=f;return{warmUp:function(){p=.8*f},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(n){for(var i=[],a=t.length,s=0;s<e.length;s++){var c=e[s];if(!c.ignoreForceLayout){var h=c.n1,f=c.n2;r.sub(i,f.p,h.p);var d=r.len(i)-c.d,g=f.w/(h.w+f.w);isNaN(g)&&(g=0),r.normalize(i,i),!h.fixed&&o(h.p,h.p,i,g*d*p),!f.fixed&&o(f.p,f.p,i,-(1-g)*d*p)}}for(var s=0;s<a;s++){var m=t[s];m.fixed||(r.sub(i,l,m.p),o(m.p,m.p,i,u*p))}for(var s=0;s<a;s++)for(var h=t[s],v=s+1;v<a;v++){var f=t[v];r.sub(i,f.p,h.p);var d=r.len(i);0===d&&(r.set(i,Math.random()-.5,Math.random()-.5),d=1);var y=(h.rep+f.rep)/d/d;!h.fixed&&o(h.pp,h.pp,i,y),!f.fixed&&o(f.pp,f.pp,i,-y)}for(var _=[],s=0;s<a;s++){var m=t[s];m.fixed||(r.sub(_,m.p,m.pp),o(m.p,m.p,_,p),r.copy(m.pp,m.p))}p*=.992,n&&n(t,e,p<.01)}}}var r=n(138),o=r.scaleAndAdd;e.forceLayout=i},function(t,e,n){function i(t,e,n){var i=t.getBoxLayoutParams();return i.aspect=n,s(i,{width:e.getWidth(),height:e.getHeight()})}function r(t,e){var n=[];return t.eachSeriesByType("graph",function(t){var r=t.get("coordinateSystem");if(!r||"view"===r){var a=t.getData(),s=a.mapArray(function(t){var e=a.getItemModel(t);return[+e.get("x"),+e.get("y")]}),u=[],c=[];l.fromPoints(s,u,c),c[0]-u[0]===0&&(c[0]+=1,u[0]-=1),c[1]-u[1]===0&&(c[1]+=1,u[1]-=1);var h=(c[0]-u[0])/(c[1]-u[1]),f=i(t,e,h);isNaN(h)&&(u=[f.x,f.y],c=[f.x+f.width,f.y+f.height]);var p=c[0]-u[0],d=c[1]-u[1],g=f.width,m=f.height,v=t.coordinateSystem=new o;v.zoomLimit=t.get("scaleLimit"),v.setBoundingRect(u[0],u[1],p,d),v.setViewRect(f.x,f.y,g,m),v.setCenter(t.get("center")),v.setZoom(t.get("zoom")),n.push(v)}}),n}var o=n(362),a=n(221),s=a.getLayoutRect,l=n(189);t.exports=r},function(t,e,n){n(410),n(411)},function(t,e,n){var i=n(320),r=n(236),o=r.extend({type:"series.gauge",getInitialData:function(t,e){return i(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}}),a=o;t.exports=a},function(t,e,n){function i(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),o=Math.min(i,r),a=u(n[0],e.getWidth()),s=u(n[1],e.getHeight()),l=u(t.get("radius"),o/2);return{cx:a,cy:s,r:l}}function r(t,e){return e&&("string"==typeof e?t=e.replace("{value}",null!=t?t:""):"function"==typeof e&&(t=e(t))),t}var o=n(412),a=n(184),s=n(241),l=n(222),u=l.parsePercent,c=l.round,h=l.linearMap,f=2*Math.PI,p=s.extend({type:"gauge",render:function(t,e,n){this.group.removeAll();var r=t.get("axisLine.lineStyle.color"),o=i(t,n);this._renderMain(t,e,n,r,o)},dispose:function(){},_renderMain:function(t,e,n,i,r){for(var o=this.group,s=t.getModel("axisLine"),l=s.getModel("lineStyle"),u=t.get("clockwise"),c=-t.get("startAngle")/180*Math.PI,h=-t.get("endAngle")/180*Math.PI,p=(h-c)%f,d=c,g=l.get("width"),m=s.get("show"),v=0;m&&v<i.length;v++){var y=Math.min(Math.max(i[v][0],0),1),h=c+p*y,_=new a.Sector({shape:{startAngle:d,endAngle:h,cx:r.cx,cy:r.cy,clockwise:u,r0:r.r-g,r:r.r},silent:!0});_.setStyle({fill:i[v][1]}),_.setStyle(l.getLineStyle(["color","borderWidth","borderColor"])),o.add(_),d=h}var x=function(t){if(t<=0)return i[0][1];for(var e=0;e<i.length;e++)if(i[e][0]>=t&&(0===e?0:i[e-1][0])<t)return i[e][1];return i[e-1][1]};if(!u){var w=c;c=h,h=w}this._renderTicks(t,e,n,x,r,c,h,u),this._renderPointer(t,e,n,x,r,c,h,u),this._renderTitle(t,e,n,x,r),this._renderDetail(t,e,n,x,r)},_renderTicks:function(t,e,n,i,o,s,l,h){for(var f=this.group,p=o.cx,d=o.cy,g=o.r,m=+t.get("min"),v=+t.get("max"),y=t.getModel("splitLine"),_=t.getModel("axisTick"),x=t.getModel("axisLabel"),w=t.get("splitNumber"),b=_.get("splitNumber"),C=u(y.get("length"),g),S=u(_.get("length"),g),M=s,E=(l-s)/w,I=E/b,T=y.getModel("lineStyle").getLineStyle(),P=_.getModel("lineStyle").getLineStyle(),L=0;L<=w;L++){var D=Math.cos(M),A=Math.sin(M);if(y.get("show")){var k=new a.Line({shape:{x1:D*g+p,y1:A*g+d,x2:D*(g-C)+p,y2:A*(g-C)+d},style:T,silent:!0});"auto"===T.stroke&&k.setStyle({stroke:i(L/w)}),f.add(k)}if(x.get("show")){var N=r(c(L/w*(v-m)+m),x.get("formatter")),O=x.get("distance"),R=i(L/w);f.add(new a.Text({style:a.setTextStyle({},x,{text:N,x:D*(g-C-O)+p,y:A*(g-C-O)+d,textVerticalAlign:A<-.4?"top":A>.4?"bottom":"middle",textAlign:D<-.4?"left":D>.4?"right":"center"},{autoColor:R}),silent:!0}))}if(_.get("show")&&L!==w){for(var F=0;F<=b;F++){var D=Math.cos(M),A=Math.sin(M),z=new a.Line({shape:{x1:D*g+p,y1:A*g+d,x2:D*(g-S)+p,y2:A*(g-S)+d},silent:!0,style:P});"auto"===P.stroke&&z.setStyle({stroke:i((L+F/b)/w)}),f.add(z),M+=I}M-=I}else M+=E}},_renderPointer:function(t,e,n,i,r,s,l,c){var f=this.group,p=this._data;if(!t.get("pointer.show"))return void(p&&p.eachItemGraphicEl(function(t){f.remove(t)}));var d=[+t.get("min"),+t.get("max")],g=[s,l],m=t.getData(),v=m.mapDimension("value");m.diff(p).add(function(e){var n=new o({shape:{angle:s}});a.initProps(n,{shape:{angle:h(m.get(v,e),d,g,!0)}},t),f.add(n),m.setItemGraphicEl(e,n)}).update(function(e,n){var i=p.getItemGraphicEl(n);a.updateProps(i,{shape:{angle:h(m.get(v,e),d,g,!0)}},t),f.add(i),m.setItemGraphicEl(e,i)}).remove(function(t){var e=p.getItemGraphicEl(t);f.remove(e)}).execute(),m.eachItemGraphicEl(function(t,e){var n=m.getItemModel(e),o=n.getModel("pointer");t.setShape({x:r.cx,y:r.cy,width:u(o.get("width"),r.r),r:u(o.get("length"),r.r)}),t.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===t.style.fill&&t.setStyle("fill",i(h(m.get(v,e),d,[0,1],!0))),a.setHoverStyle(t,n.getModel("emphasis.itemStyle").getItemStyle())}),this._data=m},_renderTitle:function(t,e,n,i,r){var o=t.getData(),s=o.mapDimension("value"),l=t.getModel("title");if(l.get("show")){var c=l.get("offsetCenter"),f=r.cx+u(c[0],r.r),p=r.cy+u(c[1],r.r),d=+t.get("min"),g=+t.get("max"),m=t.getData().get(s,0),v=i(h(m,[d,g],[0,1],!0));this.group.add(new a.Text({silent:!0,style:a.setTextStyle({},l,{x:f,y:p,text:o.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:v,forceRich:!0})}))}},_renderDetail:function(t,e,n,i,o){var s=t.getModel("detail"),l=+t.get("min"),c=+t.get("max");if(s.get("show")){var f=s.get("offsetCenter"),p=o.cx+u(f[0],o.r),d=o.cy+u(f[1],o.r),g=u(s.get("width"),o.r),m=u(s.get("height"),o.r),v=t.getData(),y=v.get(v.mapDimension("value"),0),_=i(h(y,[l,c],[0,1],!0));this.group.add(new a.Text({silent:!0,style:a.setTextStyle({},s,{x:p,y:d,text:r(y,s.get("formatter")),textWidth:isNaN(g)?null:g,textHeight:isNaN(m)?null:m,textAlign:"center",textVerticalAlign:"middle"},{autoColor:_,forceRich:!0})}))}}}),d=p;t.exports=d},function(t,e,n){var i=n(186),r=i.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var n=Math.cos,i=Math.sin,r=e.r,o=e.width,a=e.angle,s=e.x-n(a)*o*(o>=r/3?1:2),l=e.y-i(a)*o*(o>=r/3?1:2);a=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+n(a)*o,e.y+i(a)*o),t.lineTo(e.x+n(e.angle)*r,e.y+i(e.angle)*r),t.lineTo(e.x-n(a)*o,e.y-i(a)*o),t.lineTo(s,l)}});t.exports=r},function(t,e,n){var i=n(131);n(414),n(415);var r=n(325),o=n(416),a=n(328);i.registerVisual(r("funnel")),i.registerLayout(o),i.registerProcessor(a("funnel"))},function(t,e,n){var i=n(131),r=n(136),o=n(320),a=n(177),s=a.defaultEmphasis,l=n(227),u=l.makeSeriesEncodeForNameBased,c=n(322),h=i.extendSeriesModel({type:"series.funnel",init:function(t){h.superApply(this,"init",arguments),this.legendVisualProvider=new c(r.bind(this.getData,this),r.bind(this.getRawData,this)),this._defaultLabelLine(t)},getInitialData:function(t,e){return o(this,{coordDimensions:["value"],encodeDefaulter:r.curry(u,this)})},_defaultLabelLine:function(t){s(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),n=h.superCall(this,"getDataParams",t),i=e.mapDimension("value"),r=e.getSum(i);return n.percent=r?+(e.get(i,t)/r*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),f=h;t.exports=f},function(t,e,n){function i(t,e){r.Group.call(this);var n=new r.Polygon,i=new r.Polyline,o=new r.Text;this.add(n),this.add(i),this.add(o),this.highDownOnUpdate=function(t,e){"emphasis"===e?(i.ignore=i.hoverIgnore,o.ignore=o.hoverIgnore):(i.ignore=i.normalIgnore,o.ignore=o.normalIgnore)},this.updateData(t,e,!0)}var r=n(184),o=n(136),a=n(241),s=i.prototype,l=["itemStyle","opacity"];s.updateData=function(t,e,n){var i=this.childAt(0),a=t.hostModel,s=t.getItemModel(e),u=t.getItemLayout(e),c=t.getItemModel(e).get(l);c=null==c?1:c,i.useStyle({}),n?(i.setShape({points:u.points}),i.setStyle({opacity:0}),r.initProps(i,{style:{opacity:c}},a,e)):r.updateProps(i,{style:{opacity:c},shape:{points:u.points}},a,e);var h=s.getModel("itemStyle"),f=t.getItemVisual(e,"color");i.setStyle(o.defaults({lineJoin:"round",fill:f},h.getItemStyle(["opacity"]))),i.hoverStyle=h.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),r.setHoverStyle(this)},s._updateLabel=function(t,e){var n=this.childAt(1),i=this.childAt(2),o=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e),l=s.label,u=t.getItemVisual(e,"color");r.updateProps(n,{shape:{points:l.linePoints||l.linePoints}},o,e),r.updateProps(i,{style:{x:l.x,y:l.y}},o,e),i.attr({rotation:l.rotation,origin:[l.x,l.y],z2:10});var c=a.getModel("label"),h=a.getModel("emphasis.label"),f=a.getModel("labelLine"),p=a.getModel("emphasis.labelLine"),u=t.getItemVisual(e,"color");r.setLabelStyle(i.style,i.hoverStyle={},c,h,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:u,useInsideStyle:!!l.inside},{textAlign:l.textAlign,textVerticalAlign:l.verticalAlign}),i.ignore=i.normalIgnore=!c.get("show"),i.hoverIgnore=!h.get("show"),n.ignore=n.normalIgnore=!f.get("show"),n.hoverIgnore=!p.get("show"),n.setStyle({stroke:u}),n.setStyle(f.getModel("lineStyle").getLineStyle()),n.hoverStyle=p.getModel("lineStyle").getLineStyle()},o.inherits(i,r.Group);var u=a.extend({type:"funnel",render:function(t,e,n){var r=t.getData(),o=this._data,a=this.group;r.diff(o).add(function(t){var e=new i(r,t);r.setItemGraphicEl(t,e),a.add(e)}).update(function(t,e){var n=o.getItemGraphicEl(e);n.updateData(r,t),a.add(n),r.setItemGraphicEl(t,n)}).remove(function(t){var e=o.getItemGraphicEl(t);a.remove(e)}).execute(),this._data=r},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),c=u;t.exports=c},function(t,e,n){function i(t,e){return l.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function r(t,e){for(var n=t.mapDimension("value"),i=t.mapArray(n,function(t){return t}),r=[],o="ascending"===e,a=0,s=t.count();a<s;a++)r[a]=a;return"function"==typeof e?r.sort(e):"none"!==e&&r.sort(function(t,e){return o?i[t]-i[e]:i[e]-i[t]}),r}function o(t){t.each(function(e){var n,i,r,o,a=t.getItemModel(e),s=a.getModel("label"),l=s.get("position"),u=a.get("orient"),c=a.getModel("labelLine"),h=t.getItemLayout(e),f=h.points,p="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(p)"insideLeft"===l?(i=(f[0][0]+f[3][0])/2+5,r=(f[0][1]+f[3][1])/2,n="left"):"insideRight"===l?(i=(f[1][0]+f[2][0])/2-5,r=(f[1][1]+f[2][1])/2,n="right"):(i=(f[0][0]+f[1][0]+f[2][0]+f[3][0])/4,r=(f[0][1]+f[1][1]+f[2][1]+f[3][1])/4,n="center"),o=[[i,r],[i,r]];else{var d,g,m,v,y=c.get("length");"left"===l?(d=(f[3][0]+f[0][0])/2,g=(f[3][1]+f[0][1])/2,m=d-y,i=m-5,n="right"):"right"===l?(d=(f[1][0]+f[2][0])/2,g=(f[1][1]+f[2][1])/2,m=d+y,i=m+5,n="left"):"top"===l?(d=(f[3][0]+f[0][0])/2,g=(f[3][1]+f[0][1])/2,v=g-y,r=v-5,n="center"):"bottom"===l?(d=(f[1][0]+f[2][0])/2,g=(f[1][1]+f[2][1])/2,v=g+y,r=v+5,n="center"):"rightTop"===l?(d="horizontal"===u?f[3][0]:f[1][0],g="horizontal"===u?f[3][1]:f[1][1],"horizontal"===u?(v=g-y,r=v-5,n="center"):(m=d+y,i=m+5,n="top")):"rightBottom"===l?(d=f[2][0],g=f[2][1],"horizontal"===u?(v=g+y,r=v+5,n="center"):(m=d+y,i=m+5,n="bottom")):"leftTop"===l?(d=f[0][0],g="horizontal"===u?f[0][1]:f[1][1],"horizontal"===u?(v=g-y,r=v-5,n="center"):(m=d-y,i=m-5,n="right")):"leftBottom"===l?(d="horizontal"===u?f[1][0]:f[3][0],g="horizontal"===u?f[1][1]:f[2][1],"horizontal"===u?(v=g+y,r=v+5,n="center"):(m=d-y,i=m-5,n="right")):(d=(f[1][0]+f[2][0])/2,g=(f[1][1]+f[2][1])/2,"horizontal"===u?(v=g+y,r=v+5,n="center"):(m=d+y,i=m+5,n="left")),"horizontal"===u?(m=d,i=m):(v=g,r=v),o=[[d,g],[m,v]]}h.label={linePoints:o,x:i,y:r,verticalAlign:"middle",textAlign:n,inside:p}})}function a(t,e,n){t.eachSeriesByType("funnel",function(t){var n=t.getData(),a=n.mapDimension("value"),s=t.get("sort"),l=i(t,e),u=r(n,s),f=t.get("orient"),p=l.width,d=l.height,g=l.x,m=l.y,v="horizontal"===f?[c(t.get("minSize"),d),c(t.get("maxSize"),d)]:[c(t.get("minSize"),p),c(t.get("maxSize"),p)],y=n.getDataExtent(a),_=t.get("min"),x=t.get("max");null==_&&(_=Math.min(y[0],0)),null==x&&(x=y[1]);var w=t.get("funnelAlign"),b=t.get("gap"),C="horizontal"===f?p:d,S=(C-b*(n.count()-1))/n.count(),M=function(t,e){if("horizontal"===f){var i,r=n.get(a,t)||0,o=h(r,[_,x],v,!0);switch(w){case"top":i=m;break;case"center":i=m+(d-o)/2;break;case"bottom":i=m+(d-o)}return[[e,i],[e,i+o]]}var s,r=n.get(a,t)||0,l=h(r,[_,x],v,!0);switch(w){case"left":s=g;break;case"center":s=g+(p-l)/2;break;case"right":s=g+p-l}return[[s,e],[s+l,e]]};"ascending"===s&&(S=-S,b=-b,"horizontal"===f?g+=p:m+=d,u=u.reverse());for(var E=0;E<u.length;E++){var I=u[E],T=u[E+1],P=n.getItemModel(I);if("horizontal"===f){var L=P.get("itemStyle.width");null==L?L=S:(L=c(L,p),"ascending"===s&&(L=-L));var D=M(I,g),A=M(T,g+L);g+=L+b,n.setItemLayout(I,{points:D.concat(A.slice().reverse())})}else{var k=P.get("itemStyle.height");null==k?k=S:(k=c(k,d),"ascending"===s&&(k=-k));var D="horizontal"===f?M(I,g):M(I,m),A="horizontal"===f?M(T,g+L):M(T,m+k);m+=k+b,n.setItemLayout(I,{points:D.concat(A.slice().reverse())})}}o(n)})}var s=n(132),l=(s.__DEV__,n(221)),u=n(222),c=u.parsePercent,h=u.linearMap;t.exports=a},function(t,e,n){var i=n(131);n(418),n(431),n(432);var r=n(433);i.registerVisual(r)},function(t,e,n){function i(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var r=n(131),o=n(136),a=n(243),s=n(419);n(420),n(424),n(426);var l=5;r.extendComponentView({type:"parallel",render:function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},o.each(u,function(t,e){n.getZr().on(e,this._handlers[e]=o.bind(t,this))},this)),a.createOrUpdate(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){o.each(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(o.extend({type:"parallelAxisExpand"},t))}});var u={mousedown:function(t){i(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(i(this,"click")&&e){var n=[t.offsetX,t.offsetY],r=Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2);if(r>l)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==o.behavior&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&i(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),r=n.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===r&&null})}}};r.registerPreprocessor(s)},function(t,e,n){function i(t){r(t),o(t)}function r(t){if(!t.parallel){var e=!1;a.each(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}}function o(t){var e=s.normalizeToArray(t.parallelAxis);a.each(e,function(e){if(a.isObject(e)){var n=e.parallelIndex||0,i=s.normalizeToArray(t.parallel)[n];i&&i.parallelAxisDefault&&a.merge(e,i.parallelAxisDefault,!1)}})}var a=n(136),s=n(177);t.exports=i},function(t,e,n){function i(t,e){var n=[];return t.eachComponent("parallel",function(i,o){var a=new r(i,t,e);a.name="parallel_"+o,a.resize(i,e),i.coordinateSystem=a,a.model=i,n.push(a)}),t.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}var r=n(421),o=n(231);o.register("parallel",{create:i})},function(t,e,n){function i(t,e,n){this._axesMap=s.createHashMap(),this._axesLayout={},this.dimensions=t.dimensions,this._rect,this._model=t,this._init(t,e,n)}function r(t,e){return m(v(t,e[0]),e[1])}function o(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function a(t,e){var n,i,r=e.layoutLength,o=e.axisExpandWidth,a=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,u=s,c=!1;return t<l[0]?(n=t*s,i=s):t<=l[1]?(n=e.axisExpandWindow0Pos+t*o-e.axisExpandWindow[0],u=o,c=!0):(n=r-(a-1-t)*s,i=s),{position:n,axisNameAvailableWidth:u,axisLabelShow:c,nameTruncateMaxWidth:i}}var s=n(136),l=n(149),u=n(221),c=n(266),h=n(422),f=n(184),p=n(222),d=n(423),g=s.each,m=Math.min,v=Math.max,y=Math.floor,_=Math.ceil,x=p.round,w=Math.PI;i.prototype={type:"parallel",constructor:i,_init:function(t,e,n){var i=t.dimensions,r=t.parallelAxisIndex;g(i,function(t,n){var i=r[n],o=e.getComponent("parallelAxis",i),a=this._axesMap.set(t,new h(t,c.createScaleByModel(o),[0,0],o.get("type"),i)),s="category"===a.type;a.onBand=s&&o.get("boundaryGap"),a.inverse=o.get("inverse"),o.axis=a,a.model=o,a.coordinateSystem=o.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,r=e.pixelDimIndex,o=t[1-r],a=t[r];return o>=n&&o<=n+e.axisLength&&a>=i&&a<=i+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var i=n.getData();g(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t)),c.niceScaleExtent(e.scale,e.model)},this)}},this)},resize:function(t,e){this._rect=u.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t,e=this._model,n=this._rect,i=["x","y"],o=["width","height"],a=e.get("layout"),s="horizontal"===a?0:1,l=n[o[s]],u=[0,l],c=this.dimensions.length,h=r(e.get("axisExpandWidth"),u),f=r(e.get("axisExpandCount")||0,[0,c]),p=e.get("axisExpandable")&&c>3&&c>f&&f>1&&h>0&&l>0,d=e.get("axisExpandWindow");
if(d)t=r(d[1]-d[0],u),d[1]=d[0]+t;else{t=r(h*(f-1),u);var g=e.get("axisExpandCenter")||y(c/2);d=[h*g-t/2],d[1]=d[0]+t}var m=(l-t)/(c-f);m<3&&(m=0);var v=[y(x(d[0]/h,1))+1,_(x(d[1]/h,1))-1],w=m/h*d[0];return{layout:a,pixelDimIndex:s,layoutBase:n[i[s]],layoutLength:l,axisBase:n[i[1-s]],axisLength:n[o[1-s]],axisExpandable:p,axisExpandWidth:h,axisCollapseWidth:m,axisExpandWindow:d,axisCount:c,winInnerIndices:v,axisExpandWindow0Pos:w}},_layoutAxes:function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),r=i.layout;e.each(function(t){var e=[0,i.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])}),g(n,function(e,n){var s=(i.axisExpandable?a:o)(n,i),u={horizontal:{x:s.position,y:i.axisLength},vertical:{x:0,y:s.position}},c={horizontal:w/2,vertical:0},h=[u[r].x+t.x,u[r].y+t.y],f=c[r],p=l.create();l.rotate(p,p,f),l.translate(p,p,h),this._axesLayout[e]={position:h,rotation:f,transform:p,axisNameAvailableWidth:s.axisNameAvailableWidth,axisLabelShow:s.axisLabelShow,nameTruncateMaxWidth:s.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var r=this._axesMap,o=this.dimensions,a=[],l=[];s.each(o,function(e){a.push(t.mapDimension(e)),l.push(r.get(e).model)});for(var u=this.hasAxisBrushed(),c=n;c<i;c++){var h;if(u){h="active";for(var f=t.getValues(a,c),p=0,d=o.length;p<d;p++){var g=l[p].getActiveState(f[p]);if("inactive"===g){h="inactive";break}}}else h="normal";e(h,c)}},hasAxisBrushed:function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,r=t.length;i<r;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(t,e){var n=this._axesLayout[e];return f.applyTransform([t,0],n.transform)},getAxisLayout:function(t){return s.clone(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),r=i[1]-i[0],o=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var a,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",u=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),h=null!=c[0];if(u)h&&u&&s<r*c[0]?(l="jump",a=s-r*c[2]):h&&u&&s>r*(1-c[0])?(l="jump",a=s-r*(1-c[2])):(a=s-r*c[1])>=0&&(a=s-r*(1-c[1]))<=0&&(a=0),a*=e.axisExpandWidth/u,a?d(a,i,o,"all"):l="none";else{var r=i[1]-i[0],f=o[1]*s/r;i=[v(0,f-r/2)],i[1]=m(o[1],i[0]+r),i[0]=i[1]-r}return{axisExpandWindow:i,behavior:l}}};var b=i;t.exports=b},function(t,e,n){var i=n(136),r=n(280),o=function(t,e,n,i,o){r.call(this,t,e,n),this.type=i||"value",this.axisIndex=o};o.prototype={constructor:o,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},i.inherits(o,r);var a=o;t.exports=a},function(t,e){function n(t,e,n,o,a,s){t=t||0;var l=n[1]-n[0];if(null!=a&&(a=r(a,[0,l])),null!=s&&(s=Math.max(s,null!=a?a:0)),"all"===o){var u=Math.abs(e[1]-e[0]);u=r(u,[0,l]),a=s=r(u,[a,s]),o=0}e[0]=r(e[0],n),e[1]=r(e[1],n);var c=i(e,o);e[o]+=t;var h=a||0,f=n.slice();c.sign<0?f[0]+=h:f[1]-=h,e[o]=r(e[o],f);var p=i(e,o);null!=a&&(p.sign!==c.sign||p.span<a)&&(e[1-o]=e[o]+c.sign*a);var p=i(e,o);return null!=s&&p.span>s&&(e[1-o]=e[o]+p.sign*s),e}function i(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function r(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-(1/0),t))}t.exports=n},function(t,e,n){var i=n(136),r=n(219);n(425);var o=r.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){r.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){var e=this.option;t&&i.merge(e,t,!0),this._initDimensions()},contains:function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},setAxisExpand:function(t){i.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[],n=i.filter(this.dependentModels.parallelAxis,function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this);i.each(n,function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})}});t.exports=o},function(t,e,n){function i(t,e){return e.type||(e.data?"category":"value")}var r=n(136),o=n(219),a=n(181),s=n(302),l=n(222),u=n(275),c=o.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return a([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=r.clone(t);if(e)for(var n=e.length-1;n>=0;n--)l.asc(e[n])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,r=e.length;i<r;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"}}),h={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};r.merge(c.prototype,u),s("parallel",c,i,h);var f=c;t.exports=f},function(t,e,n){n(420),n(427),n(428)},function(t,e,n){var i=n(131),r={type:"axisAreaSelect",event:"axisAreaSelected"};i.registerAction(r,function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),i.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})})},function(t,e,n){function i(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}function r(t){var e=t.axis;return s.map(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function o(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var a=n(131),s=n(136),l=n(306),u=n(429),c=n(430),h=n(184),f=["axisLine","axisTickLabel","axisName"],p=a.extendComponentView({type:"parallelAxis",init:function(t,e){p.superApply(this,"init",arguments),(this._brushController=new u(e.getZr())).on("brush",s.bind(this._onBrush,this))},render:function(t,e,n,r){if(!i(t,e,r)){this.axisModel=t,this.api=n,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new h.Group,this.group.add(this._axisGroup),t.get("show")){var u=o(t,e),c=u.coordinateSystem,p=t.getAreaSelectStyle(),d=p.width,g=t.axis.dim,m=c.getAxisLayout(g),v=s.extend({strokeContainThreshold:d},m),y=new l(t,v);s.each(f,y.add,y),this._axisGroup.add(y.getGroup()),this._refreshBrushController(v,p,t,u,d,n);var _=r&&r.animation===!1?null:t;h.groupTransition(a,this._axisGroup,_)}}},_refreshBrushController:function(t,e,n,i,o,a){var s=n.axis.getExtent(),l=s[1]-s[0],u=Math.min(30,.1*Math.abs(l)),f=h.BoundingRect.create({x:s[0],y:-o/2,width:l,height:o});f.x-=u,f.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:c.makeRectPanelClipPath(f),isTargetByCursor:c.makeRectIsTargetByCursor(f,a,i),getLinearBrushOtherExtent:c.makeLinearBrushOtherExtent(f,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(r(n))},_onBrush:function(t,e){var n=this.axisModel,i=n.axis,r=s.map(t,function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:r})},dispose:function(){this._brushController.dispose()}}),d=p;t.exports=d},function(t,e,n){function i(t){j.call(this),this._zr=t,this.group=new U.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+at++,this._handlers={},X(st,function(t,e){this._handlers[e]=H.bind(t,this)},this)}function r(t,e){var n=t._zr;t._enableGlobalPan||W.take(n,nt,t._uid),a(n,t._handlers),t._brushType=e.brushType,t._brushOption=H.merge(H.clone(ot),e,!0)}function o(t){var e=t._zr;W.release(e,nt,t._uid),s(e,t._handlers),t._brushType=t._brushOption=null}function a(t,e){X(e,function(e,n){t.on(n,e)})}function s(t,e){X(e,function(e,n){t.off(n,e)})}function l(t,e){var n=lt[e.brushType].createCover(t,e);return n.__brushOption=e,h(n,e),t.group.add(n),n}function u(t,e){var n=p(e);return n.endCreating&&(n.endCreating(t,e),h(e,e.__brushOption)),e}function c(t,e){var n=e.__brushOption;p(e).updateCoverShape(t,e,n.range,n)}function h(t,e){var n=e.z;null==n&&(n=Q),t.traverse(function(t){t.z=n,t.z2=n})}function f(t,e){p(e).updateCommon(t,e),c(t,e)}function p(t){return lt[t.__brushOption.brushType]}function d(t,e,n){var i=t._panels;if(!i)return!0;var r,o=t._transform;return X(i,function(t){t.isTargetByCursor(e,n,o)&&(r=t)}),r}function g(t,e){var n=t._panels;if(!n)return!0;var i=e.__brushOption.panelId;return null==i||n[i]}function m(t){var e=t._covers,n=e.length;return X(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function v(t,e){var n=Z(t._covers,function(t){var e=t.__brushOption,n=H.clone(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}});t.trigger("brush",n,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function y(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],r=n[0]-i[0],o=n[1]-i[1],a=$(r*r+o*o,.5);return a>tt}function _(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function x(t,e,n,i){var r=new U.Group;return r.add(new U.Rect({name:"main",style:S(n),silent:!0,draggable:!0,cursor:"move",drift:Y(t,e,r,"nswe"),ondragend:Y(v,e,{isEnd:!0})})),X(i,function(n){r.add(new U.Rect({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Y(t,e,r,n),ondragend:Y(v,e,{isEnd:!0})}))}),r}function w(t,e,n,i){var r=i.brushStyle.lineWidth||0,o=K(r,et),a=n[0][0],s=n[1][0],l=a-r/2,u=s-r/2,c=n[0][1],h=n[1][1],f=c-o+r/2,p=h-o+r/2,d=c-a,g=h-s,m=d+r,v=g+r;C(t,e,"main",a,s,d,g),i.transformable&&(C(t,e,"w",l,u,o,v),C(t,e,"e",f,u,o,v),C(t,e,"n",l,u,m,o),C(t,e,"s",l,p,m,o),C(t,e,"nw",l,u,o,o),C(t,e,"ne",f,u,o,o),C(t,e,"sw",l,p,o,o),C(t,e,"se",f,p,o,o))}function b(t,e){var n=e.__brushOption,i=n.transformable,r=e.childAt(0);r.useStyle(S(n)),r.attr({silent:!i,cursor:i?"move":"default"}),X(["w","e","n","s","se","sw","ne","nw"],function(n){var r=e.childOfName(n),o=I(t,n);r&&r.attr({silent:!i,invisible:!i,cursor:i?rt[o]+"-resize":null})})}function C(t,e,n,i,r,o,a){var s=e.childOfName(n);s&&s.setShape(A(D(t,e,[[i,r],[i+o,r+a]])))}function S(t){return H.defaults({strokeNoScale:!0},t.brushStyle)}function M(t,e,n,i){var r=[J(t,n),J(e,i)],o=[K(t,n),K(e,i)];return[[r[0],o[0]],[r[1],o[1]]]}function E(t){return U.getTransform(t.group)}function I(t,e){if(e.length>1){e=e.split("");var n=[I(t,e[0]),I(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}var i={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},n=U.transformDirection(i[e],E(t));return r[n]}function T(t,e,n,i,r,o,a,s){var l=i.__brushOption,u=t(l.range),c=L(n,o,a);X(r.split(""),function(t){var e=it[t];u[e[0]][e[1]]+=c[e[0]]}),l.range=e(M(u[0][0],u[1][0],u[0][1],u[1][1])),f(n,i),v(n,{isEnd:!1})}function P(t,e,n,i,r){var o=e.__brushOption.range,a=L(t,n,i);X(o,function(t){t[0]+=a[0],t[1]+=a[1]}),f(t,e),v(t,{isEnd:!1})}function L(t,e,n){var i=t.group,r=i.transformCoordToLocal(e,n),o=i.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function D(t,e,n){var i=g(t,e);return i&&i!==!0?i.clipPath(n,t._transform):H.clone(n)}function A(t){var e=J(t[0][0],t[1][0]),n=J(t[0][1],t[1][1]),i=K(t[0][0],t[1][0]),r=K(t[0][1],t[1][1]);return{x:e,y:n,width:i-e,height:r-n}}function k(t,e,n){if(t._brushType&&!B(t,e)){var i=t._zr,r=t._covers,o=d(t,e,n);if(!t._dragging)for(var a=0;a<r.length;a++){var s=r[a].__brushOption;if(o&&(o===!0||s.panelId===o.panelId)&&lt[s.brushType].contain(r[a],n[0],n[1]))return}o&&i.setCursorStyle("crosshair")}}function N(t){var e=t.event;e.preventDefault&&e.preventDefault()}function O(t,e,n){return t.childOfName("main").contain(e,n)}function R(t,e,n,i){var r,o=t._creatingCover,a=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),y(t)||o){if(a&&!o){"single"===s.brushMode&&m(t);var h=H.clone(s);h.brushType=F(h.brushType,a),h.panelId=a===!0?null:a.panelId,o=t._creatingCover=l(t,h),t._covers.push(o)}if(o){var f=lt[F(t._brushType,a)],p=o.__brushOption;p.range=f.getCreatingRange(D(t,o,t._track)),i&&(u(t,o),f.updateCommon(t,o)),c(t,o),r={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&d(t,e,n)&&m(t)&&(r={isEnd:i,removeOnClick:!0});return r}function F(t,e){return"auto"===t?e.defaultBrushType:t}function z(t,e){if(t._dragging){N(e);var n=e.offsetX,i=e.offsetY,r=t.group.transformCoordToLocal(n,i),o=R(t,e,r,!0);t._dragging=!1,t._track=[],t._creatingCover=null,o&&v(t,o)}}function B(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}function V(t){return{createCover:function(e,n){return x(Y(T,function(e){var n=[e,[0,100]];return t&&n.reverse(),n},function(e){return e[t]}),e,n,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var n=_(e),i=J(n[0][t],n[1][t]),r=K(n[0][t],n[1][t]);return[i,r]},updateCoverShape:function(e,n,i,r){var o,a=g(e,n);if(a!==!0&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(t,e._transform);else{var s=e._zr;o=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,o];t&&l.reverse(),w(e,n,l,r)},updateCommon:b,contain:O}}var G=n(132),H=(G.__DEV__,n(136)),j=n(140),U=n(184),W=n(355),q=n(259),Y=H.curry,X=H.each,Z=H.map,J=Math.min,K=Math.max,$=Math.pow,Q=1e4,tt=6,et=6,nt="globalPan",it={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},rt={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},ot={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},at=0;i.prototype={constructor:i,enableBrush:function(t){return this._brushType&&o(this),t.brushType&&r(this,t),this},setPanels:function(t){if(t&&t.length){var e=this._panels={};H.each(t,function(t){e[t.panelId]=H.clone(t)})}else this._panels=null;return this},mount:function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this._transform=e.getLocalTransform(),this},eachCover:function(t,e){X(this._covers,t,e)},updateCovers:function(t){function e(t,e){return(null!=t.id?t.id:o+e)+"-"+t.brushType}function n(t,n){return e(t.__brushOption,n)}function i(e,n){var i=t[e];if(null!=n&&a[n]===h)s[e]=a[n];else{var r=s[e]=null!=n?(a[n].__brushOption=i,a[n]):u(c,l(c,i));f(c,r)}}function r(t){a[t]!==h&&c.group.remove(a[t])}t=H.map(t,function(t){return H.merge(H.clone(ot),t,!0)});var o="\0-brush-index-",a=this._covers,s=this._covers=[],c=this,h=this._creatingCover;return new q(a,t,n,e).add(i).update(i).remove(r).execute(),this},unmount:function(){return this.enableBrush(!1),m(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},H.mixin(i,j);var st={mousedown:function(t){if(this._dragging)z(this,t);else if(!t.target||!t.target.draggable){N(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=d(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,i=this.group.transformCoordToLocal(e,n);if(k(this,t,i),this._dragging){N(t);var r=R(this,t,i,!1);r&&v(this,r)}},mouseup:function(t){z(this,t)}},lt={lineX:V(0),lineY:V(1),rect:{createCover:function(t,e){return x(Y(T,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=_(t);return M(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){w(t,e,n,i)},updateCommon:b,contain:O},polygon:{createCover:function(t,e){var n=new U.Group;return n.add(new U.Polyline({name:"main",style:S(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new U.Polygon({name:"main",draggable:!0,drift:Y(P,t,e),ondragend:Y(v,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:D(t,e,n)})},updateCommon:b,contain:O}},ut=i;t.exports=ut},function(t,e,n){function i(t){return t=a(t),function(e,n){return c.clipPointsByRect(e,t)}}function r(t,e){return t=a(t),function(n){var i=null!=e?e:n,r=i?t.width:t.height,o=i?t.x:t.y;return[o,o+(r||0)]}}function o(t,e,n){return t=a(t),function(i,r,o){return t.contain(r[0],r[1])&&!u(i,e,n)}}function a(t){return s.create(t)}var s=n(158),l=n(357),u=l.onIrrelevantElement,c=n(184);e.makeRectPanelClipPath=i,e.makeLinearBrushOtherExtent=r,e.makeRectIsTargetByCursor=o},function(t,e,n){function i(t,e){if(!t.encodeDefine){var n=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(n){var i=t.encodeDefine=s();a(n.dimensions,function(t){var e=r(t);i.set(t,e)})}}}function r(t){return+t.replace("dim","")}var o=n(136),a=o.each,s=o.createHashMap,l=n(236),u=n(257),c=l.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var n=this.getSource();return i(n,this),u(n,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,function(e,r){t===e&&i.push(n.getRawIndex(r))}),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});t.exports=c},function(t,e,n){function i(t,e,n){var i=t.model,r=t.getRect(),o=new u.Rect({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),a="horizontal"===i.get("layout")?"width":"height";return o.setShape(a,0),u.initProps(o,{shape:{width:r.width,height:r.height}},e,n),o}function r(t,e,n,i){for(var r=[],o=0;o<n.length;o++){var a=n[o],s=t.get(t.mapDimension(a),e);l(s,i.getAxis(a).type)||r.push(i.dataToPoint(s,a))}return r}function o(t,e,n,i,o){var a=r(t,n,i,o),s=new u.Polyline({shape:{points:a},silent:!0,z2:10});return e.add(s),t.setItemGraphicEl(n,s),s}function a(t){var e=t.get("smooth",!0);return e===!0&&(e=h),{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:null!=e?e:h}}function s(t,e,n,i){var r=i.lineStyle;if(e.hasItemOption){var o=e.getItemModel(n).getModel("lineStyle");r=o.getLineStyle()}t.useStyle(r);var a=t.style;a.fill=null,a.stroke=e.getItemVisual(n,"color"),a.opacity=e.getItemVisual(n,"opacity"),i.smooth&&(t.shape.smooth=i.smooth)}function l(t,e){return"category"===e?null==t:null==t||isNaN(t)}var u=n(184),c=n(241),h=.3,f=c.extend({type:"parallel",init:function(){this._dataGroup=new u.Group,this.group.add(this._dataGroup),this._data,this._initialized},render:function(t,e,n,l){function c(t){var e=o(d,p,t,v,m);s(e,d,t,y)}function h(e,n){var i=g.getItemGraphicEl(n),o=r(d,e,v,m);d.setItemGraphicEl(e,i);var a=l&&l.animation===!1?null:t;u.updateProps(i,{shape:{points:o}},a,e),s(i,d,e,y)}function f(t){var e=g.getItemGraphicEl(t);p.remove(e)}var p=this._dataGroup,d=t.getData(),g=this._data,m=t.coordinateSystem,v=m.dimensions,y=a(t);if(d.diff(g).add(c).update(h).remove(f).execute(),!this._initialized){this._initialized=!0;var _=i(m,t,function(){setTimeout(function(){p.removeClipPath()})});p.setClipPath(_)}this._data=d},incrementalPrepareRender:function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(t,e,n){for(var i=e.getData(),r=e.coordinateSystem,l=r.dimensions,u=a(e),c=t.start;c<t.end;c++){var h=o(i,this._dataGroup,c,l,r);h.incremental=!0,s(h,i,c,u)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}}),p=f;t.exports=p},function(t,e){var n=["lineStyle","normal","opacity"],i={seriesType:"parallel",reset:function(t,e,i){function r(t,e){f.eachActiveState(e,function(t,i){var r=d[t];if("normal"===t&&e.hasItemOption){var o=e.getItemModel(i).get(n,!0);null!=o&&(r=o)}e.setItemVisual(i,"opacity",r)},t.start,t.end)}var o=t.getModel("itemStyle"),a=t.getModel("lineStyle"),s=e.get("color"),l=a.get("color")||o.get("color")||s[t.seriesIndex%s.length],u=t.get("inactiveOpacity"),c=t.get("activeOpacity"),h=t.getModel("lineStyle").getLineStyle(),f=t.coordinateSystem,p=t.getData(),d={normal:h.opacity,active:c,inactive:u};return p.setVisual("color",l),{progress:r}}};t.exports=i},function(t,e,n){var i=n(131);n(435),n(436),n(437);var r=n(438),o=n(439);i.registerLayout(r),i.registerVisual(o)},function(t,e,n){var i=n(236),r=n(388),o=n(223),a=o.encodeHTML,s=n(178),l=n(132),u=(l.__DEV__,i.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(t,e){function n(t,e){t.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var n=this.parentModel,i=n.getData().getItemLayout(e).depth,r=n.levelModels[i];return r||this.parentModel}),t}),e.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var n=this.parentModel,i=n.getGraph().getEdgeByIndex(e),r=i.node1.getLayout().depth,o=n.levelModels[r];return o||this.parentModel}),t})}for(var i=t.edges||t.links,o=t.data||t.nodes,a=t.levels,l=this.levelModels={},u=0;u<a.length;u++)null!=a[u].depth&&a[u].depth>=0&&(l[a[u].depth]=new s(a[u],this,e));if(o&&i){var c=r(o,i,this,!0,n);return c.data}},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var i=this.getDataParams(t,n),r=i.data,o=r.source+" -- "+r.target;return i.value&&(o+=" : "+i.value),a(o)}if("node"===n){var s=this.getGraph().getNodeByIndex(t),l=s.getLayout().value,c=this.getDataParams(t,n).data.name;if(l)var o=c+" : "+l;return a(o)}return u.superCall(this,"formatTooltip",t,e)},optionUpdated:function(){var t=this.option;t.focusNodeAdjacency===!0&&(t.focusNodeAdjacency="allEdges")},getDataParams:function(t,e){var n=u.superCall(this,"getDataParams",t,e);if(null==n.value&&"node"===e){var i=this.getGraph().getNodeByIndex(t),r=i.getLayout().value;n.value=r}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}})),c=u;t.exports=c},function(t,e,n){function i(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function r(t,e,n){var r=t.getGraphicEl(),o=i(t,e);null!=n&&(null==o&&(o=1),o*=n),r.downplay&&r.downplay(),r.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",o)})}function o(t,e){var n=i(t,e),r=t.getGraphicEl();r.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",n)}),r.highlight&&r.highlight()}function a(t,e,n){var i=new s.Rect({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return s.initProps(i,{shape:{width:t.width+20}},e,n),i}var s=n(184),l=n(131),u=n(136),c=["itemStyle","opacity"],h=["emphasis","itemStyle","opacity"],f=["lineStyle","opacity"],p=["emphasis","lineStyle","opacity"],d=s.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}}),g=l.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,n){var i=this,r=t.getGraph(),o=this.group,l=t.layoutInfo,u=l.width,c=l.height,h=t.getData(),f=t.getData("edge"),p=t.get("orient");this._model=t,o.removeAll(),o.attr("position",[l.x,l.y]),r.eachEdge(function(e){var n=new d;n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var i,r,a,l,h,g,m,v,y=e.getModel("lineStyle"),_=y.get("curveness"),x=e.node1.getLayout(),w=e.node1.getModel(),b=w.get("localX"),C=w.get("localY"),S=e.node2.getLayout(),M=e.node2.getModel(),E=M.get("localX"),I=M.get("localY"),T=e.getLayout();switch(n.shape.extent=Math.max(1,T.dy),n.shape.orient=p,"vertical"===p?(i=(null!=b?b*u:x.x)+T.sy,r=(null!=C?C*c:x.y)+x.dy,a=(null!=E?E*u:S.x)+T.ty,l=null!=I?I*c:S.y,h=i,g=r*(1-_)+l*_,m=a,v=r*_+l*(1-_)):(i=(null!=b?b*u:x.x)+x.dx,r=(null!=C?C*c:x.y)+T.sy,a=null!=E?E*u:S.x,l=(null!=I?I*c:S.y)+T.ty,h=i*(1-_)+a*_,g=r,m=i*_+a*(1-_),v=l),n.setShape({x1:i,y1:r,x2:a,y2:l,cpx1:h,cpy1:g,cpx2:m,cpy2:v}),n.setStyle(y.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color");break;case"target":n.style.fill=e.node2.getVisual("color")}s.setHoverStyle(n,e.getModel("emphasis.lineStyle").getItemStyle()),o.add(n),f.setItemGraphicEl(e.dataIndex,n)}),r.eachNode(function(e){var n=e.getLayout(),i=e.getModel(),r=i.get("localX"),a=i.get("localY"),l=i.getModel("label"),f=i.getModel("emphasis.label"),p=new s.Rect({shape:{x:null!=r?r*u:n.x,y:null!=a?a*c:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle()}),d=e.getModel("emphasis.itemStyle").getItemStyle();s.setLabelStyle(p.style,d,l,f,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),p.setStyle("fill",e.getVisual("color")),s.setHoverStyle(p,d),o.add(p),h.setItemGraphicEl(e.dataIndex,p),p.dataType="node"}),h.eachItemGraphicEl(function(e,r){var o=h.getItemModel(r);o.get("draggable")&&(e.drift=function(e,o){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=o,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:h.getRawIndex(r),localX:this.shape.x/u,localY:this.shape.y/c})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move"),e.highlight=function(){this.trigger("emphasis")},e.downplay=function(){this.trigger("normal")},e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),o.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),f.eachItemGraphicEl(function(e,r){var o=f.getItemModel(r);e.focusNodeAdjHandler&&e.off("mouseover",e.focusNodeAdjHandler),e.unfocusNodeAdjHandler&&e.off("mouseout",e.unfocusNodeAdjHandler),o.get("focusNodeAdjacency")&&(e.on("mouseover",e.focusNodeAdjHandler=function(){i._focusAdjacencyDisabled||(i._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex}))}),e.on("mouseout",e.unfocusNodeAdjHandler=function(){i._focusAdjacencyDisabled||i._dispatchUnfocus(n)}))}),!this._data&&t.get("animation")&&o.setClipPath(a(o.getBoundingRect(),t,function(){o.removeClipPath()})),this._data=t.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(t){var e=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){e._unfocusDelayTimer=null,t.dispatchAction({type:"unfocusNodeAdjacency",seriesId:e._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(t,e,n,i){var a=t.getData(),s=a.graph,l=i.dataIndex,d=a.getItemModel(l),g=i.edgeDataIndex;if(null!=l||null!=g){var m=s.getNodeByIndex(l),v=s.getEdgeByIndex(g);if(s.eachNode(function(t){r(t,c,.1)}),s.eachEdge(function(t){r(t,f,.1)}),m){o(m,h);var y=d.get("focusNodeAdjacency");"outEdges"===y?u.each(m.outEdges,function(t){t.dataIndex<0||(o(t,p),o(t.node2,h))}):"inEdges"===y?u.each(m.inEdges,function(t){t.dataIndex<0||(o(t,p),o(t.node1,h))}):"allEdges"===y&&u.each(m.edges,function(t){t.dataIndex<0||(o(t,p),t.node1!==m&&o(t.node1,h),t.node2!==m&&o(t.node2,h))})}v&&(o(v,p),o(v.node1,h),o(v.node2,h))}},unfocusNodeAdjacency:function(t,e,n,i){var o=t.getGraph();o.eachNode(function(t){r(t,c)}),o.eachEdge(function(t){r(t,f)})}});t.exports=g},function(t,e,n){var i=n(131);n(398),i.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},function(t,e,n){function i(t,e,n){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),i=t.get("nodeGap"),s=r(t,e);t.layoutInfo=s;var l=s.width,u=s.height,c=t.getGraph(),h=c.nodes,f=c.edges;a(h);var p=I.filter(h,function(t){return 0===t.getLayout().value}),d=0!==p.length?0:t.get("layoutIterations"),g=t.get("orient"),m=t.get("nodeAlign");o(h,f,n,i,l,u,d,g,m)})}function r(t,e){return E.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function o(t,e,n,i,r,o,a,l,u){s(t,e,n,r,o,l,u),f(t,e,o,r,i,a,l),M(t,l)}function a(t){I.each(t,function(t){var e=C(t.outEdges,b),n=C(t.inEdges,b),i=t.getValue()||0,r=Math.max(e,n,i);t.setLayout({value:r},!0)})}function s(t,e,n,i,r,o,a){for(var s=[],l=[],c=[],f=[],p=0,d=0,g=0;g<e.length;g++)s[g]=1;for(g=0;g<t.length;g++)l[g]=t[g].inEdges.length,0===l[g]&&c.push(t[g]);for(var m=-1;c.length;){for(var v=0;v<c.length;v++){var y=c[v],_=y.hostGraph.data.getRawDataItem(y.dataIndex),x=null!=_.depth&&_.depth>=0;x&&_.depth>m&&(m=_.depth),y.setLayout({depth:x?_.depth:p},!0),"vertical"===o?y.setLayout({dy:n},!0):y.setLayout({dx:n},!0);for(var w=0;w<y.outEdges.length;w++){var b=y.outEdges[w],C=e.indexOf(b);s[C]=0;var S=b.node2,M=t.indexOf(S);0===--l[M]&&f.indexOf(S)<0&&f.push(S)}}++p,c=f,f=[]}for(g=0;g<s.length;g++)if(1===s[g])throw new Error("Sankey is a DAG, the original data has cycle!");var E=m>p-1?m:p-1;a&&"left"!==a&&u(t,a,o,E);var d="vertical"===o?(r-n)/E:(i-n)/E;h(t,d,o)}function l(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function u(t,e,n,i){if("right"===e){for(var r=[],o=t,a=0;o.length;){for(var s=0;s<o.length;s++){var u=o[s];u.setLayout({skNodeHeight:a},!0);for(var h=0;h<u.inEdges.length;h++){var f=u.inEdges[h];r.indexOf(f.node1)<0&&r.push(f.node1)}}o=r,r=[],++a}I.each(t,function(t){l(t)||t.setLayout({depth:Math.max(0,i-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&c(t,i)}function c(t,e){I.each(t,function(t){l(t)||t.outEdges.length||t.setLayout({depth:e},!0)})}function h(t,e,n){I.each(t,function(t){var i=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:i},!0):t.setLayout({x:i},!0)})}function f(t,e,n,i,r,o,a){var s=p(t,a);d(s,e,n,i,r,a),g(s,r,n,i,a);for(var l=1;o>0;o--)l*=.99,m(s,l,a),g(s,r,n,i,a),S(s,l,a),g(s,r,n,i,a)}function p(t,e){var n=[],i="vertical"===e?"y":"x",r=P(t,function(t){return t.getLayout()[i]});return r.keys.sort(function(t,e){return t-e}),I.each(r.keys,function(t){n.push(r.buckets.get(t))}),n}function d(t,e,n,i,r,o){var a=1/0;I.each(t,function(t){var e=t.length,s=0;I.each(t,function(t){s+=t.getLayout().value});var l="vertical"===o?(i-(e-1)*r)/s:(n-(e-1)*r)/s;l<a&&(a=l)}),I.each(t,function(t){
I.each(t,function(t,e){var n=t.getLayout().value*a;"vertical"===o?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),I.each(e,function(t){var e=+t.getValue()*a;t.setLayout({dy:e},!0)})}function g(t,e,n,i,r){var o="vertical"===r?"x":"y";I.each(t,function(t){t.sort(function(t,e){return t.getLayout()[o]-e.getLayout()[o]});for(var a,s,l,u=0,c=t.length,h="vertical"===r?"dx":"dy",f=0;f<c;f++)s=t[f],l=u-s.getLayout()[o],l>0&&(a=s.getLayout()[o]+l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),u=s.getLayout()[o]+s.getLayout()[h]+e;var p="vertical"===r?i:n;if(l=u-e-p,l>0)for(a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0),u=a,f=c-2;f>=0;--f)s=t[f],l=s.getLayout()[o]+s.getLayout()[h]+e-u,l>0&&(a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),u=s.getLayout()[o]})}function m(t,e,n){I.each(t.slice().reverse(),function(t){I.each(t,function(t){if(t.outEdges.length){var i=C(t.outEdges,v,n)/C(t.outEdges,b,n);if(isNaN(i)){var r=t.outEdges.length;i=r?C(t.outEdges,y,n)/r:0}if("vertical"===n){var o=t.getLayout().x+(i-w(t,n))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(i-w(t,n))*e;t.setLayout({y:a},!0)}}})})}function v(t,e){return w(t.node2,e)*t.getValue()}function y(t,e){return w(t.node2,e)}function _(t,e){return w(t.node1,e)*t.getValue()}function x(t,e){return w(t.node1,e)}function w(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function b(t){return t.getValue()}function C(t,e,n){for(var i=0,r=t.length,o=-1;++o<r;){var a=+e.call(t,t[o],n);isNaN(a)||(i+=a)}return i}function S(t,e,n){I.each(t,function(t){I.each(t,function(t){if(t.inEdges.length){var i=C(t.inEdges,_,n)/C(t.inEdges,b,n);if(isNaN(i)){var r=t.inEdges.length;i=r?C(t.inEdges,x,n)/r:0}if("vertical"===n){var o=t.getLayout().x+(i-w(t,n))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(i-w(t,n))*e;t.setLayout({y:a},!0)}}})})}function M(t,e){var n="vertical"===e?"x":"y";I.each(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]})}),I.each(t,function(t){var e=0,n=0;I.each(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),I.each(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}var E=n(221),I=n(136),T=n(177),P=T.groupData;t.exports=i},function(t,e,n){function i(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph(),n=e.nodes;if(n.length){var i=1/0,a=-(1/0);o.each(n,function(t){var e=t.getLayout().value;e<i&&(i=e),e>a&&(a=e)}),o.each(n,function(e){var n=new r({type:"color",mappingMethod:"linear",dataExtent:[i,a],visual:t.get("color")}),o=n.mapValueToVisual(e.getLayout().value),s=e.getModel().get("itemStyle.color");null!=s?e.setVisual("color",s):e.setVisual("color",o)})}})}var r=n(384),o=n(136);t.exports=i},function(t,e,n){var i=n(131);n(441),n(443);var r=n(444),o=n(445);i.registerVisual(r),i.registerLayout(o)},function(t,e,n){var i=n(136),r=n(236),o=n(442),a=o.seriesModelMixin,s=r.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});i.mixin(s,a,!0);var l=s;t.exports=l},function(t,e,n){var i=n(320),r=n(136),o=n(260),a=o.getDimensionTypeByAxis,s=n(227),l=s.makeSeriesEncodeForAxisCoordSys,u={_baseAxisDim:null,getInitialData:function(t,e){var n,o,s=e.getComponent("xAxis",this.get("xAxisIndex")),u=e.getComponent("yAxis",this.get("yAxisIndex")),c=s.get("type"),h=u.get("type");"category"===c?(t.layout="horizontal",n=s.getOrdinalMeta(),o=!0):"category"===h?(t.layout="vertical",n=u.getOrdinalMeta(),o=!0):t.layout=t.layout||"horizontal";var f=["x","y"],p="horizontal"===t.layout?0:1,d=this._baseAxisDim=f[p],g=f[1-p],m=[s,u],v=m[p].get("type"),y=m[1-p].get("type"),_=t.data;if(_&&o){var x=[];r.each(_,function(t,e){var n;t.value&&r.isArray(t.value)?(n=t.value.slice(),t.value.unshift(e)):r.isArray(t)?(n=t.slice(),t.unshift(e)):n=t,x.push(n)}),t.data=x}var w=this.defaultValueDimensions,b=[{name:d,type:a(v),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:g,type:a(y),dimsDef:w.slice()}];return i(this,{coordDimensions:b,dimensionsCount:w.length+1,encodeDefaulter:r.curry(l,b,this)})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};e.seriesModelMixin=u},function(t,e,n){function i(t,e,n,i,a){var s=t.ends,l=new p({shape:{points:a?o(s,i,t):s}});return r(t,l,e,n,a),l}function r(t,e,n,i,r){var o=n.hostModel,a=l[r?"initProps":"updateProps"];a(e,{shape:{points:t.ends}},o,i);var s=n.getItemModel(i),u=s.getModel(c),f=n.getItemVisual(i,"color"),p=u.getItemStyle(["borderColor"]);p.stroke=f,p.strokeNoScale=!0,e.useStyle(p),e.z2=100;var d=s.getModel(h).getItemStyle();l.setHoverStyle(e,d)}function o(t,e,n){return a.map(t,function(t){return t=t.slice(),t[e]=n.initBaseline,t})}var a=n(136),s=n(241),l=n(184),u=n(186),c=["itemStyle"],h=["emphasis","itemStyle"],f=s.extend({type:"boxplot",render:function(t,e,n){var o=t.getData(),a=this.group,s=this._data;this._data||a.removeAll();var l="horizontal"===t.get("layout")?1:0;o.diff(s).add(function(t){if(o.hasValue(t)){var e=o.getItemLayout(t),n=i(e,o,t,l,!0);o.setItemGraphicEl(t,n),a.add(n)}}).update(function(t,e){var n=s.getItemGraphicEl(e);if(!o.hasValue(t))return void a.remove(n);var u=o.getItemLayout(t);n?r(u,n,o,t):n=i(u,o,t,l),a.add(n),o.setItemGraphicEl(t,n)}).remove(function(t){var e=s.getItemGraphicEl(t);e&&a.remove(e)}).execute(),this._data=o},remove:function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(t){t&&e.remove(t)})},dispose:a.noop}),p=u.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])}}),d=f;t.exports=d},function(t,e){function n(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",function(e){var r=n[e.seriesIndex%n.length],o=e.getData();o.setVisual({legendSymbol:"roundRect",color:e.get(i)||r}),t.isSeriesFiltered(e)||o.each(function(t){var e=o.getItemModel(t);o.setItemVisual(t,{color:e.get(i,!0)})})})}var i=["itemStyle","borderColor"];t.exports=n},function(t,e,n){function i(t){var e=r(t);c(e,function(t){var e=t.seriesModels;e.length&&(o(t),c(e,function(e,n){a(e,t.boxOffsetList[n],t.boxWidthList[n])}))})}function r(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(t){var i=t.getBaseAxis(),r=s.indexOf(n,i);r<0&&(r=n.length,n[r]=i,e[r]={axis:i,seriesModels:[]}),e[r].seriesModels.push(t)}),e}function o(t){var e,n,i=t.axis,r=t.seriesModels,o=r.length,a=t.boxWidthList=[],l=t.boxOffsetList=[],h=[];if("category"===i.type)n=i.getBandWidth();else{var f=0;c(r,function(t){f=Math.max(f,t.getData().count())}),e=i.getExtent(),Math.abs(e[1]-e[0])/f}c(r,function(t){var e=t.get("boxWidth");s.isArray(e)||(e=[e,e]),h.push([u(e[0],n)||0,u(e[1],n)||0])});var p=.8*n-2,d=p/o*.3,g=(p-d*(o-1))/o,m=g/2-p/2;c(r,function(t,e){l.push(m),m+=d+g,a.push(Math.min(Math.max(g,h[e][0]),h[e][1]))})}function a(t,e,n){function i(t,n,i){var r=s.get(n,i),o=[];o[u]=t,o[c]=r;var l;return isNaN(t)||isNaN(r)?l=[NaN,NaN]:(l=a.dataToPoint(o),l[u]+=e),l}function r(t,e,n){var i=e.slice(),r=e.slice();i[u]+=l,r[u]-=l,n?t.push(i,r):t.push(r,i)}function o(t,e){var n=e.slice(),i=e.slice();n[u]-=l,i[u]+=l,t.push(n,i)}var a=t.coordinateSystem,s=t.getData(),l=n/2,u="horizontal"===t.get("layout")?0:1,c=1-u,h=["x","y"],f=s.mapDimension(h[u]),p=s.mapDimension(h[c],!0);if(!(null==f||p.length<5))for(var d=0;d<s.count();d++){var g=s.get(f,d),m=i(g,p[2],d),v=i(g,p[0],d),y=i(g,p[1],d),_=i(g,p[3],d),x=i(g,p[4],d),w=[];r(w,y,0),r(w,_,1),w.push(v,y,x,_),o(w,v),o(w,x),o(w,m),s.setItemLayout(d,{initBaseline:m[c],ends:w})}}var s=n(136),l=n(222),u=l.parsePercent,c=s.each;t.exports=i},function(t,e,n){var i=n(131);n(447),n(448);var r=n(449),o=n(450),a=n(451);i.registerPreprocessor(r),i.registerVisual(o),i.registerLayout(a)},function(t,e,n){var i=n(136),r=n(236),o=n(442),a=o.seriesModelMixin,s=r.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)}});i.mixin(s,a,!0);var l=s;t.exports=l},function(t,e,n){function i(t,e,n){var i=t.ends;return new _({shape:{points:n?a(i,t):i},z2:100})}function r(t,e){for(var n=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){n=!1;break}return n}function o(t,e,n,i){var r=e.getItemModel(n),o=r.getModel(g),a=e.getItemVisual(n,"color"),s=e.getItemVisual(n,"borderColor")||a,l=o.getItemStyle(v);t.useStyle(l),t.style.strokeNoScale=!0,t.style.fill=a,t.style.stroke=s,t.__simpleBox=i;var u=r.getModel(m).getItemStyle();h.setHoverStyle(t,u)}function a(t,e){return u.map(t,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}function s(t,e,n){var i=t.getData(),r=i.getLayout("largePoints"),o=new x({shape:{points:r},__sign:1});e.add(o);var a=new x({shape:{points:r},__sign:-1});e.add(a),l(1,o,t,i),l(-1,a,t,i),n&&(o.incremental=!0,a.incremental=!0)}function l(t,e,n,i){var r=t>0?"P":"N",o=i.getVisual("borderColor"+r)||i.getVisual("color"+r),a=n.getModel(g).getItemStyle(v);e.useStyle(a),e.style.fill=null,e.style.stroke=o}var u=n(136),c=n(241),h=n(184),f=n(186),p=n(291),d=p.createClipPath,g=["itemStyle"],m=["emphasis","itemStyle"],v=["color","color0","borderColor","borderColor0"],y=c.extend({type:"candlestick",render:function(t,e,n){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),n=this._data,a=this.group,s=e.getLayout("isSimpleBox"),l=t.get("clip",!0),u=t.coordinateSystem,c=u.getArea&&u.getArea();this._data||a.removeAll(),e.diff(n).add(function(n){if(e.hasValue(n)){var u,f=e.getItemLayout(n);if(l&&r(c,f))return;u=i(f,n,!0),h.initProps(u,{shape:{points:f.ends}},t,n),o(u,e,n,s),a.add(u),e.setItemGraphicEl(n,u)}}).update(function(u,f){var p=n.getItemGraphicEl(f);if(!e.hasValue(u))return void a.remove(p);var d=e.getItemLayout(u);return l&&r(c,d)?void a.remove(p):(p?h.updateProps(p,{shape:{points:d.ends}},t,u):p=i(d,u),o(p,e,u,s),a.add(p),void e.setItemGraphicEl(u,p))}).remove(function(t){var e=n.getItemGraphicEl(t);e&&a.remove(e)}).execute(),this._data=e},_renderLarge:function(t){this._clear(),s(t,this.group);var e=t.get("clip",!0)?d(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},_incrementalRenderNormal:function(t,e){for(var n,r=e.getData(),a=r.getLayout("isSimpleBox");null!=(n=t.next());){var s,l=r.getItemLayout(n);s=i(l,n),o(s,r,n,a),s.incremental=!0,this.group.add(s)}},_incrementalRenderLarge:function(t,e){s(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:u.noop}),_=f.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))}}),x=f.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];t.moveTo(r,n[i++]),t.lineTo(r,n[i++])}else i+=3}}),w=y;t.exports=w},function(t,e,n){function i(t){t&&r.isArray(t.series)&&r.each(t.series,function(t){r.isObject(t)&&"k"===t.type&&(t.type="candlestick")})}var r=n(136);t.exports=i},function(t,e,n){var i=n(242),r=["itemStyle","borderColor"],o=["itemStyle","borderColor0"],a=["itemStyle","color"],s=["itemStyle","color0"],l={seriesType:"candlestick",plan:i(),performRawSeries:!0,reset:function(t,e){function n(t,e){for(var n;null!=(n=t.next());){var r=e.getItemModel(n),o=e.getItemLayout(n).sign;e.setItemVisual(n,{color:i(o,r),borderColor:l(o,r)})}}function i(t,e){return e.get(t>0?a:s)}function l(t,e){return e.get(t>0?r:o)}var u=t.getData();if(u.setVisual({legendSymbol:"roundRect",colorP:i(1,t),colorN:i(-1,t),borderColorP:l(1,t),borderColorN:l(-1,t)}),!e.isSeriesFiltered(t)){var c=t.pipelineContext.large;return!c&&{progress:n}}}};t.exports=l},function(t,e,n){function i(t,e,n,i,r){var o;return o=n>i?-1:n<i?1:e>0?t.get(r,e-1)<=i?1:-1:1}function r(t,e){var n,i=t.getBaseAxis(),r="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/e.count()),o=u(h(t.get("barMaxWidth"),r),r),a=u(h(t.get("barMinWidth"),1),r),s=t.get("barWidth");return null!=s?u(s,r):Math.max(Math.min(r/2,o),a)}var o=n(184),a=o.subPixelOptimize,s=n(242),l=n(222),u=l.parsePercent,c=n(136),h=c.retrieve2,f="undefined"!=typeof Float32Array?Float32Array:Array,p={seriesType:"candlestick",plan:s(),reset:function(t){function e(t,e){function n(t,e){var n=[];return n[u]=e,n[c]=t,isNaN(e)||isNaN(t)?[NaN,NaN]:o.dataToPoint(n)}function r(t,e,n){var i=e.slice(),r=e.slice();i[u]=a(i[u]+l/2,1,!1),r[u]=a(r[u]-l/2,1,!0),n?t.push(i,r):t.push(r,i)}function s(t,e,i){var r=n(t,i),o=n(e,i);return r[u]-=l/2,o[u]-=l/2,{x:r[0],y:r[1],width:c?l:o[0]-r[0],height:c?o[1]-r[1]:l}}function h(t){return t[u]=a(t[u],1),t}for(var f;null!=(f=t.next());){var d=e.get(p,f),_=e.get(g,f),x=e.get(m,f),w=e.get(v,f),b=e.get(y,f),C=Math.min(_,x),S=Math.max(_,x),M=n(C,d),E=n(S,d),I=n(w,d),T=n(b,d),P=[];r(P,E,0),r(P,M,1),P.push(h(T),h(E),h(I),h(M)),e.setItemLayout(f,{sign:i(e,f,_,x,m),initBaseline:_>x?E[c]:M[c],ends:P,brushRect:s(w,b,d)})}}function n(t,e){for(var n,r,a=new f(4*t.count),s=0,l=[],h=[];null!=(r=t.next());){var d=e.get(p,r),_=e.get(g,r),x=e.get(m,r),w=e.get(v,r),b=e.get(y,r);isNaN(d)||isNaN(w)||isNaN(b)?(a[s++]=NaN,s+=3):(a[s++]=i(e,r,_,x,m),l[u]=d,l[c]=w,n=o.dataToPoint(l,null,h),a[s++]=n?n[0]:NaN,a[s++]=n?n[1]:NaN,l[c]=b,n=o.dataToPoint(l,null,h),a[s++]=n?n[1]:NaN)}e.setLayout("largePoints",a)}var o=t.coordinateSystem,s=t.getData(),l=r(t,s),u=0,c=1,h=["x","y"],p=s.mapDimension(h[u]),d=s.mapDimension(h[c],!0),g=d[0],m=d[1],v=d[2],y=d[3];if(s.setLayout({candleWidth:l,isSimpleBox:l<=1.3}),!(null==p||d.length<4))return{progress:t.pipelineContext.large?n:e}}};t.exports=p},function(t,e,n){var i=n(131);n(453),n(454);var r=n(292),o=n(293);i.registerVisual(r("effectScatter","circle")),i.registerLayout(o("effectScatter"))},function(t,e,n){var i=n(257),r=n(236),o=r.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return i(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});t.exports=o},function(t,e,n){var i=n(131),r=n(285),o=n(455),a=n(149),s=n(293),l=i.extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new r(o)},render:function(t,e,n){var i=t.getData(),r=this._symbolDraw;r.updateData(i),this.group.add(r.group)},updateTransform:function(t,e,n){var i=t.getData();this.group.dirty();var r=s().reset(t);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=a.clone(e.getRoamTransform()),this.group.decomposeTransform())},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}});t.exports=l},function(t,e,n){function i(t){return a.isArray(t)||(t=[+t,+t]),t}function r(t,e){var n=e.rippleEffectColor||e.color;t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})})}function o(t,e){c.call(this);var n=new p(t,e),i=new c;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(t,e)}var a=n(136),s=n(276),l=s.createSymbol,u=n(184),c=u.Group,h=n(222),f=h.parsePercent,p=n(286),d=3,g=o.prototype;g.stopEffectAnimation=function(){this.childAt(1).removeAll()},g.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=this.childAt(1),o=0;o<d;o++){var a=l(e,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var s=-o/d*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(s).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(s).start(),i.add(a)}r(i,t)},g.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],o=0;o<i.length;o++){var a=i[o];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}r(n,t)},g.highlight=function(){this.trigger("emphasis")},g.downplay=function(){this.trigger("normal")},g.updateData=function(t,e){var n=t.hostModel;this.childAt(0).updateData(t,e);var r=this.childAt(1),o=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),s=i(t.getItemVisual(e,"symbolSize")),l=t.getItemVisual(e,"color");r.attr("scale",s),r.traverse(function(t){t.attr({fill:l})});var u=o.getShallow("symbolOffset");if(u){var c=r.position;c[0]=f(u[0],s[0]),c[1]=f(u[1],s[1])}var h=t.getItemVisual(e,"symbolRotate");r.rotation=(h||0)*Math.PI/180||0;var p={};if(p.showEffectOn=n.get("showEffectOn"),p.rippleScale=o.get("rippleEffect.scale"),p.brushType=o.get("rippleEffect.brushType"),p.period=1e3*o.get("rippleEffect.period"),p.effectOffset=e/t.count(),p.z=o.getShallow("z")||0,p.zlevel=o.getShallow("zlevel")||0,p.symbolType=a,p.color=l,p.rippleEffectColor=o.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===p.showEffectOn)this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p;else{this._effectCfg=null,this.stopEffectAnimation();var d=this.childAt(0),g=function(){d.highlight(),"render"!==p.showEffectOn&&this.startEffectAnimation(p)},m=function(){d.downplay(),"render"!==p.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",g,this).on("mouseout",m,this).on("emphasis",g,this).on("normal",m,this)}this._effectCfg=p},g.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},a.inherits(o,c);var m=o;t.exports=m},function(t,e,n){var i=n(131);n(457),n(458);var r=n(463),o=n(464);i.registerLayout(r),i.registerVisual(o)},function(t,e,n){function i(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=c(e,function(t){var e=[t[0].coord,t[1].coord],n={coords:e};return t[0].name&&(n.fromName=t[0].name),t[1].name&&(n.toName=t[1].name),u([n,t[0],t[1]])}))}var r=n(132),o=(r.__DEV__,n(236)),a=n(258),s=n(136),l=s.concatArray,u=s.mergeAll,c=s.map,h=n(223),f=h.encodeHTML,p=(n(231),"undefined"==typeof Uint32Array?Array:Uint32Array),d="undefined"==typeof Float64Array?Array:Float64Array,g=o.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],i(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),g.superApply(this,"init",arguments)},mergeOption:function(t){if(i(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}g.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=l(this._flatCoords,e.flatCoords),this._flatCoordsOffset=l(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t),n=e.option instanceof Array?e.option:e.getShallow("coords");return n},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],r=0;r<i;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[n+2*r],e[r][1]=this._flatCoords[n+2*r+1];return i}for(var o=this._getCoordsFromItemModel(t),r=0;r<o.length;r++)e[r]=e[r]||[],e[r][0]=o[r][0],e[r][1]=o[r][1];return o.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"==typeof t[0]){for(var n=t.length,i=new p(n),r=new d(n),o=0,a=0,s=0,l=0;l<n;){s++;var u=t[l++];i[a++]=o+e,i[a++]=u;for(var c=0;c<u;c++){var h=t[l++],f=t[l++];r[o++]=h,r[o++]=f}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,a),flatCoords:r,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,e){var n=new a(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var o=t.value;return null!=o?o instanceof Array?o[r]:o:void 0}),n},formatTooltip:function(t){var e=this.getData(),n=e.getItemModel(t),i=n.get("name");if(i)return i;var r=n.get("fromName"),o=n.get("toName"),a=[];return null!=r&&a.push(r),null!=o&&a.push(o),f(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),m=g;t.exports=m},function(t,e,n){var i=n(132),r=(i.__DEV__,n(131)),o=n(392),a=n(459),s=n(393),l=n(460),u=n(461),c=n(462),h=n(463),f=n(291),p=f.createClipPath,d=r.extendChartView({type:"lines",init:function(){},render:function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t),o=t.get("zlevel"),a=t.get("effect.trailLength"),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&a&&(l||s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)})),r.updateData(i);var u=t.get("clip",!0)&&p(t.coordinateSystem,!1,t);u?this.group.setClipPath(u):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t);r.incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData(),r=t.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var o=h.reset(t);o.progress&&o.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(t,e){var n=this._lineDraw,i=this._showEffect(e),r=!!e.get("polyline"),h=e.pipelineContext,f=h.large;return n&&i===this._hasEffet&&r===this._isPolyline&&f===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=f?new c:new o(r?i?u:l:i?a:s),this._hasEffet=i,this._isPolyline=r,this._isLargeDraw=f,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr(),n="svg"===e.painter.getType();n||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},dispose:function(){}});t.exports=d},function(t,e,n){function i(t,e,n){r.Group.call(this),this.add(this.createLine(t,e,n)),this._updateEffectSymbol(t,e)}var r=n(184),o=n(393),a=n(136),s=n(276),l=s.createSymbol,u=n(138),c=n(188),h=i.prototype;h.createLine=function(t,e,n){return new o(t,e,n)},h._updateEffectSymbol=function(t,e){var n=t.getItemModel(e),i=n.getModel("effect"),r=i.get("symbolSize"),o=i.get("symbol");a.isArray(r)||(r=[r,r]);var s=i.get("color")||t.getItemVisual(e,"color"),u=this.childAt(1);this._symbolType!==o&&(this.remove(u),u=l(o,-.5,-.5,1,1,s),u.z2=100,u.culling=!0,this.add(u)),u&&(u.setStyle("shadowColor",s),u.setStyle(i.getItemStyle(["color"])),u.attr("scale",r),u.setColor(s),u.attr("scale",r),this._symbolType=o,this._symbolScale=r,this._updateEffectAnimation(t,i,e))},h._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var r=this,o=t.getItemLayout(n),s=1e3*e.get("period"),l=e.get("loop"),u=e.get("constantSpeed"),c=a.retrieve(e.get("delay"),function(e){return e/t.count()*s/3}),h="function"==typeof c;if(i.ignore=!0,this.updateAnimationPoints(i,o),u>0&&(s=this.getLineLength(i)/u*1e3),s!==this._period||l!==this._loop){i.stopAnimation();var f=c;h&&(f=c(n)),i.__t>0&&(f=-s*i.__t),i.__t=0;var p=i.animate("",l).when(s,{__t:1}).delay(f).during(function(){r.updateSymbolPosition(i)});l||p.done(function(){r.remove(i)}),p.start()}this._period=s,this._loop=l}},h.getLineLength=function(t){return u.dist(t.__p1,t.__cp1)+u.dist(t.__cp1,t.__p2)},h.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},h.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},h.updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,r=t.__t,o=t.position,a=[o[0],o[1]],s=c.quadraticAt,l=c.quadraticDerivativeAt;o[0]=s(e[0],i[0],n[0],r),o[1]=s(e[1],i[1],n[1],r);var h=l(e[0],i[0],n[0],r),f=l(e[1],i[1],n[1],r);if(t.rotation=-Math.atan2(f,h)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==t.__lastT&&t.__lastT<t.__t){var p=1.05*u.dist(a,o);t.attr("scale",[t.scale[0],p]),1===r&&(o[0]=a[0]+(o[0]-a[0])/2,o[1]=a[1]+(o[1]-a[1])/2)}else if(1===t.__lastT){var p=2*u.dist(e,o);t.attr("scale",[t.scale[0],p])}else t.attr("scale",this._symbolScale);t.__lastT=t.__t,t.ignore=!1},h.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},a.inherits(i,r.Group);var f=i;t.exports=f},function(t,e,n){function i(t,e,n){r.Group.call(this),this._createPolyline(t,e,n)}var r=n(184),o=n(136),a=i.prototype;a._createPolyline=function(t,e,n){var i=t.getItemLayout(e),o=new r.Polyline({shape:{points:i}});this.add(o),this._updateCommonStl(t,e,n)},a.updateData=function(t,e,n){var i=t.hostModel,o=this.childAt(0),a={shape:{points:t.getItemLayout(e)}};r.updateProps(o,a,i,e),this._updateCommonStl(t,e,n)},a._updateCommonStl=function(t,e,n){var i=this.childAt(0),a=t.getItemModel(e),s=t.getItemVisual(e,"color"),l=n&&n.lineStyle,u=n&&n.hoverLineStyle;n&&!t.hasItemOption||(l=a.getModel("lineStyle").getLineStyle(),u=a.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(o.defaults({strokeNoScale:!0,fill:"none",stroke:s},l)),i.hoverStyle=u,r.setHoverStyle(this)},a.updateLayout=function(t,e){var n=this.childAt(0);n.setShape("points",t.getItemLayout(e))},o.inherits(i,r.Group);var s=i;t.exports=s},function(t,e,n){function i(t,e,n){a.call(this,t,e,n),this._lastFrame=0,this._lastFramePercent=0}var r=n(460),o=n(136),a=n(459),s=n(138),l=i.prototype;l.createLine=function(t,e,n){return new r(t,e,n)},l.updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,r=1;r<e.length;r++){var o=e[r-1],a=e[r];i+=s.dist(o,a),n.push(i)}if(0!==i){for(var r=0;r<n.length;r++)n[r]/=i;this._offsets=n,this._length=i}},l.getLineLength=function(t){return this._length},l.updateSymbolPosition=function(t){var e=t.__t,n=this._points,i=this._offsets,r=n.length;if(i){var o,a=this._lastFrame;if(e<this._lastFramePercent){var l=Math.min(a+1,r-1);for(o=l;o>=0&&!(i[o]<=e);o--);o=Math.min(o,r-2)}else{for(var o=a;o<r&&!(i[o]>e);o++);o=Math.min(o-1,r-2)}s.lerp(t.position,n[o],n[o+1],(e-i[o])/(i[o+1]-i[o]));var u=n[o+1][0]-n[o][0],c=n[o+1][1]-n[o][1];t.rotation=-Math.atan2(c,u)-Math.PI/2,this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},o.inherits(i,a);var u=i;t.exports=u},function(t,e,n){function i(){this.group=new r.Group}var r=n(184),o=n(217),a=n(191),s=n(193),l=r.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(t,e){var n=e.segs,i=e.curveness;if(e.polyline)for(var r=0;r<n.length;){var o=n[r++];if(o>0){t.moveTo(n[r++],n[r++]);for(var a=1;a<o;a++)t.lineTo(n[r++],n[r++])}}else for(var r=0;r<n.length;){var s=n[r++],l=n[r++],u=n[r++],c=n[r++];if(t.moveTo(s,l),i>0){var h=(s+u)/2-(l-c)*i,f=(l+c)/2-(u-s)*i;t.quadraticCurveTo(h,f,u,c)}else t.lineTo(u,c)}},findDataIndex:function(t,e){var n=this.shape,i=n.segs,r=n.curveness;if(n.polyline)for(var o=0,l=0;l<i.length;){var u=i[l++];if(u>0)for(var c=i[l++],h=i[l++],f=1;f<u;f++){var p=i[l++],d=i[l++];if(a.containStroke(c,h,p,d))return o}o++}else for(var o=0,l=0;l<i.length;){var c=i[l++],h=i[l++],p=i[l++],d=i[l++];if(r>0){var g=(c+p)/2-(h-d)*r,m=(h+d)/2-(p-c)*r;if(s.containStroke(c,h,g,m,p,d))return o}else if(a.containStroke(c,h,p,d))return o;o++}return-1}}),u=i.prototype;u.isPersistent=function(){return!this._incremental},u.updateData=function(t){this.group.removeAll();var e=new l({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},u.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>5e5?(this._incremental||(this._incremental=new o({silent:!0})),this.group.add(this._incremental)):this._incremental=null},u.incrementalUpdate=function(t,e){var n=new l;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},u.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},u._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var r=e.getVisual("color");r&&t.setStyle("stroke",r),t.setStyle("fill"),n||(t.seriesIndex=i.seriesIndex,
t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>0&&(t.dataIndex=n+t.__startIndex)}))},u._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var c=i;t.exports=c},function(t,e,n){var i=n(242),r={seriesType:"lines",plan:i(),reset:function(t){function e(e,o){var a=[];if(r){var s,l=e.end-e.start;if(i){for(var u=0,c=e.start;c<e.end;c++)u+=t.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);for(var h=0,f=[],c=e.start;c<e.end;c++){var p=t.getLineCoords(c,a);i&&(s[h++]=p);for(var d=0;d<p;d++)f=n.dataToPoint(a[d],!1,f),s[h++]=f[0],s[h++]=f[1]}o.setLayout("linesPoints",s)}else for(var c=e.start;c<e.end;c++){var g=o.getItemModel(c),p=t.getLineCoords(c,a),m=[];if(i)for(var v=0;v<p;v++)m.push(n.dataToPoint(a[v]));else{m[0]=n.dataToPoint(a[0]),m[1]=n.dataToPoint(a[1]);var y=g.get("lineStyle.curveness");+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}o.setItemLayout(c,m)}}var n=t.coordinateSystem,i=t.get("polyline"),r=t.pipelineContext.large;return{progress:e}}};t.exports=r},function(t,e){function n(t){return t instanceof Array||(t=[t,t]),t}var i="lineStyle.opacity".split("."),r={seriesType:"lines",reset:function(t,e,r){function o(t,e){var r=t.getItemModel(e),o=n(r.getShallow("symbol",!0)),a=n(r.getShallow("symbolSize",!0)),s=r.get(i);o[0]&&t.setItemVisual(e,"fromSymbol",o[0]),o[1]&&t.setItemVisual(e,"toSymbol",o[1]),a[0]&&t.setItemVisual(e,"fromSymbolSize",a[0]),a[1]&&t.setItemVisual(e,"toSymbolSize",a[1]),t.setItemVisual(e,"opacity",s)}var a=n(t.get("symbol")),s=n(t.get("symbolSize")),l=t.getData();return l.setVisual("fromSymbol",a&&a[0]),l.setVisual("toSymbol",a&&a[1]),l.setVisual("fromSymbolSize",s&&s[0]),l.setVisual("toSymbolSize",s&&s[1]),l.setVisual("opacity",t.get(i)),{dataEach:l.hasItemOption?o:null}}};t.exports=r},function(t,e,n){n(466),n(467)},function(t,e,n){var i=n(236),r=n(257),o=n(231),a=i.extend({type:"series.heatmap",getInitialData:function(t,e){return r(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=o.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});t.exports=a},function(t,e,n){function i(t,e,n){var i=t[1]-t[0];e=c.map(e,function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}});var r=e.length,o=0;return function(t){for(var i=o;i<r;i++){var a=e[i].interval;if(a[0]<=t&&t<=a[1]){o=i;break}}if(i===r)for(var i=o-1;i>=0;i--){var a=e[i].interval;if(a[0]<=t&&t<=a[1]){o=i;break}}return i>=0&&i<r&&n[i]}}function r(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}function o(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var a=n(132),s=(a.__DEV__,n(131)),l=n(184),u=n(468),c=n(136),h=s.extendChartView({type:"heatmap",render:function(t,e,n){var i;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(i=e)})}),this.group.removeAll(),this._incrementalDisplayable=null;var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):o(r)&&this._renderOnGeo(r,t,i,n)},incrementalPrepareRender:function(t,e,n){this.group.removeAll()},incrementalRender:function(t,e,n,i){var r=e.coordinateSystem;r&&this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0)},_renderOnCartesianAndCalendar:function(t,e,n,i,r){var o,a,s=t.coordinateSystem;if("cartesian2d"===s.type){var u=s.getAxis("x"),h=s.getAxis("y");o=u.getBandWidth(),a=h.getBandWidth()}for(var f=this.group,p=t.getData(),d="itemStyle",g="emphasis.itemStyle",m="label",v="emphasis.label",y=t.getModel(d).getItemStyle(["color"]),_=t.getModel(g).getItemStyle(),x=t.getModel(m),w=t.getModel(v),b=s.type,C="cartesian2d"===b?[p.mapDimension("x"),p.mapDimension("y"),p.mapDimension("value")]:[p.mapDimension("time"),p.mapDimension("value")],S=n;S<i;S++){var M;if("cartesian2d"===b){if(isNaN(p.get(C[2],S)))continue;var E=s.dataToPoint([p.get(C[0],S),p.get(C[1],S)]);M=new l.Rect({shape:{x:Math.floor(Math.round(E[0])-o/2),y:Math.floor(Math.round(E[1])-a/2),width:Math.ceil(o),height:Math.ceil(a)},style:{fill:p.getItemVisual(S,"color"),opacity:p.getItemVisual(S,"opacity")}})}else{if(isNaN(p.get(C[1],S)))continue;M=new l.Rect({z2:1,shape:s.dataToRect([p.get(C[0],S)]).contentShape,style:{fill:p.getItemVisual(S,"color"),opacity:p.getItemVisual(S,"opacity")}})}var I=p.getItemModel(S);p.hasItemOption&&(y=I.getModel(d).getItemStyle(["color"]),_=I.getModel(g).getItemStyle(),x=I.getModel(m),w=I.getModel(v));var T=t.getRawValue(S),P="-";T&&null!=T[2]&&(P=T[2]),l.setLabelStyle(y,_,x,w,{labelFetcher:t,labelDataIndex:S,defaultText:P,isRectText:!0}),M.setStyle(y),l.setHoverStyle(M,p.hasItemOption?_:c.extend({},_)),M.incremental=r,r&&(M.useHoverLayer=!0),f.add(M),p.setItemGraphicEl(S,M)}},_renderOnGeo:function(t,e,n,o){var a=n.targetVisuals.inRange,s=n.targetVisuals.outOfRange,c=e.getData(),h=this._hmLayer||this._hmLayer||new u;h.blurSize=e.get("blurSize"),h.pointSize=e.get("pointSize"),h.minOpacity=e.get("minOpacity"),h.maxOpacity=e.get("maxOpacity");var f=t.getViewRect().clone(),p=t.getRoamTransform();f.applyTransform(p);var d=Math.max(f.x,0),g=Math.max(f.y,0),m=Math.min(f.width+f.x,o.getWidth()),v=Math.min(f.height+f.y,o.getHeight()),y=m-d,_=v-g,x=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],w=c.mapArray(x,function(e,n,i){var r=t.dataToPoint([e,n]);return r[0]-=d,r[1]-=g,r.push(i),r}),b=n.getExtent(),C="visualMap.continuous"===n.type?r(b,n.option.range):i(b,n.getPieceList(),n.option.selected);h.update(w,y,_,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:s.color.getColorMapper()},C);var S=new l.Image({style:{width:y,height:_,x:d,y:g,image:h.canvas},silent:!0});this.group.add(S)},dispose:function(){}});t.exports=h},function(t,e,n){function i(){var t=r.createCanvas();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}var r=n(136),o=256;i.prototype={update:function(t,e,n,i,r,a){var s=this._getBrush(),l=this._getGradient(t,r,"inRange"),u=this._getGradient(t,r,"outOfRange"),c=this.pointSize+this.blurSize,h=this.canvas,f=h.getContext("2d"),p=t.length;h.width=e,h.height=n;for(var d=0;d<p;++d){var g=t[d],m=g[0],v=g[1],y=g[2],_=i(y);f.globalAlpha=_,f.drawImage(s,m-c,v-c)}if(!h.width||!h.height)return h;for(var x=f.getImageData(0,0,h.width,h.height),w=x.data,b=0,C=w.length,S=this.minOpacity,M=this.maxOpacity,E=M-S;b<C;){var _=w[b+3]/256,I=4*Math.floor(_*(o-1));if(_>0){var T=a(_)?l:u;_>0&&(_=_*E+S),w[b++]=T[I],w[b++]=T[I+1],w[b++]=T[I+2],w[b++]=T[I+3]*_*256}else b+=4}return f.putImageData(x,0,0),h},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=r.createCanvas()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},_getGradient:function(t,e,n){for(var i=this._gradientPixels,r=i[n]||(i[n]=new Uint8ClampedArray(1024)),o=[0,0,0,0],a=0,s=0;s<256;s++)e[n](s/255,!0,o),r[a++]=o[0],r[a++]=o[1],r[a++]=o[2],r[a++]=o[3];return r}};var a=i;t.exports=a},function(t,e,n){var i=n(131),r=n(136);n(296),n(470),n(471);var o=n(272),a=o.layout,s=n(292);n(295),i.registerLayout(r.curry(a,"pictorialBar")),i.registerVisual(s("pictorialBar","roundRect"))},function(t,e,n){var i=n(313),r=i.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(t){return t.stack=null,r.superApply(this,"getInitialData",arguments)}}),o=r;t.exports=o},function(t,e,n){function i(t,e,n,i){var o=t.getItemLayout(e),u=n.get("symbolRepeat"),c=n.get("symbolClip"),h=n.get("symbolPosition")||"start",f=n.get("symbolRotate"),p=(f||0)*Math.PI/180||0,d=n.get("symbolPatternSize")||2,g=n.isAnimationEnabled(),m={dataIndex:e,layout:o,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:c,symbolRepeat:u,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:p,animationModel:g?n:null,hoverAnimation:g&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};r(n,u,o,i,m),a(t,e,o,u,c,m.boundingLength,m.pxSign,d,i,m),s(n,m.symbolScale,p,i,m);var v=m.symbolSize,y=n.get("symbolOffset");return I.isArray(y)&&(y=[A(y[0],v[0]),A(y[1],v[1])]),l(n,v,o,u,c,y,h,m.valueLineWidth,m.boundingLength,m.repeatCutLength,i,m),m}function r(t,e,n,i,r){var a,s=i.valueDim,l=t.get("symbolBoundingData"),u=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),c=u.toGlobalCoord(u.dataToCoord(0)),h=1-+(n[s.wh]<=0);if(I.isArray(l)){var f=[o(u,l[0])-c,o(u,l[1])-c];f[1]<f[0]&&f.reverse(),a=f[h]}else a=null!=l?o(u,l)-c:e?i.coordSysExtent[s.index][h]-c:n[s.wh];r.boundingLength=a,e&&(r.repeatCutLength=n[s.wh]),r.pxSign=a>0?1:a<0?-1:0}function o(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function a(t,e,n,i,r,o,a,s,l,u){var c=l.valueDim,h=l.categoryDim,f=Math.abs(n[h.wh]),p=t.getItemVisual(e,"symbolSize");I.isArray(p)?p=p.slice():(null==p&&(p="100%"),p=[p,p]),p[h.index]=A(p[h.index],f),p[c.index]=A(p[c.index],i?f:Math.abs(o)),u.symbolSize=p;var d=u.symbolScale=[p[0]/s,p[1]/s];d[c.index]*=(l.isHorizontal?-1:1)*a}function s(t,e,n,i,r){var o=t.get(R)||0;o&&(z.attr({scale:e.slice(),rotation:n}),z.updateTransform(),o/=z.getLineScale(),o*=e[i.valueDim.index]),r.valueLineWidth=o}function l(t,e,n,i,r,o,a,s,l,u,c,h){var f=c.categoryDim,p=c.valueDim,d=h.pxSign,g=Math.max(e[p.index]+s,0),m=g;if(i){var v=Math.abs(l),y=I.retrieve(t.get("symbolMargin"),"15%")+"",_=!1;y.lastIndexOf("!")===y.length-1&&(_=!0,y=y.slice(0,y.length-1)),y=A(y,e[p.index]);var x=Math.max(g+2*y,0),w=_?0:2*y,b=k(i),C=b?i:M((v+w)/x),S=v-C*g;y=S/2/(_?C:C-1),x=g+2*y,w=_?0:2*y,b||"fixed"===i||(C=u?M((Math.abs(u)+w)/x):0),m=C*x-w,h.repeatTimes=C,h.symbolMargin=y}var E=d*(m/2),T=h.pathPosition=[];T[f.index]=n[f.wh]/2,T[p.index]="start"===a?E:"end"===a?l-E:l/2,o&&(T[0]+=o[0],T[1]+=o[1]);var P=h.bundlePosition=[];P[f.index]=n[f.xy],P[p.index]=n[p.xy];var L=h.barRectShape=I.extend({},n);L[p.wh]=d*Math.max(Math.abs(n[p.wh]),Math.abs(T[p.index]+E)),L[f.wh]=n[f.wh];var D=h.clipShape={};D[f.xy]=-n[f.xy],D[f.wh]=c.ecSize[f.wh],D[p.xy]=0,D[p.wh]=n[p.wh]}function u(t){var e=t.symbolPatternSize,n=L(t.symbolType,-e/2,-e/2,e,e,t.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function c(t,e,n,i){function r(t){var e=h.slice(),i=n.pxSign,r=t;return("start"===n.symbolRepeatDirection?i>0:i<0)&&(r=p-1-t),e[f.index]=g*(r-p/2+.5)+h[f.index],{position:e,scale:n.symbolScale.slice(),rotation:n.rotation}}function o(){b(t,function(t){t.trigger("emphasis")})}function a(){b(t,function(t){t.trigger("normal")})}var s=t.__pictorialBundle,l=n.symbolSize,c=n.valueLineWidth,h=n.pathPosition,f=e.valueDim,p=n.repeatTimes||0,d=0,g=l[e.valueDim.index]+c+2*n.symbolMargin;for(b(t,function(t){t.__pictorialAnimationIndex=d,t.__pictorialRepeatTimes=p,d<p?C(t,null,r(d),n,i):C(t,null,{scale:[0,0]},n,i,function(){s.remove(t)}),v(t,n),d++});d<p;d++){var m=u(n);m.__pictorialAnimationIndex=d,m.__pictorialRepeatTimes=p,s.add(m);var y=r(d);C(m,{position:y.position,scale:[0,0]},{scale:y.scale,rotation:y.rotation},n,i),m.on("mouseover",o).on("mouseout",a),v(m,n)}}function h(t,e,n,i){function r(){this.trigger("emphasis")}function o(){this.trigger("normal")}var a=t.__pictorialBundle,s=t.__pictorialMainPath;s?C(s,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(s=t.__pictorialMainPath=u(n),a.add(s),C(s,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),s.on("mouseover",r).on("mouseout",o)),v(s,n)}function f(t,e,n){var i=I.extend({},e.barRectShape),r=t.__pictorialBarRect;r?C(r,null,{shape:i},e,n):(r=t.__pictorialBarRect=new T.Rect({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(r))}function p(t,e,n,i){if(n.symbolClip){var r=t.__pictorialClipPath,o=I.extend({},n.clipShape),a=e.valueDim,s=n.animationModel,l=n.dataIndex;if(r)T.updateProps(r,{shape:o},s,l);else{o[a.wh]=0,r=new T.Rect({shape:o}),t.__pictorialBundle.setClipPath(r),t.__pictorialClipPath=r;var u={};u[a.wh]=n.clipShape[a.wh],T[i?"updateProps":"initProps"](r,{shape:u},s,l)}}}function d(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=g,n.isAnimationEnabled=m,n}function g(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function m(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function v(t,e){t.off("emphasis").off("normal");var n=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function y(t,e,n,i){var r=new T.Group,o=new T.Group;return r.add(o),r.__pictorialBundle=o,o.attr("position",n.bundlePosition.slice()),n.symbolRepeat?c(r,e,n):h(r,e,n),f(r,n,i),p(r,e,n,i),r.__pictorialShapeStr=w(t,n),r.__pictorialSymbolMeta=n,r}function _(t,e,n){var i=n.animationModel,r=n.dataIndex,o=t.__pictorialBundle;T.updateProps(o,{position:n.bundlePosition.slice()},i,r),n.symbolRepeat?c(t,e,n,!0):h(t,e,n,!0),f(t,n,!0),p(t,e,n,!0)}function x(t,e,n,i){var r=i.__pictorialBarRect;r&&(r.style.text=null);var o=[];b(i,function(t){o.push(t)}),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),I.each(o,function(t){T.updateProps(t,{scale:[0,0]},n,e,function(){i.parent&&i.parent.remove(i)})}),t.setItemGraphicEl(e,null)}function w(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function b(t,e,n){I.each(t.__pictorialBundle.children(),function(i){i!==t.__pictorialBarRect&&e.call(n,i)})}function C(t,e,n,i,r,o){e&&t.attr(e),i.symbolClip&&!r?n&&t.attr(n):n&&T[r?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,o)}function S(t,e,n){var i=n.color,r=n.dataIndex,o=n.itemModel,a=o.getModel("itemStyle").getItemStyle(["color"]),s=o.getModel("emphasis.itemStyle").getItemStyle(),l=o.getShallow("cursor");b(t,function(t){t.setColor(i),t.setStyle(I.defaults({fill:i,opacity:n.opacity},a)),T.setHoverStyle(t,s),l&&(t.cursor=l),t.z2=n.z2});var u={},c=e.valueDim.posDesc[+(n.boundingLength>0)],h=t.__pictorialBarRect;O(h.style,u,o,i,e.seriesModel,r,c),T.setHoverStyle(h,u)}function M(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var E=n(131),I=n(136),T=n(184),P=n(276),L=P.createSymbol,D=n(222),A=D.parsePercent,k=D.isNumeric,N=n(315),O=N.setLabel,R=["itemStyle","borderWidth"],F=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],z=new T.Circle,B=E.extendChartView({type:"pictorialBar",render:function(t,e,n){var r=this.group,o=t.getData(),a=this._data,s=t.coordinateSystem,l=s.getBaseAxis(),u=!!l.isHorizontal(),c=s.grid.getRect(),h={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:s,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:u,valueDim:F[+u],categoryDim:F[1-u]};return o.diff(a).add(function(t){if(o.hasValue(t)){var e=d(o,t),n=i(o,t,e,h),a=y(o,h,n);o.setItemGraphicEl(t,a),r.add(a),S(a,h,n)}}).update(function(t,e){var n=a.getItemGraphicEl(e);if(!o.hasValue(t))return void r.remove(n);var s=d(o,t),l=i(o,t,s,h),u=w(o,l);n&&u!==n.__pictorialShapeStr&&(r.remove(n),o.setItemGraphicEl(t,null),n=null),n?_(n,h,l):n=y(o,h,l,!0),o.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=l,r.add(n),S(n,h,l)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&x(a,t,e.__pictorialSymbolMeta.animationModel,e)}).execute(),this._data=o,this.group},dispose:I.noop,remove:function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(e){x(i,e.dataIndex,t,e)}):n.removeAll()}}),V=B;t.exports=V},function(t,e,n){var i=n(131);n(473),n(490),n(491);var r=n(492),o=n(493),a=n(328);i.registerLayout(r),i.registerVisual(o),i.registerProcessor(a("themeRiver"))},function(t,e,n){var i=n(131);n(474),n(477),n(479),n(480),n(489),i.extendComponentView({type:"single"})},function(t,e,n){function i(t,e){var n=[];return t.eachComponent("singleAxis",function(i,o){var a=new r(i,t,e);a.name="single_"+o,a.resize(i,e),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=n&&n.coordinateSystem}}),n}var r=n(475),o=n(231);o.register("single",{create:i,dimensions:r.prototype.dimensions})},function(t,e,n){function i(t,e,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(t,e,n),this.model=t}var r=n(476),o=n(266),a=n(221),s=a.getLayoutRect,l=n(136),u=l.each;i.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:i,_init:function(t,e,n){var i=this.dimension,a=new r(i,o.createScaleByModel(t),[0,0],t.get("type"),t.get("position")),s="category"===a.type;a.onBand=s&&t.get("boundaryGap"),a.inverse=t.get("inverse"),a.orient=t.get("orient"),t.axis=a,a.model=t,a.coordinateSystem=this,this._axis=a},update:function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();u(e.mapDimension(this.dimension,!0),function(t){this._axis.scale.unionExtentFromData(e,t)},this),o.niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=s({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],r=e.reverse?1:0;e.setExtent(i[r],i[1-r]),this._updateAxisTransform(e,n?t.x:t.y)},_updateAxisTransform:function(t,e){var n=t.getExtent(),i=n[0]+n[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return i-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect(),n=this.getAxis(),i=n.orient;return"horizontal"===i?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),n=this.getRect(),i=[],r="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[r]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-r]=0===r?n.y+n.height/2:n.x+n.width/2,i}};var c=i;t.exports=c},function(t,e,n){var i=n(136),r=n(280),o=function(t,e,n,i,o){r.call(this,t,e,n),this.type=i||"value",this.position=o||"bottom",this.orient=null};o.prototype={constructor:o,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null},i.inherits(o,r);var a=o;t.exports=a},function(t,e,n){var i=n(136),r=n(306),o=n(184),a=n(478),s=n(307),l=n(310),u=l.rectCoordAxisBuildSplitArea,c=l.rectCoordAxisHandleRemove,h=["axisLine","axisTickLabel","axisName"],f=["splitArea","splitLine"],p=s.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,n,s){var l=this.group;l.removeAll();var u=this._axisGroup;this._axisGroup=new o.Group;var c=a.layout(t),d=new r(t,c);i.each(h,d.add,d),l.add(this._axisGroup),l.add(d.getGroup()),i.each(f,function(e){t.get(e+".show")&&this["_"+e](t)},this),o.groupTransition(u,this._axisGroup,t),p.superCall(this,"render",t,e,n,s)},remove:function(){c(this)},_splitLine:function(t){var e=t.axis;if(!e.scale.isBlank()){var n=t.getModel("splitLine"),i=n.getModel("lineStyle"),r=i.get("width"),a=i.get("color");a=a instanceof Array?a:[a];for(var s=t.coordinateSystem.getRect(),l=e.isHorizontal(),u=[],c=0,h=e.getTicksCoords({tickModel:n}),f=[],p=[],d=0;d<h.length;++d){var g=e.toGlobalCoord(h[d].coord);l?(f[0]=g,f[1]=s.y,p[0]=g,p[1]=s.y+s.height):(f[0]=s.x,f[1]=g,p[0]=s.x+s.width,p[1]=g);var m=c++%a.length;u[m]=u[m]||[],u[m].push(new o.Line({subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:p[0],y2:p[1]},style:{lineWidth:r},silent:!0}))}for(var d=0;d<u.length;++d)this.group.add(o.mergePath(u[d],{style:{stroke:a[d%a.length],lineDash:i.getLineDash(r),lineWidth:r},silent:!0}))}},_splitArea:function(t){u(this,this._axisGroup,t,t)}}),d=p;t.exports=d},function(t,e,n){function i(t,e){e=e||{};var n=t.coordinateSystem,i=t.axis,o={},a=i.position,s=i.orient,l=n.getRect(),u=[l.x,l.x+l.width,l.y,l.y+l.height],c={horizontal:{top:u[2],bottom:u[3]},vertical:{left:u[0],right:u[1]}};o.position=["vertical"===s?c.vertical[a]:u[0],"horizontal"===s?c.horizontal[a]:u[3]];var h={horizontal:0,vertical:1};o.rotation=Math.PI/2*h[s];var f={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=f[a],t.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),r.retrieve(e.labelInside,t.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var p=e.rotate;return null==p&&(p=t.get("axisLabel.rotate")),o.labelRotation="top"===a?-p:p,o.z2=1,o}var r=n(136);e.layout=i},function(t,e,n){function i(t,e){return e.type||(e.data?"category":"value")}var r=n(136),o=n(219),a=n(302),s=n(275),l=o.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}}),u={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}};r.merge(l.prototype,s),a("single",l,i,u);var c=l;t.exports=c},function(t,e,n){var i=n(131),r=n(136),o=n(308),a=n(481);n(483),n(484),n(486),i.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!r.isArray(e)&&(t.axisPointer.link=[e])}}),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=o.collect(t,e)}),i.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},a)},function(t,e,n){function i(t,e,n){var i=t.currTrigger,o=[t.x,t.y],g=t,m=t.dispatchAction||d.bind(n.dispatchAction,n),v=e.getComponent("axisPointer").coordSysAxesInfo;if(v){p(o)&&(o=y({seriesIndex:g.seriesIndex,dataIndex:g.dataIndex},e).point);var w=p(o),b=g.axesInfo,C=v.axesInfo,S="leave"===i||p(o),M={},E={},I={list:[],map:{}},T={showPointer:x(a,E),showTooltip:x(s,I)};_(v.coordSysMap,function(t,e){var n=w||t.containPoint(o);_(v.coordSysAxesInfo[e],function(t,e){var i=t.axis,a=h(b,t);if(!S&&n&&(!b||a)){var s=a&&a.value;null!=s||w||(s=i.pointToData(o)),null!=s&&r(t,s,T,!1,M)}})});var P={};return _(C,function(t,e){var n=t.linkGroup;n&&!E[e]&&_(n.axesInfo,function(e,i){var r=E[i];if(e!==t&&r){var o=r.value;n.mapper&&(o=t.axis.scale.parse(n.mapper(o,f(e),f(t)))),P[t.key]=o}})}),_(P,function(t,e){r(C[e],t,T,!0,M)}),l(E,C,M),u(I,o,t,m),c(C,m,n),M}}function r(t,e,n,i,r){var a=t.axis;if(!a.scale.isBlank()&&a.containData(e)){if(!t.involveSeries)return void n.showPointer(t,e);var s=o(e,t),l=s.payloadBatch,u=s.snapToValue;l[0]&&null==r.seriesIndex&&d.extend(r,l[0]),!i&&t.snap&&a.containData(u)&&null!=u&&(e=u),n.showPointer(t,e,l,r),n.showTooltip(t,s,u)}}function o(t,e){var n=e.axis,i=n.dim,r=t,o=[],a=Number.MAX_VALUE,s=-1;return _(e.seriesModels,function(e,l){var u,c,h=e.getData().mapDimension(i,!0);if(e.getAxisTooltipData){var f=e.getAxisTooltipData(h,t,n);c=f.dataIndices,u=f.nestestValue}else{if(c=e.getData().indicesOfNearest(h[0],t,"category"===n.type?.5:null),!c.length)return;u=e.getData().get(h[0],c[0])}if(null!=u&&isFinite(u)){var p=t-u,d=Math.abs(p);d<=a&&((d<a||p>=0&&s<0)&&(a=d,s=p,r=u,o.length=0),_(c,function(t){o.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:o,snapToValue:r}}function a(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function s(t,e,n,i){var r=n.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,u=v.makeKey(l),c=t.map[u];c||(c=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:r.slice()})}}function l(t,e,n){var i=n.axesInfo=[];_(e,function(e,n){var r=e.axisPointerModel.option,o=t[n];o?(!e.useHandle&&(r.status="show"),r.value=o.value,r.seriesDataIndices=(o.payloadBatch||[]).slice()):!e.useHandle&&(r.status="hide"),"show"===r.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:r.value})})}function u(t,e,n,i){if(p(e)||!t.list.length)return void i({type:"hideTip"});var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}function c(t,e,n){var i=n.getZr(),r="axisPointerLastHighlights",o=w(i)[r]||{},a=w(i)[r]={};_(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&_(n.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t})});var s=[],l=[];d.each(o,function(t,e){!a[e]&&l.push(t)}),d.each(a,function(t,e){!o[e]&&s.push(t)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}function h(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}function f(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function p(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}var d=n(136),g=n(177),m=g.makeInner,v=n(308),y=n(482),_=d.each,x=d.curry,w=m();t.exports=i},function(t,e,n){function i(t,e){var n,i=[],a=t.seriesIndex;if(null==a||!(n=e.getSeriesByIndex(a)))return{point:[]};var s=n.getData(),l=o.queryDataIndex(s,t);if(null==l||l<0||r.isArray(l))return{point:[]};var u=s.getItemGraphicEl(l),c=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(l)||[];else if(c&&c.dataToPoint)i=c.dataToPoint(s.getValues(r.map(c.dimensions,function(t){return s.mapDimension(t)}),l,!0))||[];else if(u){var h=u.getBoundingRect().clone();h.applyTransform(u.transform),i=[h.x+h.width/2,h.y+h.height/2]}return{point:i,el:u}}var r=n(136),o=n(177);t.exports=i},function(t,e,n){var i=n(131),r=i.extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),o=r;t.exports=o},function(t,e,n){var i=n(131),r=n(485),o=i.extendComponentView({type:"axisPointer",render:function(t,e,n){var i=e.getComponent("tooltip"),o=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";r.register("axisPointer",n,function(t,e,n){"none"!==o&&("leave"===t||o.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){r.unregister(e.getZr(),"axisPointer"),o.superApply(this._model,"remove",arguments)},dispose:function(t,e){r.unregister("axisPointer",e),o.superApply(this._model,"dispose",arguments)}}),a=o;t.exports=a},function(t,e,n){function i(t,e,n){if(!h.node){var i=e.getZr();d(i).records||(d(i).records={}),r(i,e);var o=d(i).records[t]||(d(i).records[t]={});o.handler=n}}function r(t,e){function n(n,i){t.on(n,function(n){var r=l(e);g(d(t).records,function(t){t&&i(t,n,r.dispatchAction)}),o(r.pendings,e)})}d(t).initialized||(d(t).initialized=!0,n("click",c.curry(s,"click")),n("mousemove",c.curry(s,"mousemove")),n("globalout",a))}function o(t,e){var n,i=t.showTip.length,r=t.hideTip.length;i?n=t.showTip[i-1]:r&&(n=t.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function a(t,e,n){t.handler("leave",null,n)}function s(t,e,n,i){e.handler(t,n,i)}function l(t){var e={showTip:[],hideTip:[]},n=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}function u(t,e){if(!h.node){var n=e.getZr(),i=(d(n).records||{})[t];i&&(d(n).records[t]=null)}}var c=n(136),h=n(135),f=n(177),p=f.makeInner,d=p(),g=c.each;e.register=i,e.unregister=u},function(t,e,n){function i(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}function r(t){return"x"===t.dim?0:1}var o=n(487),a=n(488),s=n(309),l=n(307),u=o.extend({makeElOption:function(t,e,n,r,o){var l=n.axis,u=l.grid,h=r.get("type"),f=i(u,l).getOtherAxis(l).getGlobalExtent(),p=l.toGlobalCoord(l.dataToCoord(e,!0));if(h&&"none"!==h){var d=a.buildElStyle(r),g=c[h](l,p,f);g.style=d,t.graphicKey=g.type,t.pointer=g}var m=s.layout(u.model,n);a.buildCartesianSingleLabelElOption(e,t,m,n,r,o)},getHandleTransform:function(t,e,n){var i=s.layout(e.axis.grid.model,e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:a.getTransformedPosition(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,r){var o=n.axis,a=o.grid,s=o.getGlobalExtent(!0),l=i(a,o).getOtherAxis(o).getGlobalExtent(),u="x"===o.dim?0:1,c=t.position;c[u]+=e[u],c[u]=Math.min(s[1],c[u]),c[u]=Math.max(s[0],c[u]);var h=(l[1]+l[0])/2,f=[h,h];f[u]=c[u];var p=[{verticalAlign:"middle"},{align:"center"}];return{position:c,rotation:t.rotation,cursorPoint:f,tooltipOption:p[u]}}}),c={line:function(t,e,n){var i=a.makeLineShape([e,n[0]],[e,n[1]],r(t));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(t,e,n){var i=Math.max(1,t.getBandWidth()),o=n[1]-n[0];return{type:"Rect",shape:a.makeRectShape([e-i/2,n[0]],[i,o],r(t))}}};l.registerAxisPointerClass("CartesianAxisPointer",u);var h=u;t.exports=h},function(t,e,n){function i(){}function r(t,e,n,i){o(v(n).lastProp,i)||(v(n).lastProp=i,e?h.updateProps(n,i,t):(n.stopAnimation(),n.attr(i)))}function o(t,e){if(u.isObject(t)&&u.isObject(e)){var n=!0;return u.each(e,function(e,i){n=n&&o(t[i],e)}),!!n}return t===e}function a(t,e){t[e.get("label.show")?"show":"hide"]()}function s(t){return{position:t.position.slice(),rotation:t.rotation||0}}function l(t,e,n){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=n)})}var u=n(136),c=n(179),h=n(184),f=n(308),p=n(141),d=n(243),g=n(177),m=g.makeInner,v=m(),y=u.clone,_=u.bind;
i.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,i){var o=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==o||this._lastStatus!==a){this._lastValue=o,this._lastStatus=a;var s=this._group,c=this._handle;if(!a||"hide"===a)return s&&s.hide(),void(c&&c.hide());s&&s.show(),c&&c.show();var f={};this.makeElOption(f,o,t,e,n);var p=f.graphicKey;p!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=p;var d=this._moveAnimation=this.determineAnimation(t,e);if(s){var g=u.curry(r,e,d);this.updatePointerEl(s,f,g,e),this.updateLabelEl(s,f,g,e)}else s=this._group=new h.Group,this.createPointerEl(s,f,t,e),this.createLabelEl(s,f,t,e),n.getZr().add(s);l(s,e,!0),this._renderHandle(o)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),i=t.axis,r="category"===i.type,o=e.get("snap");if(!o&&!r)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(r&&i.getBandWidth()>a)return!0;if(o){var s=f.getAxisInfo(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return n===!0},makeElOption:function(t,e,n,i,r){},createPointerEl:function(t,e,n,i){var r=e.pointer;if(r){var o=v(t).pointerEl=new h[r.type](y(e.pointer));t.add(o)}},createLabelEl:function(t,e,n,i){if(e.label){var r=v(t).labelEl=new h.Rect(y(e.label));t.add(r),a(r,i)}},updatePointerEl:function(t,e,n){var i=v(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,i){var r=v(t).labelEl;r&&(r.setStyle(e.label.style),n(r,{shape:e.label.shape,position:e.label.position}),a(r,i))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e=this._axisPointerModel,n=this._api.getZr(),i=this._handle,r=e.getModel("handle"),o=e.get("status");if(!r.get("show")||!o||"hide"===o)return i&&n.remove(i),void(this._handle=null);var a;this._handle||(a=!0,i=this._handle=h.createIcon(r.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){p.stop(t.event)},onmousedown:_(this._onHandleDragMove,this,0,0),drift:_(this._onHandleDragMove,this),ondragend:_(this._onHandleDragEnd,this)}),n.add(i)),l(i,e,!1);var s=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];i.setStyle(r.getItemStyle(null,s));var c=r.get("size");u.isArray(c)||(c=[c,c]),i.attr("scale",[c[0]/2,c[1]/2]),d.createOrUpdate(this,"_doDispatchAxisPointer",r.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,a)}},_moveHandleToValue:function(t,e){r(this._axisPointerModel,!e&&this._moveAnimation,this._handle,s(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(s(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(s(i)),v(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){var t=this._handle;if(t){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},_onHandleDragEnd:function(t){this._dragging=!1;var e=this._handle;if(e){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}},i.prototype.constructor=i,c.enableClassExtend(i);var x=i;t.exports=x},function(t,e,n){function i(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle(),e.fill=null):"shadow"===n&&(e=i.getAreaStyle(),e.stroke=null),e}function r(t,e,n,i,r){var s=n.get("value"),l=a(s,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),u=n.getModel("label"),c=g.normalizeCssArray(u.get("padding")||0),h=u.getFont(),f=d.getBoundingRect(l,h),p=r.position,m=f.width+c[1]+c[3],v=f.height+c[0]+c[2],y=r.align;"right"===y&&(p[0]-=m),"center"===y&&(p[0]-=m/2);var _=r.verticalAlign;"bottom"===_&&(p[1]-=v),"middle"===_&&(p[1]-=v/2),o(p,m,v,i);var x=u.get("backgroundColor");x&&"auto"!==x||(x=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:m,height:v,r:u.get("borderRadius")},position:p.slice(),style:{text:l,textFont:h,textFill:u.getTextColor(),textPosition:"inside",textPadding:c,fill:x,stroke:u.get("borderColor")||"transparent",lineWidth:u.get("borderWidth")||0,shadowBlur:u.get("shadowBlur"),shadowColor:u.get("shadowColor"),shadowOffsetX:u.get("shadowOffsetX"),shadowOffsetY:u.get("shadowOffsetY")},z2:10}}function o(t,e,n,i){var r=i.getWidth(),o=i.getHeight();t[0]=Math.min(t[0]+e,r)-e,t[1]=Math.min(t[1]+n,o)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function a(t,e,n,i,r){t=e.scale.parse(t);var o=e.scale.getLabel(t,{precision:r.precision}),a=r.formatter;if(a){var s={value:v.getAxisRawValue(e,t),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};f.each(i,function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,r=e&&e.getDataParams(i);r&&s.seriesData.push(r)}),f.isString(a)?o=a.replace("{value}",o):f.isFunction(a)&&(o=a(s))}return o}function s(t,e,n){var i=m.create();return m.rotate(i,i,n.rotation),m.translate(i,i,n.position),p.applyTransform([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function l(t,e,n,i,o,a){var l=y.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=o.get("label.margin"),r(e,i,o,a,{position:s(i.axis,t,n),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function u(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function c(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}function h(t,e,n,i,r,o){return{cx:t,cy:e,r0:n,r:i,startAngle:r,endAngle:o,clockwise:!0}}var f=n(136),p=n(184),d=n(171),g=n(223),m=n(149),v=n(266),y=n(306);e.buildElStyle=i,e.buildLabelElOption=r,e.getValueLabel=a,e.getTransformedPosition=s,e.buildCartesianSingleLabelElOption=l,e.makeLineShape=u,e.makeRectShape=c,e.makeSectorShape=h},function(t,e,n){function i(t){return t.isHorizontal()?0:1}function r(t,e){var n=t.getRect();return[n[u[e]],n[u[e]]+n[c[e]]]}var o=n(487),a=n(488),s=n(478),l=n(307),u=["x","y"],c=["width","height"],h=o.extend({makeElOption:function(t,e,n,o,l){var u=n.axis,c=u.coordinateSystem,h=r(c,1-i(u)),p=c.dataToPoint(e)[0],d=o.get("type");if(d&&"none"!==d){var g=a.buildElStyle(o),m=f[d](u,p,h);m.style=g,t.graphicKey=m.type,t.pointer=m}var v=s.layout(n);a.buildCartesianSingleLabelElOption(e,t,v,n,o,l)},getHandleTransform:function(t,e,n){var i=s.layout(e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:a.getTransformedPosition(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,o){var a=n.axis,s=a.coordinateSystem,l=i(a),u=r(s,l),c=t.position;c[l]+=e[l],c[l]=Math.min(u[1],c[l]),c[l]=Math.max(u[0],c[l]);var h=r(s,1-l),f=(h[1]+h[0])/2,p=[f,f];return p[l]=c[l],{position:c,rotation:t.rotation,cursorPoint:p,tooltipOption:{verticalAlign:"middle"}}}}),f={line:function(t,e,n){var r=a.makeLineShape([e,n[0]],[e,n[1]],i(t));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(t,e,n){var r=t.getBandWidth(),o=n[1]-n[0];return{type:"Rect",shape:a.makeRectShape([e-r/2,n[0]],[r,o],i(t))}}};l.registerAxisPointerClass("SingleAxisPointer",h);var p=h;t.exports=p},function(t,e,n){var i=n(236),r=n(262),o=n(260),a=o.getDimensionTypeByAxis,s=n(258),l=n(136),u=n(177),c=u.groupData,h=n(223),f=h.encodeHTML,p=n(322),d=2,g=i.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){g.superApply(this,"init",arguments),this.legendVisualProvider=new p(l.bind(this.getData,this),l.bind(this.getRawData,this))},fixData:function(t){var e=t.length,n={},i=c(t,function(t){return n.hasOwnProperty(t[0])||(n[t[0]]=-1),t[2]}),r=[];i.buckets.each(function(t,e){r.push({name:e,dataList:t})});for(var o=r.length,a=0;a<o;++a){for(var s=r[a].name,l=0;l<r[a].dataList.length;++l){var u=r[a].dataList[l][0];n[u]=a}for(var u in n)n.hasOwnProperty(u)&&n[u]!==a&&(n[u]=a,t[e]=[],t[e][0]=u,t[e][1]=0,t[e][2]=s,e++)}return t},getInitialData:function(t,e){for(var n=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0],i=n.get("type"),o=l.filter(t.data,function(t){return void 0!==t[2]}),u=this.fixData(o||[]),c=[],h=this.nameMap=l.createHashMap(),f=0,p=0;p<u.length;++p)c.push(u[p][d]),h.get(u[p][d])||(h.set(u[p][d],f),f++);var g=r(u,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:a(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),m=new s(g,this);return m.initData(u),m},getLayerSeries:function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;var r=t.mapDimension("single"),o=c(n,function(e){return t.get("name",e)}),a=[];return o.buckets.each(function(e,n){e.sort(function(e,n){return t.get(r,e)-t.get(r,n)}),a.push({name:n,indices:e})}),a},getAxisTooltipData:function(t,e,n){l.isArray(t)||(t=t?[t]:[]);for(var i,r=this.getData(),o=this.getLayerSeries(),a=[],s=o.length,u=0;u<s;++u){for(var c=Number.MAX_VALUE,h=-1,f=o[u].indices.length,p=0;p<f;++p){var d=r.get(t[0],o[u].indices[p]),g=Math.abs(d-e);g<=c&&(i=d,c=g,h=o[u].indices[p])}a.push(h)}return{dataIndices:a,nestestValue:i}},formatTooltip:function(t){var e=this.getData(),n=e.getName(t),i=e.get(e.mapDimension("value"),t);return(isNaN(i)||null==i)&&(i="-"),f(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),m=g;t.exports=m},function(t,e,n){(function(e){function i(t,e,n){var i=new s.Rect({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return s.initProps(i,{shape:{width:t.width+20,height:t.height+20}},e,n),i}var r=n(131),o=n(290),a=o.Polygon,s=n(184),l=n(136),u=l.bind,c=l.extend,h=n(259),f=r.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,n){function r(t){return t.name}function o(e,n,r){var o=this._layers;if("remove"===e)return void f.remove(o[n]);for(var u,h=[],d=[],g=p[n].indices,m=0;m<g.length;m++){var v=l.getItemLayout(g[m]),_=v.x,x=v.y0,w=v.y;h.push([_,x]),d.push([_,x+w]),u=l.getItemVisual(g[m],"color")}var b,C,S=l.getItemLayout(g[0]),M=l.getItemModel(g[m-1]),E=M.getModel("label"),I=E.get("margin");if("add"===e){var T=y[n]=new s.Group;b=new a({shape:{points:h,stackedOnPoints:d,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),C=new s.Text({style:{x:S.x-I,y:S.y0+S.y/2}}),T.add(b),T.add(C),f.add(T),b.setClipPath(i(b.getBoundingRect(),t,function(){b.removeClipPath()}))}else{var T=o[r];b=T.childAt(0),C=T.childAt(1),f.add(T),y[n]=T,s.updateProps(b,{shape:{points:h,stackedOnPoints:d}},t),s.updateProps(C,{style:{x:S.x-I,y:S.y0+S.y/2}},t)}var P=M.getModel("emphasis.itemStyle"),L=M.getModel("itemStyle");s.setTextStyle(C.style,E,{text:E.get("show")?t.getFormattedLabel(g[m-1],"normal")||l.getName(g[m-1]):null,textVerticalAlign:"middle"}),b.setStyle(c({fill:u},L.getItemStyle(["color"]))),s.setHoverStyle(b,P.getItemStyle())}var l=t.getData(),f=this.group,p=t.getLayerSeries(),d=l.getLayout("layoutInfo"),g=d.rect,m=d.boundaryGap;f.attr("position",[0,g.y+m[0]]);var v=new h(this._layersSeries||[],p,r,r),y={};v.add(u(o,this,"add")).update(u(o,this,"update")).remove(u(o,this,"remove")).execute(),this._layersSeries=p,this._layers=y},dispose:function(){}});t.exports=f}).call(e,n(128))},function(t,e,n){function i(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.coordinateSystem,i={},o=n.getRect();i.rect=o;var a=t.get("boundaryGap"),l=n.getAxis();if(i.boundaryGap=a,"horizontal"===l.orient){a[0]=s.parsePercent(a[0],o.height),a[1]=s.parsePercent(a[1],o.height);var u=o.height-a[0]-a[1];r(e,t,u)}else{a[0]=s.parsePercent(a[0],o.width),a[1]=s.parsePercent(a[1],o.width);var c=o.width-a[0]-a[1];r(e,t,c)}e.setLayout("layoutInfo",i)})}function r(t,e,n){if(t.count())for(var i,r=e.coordinateSystem,s=e.getLayerSeries(),l=t.mapDimension("single"),u=t.mapDimension("value"),c=a.map(s,function(e){return a.map(e.indices,function(e){var n=r.dataToPoint(t.get(l,e));return n[1]=t.get(u,e),n})}),h=o(c),f=h.y0,p=n/h.max,d=s.length,g=s[0].indices.length,m=0;m<g;++m){i=f[m]*p,t.setItemLayout(s[0].indices[m],{layerIndex:0,x:c[0][m][0],y0:i,y:c[0][m][1]*p});for(var v=1;v<d;++v)i+=c[v-1][m][1]*p,t.setItemLayout(s[v].indices[m],{layerIndex:v,x:c[v][m][0],y0:i,y:c[v][m][1]*p})}}function o(t){for(var e,n=t.length,i=t[0].length,r=[],o=[],a=0,s={},l=0;l<i;++l){for(var u=0,e=0;u<n;++u)e+=t[u][l][1];e>a&&(a=e),r.push(e)}for(var c=0;c<i;++c)o[c]=(a-r[c])/2;a=0;for(var h=0;h<i;++h){var f=r[h]+o[h];f>a&&(a=f)}return s.y0=o,s.max=a,s}var a=n(136),s=n(222);t.exports=i},function(t,e,n){function i(t){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.getRawData(),i=t.get("color"),r=o();e.each(function(t){r.set(e.getRawIndex(t),t)}),n.each(function(o){var a=n.getName(o),s=i[(t.nameMap.get(a)-1)%i.length];n.setItemVisual(o,"color",s);var l=r.get(o);null!=l&&e.setItemVisual(l,"color",s)})})}var r=n(136),o=r.createHashMap;t.exports=i},function(t,e,n){var i=n(131),r=n(136);n(495),n(496),n(498);var o=n(325),a=n(499),s=n(328);i.registerVisual(r.curry(o,"sunburst")),i.registerLayout(r.curry(a,"sunburst")),i.registerProcessor(r.curry(s,"sunburst"))},function(t,e,n){function i(t){var e=0;r.each(t.children,function(t){i(t);var n=t.value;r.isArray(n)&&(n=n[0]),e+=n});var n=t.value;r.isArray(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),r.isArray(t.value)?t.value[0]=n:t.value=n}var r=n(136),o=n(236),a=n(369),s=n(178),l=n(378),u=l.wrapTreePathInfo,c=o.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){function n(t){t.wrapMethod("getItemModel",function(t,e){var n=u.getNodeByDataIndex(e),i=l[n.depth];return i&&(t.parentModel=i),t})}var o={name:t.name,children:t.data};i(o);var l=r.map(t.levels||[],function(t){return new s(t,this,e)},this),u=a.createTree(o,this,n);return u.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=o.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=u(n,this),e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});t.exports=c},function(t,e,n){var i=n(136),r=n(241),o=n(497),a=n(259),s=n(223),l=s.windowOpen,u="sunburstRootToNode",c=r.extend({type:"sunburst",init:function(){},render:function(t,e,n,r){function s(t,e){function n(t){return t.getId()}function r(n,i){var r=null==n?null:t[n],o=null==i?null:e[i];l(r,o)}0===t.length&&0===e.length||new a(e,t,n,n).add(r).update(r).remove(i.curry(r,null)).execute()}function l(n,i){if(m||!n||n.getValue()||(n=null),n!==p&&i!==p)if(i&&i.piece)n?(i.piece.updateData(!1,n,"normal",t,e),f.setItemGraphicEl(n.dataIndex,i.piece)):u(i);else if(n){var r=new o(n,t,e);g.add(r),f.setItemGraphicEl(n.dataIndex,r)}}function u(t){t&&t.piece&&(g.remove(t.piece),t.piece=null)}function c(n,i){if(i.depth>0){h.virtualPiece?h.virtualPiece.updateData(!1,n,"normal",t,e):(h.virtualPiece=new o(n,t,e),g.add(h.virtualPiece)),i.piece._onclickEvent&&i.piece.off("click",i.piece._onclickEvent);var r=function(t){h._rootToNode(i.parentNode)};i.piece._onclickEvent=r,h.virtualPiece.on("click",r)}else h.virtualPiece&&(g.remove(h.virtualPiece),h.virtualPiece=null)}var h=this;this.seriesModel=t,this.api=n,this.ecModel=e;var f=t.getData(),p=f.tree.root,d=t.getViewRoot(),g=this.group,m=t.get("renderLabelForZeroData"),v=[];d.eachNode(function(t){v.push(t)});var y=this._oldChildren||[];if(s(v,y),c(p,d),r&&r.highlight&&r.highlight.piece){var _=t.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(_)}else if(r&&r.unhighlight){var x=this.virtualPiece;!x&&p.children.length&&(x=p.children[0].piece),x&&x.onNormal()}this._initEvents(),this._oldChildren=v},dispose:function(){},_initEvents:function(){var t=this,e=function(e){var n=!1,i=t.seriesModel.getViewRoot();i.eachNode(function(i){if(!n&&i.piece&&i.piece.childAt(0)===e.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)t._rootToNode(i);else if("link"===r){var o=i.getModel(),a=o.get("link");if(a){var s=o.get("target",!0)||"_blank";l(a,s)}}n=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:u,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},containPoint:function(t,e){var n=e.getData(),i=n.getItemLayout(0);if(i){var r=t[0]-i.cx,o=t[1]-i.cy,a=Math.sqrt(r*r+o*o);return a<=i.r&&a>=i.r0}}}),h=c;t.exports=h},function(t,e,n){function i(t,e,n){function i(){a.ignore=a.hoverIgnore}function r(){a.ignore=a.normalIgnore}u.Group.call(this);var o=new u.Sector({z2:h});o.seriesIndex=e.seriesIndex;var a=new u.Text({z2:f,silent:t.getModel("label").get("silent")});this.add(o),this.add(a),this.updateData(!0,t,"normal",e,n),this.on("emphasis",i).on("normal",r).on("mouseover",i).on("mouseout",r)}function r(t,e,n){var i=t.getVisual("color"),r=t.getVisual("visualMeta");r&&0!==r.length||(i=null);var a=t.getModel("itemStyle").get("color");if(a)return a;if(i)return i;if(0===t.depth)return n.option.color[0];var s=n.option.color.length;return a=n.option.color[o(t)%s]}function o(t){for(var e=t;e.depth>1;)e=e.parentNode;var n=t.getAncestors()[0];return l.indexOf(n.children,e)}function a(t,e,n){return n!==c.NONE&&(n===c.SELF?t===e:n===c.ANCESTOR?t===e||t.isAncestorOf(e):t===e||t.isDescendantOf(e))}function s(t,e,n){var i=e.getData();i.setItemVisual(t.dataIndex,"color",n)}var l=n(136),u=n(184),c={NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"},h=2,f=4,p=i.prototype;p.updateData=function(t,e,n,i,o){this.node=e,e.piece=this,i=i||this._seriesModel,o=o||this._ecModel;var a=this.childAt(0);a.dataIndex=e.dataIndex;var c=e.getModel(),h=e.getLayout(),f=l.extend({},h);f.label=null;var p=r(e,i,o);s(e,i,p);var d,g=c.getModel("itemStyle").getItemStyle();if("normal"===n)d=g;else{var m=c.getModel(n+".itemStyle").getItemStyle();d=l.merge(m,g)}d=l.defaults({lineJoin:"bevel",fill:d.fill||p},d),t?(a.setShape(f),a.shape.r=h.r0,u.updateProps(a,{shape:{r:h.r}},i,e.dataIndex),a.useStyle(d)):"object"==typeof d.fill&&d.fill.type||"object"==typeof a.style.fill&&a.style.fill.type?(u.updateProps(a,{shape:f},i),a.useStyle(d)):u.updateProps(a,{shape:f,style:d},i),this._updateLabel(i,p,n);var v=c.getShallow("cursor");if(v&&a.attr("cursor",v),t){var y=i.getShallow("highlightPolicy");this._initEvents(a,e,i,y)}this._seriesModel=i||this._seriesModel,this._ecModel=o||this._ecModel,u.setHoverStyle(this)},p.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(e.node===n?n.piece.updateData(!1,n,"emphasis"):a(n,e.node,t)?n.piece.childAt(0).trigger("highlight"):t!==c.NONE&&n.piece.childAt(0).trigger("downplay"))})},p.onNormal=function(){this.node.hostTree.root.eachNode(function(t){t.piece&&t.piece.updateData(!1,t,"normal")})},p.onHighlight=function(){this.updateData(!1,this.node,"highlight")},p.onDownplay=function(){this.updateData(!1,this.node,"downplay")},p._updateLabel=function(t,e,n){function i(t){var e=a.get(t);return null==e?o.get(t):e}var r=this.node.getModel(),o=r.getModel("label"),a="normal"===n||"emphasis"===n?o:r.getModel(n+".label"),s=r.getModel("emphasis.label"),c=a.get("formatter"),h=c?n:"normal",f=l.retrieve(t.getFormattedLabel(this.node.dataIndex,h,null,null,"label"),this.node.name);i("show")===!1&&(f="");var p=this.node.getLayout(),d=a.get("minAngle");null==d&&(d=o.get("minAngle")),d=d/180*Math.PI;var g=p.endAngle-p.startAngle;null!=d&&Math.abs(g)<d&&(f="");var m=this.childAt(1);u.setLabelStyle(m.style,m.hoverStyle||{},o,s,{defaultText:a.getShallow("show")?f:null,autoColor:e,useInsideStyle:!0});var v,y=(p.startAngle+p.endAngle)/2,_=Math.cos(y),x=Math.sin(y),w=i("position"),b=i("distance")||0,C=i("align");"outside"===w?(v=p.r+b,C=y>Math.PI/2?"right":"left"):C&&"center"!==C?"left"===C?(v=p.r0+b,y>Math.PI/2&&(C="right")):"right"===C&&(v=p.r-b,y>Math.PI/2&&(C="left")):(v=(p.r+p.r0)/2,C="center"),m.attr("style",{text:f,textAlign:C,textVerticalAlign:i("verticalAlign")||"middle",opacity:i("opacity")});var S=v*_+p.cx,M=v*x+p.cy;m.attr("position",[S,M]);var E=i("rotate"),I=0;"radial"===E?(I=-y,I<-Math.PI/2&&(I+=Math.PI)):"tangential"===E?(I=Math.PI/2-y,I>Math.PI/2?I-=Math.PI:I<-Math.PI/2&&(I+=Math.PI)):"number"==typeof E&&(I=E*Math.PI/180),m.attr("rotation",I)},p._initEvents=function(t,e,n,i){t.off("mouseover").off("mouseout").off("emphasis").off("normal");var r=this,o=function(){r.onEmphasis(i)},a=function(){r.onNormal()},s=function(){r.onDownplay()},l=function(){r.onHighlight()};n.isAnimationEnabled()&&t.on("mouseover",o).on("mouseout",a).on("emphasis",o).on("normal",a).on("downplay",s).on("highlight",l)},l.inherits(i,u.Group);var d=i;t.exports=d},function(t,e,n){var i=n(131),r=n(378),o="sunburstRootToNode";i.registerAction({type:o,update:"updateView"},function(t,e){function n(e,n){var i=r.retrieveTargetInfo(t,[o],e);if(i){var a=e.getViewRoot();a&&(t.direction=r.aboveViewRoot(a,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}e.eachComponent({mainType:"series",subType:"sunburst",query:t},n)});var a="sunburstHighlight";i.registerAction({type:a,update:"updateView"},function(t,e){function n(e,n){var i=r.retrieveTargetInfo(t,[a],e);i&&(t.highlight=i.node)}e.eachComponent({mainType:"series",subType:"sunburst",query:t},n)});var s="sunburstUnhighlight";i.registerAction({type:s,update:"updateView"},function(t,e){function n(e,n){t.unhighlight=!0}e.eachComponent({mainType:"series",subType:"sunburst",query:t},n)})},function(t,e,n){function i(t,e,n,i){e.eachSeriesByType(t,function(t){var e=t.get("center"),i=t.get("radius");l.isArray(i)||(i=[0,i]),l.isArray(e)||(e=[e,e]);var o=n.getWidth(),a=n.getHeight(),c=Math.min(o,a),h=s(e[0],o),f=s(e[1],a),p=s(i[0],c/2),d=s(i[1],c/2),g=-t.get("startAngle")*u,m=t.get("minAngle")*u,v=t.getData().tree.root,y=t.getViewRoot(),_=y.depth,x=t.get("sort");null!=x&&r(y,x);var w=0;l.each(y.children,function(t){!isNaN(t.getValue())&&w++});var b=y.getValue(),C=Math.PI/(b||w)*2,S=y.depth>0,M=y.height-(S?-1:1),E=(d-p)/(M||1),I=t.get("clockwise"),T=t.get("stillShowZeroSum"),P=I?1:-1,L=function(t,e){if(t){var n=e;if(t!==v){var i=t.getValue(),r=0===b&&T?C:i*C;r<m&&(r=m),n=e+P*r;var o=t.depth-_-(S?-1:1),a=p+E*o,u=p+E*(o+1),d=t.getModel();null!=d.get("r0")&&(a=s(d.get("r0"),c/2)),null!=d.get("r")&&(u=s(d.get("r"),c/2)),t.setLayout({angle:r,startAngle:e,endAngle:n,clockwise:I,cx:h,cy:f,r0:a,r:u})}if(t.children&&t.children.length){var g=0;l.each(t.children,function(t){g+=L(t,e+g)})}return n-e}};if(S){var D=p,A=p+E,k=2*Math.PI;v.setLayout({angle:k,startAngle:g,endAngle:g+k,clockwise:I,cx:h,cy:f,r0:D,r:A})}L(y,g)})}function r(t,e){var n=t.children||[];t.children=o(n,e),n.length&&l.each(t.children,function(t){r(t,e)})}function o(t,e){if("function"==typeof e)return t.sort(e);var n="asc"===e;return t.sort(function(t,e){var i=(t.getValue()-e.getValue())*(n?1:-1);return 0===i?(t.dataIndex-e.dataIndex)*(n?-1:1):i})}var a=n(222),s=a.parsePercent,l=n(136),u=Math.PI/180;t.exports=i},function(t,e,n){function i(t){var e,n=t.type;if("path"===n){var i=t.shape,r=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,o=v(i);e=b.makePath(o,null,r,i.layout||"center"),e.__customPathData=o}else if("image"===n)e=new b.Image({}),e.__customImagePath=t.style.image;else if("text"===n)e=new b.Text({}),e.__customText=t.style.text;else if("group"===n)e=new b.Group;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var a=b.getShapeClass(n);e=new a}return e.__customGraphicType=n,e.name=t.name,e}function r(t,e,n,i,r,a,s){var l={},u=n.style||{};if(n.shape&&(l.shape=w.clone(n.shape)),n.position&&(l.position=n.position.slice()),n.scale&&(l.scale=n.scale.slice()),n.origin&&(l.origin=n.origin.slice()),n.rotation&&(l.rotation=n.rotation),"image"===t.type&&n.style){var c=l.style={};w.each(["x","y","width","height"],function(e){o(e,c,u,t.style,a)})}if("text"===t.type&&n.style){var c=l.style={};w.each(["x","y"],function(e){o(e,c,u,t.style,a)}),!u.hasOwnProperty("textFill")&&u.fill&&(u.textFill=u.fill),!u.hasOwnProperty("textStroke")&&u.stroke&&(u.textStroke=u.stroke)}if("group"!==t.type&&(t.useStyle(u),a)){t.style.opacity=0;var h=u.opacity;null==h&&(h=1),b.initProps(t,{style:{opacity:h}},i,e)}a?t.attr(l):b.updateProps(t,l,i,e),n.hasOwnProperty("z2")&&t.attr("z2",n.z2||0),n.hasOwnProperty("silent")&&t.attr("silent",n.silent),n.hasOwnProperty("invisible")&&t.attr("invisible",n.invisible),n.hasOwnProperty("ignore")&&t.attr("ignore",n.ignore),n.hasOwnProperty("info")&&t.attr("info",n.info);var f=n.styleEmphasis;b.setElementHoverStyle(t,f),s&&b.setAsHighDownDispatcher(t,f!==!1)}function o(t,e,n,i,r){null==n[t]||r||(e[t]=n[t],n[t]=i[t])}function a(t,e,n,i){function r(t){null==t&&(t=y),P&&(_=e.getItemModel(t),x=_.getModel(H),C=_.getModel(j),M=e.getItemVisual(t,"color"),P=!1)}function o(t,n){return null==n&&(n=y),e.get(e.getDimension(t||0),n)}function a(n,i){null==i&&(i=y),r(i);var o=_.getModel(V).getItemStyle();null!=M&&(o.fill=M);var a=e.getItemVisual(i,"opacity");null!=a&&(o.opacity=a);var s=n?d(n,x):x;return b.setTextStyle(o,s,null,{autoColor:M,isRectText:!0}),o.text=s.getShallow("show")?w.retrieve2(t.getFormattedLabel(i,"normal"),S(e,i)):null,n&&g(o,n),o}function l(n,i){null==i&&(i=y),r(i);var o=_.getModel(G).getItemStyle(),a=n?d(n,C):C;return b.setTextStyle(o,a,null,{isRectText:!0},!0),o.text=a.getShallow("show")?w.retrieve3(t.getFormattedLabel(i,"emphasis"),t.getFormattedLabel(i,"normal"),S(e,i)):null,n&&g(o,n),o}function u(t,n){return null==n&&(n=y),e.getItemVisual(n,t)}function c(t){if(m.getBaseAxis){var e=m.getBaseAxis();return I(w.defaults({axis:e},t),i)}}function h(){return n.getCurrentSeriesIndices()}function f(t){return b.getFont(t,n)}var p=t.get("renderItem"),m=t.coordinateSystem,v={};m&&(v=m.prepareCustoms?m.prepareCustoms():W[m.type](m));var y,_,x,C,M,E=w.defaults({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:o,style:a,styleEmphasis:l,visual:u,barLayout:c,currentSeriesIndices:h,font:f},v.api||{}),T={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:v.coordSys,dataInsideLength:e.count(),encode:s(t.getData())},P=!0;return function(t,n){return y=t,P=!0,p&&p(w.defaults({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},T),E)}}function s(t){var e={};return w.each(t.dimensions,function(n,i){var r=t.getDimensionInfo(n);if(!r.isExtraCoord){var o=r.coordDim,a=e[o]=e[o]||[];a[r.coordDimIndex]=i}}),e}function l(t,e,n,i,r,o){return t=u(t,e,n,i,r,o,!0),t&&o.setItemGraphicEl(e,t),t}function u(t,e,n,o,a,s,l){var u=!n;n=n||{};var h=n.type,f=n.shape,p=n.style;if(t&&(u||null!=h&&h!==t.__customGraphicType||"path"===h&&y(f)&&v(f)!==t.__customPathData||"image"===h&&_(p,"image")&&p.image!==t.__customImagePath||"text"===h&&_(f,"text")&&p.text!==t.__customText)&&(a.remove(t),t=null),!u){var d=!t;return!t&&(t=i(n)),r(t,e,n,o,s,d,l),"group"===h&&c(t,e,n,o,s),a.add(t),t}}function c(t,e,n,i,r){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l="byName"===s||n.diffChildrenByName,c=s===!1;if(a||l||c){if(l)return void h({oldChildren:t.children()||[],newChildren:o||[],dataIndex:e,animatableModel:i,group:t,data:r});c&&t.removeAll();for(var f=0;f<a;f++)o[f]&&u(t.childAt(f),e,o[f],i,t,r)}}function h(t){new T(t.oldChildren,t.newChildren,f,f,t).add(p).update(p).remove(m).execute()}function f(t,e){var n=t&&t.name;return null!=n?n:U+e}function p(t,e){var n=this.context,i=null!=t?n.newChildren[t]:null,r=null!=e?n.oldChildren[e]:null;u(r,n.dataIndex,i,n.animatableModel,n.group,n.data)}function d(t,e){var n=new L({},e);return w.each(B,function(e,i){t.hasOwnProperty(e)&&(n.option[i]=t[e])}),n}function g(t,e){for(var n in e)!e.hasOwnProperty(n)&&B.hasOwnProperty(n)||(t[n]=e[n])}function m(t){var e=this.context,n=e.oldChildren[t];n&&e.group.remove(n)}function v(t){return t&&(t.pathData||t.d)}function y(t){return t&&(t.hasOwnProperty("pathData")||t.hasOwnProperty("d"))}function _(t,e){return t&&t.hasOwnProperty(e)}var x=n(132),w=(x.__DEV__,n(136)),b=n(184),C=n(287),S=C.getDefaultLabel,M=n(257),E=n(272),I=E.getLayoutOnAxis,T=n(259),P=n(236),L=n(178),D=n(241),A=n(291),k=A.createClipPath,N=n(501),O=n(502),R=n(503),F=n(504),z=n(505),B=b.CACHED_LABEL_STYLE_PROPERTIES,V=["itemStyle"],G=["emphasis","itemStyle"],H=["label"],j=["emphasis","label"],U="e\0\0",W={cartesian2d:N,geo:O,singleAxis:R,polar:F,calendar:z};P.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(t,e){return M(this.getSource(),this)},getDataParams:function(t,e,n){var i=P.prototype.getDataParams.apply(this,arguments);return n&&(i.info=n.info),i}}),D.extend({type:"custom",_data:null,render:function(t,e,n,i){var r=this._data,o=t.getData(),s=this.group,u=a(t,o,e,n);o.diff(r).add(function(e){l(null,e,u(e,i),t,s,o)}).update(function(e,n){var a=r.getItemGraphicEl(n);l(a,e,u(e,i),t,s,o)}).remove(function(t){var e=r.getItemGraphicEl(t);e&&s.remove(e)}).execute();var c=t.get("clip",!0)?k(t.coordinateSystem,!1,t):null;c?s.setClipPath(c):s.removeClipPath(),this._data=o},incrementalPrepareRender:function(t,e,n){this.group.removeAll(),this._data=null},incrementalRender:function(t,e,n,i,r){function o(t){t.isGroup||(t.incremental=!0,t.useHoverLayer=!0)}for(var s=e.getData(),u=a(e,s,n,i),c=t.start;c<t.end;c++){var h=l(null,c,u(c,r),e,this.group,s);h.traverse(o)}},dispose:w.noop,filterForExposedEvent:function(t,e,n,i){var r=e.element;if(null==r||n.name===r)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===r)return!0;return!1}})},function(t,e,n){function i(t,e){return e=e||[0,0],o.map(["x","y"],function(n,i){var r=this.getAxis(n),o=e[i],a=t[i]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a))},this)}function r(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:o.bind(i,t)}}}var o=n(136);t.exports=r},function(t,e,n){function i(t,e){return e=e||[0,0],o.map([0,1],function(n){var i=e[n],r=t[n]/2,o=[],a=[];return o[n]=i-r,a[n]=i+r,o[1-n]=a[1-n]=e[1-n],Math.abs(this.dataToPoint(o)[n]-this.dataToPoint(a)[n])},this)}function r(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",
x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:o.bind(i,t)}}}var o=n(136);t.exports=r},function(t,e,n){function i(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,r=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-r)-n.dataToCoord(i+r))}function r(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:o.bind(i,t)}}}var o=n(136);t.exports=r},function(t,e,n){function i(t,e){return o.map(["Radius","Angle"],function(n,i){var r=this["get"+n+"Axis"](),o=e[i],a=t[i]/2,s="dataTo"+n,l="category"===r.type?r.getBandWidth():Math.abs(r[s](o-a)-r[s](o+a));return"Angle"===n&&(l=l*Math.PI/180),l},this)}function r(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:r[1],r0:r[0]},api:{coord:o.bind(function(i){var r=e.dataToRadius(i[0]),o=n.dataToAngle(i[1]),a=t.coordToPoint([r,o]);return a.push(r,o*Math.PI/180),a}),size:o.bind(i,t)}}}var o=n(136);t.exports=r},function(t,e){function n(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}t.exports=n},function(t,e,n){n(295),n(486),n(480)},function(t,e,n){var i=n(131),r=n(136),o=n(508);n(509),n(515),n(517),n(480),n(519),i.registerLayout(r.curry(o,"bar")),i.extendComponentView({type:"polar"})},function(t,e,n){function i(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function r(t,e){return e.dim+t.model.componentIndex}function o(t,e,n){var o={},l=a(s.filter(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,a=n.getBaseAxis(),s=r(n,a),u=i(t),c=l[s][u],f=c.offset,p=c.width,d=n.getOtherAxis(a),g=t.coordinateSystem.cx,m=t.coordinateSystem.cy,v=t.get("barMinHeight")||0,y=t.get("barMinAngle")||0;o[u]=o[u]||[];for(var _=e.mapDimension(d.dim),x=e.mapDimension(a.dim),w=h(e,_),b="radius"!==a.dim||!t.get("roundCap",!0),C="radius"===d.dim?d.dataToRadius(0):d.dataToAngle(0),S=0,M=e.count();S<M;S++){var E=e.get(_,S),I=e.get(x,S),T=E>=0?"p":"n",P=C;w&&(o[u][I]||(o[u][I]={p:C,n:C}),P=o[u][I][T]);var L,D,A,k;if("radius"===d.dim){var N=d.dataToRadius(E)-C,O=a.dataToAngle(I);Math.abs(N)<v&&(N=(N<0?-1:1)*v),L=P,D=P+N,A=O-f,k=A-p,w&&(o[u][I][T]=D)}else{var R=d.dataToAngle(E,b)-C,F=a.dataToRadius(I);Math.abs(R)<y&&(R=(R<0?-1:1)*y),L=F+f,D=L+p,A=P,k=P+R,w&&(o[u][I][T]=k)}e.setItemLayout(S,{cx:g,cy:m,r0:L,r:D,startAngle:-A*Math.PI/180,endAngle:-k*Math.PI/180})}}},this)}function a(t,e){var n={};s.each(t,function(t,e){var o=t.getData(),a=t.coordinateSystem,s=a.getBaseAxis(),l=r(a,s),c=s.getExtent(),h="category"===s.type?s.getBandWidth():Math.abs(c[1]-c[0])/o.count(),f=n[l]||{bandWidth:h,remainedWidth:h,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},p=f.stacks;n[l]=f;var d=i(t);p[d]||f.autoWidthCount++,p[d]=p[d]||{width:0,maxWidth:0};var g=u(t.get("barWidth"),h),m=u(t.get("barMaxWidth"),h),v=t.get("barGap"),y=t.get("barCategoryGap");g&&!p[d].width&&(g=Math.min(f.remainedWidth,g),p[d].width=g,f.remainedWidth-=g),m&&(p[d].maxWidth=m),null!=v&&(f.gap=v),null!=y&&(f.categoryGap=y)});var o={};return s.each(n,function(t,e){o[e]={};var n=t.stacks,i=t.bandWidth,r=u(t.categoryGap,i),a=u(t.gap,1),l=t.remainedWidth,c=t.autoWidthCount,h=(l-r)/(c+(c-1)*a);h=Math.max(h,0),s.each(n,function(t,e){var n=t.maxWidth;n&&n<h&&(n=Math.min(n,l),t.width&&(n=Math.min(n,t.width)),l-=n,t.width=n,c--)}),h=(l-r)/(c+(c-1)*a),h=Math.max(h,0);var f,p=0;s.each(n,function(t,e){t.width||(t.width=h),f=t,p+=t.width*(1+a)}),f&&(p-=f.width*a);var d=-p/2;s.each(n,function(t,n){o[e][n]=o[e][n]||{offset:d,width:t.width},d+=t.width*(1+a)})}),o}var s=n(136),l=n(222),u=l.parsePercent,c=n(265),h=c.isDimensionStacked,f=o;t.exports=f},function(t,e,n){function i(t,e,n){var i=e.get("center"),r=n.getWidth(),o=n.getHeight();t.cx=c(i[0],r),t.cy=c(i[1],o);var a=t.getRadiusAxis(),l=Math.min(r,o)/2,u=e.get("radius");null==u?u=[0,"100%"]:s.isArray(u)||(u=[0,u]),u=[c(u[0],l),c(u[1],l)],a.inverse?a.setExtent(u[1],u[0]):a.setExtent(u[0],u[1])}function r(t,e){var n=this,i=n.getAngleAxis(),r=n.getRadiusAxis();if(i.scale.setExtent(1/0,-(1/0)),r.scale.setExtent(1/0,-(1/0)),t.eachSeries(function(t){if(t.coordinateSystem===n){var e=t.getData();s.each(e.mapDimension("radius",!0),function(t){r.scale.unionExtentFromData(e,m(e,t))}),s.each(e.mapDimension("angle",!0),function(t){i.scale.unionExtentFromData(e,m(e,t))})}}),p(i.scale,i.model),p(r.scale,r.model),"category"===i.type&&!i.onBand){var o=i.getExtent(),a=360/i.scale.count();i.inverse?o[1]+=a:o[1]-=a,i.setExtent(o[0],o[1])}}function o(t,e){if(t.type=e.get("type"),t.scale=f(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse^=e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}e.axis=t,t.model=e}var a=n(132),s=(a.__DEV__,n(136)),l=n(510),u=n(222),c=u.parsePercent,h=n(266),f=h.createScaleByModel,p=h.niceScaleExtent,d=n(231),g=n(265),m=g.getStackedDimension;n(513);var v={dimensions:l.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",function(t,a){var s=new l(a);s.update=r;var u=s.getRadiusAxis(),c=s.getAngleAxis(),h=t.findAxisModel("radiusAxis"),f=t.findAxisModel("angleAxis");o(u,h),o(c,f),i(s,t,e),n.push(s),t.coordinateSystem=s,s.model=t}),t.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}};d.register("polar",v)},function(t,e,n){var i=n(511),r=n(512),o=function(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new i,this._angleAxis=new r,this._radiusAxis.polar=this._angleAxis.polar=this};o.prototype={type:"polar",axisPointerEnabled:!0,constructor:o,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),r=i.getExtent(),o=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);i.inverse?o=a-360:a=o+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var l=Math.atan2(-n,e)/Math.PI*180,u=l<o?1:-1;l<o||l>a;)l+=360*u;return[s,l]},coordToPoint:function(t){var e=t[0],n=t[1]/180*Math.PI,i=Math.cos(n)*e+this.cx,r=-Math.sin(n)*e+this.cy;return[i,r]},getArea:function(){var t=this.getAngleAxis(),e=this.getRadiusAxis(),n=e.getExtent().slice();n[0]>n[1]&&n.reverse();var i=t.getExtent(),r=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-i[0]*r,endAngle:-i[1]*r,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,i=e-this.cy,r=n*n+i*i,o=this.r,a=this.r0;return r<=o*o&&r>=a*a}}}};var a=o;t.exports=a},function(t,e,n){function i(t,e){o.call(this,"radius",t,e),this.type="category"}var r=n(136),o=n(280);i.prototype={constructor:i,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToRadius:o.prototype.dataToCoord,radiusToData:o.prototype.coordToData},r.inherits(i,o);var a=i;t.exports=a},function(t,e,n){function i(t,e){e=e||[0,360],a.call(this,"angle",t,e),this.type="category"}var r=n(136),o=n(171),a=n(280),s=n(177),l=s.makeInner,u=l();i.prototype={constructor:i,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToAngle:a.prototype.dataToCoord,angleToData:a.prototype.coordToData,calculateCategoryInterval:function(){var t=this,e=t.getLabelModel(),n=t.scale,i=n.getExtent(),r=n.count();if(i[1]-i[0]<1)return 0;var a=i[0],s=t.dataToCoord(a+1)-t.dataToCoord(a),l=Math.abs(s),c=o.getBoundingRect(a,e.getFont(),"center","top"),h=Math.max(c.height,7),f=h/l;isNaN(f)&&(f=1/0);var p=Math.max(0,Math.floor(f)),d=u(t.model),g=d.lastAutoInterval,m=d.lastTickCount;return null!=g&&null!=m&&Math.abs(g-p)<=1&&Math.abs(m-r)<=1&&g>p?p=g:(d.lastTickCount=r,d.lastAutoInterval=p),p}},r.inherits(i,a);var c=i;t.exports=c},function(t,e,n){var i=n(131);n(514);var r=i.extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e,n=this.ecModel;return n.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});t.exports=r},function(t,e,n){function i(t,e){return e.type||(e.data?"category":"value")}var r=n(136),o=n(219),a=n(302),s=n(275),l=o.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});r.merge(l.prototype,s);var u={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};a("angle",l,i,u.angle),a("radius",l,i,u.radius)},function(t,e,n){n(509),n(516)},function(t,e,n){function i(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),r=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function r(t){var e=t.getRadiusAxis();return e.inverse?0:1}function o(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var a=n(136),s=n(184),l=n(178),u=n(307),c=n(306),h=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"],f=u.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getRadiusAxis().getExtent(),s=n.getTicksCoords(),l=n.getMinorTicksCoords(),u=a.map(n.getViewLabels(),function(t){var t=a.clone(t);return t.coord=n.dataToCoord(t.tickValue),t});o(u),o(s),a.each(h,function(e){!t.get(e+".show")||n.scale.isBlank()&&"axisLine"!==e||this["_"+e](t,i,s,l,r,u)},this)}},_axisLine:function(t,e,n,i,o){var a,l=t.getModel("axisLine.lineStyle"),u=r(e),c=u?0:1;a=0===o[c]?new s.Circle({shape:{cx:e.cx,cy:e.cy,r:o[u]},style:l.getLineStyle(),z2:1,silent:!0}):new s.Ring({shape:{cx:e.cx,cy:e.cy,r:o[u],r0:o[c]},style:l.getLineStyle(),z2:1,silent:!0}),a.style.fill=null,this.group.add(a)},_axisTick:function(t,e,n,o,l){var u=t.getModel("axisTick"),c=(u.get("inside")?-1:1)*u.get("length"),h=l[r(e)],f=a.map(n,function(t){return new s.Line({shape:i(e,[h,h+c],t.coord)})});this.group.add(s.mergePath(f,{style:a.defaults(u.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_minorTick:function(t,e,n,o,l){if(o.length){for(var u=t.getModel("axisTick"),c=t.getModel("minorTick"),h=(u.get("inside")?-1:1)*c.get("length"),f=l[r(e)],p=[],d=0;d<o.length;d++)for(var g=0;g<o[d].length;g++)p.push(new s.Line({shape:i(e,[f,f+h],o[d][g].coord)}));this.group.add(s.mergePath(p,{style:a.defaults(c.getModel("lineStyle").getLineStyle(),a.defaults(u.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(t,e,n,i,o,u){var h=t.getCategories(!0),f=t.getModel("axisLabel"),p=f.get("margin"),d=t.get("triggerEvent");a.each(u,function(n,i){var a=f,u=n.tickValue,g=o[r(e)],m=e.coordToPoint([g+p,n.coord]),v=e.cx,y=e.cy,_=Math.abs(m[0]-v)/g<.3?"center":m[0]>v?"left":"right",x=Math.abs(m[1]-y)/g<.3?"middle":m[1]>y?"top":"bottom";h&&h[u]&&h[u].textStyle&&(a=new l(h[u].textStyle,f,f.ecModel));var w=new s.Text({silent:c.isLabelSilent(t)});this.group.add(w),s.setTextStyle(w.style,a,{x:m[0],y:m[1],textFill:a.getTextColor()||t.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:_,textVerticalAlign:x}),d&&(w.eventData=c.makeAxisEventDataBase(t),w.eventData.targetType="axisLabel",w.eventData.value=n.rawLabel)},this)},_splitLine:function(t,e,n,r,o){var l=t.getModel("splitLine"),u=l.getModel("lineStyle"),c=u.get("color"),h=0;c=c instanceof Array?c:[c];for(var f=[],p=0;p<n.length;p++){var d=h++%c.length;f[d]=f[d]||[],f[d].push(new s.Line({shape:i(e,o,n[p].coord)}))}for(var p=0;p<f.length;p++)this.group.add(s.mergePath(f[p],{style:a.defaults({stroke:c[p%c.length]},u.getLineStyle()),silent:!0,z:t.get("z")}))},_minorSplitLine:function(t,e,n,r,o){if(r.length){for(var a=t.getModel("minorSplitLine"),l=a.getModel("lineStyle"),u=[],c=0;c<r.length;c++)for(var h=0;h<r[c].length;h++)u.push(new s.Line({shape:i(e,o,r[c][h].coord)}));this.group.add(s.mergePath(u,{style:l.getLineStyle(),silent:!0,z:t.get("z")}))}},_splitArea:function(t,e,n,i,r){if(n.length){var o=t.getModel("splitArea"),l=o.getModel("areaStyle"),u=l.get("color"),c=0;u=u instanceof Array?u:[u];for(var h=[],f=Math.PI/180,p=-n[0].coord*f,d=Math.min(r[0],r[1]),g=Math.max(r[0],r[1]),m=t.get("clockwise"),v=1;v<n.length;v++){var y=c++%u.length;h[y]=h[y]||[],h[y].push(new s.Sector({shape:{cx:e.cx,cy:e.cy,r0:d,r:g,startAngle:p,endAngle:-n[v].coord*f,clockwise:m},silent:!0})),p=-n[v].coord*f}for(var v=0;v<h.length;v++)this.group.add(s.mergePath(h[v],{style:a.defaults({fill:u[v%u.length]},l.getAreaStyle()),silent:!0}))}}});t.exports=f},function(t,e,n){n(509),n(518)},function(t,e,n){function i(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}var r=n(136),o=n(184),a=n(306),s=n(307),l=["axisLine","axisTickLabel","axisName"],u=["splitLine","splitArea","minorSplitLine"],c=s.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,o=n.polar,s=o.getAngleAxis(),c=n.getTicksCoords(),h=n.getMinorTicksCoords(),f=s.getExtent()[0],p=n.getExtent(),d=i(o,t,f),g=new a(t,d);r.each(l,g.add,g),this.group.add(g.getGroup()),r.each(u,function(e){t.get(e+".show")&&!n.scale.isBlank()&&this["_"+e](t,o,f,p,c,h)},this)}},_splitLine:function(t,e,n,i,a){var s=t.getModel("splitLine"),l=s.getModel("lineStyle"),u=l.get("color"),c=0;u=u instanceof Array?u:[u];for(var h=[],f=0;f<a.length;f++){var p=c++%u.length;h[p]=h[p]||[],h[p].push(new o.Circle({shape:{cx:e.cx,cy:e.cy,r:a[f].coord}}))}for(var f=0;f<h.length;f++)this.group.add(o.mergePath(h[f],{style:r.defaults({stroke:u[f%u.length],fill:null},l.getLineStyle()),silent:!0}))},_minorSplitLine:function(t,e,n,i,a,s){if(s.length){for(var l=t.getModel("minorSplitLine"),u=l.getModel("lineStyle"),c=[],h=0;h<s.length;h++)for(var f=0;f<s[h].length;f++)c.push(new o.Circle({shape:{cx:e.cx,cy:e.cy,r:s[h][f].coord}}));this.group.add(o.mergePath(c,{style:r.defaults({fill:null},u.getLineStyle()),silent:!0}))}},_splitArea:function(t,e,n,i,a){if(a.length){var s=t.getModel("splitArea"),l=s.getModel("areaStyle"),u=l.get("color"),c=0;u=u instanceof Array?u:[u];for(var h=[],f=a[0].coord,p=1;p<a.length;p++){var d=c++%u.length;h[d]=h[d]||[],h[d].push(new o.Sector({shape:{cx:e.cx,cy:e.cy,r0:f,r:a[p].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),f=a[p].coord}for(var p=0;p<h.length;p++)this.group.add(o.mergePath(h[p],{style:r.defaults({fill:u[p%u.length]},l.getAreaStyle()),silent:!0}))}}});t.exports=c},function(t,e,n){function i(t,e,n,i,r){var o=e.axis,s=o.dataToCoord(t),c=i.getAngleAxis().getExtent()[0];c=c/180*Math.PI;var h,f,p,d=i.getRadiusAxis().getExtent();if("radius"===o.dim){var g=l.create();l.rotate(g,g,c),l.translate(g,g,[i.cx,i.cy]),h=a.applyTransform([s,-r],g);var m=e.getModel("axisLabel").get("rotate")||0,v=u.innerTextLayout(c,m*Math.PI/180,-1);f=v.textAlign,p=v.textVerticalAlign}else{var y=d[1];h=i.coordToPoint([y+r,s]);var _=i.cx,x=i.cy;f=Math.abs(h[0]-_)/y<.3?"center":h[0]>_?"left":"right",p=Math.abs(h[1]-x)/y<.3?"middle":h[1]>x?"top":"bottom"}return{position:h,align:f,verticalAlign:p}}var r=n(223),o=n(487),a=n(184),s=n(488),l=n(149),u=n(306),c=n(307),h=o.extend({makeElOption:function(t,e,n,o,a){var l=n.axis;"angle"===l.dim&&(this.animationThreshold=Math.PI/18);var u,c=l.polar,h=c.getOtherAxis(l),p=h.getExtent();u=l["dataTo"+r.capitalFirst(l.dim)](e);var d=o.get("type");if(d&&"none"!==d){var g=s.buildElStyle(o),m=f[d](l,c,u,p,g);m.style=g,t.graphicKey=m.type,t.pointer=m}var v=o.get("label.margin"),y=i(e,n,o,c,v);s.buildLabelElOption(t,n,o,a,y)}}),f={line:function(t,e,n,i,r){return"angle"===t.dim?{type:"Line",shape:s.makeLineShape(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i,r){var o=Math.max(1,t.getBandWidth()),a=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:s.makeSectorShape(e.cx,e.cy,i[0],i[1],(-n-o/2)*a,(-n+o/2)*a)}:{type:"Sector",shape:s.makeSectorShape(e.cx,e.cy,n-o/2,n+o/2,0,2*Math.PI)}}};c.registerAxisPointerClass("PolarAxisPointer",h);var p=h;t.exports=p},function(t,e,n){function i(t,e){e.update="updateView",r.registerAction(e,function(e,n){var i={};return n.eachComponent({mainType:"geo",query:e},function(n){n[t](e.name);var r=n.coordinateSystem;o.each(r.regions,function(t){i[t.name]=n.isSelected(t.name)||!1})}),{selected:i,name:e.name}})}var r=n(131),o=n(136);n(521),n(360),n(522),n(358),i("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),i("select",{type:"geoSelect",event:"geoselected"}),i("unSelect",{type:"geoUnSelect",event:"geounselected"})},function(t,e,n){var i=n(136),r=n(177),o=n(219),a=n(178),s=n(321),l=n(360),u=o.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){o.prototype.init.apply(this,arguments),r.defaultEmphasis(t,"label",["show"])},optionUpdated:function(){var t=this.option,e=this;t.regions=l.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=i.reduce(t.regions||[],function(t,n){return n.name&&t.set(n.name,new a(n,e)),t},i.createHashMap()),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new a(null,this,this.ecModel)},getFormattedLabel:function(t,e){e=e||"normal";var n=this.getRegionModel(t),i=n.get(("normal"===e?"":e+".")+"label.formatter"),r={name:t};return"function"==typeof i?(r.status=e,i(r)):"string"==typeof i?i.replace("{a}",null!=t?t:""):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}});i.mixin(u,s);var c=u;t.exports=c},function(t,e,n){var i=n(353),r=n(131),o=r.extendComponentView({type:"geo",init:function(t,e){var n=new i(e,!0);this._mapDraw=n,this.group.add(n.group)},render:function(t,e,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var r=this._mapDraw;t.get("show")?r.draw(t,e,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}});t.exports=o},function(t,e,n){n(524),n(525),n(526)},function(t,e,n){function i(t,e,n){this._model=t}function r(t,e,n,i){var r=n.calendarModel,o=n.seriesModel,a=r?r.coordinateSystem:o?o.coordinateSystem:null;return a===this?a[t](i):null}var o=n(136),a=n(221),s=n(222),l=n(231),u=864e5;i.prototype={constructor:i,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){t=s.parseDate(t);var e=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var i=t.getDate();i=i<10?"0"+i:i;var r=t.getDay();return r=Math.abs((r+7-this.getFirstDayOfWeek())%7),{y:e,m:n,d:i,day:r,time:t.getTime(),formatedDate:e+"-"+n+"-"+i,date:t}},getNextNDay:function(t,e){return e=e||0,0===e?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e),this.getDateInfo(t))},update:function(t,e){function n(t,e){return null!=t[e]&&"auto"!==t[e]}this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,r=["width","height"],s=this._model.get("cellSize").slice(),l=this._model.getBoxLayoutParams(),u="horizontal"===this._orient?[i,7]:[7,i];o.each([0,1],function(t){n(s,t)&&(l[r[t]]=s[t]*u[t])});var c={width:e.getWidth(),height:e.getHeight()},h=this._rect=a.getLayoutRect(l,c);o.each([0,1],function(t){n(s,t)||(s[t]=h[r[t]]/u[t])}),this._sw=s[0],this._sh=s[1]},dataToPoint:function(t,e){o.isArray(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo,r=n.formatedDate;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+u))return[NaN,NaN];var a=n.day,s=this._getRangeInfo([i.start.time,r]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},convertToPixel:o.curry(r,"dataToPoint"),convertFromPixel:o.curry(r,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),e=t;if(o.isArray(e)&&1===e.length&&(e=e[0]),/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var n=this.getDateInfo(e),i=n.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);t=[n.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e]);var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},_getRangeInfo:function(t){t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];var e;t[0].time>t[1].time&&(e=!0,t.reverse());var n=Math.floor(t[1].time/u)-Math.floor(t[0].time/u)+1,i=new Date(t[0].time),r=i.getDate(),o=t[1].date.getDate();i.setDate(r+n-1);var a=i.getDate();if(a!==o)for(var s=i.getTime()-t[1].time>0?1:-1;(a=i.getDate())!==o&&(i.getTime()-t[1].time)*s>0;)n-=s,i.setDate(a-s);var l=Math.floor((n+t[0].day+6)/7),c=e?-l+1:l-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:l,nthWeek:c,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return!1;var r=7*(t-1)-i.fweek+e,o=new Date(i.start.time);return o.setDate(i.start.d+r),this.getDateInfo(o)}},i.dimensions=i.prototype.dimensions,i.getDimensionsInfo=i.prototype.getDimensionsInfo,i.create=function(t,e){var n=[];return t.eachComponent("calendar",function(r){var o=new i(r,t,e);n.push(o),r.coordinateSystem=o}),t.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])}),n},l.register("calendar",i);var c=i;t.exports=c},function(t,e,n){function i(t,e){var n=t.cellSize;r.isArray(n)?1===n.length&&(n[1]=n[0]):n=t.cellSize=[n,n];var i=r.map([0,1],function(t){return l(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]});u(t,e,{type:"box",ignoreSize:i})}var r=n(136),o=n(219),a=n(221),s=a.getLayoutParams,l=a.sizeCalculable,u=a.mergeLayoutParam,c=o.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,n,r){var o=s(t);c.superApply(this,"init",arguments),i(t,o)},mergeOption:function(t,e){c.superApply(this,"mergeOption",arguments),i(this.option,t)}}),h=c;t.exports=h},function(t,e,n){var i=n(131),r=n(136),o=n(184),a=n(223),s=n(222),l={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},u={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]},c=i.extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,n){var i=this.group;i.removeAll();var r=t.coordinateSystem,o=r.getRangeInfo(),a=r.getOrient();this._renderDayRect(t,o,i),this._renderLines(t,o,a,i),this._renderYearText(t,o,a,i),this._renderMonthText(t,a,i),this._renderWeekText(t,o,a,i)},_renderDayRect:function(t,e,n){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),a=i.getCellWidth(),s=i.getCellHeight(),l=e.start.time;l<=e.end.time;l=i.getNextNDay(l,1).time){var u=i.dataToRect([l],!1).tl,c=new o.Rect({shape:{x:u[0],y:u[1],width:a,height:s},cursor:"default",style:r});n.add(c)}},_renderLines:function(t,e,n,i){function r(e){o._firstDayOfMonth.push(a.getDateInfo(e)),o._firstDayPoints.push(a.dataToRect([e],!1).tl);var r=o._getLinePointsOfOneWeek(t,e,n);o._tlpoints.push(r[0]),o._blpoints.push(r[r.length-1]),l&&o._drawSplitline(r,s,i)}var o=this,a=t.coordinateSystem,s=t.getModel("splitLine.lineStyle").getLineStyle(),l=t.get("splitLine.show"),u=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,h=0;c.time<=e.end.time;h++){r(c.formatedDate),0===h&&(c=a.getDateInfo(e.start.y+"-"+e.start.m));var f=c.date;f.setMonth(f.getMonth()+1),c=a.getDateInfo(f)}r(a.getNextNDay(e.end.time,1).formatedDate),l&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,u,n),s,i),l&&this._drawSplitline(o._getEdgesPoints(o._blpoints,u,n),s,i)},_getEdgesPoints:function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],r="horizontal"===n?0:1;return i[0][r]=i[0][r]-e/2,i[1][r]=i[1][r]+e/2,i},_drawSplitline:function(t,e,n){var i=new o.Polyline({z2:20,shape:{points:t},style:e});n.add(i)},_getLinePointsOfOneWeek:function(t,e,n){var i=t.coordinateSystem;e=i.getDateInfo(e);for(var r=[],o=0;o<7;o++){var a=i.getNextNDay(e.time,o),s=i.dataToRect([a.time],!1);r[2*a.day]=s.tl,r[2*a.day+1]=s["horizontal"===n?"bl":"tr"]}return r},_formatterLabel:function(t,e){return"string"==typeof t&&t?a.formatTplSimple(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,n,i,r){e=e.slice();var o=["center","bottom"];"bottom"===i?(e[1]+=r,o=["center","top"]):"left"===i?e[0]-=r:"right"===i?(e[0]+=r,o=["center","top"]):e[1]-=r;var a=0;return"left"!==i&&"right"!==i||(a=Math.PI/2),{rotation:a,position:e,style:{textAlign:o[0],textVerticalAlign:o[1]}}},_renderYearText:function(t,e,n,i){var r=t.getModel("yearLabel");if(r.get("show")){var a=r.get("margin"),s=r.get("position");s||(s="horizontal"!==n?"top":"left");var l=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(l[0][0]+l[1][0])/2,c=(l[0][1]+l[1][1])/2,h="horizontal"===n?0:1,f={top:[u,l[h][1]],bottom:[u,l[1-h][1]],left:[l[1-h][0],c],right:[l[h][0],c]},p=e.start.y;+e.end.y>+e.start.y&&(p=p+"-"+e.end.y);var d=r.get("formatter"),g={start:e.start.y,end:e.end.y,nameMap:p},m=this._formatterLabel(d,g),v=new o.Text({z2:30});o.setTextStyle(v.style,r,{text:m}),v.attr(this._yearTextPositionControl(v,f[s],n,s,a)),i.add(v)}},_monthTextPositionControl:function(t,e,n,i,r){var o="left",a="top",s=t[0],l=t[1];return"horizontal"===n?(l+=r,e&&(o="center"),"start"===i&&(a="bottom")):(s+=r,e&&(a="middle"),"start"===i&&(o="right")),{x:s,y:l,textAlign:o,textVerticalAlign:a}},_renderMonthText:function(t,e,n){var i=t.getModel("monthLabel");if(i.get("show")){var a=i.get("nameMap"),s=i.get("margin"),u=i.get("position"),c=i.get("align"),h=[this._tlpoints,this._blpoints];r.isString(a)&&(a=l[a.toUpperCase()]||[]);var f="start"===u?0:1,p="horizontal"===e?0:1;s="start"===u?-s:s;for(var d="center"===c,g=0;g<h[f].length-1;g++){var m=h[f][g].slice(),v=this._firstDayOfMonth[g];if(d){var y=this._firstDayPoints[g];m[p]=(y[p]+h[0][g+1][p])/2}var _=i.get("formatter"),x=a[+v.m-1],w={yyyy:v.y,yy:(v.y+"").slice(2),MM:v.m,M:+v.m,nameMap:x},b=this._formatterLabel(_,w),C=new o.Text({z2:30});r.extend(o.setTextStyle(C.style,i,{text:b}),this._monthTextPositionControl(m,d,e,u,s)),n.add(C)}}},_weekTextPositionControl:function(t,e,n,i,r){var o="center",a="middle",s=t[0],l=t[1],u="start"===n;return"horizontal"===e?(s=s+i+(u?1:-1)*r[0]/2,o=u?"right":"left"):(l=l+i+(u?1:-1)*r[1]/2,a=u?"bottom":"top"),{x:s,y:l,textAlign:o,textVerticalAlign:a}},_renderWeekText:function(t,e,n,i){var a=t.getModel("dayLabel");if(a.get("show")){var l=t.coordinateSystem,c=a.get("position"),h=a.get("nameMap"),f=a.get("margin"),p=l.getFirstDayOfWeek();r.isString(h)&&(h=u[h.toUpperCase()]||[]);var d=l.getNextNDay(e.end.time,7-e.lweek).time,g=[l.getCellWidth(),l.getCellHeight()];f=s.parsePercent(f,g["horizontal"===n?0:1]),"start"===c&&(d=l.getNextNDay(e.start.time,-(7+e.fweek)).time,f=-f);for(var m=0;m<7;m++){var v=l.getNextNDay(d,m),y=l.dataToRect([v.time],!1).center,_=m;_=Math.abs((m+p)%7);var x=new o.Text({z2:30});r.extend(o.setTextStyle(x.style,a,{text:h[_]}),this._weekTextPositionControl(y,n,c,f,g)),i.add(x)}}}});t.exports=c},function(t,e,n){function i(t,e,n,i){var r=n.type,o=_.hasOwnProperty(r)?_[r]:g.getShapeClass(r),a=new o(n);e.add(a),i.set(t,a),a.__ecGraphicId=t}function r(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse(function(t){r(t,e)}),e.removeKey(t.__ecGraphicId),n.remove(t))}function o(t){return t=p.extend({},t),p.each(["id","parentId","$action","hv","bounding"].concat(m.LOCATION_PARAMS),function(e){delete t[e]}),t}function a(t,e){var n;return p.each(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}function s(t,e){var n=t.exist;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}function l(t,e,n){var i=p.extend({},n),r=t[e],o=n.$action||"merge";"merge"===o?r?(p.merge(r,i,!0),m.mergeLayoutParam(r,i,{ignoreSize:!0}),m.copyLayoutParams(n,r)):t[e]=i:"replace"===o?t[e]=i:"remove"===o&&r&&(t[e]=null)}function u(t,e){t&&(t.hv=e.hv=[a(e,["left","right"]),a(e,["top","bottom"])],
"group"===t.type&&(null==t.width&&(t.width=e.width=0),null==t.height&&(t.height=e.height=0)))}function c(t,e,n){var i=t.eventData;t.silent||t.ignore||i||(i=t.eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),i&&(i.info=t.info)}var h=n(132),f=(h.__DEV__,n(131)),p=n(136),d=n(177),g=n(184),m=n(221),v=n(222),y=v.parsePercent,_={path:null,compoundPath:null,group:g.Group,image:g.Image,text:g.Text};f.registerPreprocessor(function(t){var e=t.graphic;p.isArray(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])});var x=f.extendComponentModel({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null,x.superApply(this,"mergeOption",arguments),this.option.elements=e},optionUpdated:function(t,e){var n=this.option,i=(e?n:t).elements,r=n.elements=e?[]:n.elements,o=[];this._flatten(i,o);var a=d.mappingToExists(r,o);d.makeIdAndName(a);var c=this._elOptionsToUpdate=[];p.each(a,function(t,e){var n=t.option;n&&(c.push(n),s(t,n),l(r,e,n),u(r[e],n))},this);for(var h=r.length-1;h>=0;h--)null==r[h]?r.splice(h,1):delete r[h].$action},_flatten:function(t,e,n){p.each(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;"group"===t.type&&i&&this._flatten(i,e,t),delete t.children}},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});f.extendComponentView({type:"graphic",init:function(t,e){this._elMap=p.createHashMap(),this._lastGraphicModel},render:function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},_updateElements:function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,a=this.group;p.each(e,function(e){var s=e.$action,l=e.id,u=n.get(l),h=e.parentId,f=null!=h?n.get(h):a,p=e.style;"text"===e.type&&p&&(e.hv&&e.hv[1]&&(p.textVerticalAlign=p.textBaseline=null),!p.hasOwnProperty("textFill")&&p.fill&&(p.textFill=p.fill),!p.hasOwnProperty("textStroke")&&p.stroke&&(p.textStroke=p.stroke));var d=o(e);s&&"merge"!==s?"replace"===s?(r(u,n),i(l,f,d,n)):"remove"===s&&r(u,n):u?u.attr(d):i(l,f,d,n);var g=n.get(l);g&&(g.__ecGraphicWidthOption=e.width,g.__ecGraphicHeightOption=e.height,c(g,t,e))})}},_relocate:function(t,e){for(var n=t.option.elements,i=this.group,r=this._elMap,o=e.getWidth(),a=e.getHeight(),s=0;s<n.length;s++){var l=n[s],u=r.get(l.id);if(u&&u.isGroup){var c=u.parent,h=c===i;u.__ecGraphicWidth=y(u.__ecGraphicWidthOption,h?o:c.__ecGraphicWidth)||0,u.__ecGraphicHeight=y(u.__ecGraphicHeightOption,h?a:c.__ecGraphicHeight)||0}}for(var s=n.length-1;s>=0;s--){var l=n[s],u=r.get(l.id);if(u){var c=u.parent,f=c===i?{width:o,height:a}:{width:c.__ecGraphicWidth,height:c.__ecGraphicHeight};m.positionElement(u,l,f,null,{hv:l.hv,boundingMode:l.bounding})}}},_clear:function(){var t=this._elMap;t.each(function(e){r(e,t)}),this._elMap=p.createHashMap()},dispose:function(){this._clear()}})},function(t,e,n){n(529),n(531),n(533),n(534),n(535),n(536),n(549)},function(t,e,n){var i=n(131),r=n(136),o=n(530),a=i.extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){a.superApply(this,"optionUpdated",arguments),r.each(this.option.feature,function(t,e){var n=o.get(e);n&&r.merge(t,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}}),s=a;t.exports=s},function(t,e){function n(t,e){r[t]=e}function i(t){return r[t]}var r={};e.register=n,e.get=i},function(t,e,n){function i(t){return 0===t.indexOf("my")}var r=n(131),o=n(136),a=n(171),s=n(530),l=n(184),u=n(178),c=n(259),h=n(532),f=r.extendComponentView({type:"toolbox",render:function(t,e,n,r){function f(o,a){var l,c=y[o],h=y[a],f=m[c],d=new u(f,t,t.ecModel);if(r&&null!=r.newTitle&&r.featureName===c&&(f.title=r.newTitle),c&&!h){if(i(c))l={model:d,onclick:d.option.onclick,featureName:c};else{var g=s.get(c);if(!g)return;l=new g(d,e,n)}v[c]=l}else{if(l=v[h],!l)return;l.model=d,l.ecModel=e,l.api=n}return!c&&h?void(l.dispose&&l.dispose(e,n)):!d.get("show")||l.unusable?void(l.remove&&l.remove(e,n)):(p(d,l,c),d.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&i[t].trigger(e)},void(l.render&&l.render(d,e,n,r)))}function p(i,r,a){var s=i.getModel("iconStyle"),u=i.getModel("emphasis.iconStyle"),c=r.getIcons?r.getIcons():i.get("icon"),h=i.get("title")||{};if("string"==typeof c){var f=c,p=h;c={},h={},c[a]=f,h[a]=p}var m=i.iconPaths={};o.each(c,function(a,c){var f=l.createIcon(a,{},{x:-g/2,y:-g/2,width:g,height:g});f.setStyle(s.getItemStyle()),f.hoverStyle=u.getItemStyle(),f.setStyle({text:h[c],textAlign:u.get("textAlign"),textBorderRadius:u.get("textBorderRadius"),textPadding:u.get("textPadding"),textFill:null});var p=t.getModel("tooltip");p&&p.get("show")&&f.attr("tooltip",o.extend({content:h[c],formatter:p.get("formatter",!0)||function(){return h[c]},formatterParams:{componentType:"toolbox",name:c,title:h[c],$vars:["name","title"]},position:p.get("position",!0)||"bottom"},p.option)),l.setHoverStyle(f),t.get("showTitle")&&(f.__title=h[c],f.on("mouseover",function(){var e=u.getItemStyle(),n="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";f.setStyle({textFill:u.get("textFill")||e.fill||e.stroke||"#000",textBackgroundColor:u.get("textBackgroundColor"),textPosition:u.get("textPosition")||n})}).on("mouseout",function(){f.setStyle({textFill:null,textBackgroundColor:null})})),f.trigger(i.get("iconStatus."+c)||"normal"),d.add(f),f.on("click",o.bind(r.onclick,r,e,n,c)),m[c]=f})}var d=this.group;if(d.removeAll(),t.get("show")){var g=+t.get("itemSize"),m=t.get("feature")||{},v=this._features||(this._features={}),y=[];o.each(m,function(t,e){y.push(e)}),new c(this._featureNames||[],y).add(f).update(f).remove(o.curry(f,null)).execute(),this._featureNames=y,h.layout(d,t,n),d.add(h.makeBackground(d.getBoundingRect(),t)),d.eachChild(function(t){var e=t.__title,i=t.hoverStyle;if(i&&e){var r=a.getBoundingRect(e,a.makeFont(i)),o=t.position[0]+d.position[0],s=t.position[1]+d.position[1]+g,l=!1;s+r.height>n.getHeight()&&(i.textPosition="top",l=!0);var u=l?-5-r.height:g+8;o+r.width/2>n.getWidth()?(i.textPosition=["100%",u],i.textAlign="right"):o-r.width/2<0&&(i.textPosition=[0,u],i.textAlign="left")}})}},updateView:function(t,e,n,i){o.each(this._features,function(t){t.updateView&&t.updateView(t.model,e,n,i)})},remove:function(t,e){o.each(this._features,function(n){n.remove&&n.remove(t,e)}),this.group.removeAll()},dispose:function(t,e){o.each(this._features,function(n){n.dispose&&n.dispose(t,e)})}});t.exports=f},function(t,e,n){function i(t,e,n){var i=e.getBoxLayoutParams(),r=e.get("padding"),o={width:n.getWidth(),height:n.getHeight()},u=a(i,o,r);s(e.get("orient"),t,e.get("itemGap"),u.width,u.height),l(t,i,o,r)}function r(t,e){var n=u.normalizeCssArray(e.get("padding")),i=e.getItemStyle(["color","opacity"]);i.fill=e.get("backgroundColor");var t=new c.Rect({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1});return t}var o=n(221),a=o.getLayoutRect,s=o.box,l=o.positionElement,u=n(223),c=n(184);e.layout=i,e.makeBackground=r},function(t,e,n){function i(t){this.model=t}var r=n(135),o=n(246),a=n(530),s=o.toolbox.saveAsImage;i.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:s.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:s.lang.slice()},i.prototype.unusable=!r.canvasSupported;var l=i.prototype;l.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",o="svg"===e.getZr().painter.getType(),a=o?"svg":n.get("type",!0)||"png",s=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||r.browser.ie||r.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var l=atob(s.split(",")[1]),u=l.length,c=new Uint8Array(u);u--;)c[u]=l.charCodeAt(u);var h=new Blob([c]);window.navigator.msSaveOrOpenBlob(h,i+"."+a)}else{var f=n.get("lang"),p='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(f&&f[0]||"")+'" /></body>',d=window.open();d.document.write(p)}else{var g=document.createElement("a");g.download=i+"."+a,g.target="_blank",g.href=s;var m=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});g.dispatchEvent(m)}},a.register("saveAsImage",i);var u=i;t.exports=u},function(t,e,n){function i(t){this.model=t}var r=n(131),o=n(136),a=n(246),s=n(530),l=a.toolbox.magicType,u="__ec_magicType_stack__";i.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:o.clone(l.title),option:{},seriesIndex:{}};var c=i.prototype;c.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return o.each(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n};var h={line:function(t,e,n,i){if("bar"===t)return o.merge({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(t,e,n,i){if("line"===t)return o.merge({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(t,e,n,i){var r=n.get("stack")===u;if("line"===t||"bar"===t)return i.setIconStatus("stack",r?"normal":"emphasis"),o.merge({id:e,stack:r?"":u},i.get("option.stack")||{},!0)}},f=[["line","bar"],["stack"]];c.onclick=function(t,e,n){var i=this.model,r=i.get("seriesIndex."+n);if(h[n]){var a={series:[]},s=function(e){var r=e.subType,s=e.id,l=h[n](r,s,e,i);l&&(o.defaults(l,e.option),a.series.push(l));var u=e.coordinateSystem;if(u&&"cartesian2d"===u.type&&("line"===n||"bar"===n)){var c=u.getAxesByScale("ordinal")[0];if(c){var f=c.dim,p=f+"Axis",d=t.queryComponents({mainType:p,index:e.get(name+"Index"),id:e.get(name+"Id")})[0],g=d.componentIndex;a[p]=a[p]||[];for(var m=0;m<=g;m++)a[p][g]=a[p][g]||{};a[p][g].boundaryGap="bar"===n}}};o.each(f,function(t){o.indexOf(t,n)>=0&&o.each(t,function(t){i.setIconStatus(t,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},s);var c;if("stack"===n){var p=a.series&&a.series[0]&&a.series[0].stack===u;c=p?o.merge({stack:l.title.tiled},l.title):o.clone(l.title)}e.dispatchAction({type:"changeMagicType",currentType:n,newOption:a,newTitle:c,featureName:"magicType"})}},r.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)}),s.register("magicType",i);var p=i;t.exports=p},function(t,e,n){function i(t){var e={},n=[],i=[];return t.eachRawSeries(function(t){var r=t.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)n.push(t);else{var o=r.getBaseAxis();if("category"===o.type){var a=o.dim+"_"+o.index;e[a]||(e[a]={categoryAxis:o,valueAxis:r.getOtherAxis(o),series:[]},i.push({axisDim:o.dim,axisIndex:o.index})),e[a].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:i}}function r(t){var e=[];return g.each(t,function(t,n){var i=t.categoryAxis,r=t.valueAxis,o=r.dim,a=[" "].concat(g.map(t.series,function(t){return t.name})),s=[i.model.getCategories()];g.each(t.series,function(t){var e=t.getRawData();s.push(t.getRawData().mapArray(e.mapDimension(o),function(t){return t}))});for(var l=[a.join(w)],u=0;u<s[0].length;u++){for(var c=[],h=0;h<s.length;h++)c.push(s[h][u]);l.push(c.join(w))}e.push(l.join("\n"))}),e.join("\n\n"+x+"\n\n")}function o(t){return g.map(t,function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,function(){for(var t=arguments.length,r=arguments[t-1],o=e.getName(r),a=0;a<t-1;a++)i[a]=arguments[a];n.push((o?o+w:"")+i.join(w))}),n.join("\n")}).join("\n\n"+x+"\n\n")}function a(t){var e=i(t);return{value:g.filter([r(e.seriesGroupByCategoryAxis),o(e.other)],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+x+"\n\n"),meta:e.meta}}function s(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function l(t){var e=t.slice(0,t.indexOf("\n"));if(e.indexOf(w)>=0)return!0}function u(t){for(var e=t.split(/\n+/g),n=s(e.shift()).split(b),i=[],r=g.map(n,function(t){return{name:t,data:[]}}),o=0;o<e.length;o++){var a=s(e[o]).split(b);i.push(a.shift());for(var l=0;l<a.length;l++)r[l]&&(r[l].data[o]=a[l])}return{series:r,categories:i}}function c(t){for(var e=t.split(/\n+/g),n=s(e.shift()),i=[],r=0;r<e.length;r++){var o=s(e[r]);if(o){var a,l=o.split(b),u="",c=!1;isNaN(l[0])?(c=!0,u=l[0],l=l.slice(1),i[r]={name:u,value:[]},a=i[r].value):a=i[r]=[];for(var h=0;h<l.length;h++)a.push(+l[h]);1===a.length&&(c?i[r].value=a[0]:i[r]=a[0])}}return{name:n,data:i}}function h(t,e){var n=t.split(new RegExp("\n*"+x+"\n*","g")),i={series:[]};return g.each(n,function(t,n){if(l(t)){var r=u(t),o=e[n],a=o.axisDim+"Axis";o&&(i[a]=i[a]||[],i[a][o.axisIndex]={data:r.categories},i.series=i.series.concat(r.series))}else{var r=c(t);i.series.push(r)}}),i}function f(t){this._dom=null,this.model=t}function p(t,e){return g.map(t,function(t,n){var i=e&&e[n];if(g.isObject(i)&&!g.isArray(i)){var r=g.isObject(t)&&!g.isArray(t);r||(t={value:t});var o=null!=i.name&&null==t.name;return t=g.defaults(t,i),o&&delete t.name,t}return t})}var d=n(131),g=n(136),m=n(141),v=n(246),y=n(530),_=v.toolbox.dataView,x=new Array(60).join("-"),w="\t",b=new RegExp("["+w+"]+","g");f.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:g.clone(_.title),lang:g.clone(_.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},f.prototype.onclick=function(t,e){function n(){i.removeChild(o),C._dom=null}var i=e.getDom(),r=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=r.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=r.get("lang")||[];s.innerHTML=l[0]||r.get("title"),s.style.cssText="margin: 10px 20px;",s.style.color=r.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="display:block;width:100%;overflow:auto;";var f=r.get("optionToContent"),p=r.get("contentToOption"),d=a(t);if("function"==typeof f){var v=f(e.getOption());"string"==typeof v?u.innerHTML=v:g.isDom(v)&&u.appendChild(v)}else u.appendChild(c),c.readOnly=r.get("readOnly"),c.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",c.style.color=r.get("textColor"),c.style.borderColor=r.get("textareaBorderColor"),c.style.backgroundColor=r.get("textareaColor"),c.value=d.value;var y=d.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:0;left:0;right:0;";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",w=document.createElement("div"),b=document.createElement("div");x+=";background-color:"+r.get("buttonColor"),x+=";color:"+r.get("buttonTextColor");var C=this;m.addEventListener(w,"click",n),m.addEventListener(b,"click",function(){var t;try{t="function"==typeof p?p(u,e.getOption()):h(c.value,y)}catch(t){throw n(),new Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),n()}),w.innerHTML=l[1],b.innerHTML=l[2],b.style.cssText=x,w.style.cssText=x,!r.get("readOnly")&&_.appendChild(b),_.appendChild(w),o.appendChild(s),o.appendChild(u),o.appendChild(_),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},f.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},f.prototype.dispose=function(t,e){this.remove(t,e)},y.register("dataView",f),d.registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];g.each(t.newOption.series,function(t){var i=e.getSeriesByName(t.name)[0];if(i){var r=i.get("data");n.push({name:t.name,data:p(t.data,r)})}else n.push(g.extend({type:"scatter"},t))}),e.mergeOption(g.defaults({series:n},t.newOption))});var C=f;t.exports=C},function(t,e,n){function i(t,e,n){(this._brushController=new u(n.getZr())).on("brush",l.bind(this._onBrush,this)).mount(),this._isZoomActive}function r(t){var e={};return l.each(["xAxisIndex","yAxisIndex"],function(n){e[n]=t[n],null==e[n]&&(e[n]="all"),(e[n]===!1||"none"===e[n])&&(e[n]=[])}),e}function o(t,e){t.setIconStatus("back",h.count(e)>1?"emphasis":"normal")}function a(t,e,n,i,o){var a=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(a="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var s=new c(r(t.option),e,{include:["grid"]});n._brushController.setPanels(s.makePanelOpts(o,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(!!a&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}var s=n(131),l=n(136),u=n(429),c=n(537),h=n(538),f=n(423),p=n(246),d=n(530);n(539);var g=p.toolbox.dataZoom,m=l.each,v="\0_ec_\0toolbox-dataZoom_";i.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:l.clone(g.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var y=i.prototype;y.render=function(t,e,n,i){this.model=t,this.ecModel=e,this.api=n,a(t,e,this,i,n),o(t,e)},y.onclick=function(t,e,n){_[n].call(this)},y.remove=function(t,e){this._brushController.unmount()},y.dispose=function(t,e){this._brushController.dispose()};var _={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(h.pop(this.ecModel))}};y._onBrush=function(t,e){function n(t,e,n){var r=e.getAxis(t),s=r.model,l=i(t,s,a),u=l.findRepresentativeAxisProxy(s).getMinMaxSpan();null==u.minValueSpan&&null==u.maxValueSpan||(n=f(0,n.slice(),r.scale.getExtent(),0,u.minValueSpan,u.maxValueSpan)),l&&(o[l.id]={dataZoomId:l.id,startValue:n[0],endValue:n[1]})}function i(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){var r=n.getAxisModel(t,e.componentIndex);r&&(i=n)}),i}if(e.isEnd&&t.length){var o={},a=this.ecModel;this._brushController.updateCovers([]);var s=new c(r(this.model.option),a,{include:["grid"]});s.matchOutputRanges(t,a,function(t,e,i){if("cartesian2d"===i.type){var r=t.brushType;"rect"===r?(n("x",i,e[0]),n("y",i,e[1])):n({lineX:"x",lineY:"y"}[r],i,e)}}),h.push(a,o),this._dispatchZoomAction(o)}},y._dispatchZoomAction=function(t){var e=[];m(t,function(t,n){e.push(l.clone(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},d.register("dataZoom",i),s.registerPreprocessor(function(t){function e(t,e){if(e){var r=t+"Index",o=e[r];null==o||"all"===o||l.isArray(o)||(o=o===!1||"none"===o?[]:[o]),n(t,function(n,a){if(null==o||"all"===o||l.indexOf(o,a)!==-1){var s={type:"select",$fromToolbox:!0,filterMode:e.filterMode||"filter",id:v+t+a};s[r]=a,i.push(s)}})}}function n(e,n){var i=t[e];l.isArray(i)||(i=i?[i]:[]),m(i,n)}if(t){var i=t.dataZoom||(t.dataZoom=[]);l.isArray(i)||(t.dataZoom=i=[i]);var r=t.toolbox;if(r&&(l.isArray(r)&&(r=r[0]),r&&r.feature)){var o=r.feature.dataZoom;e("xAxis",o),e("yAxis",o)}}});var x=i;t.exports=x},function(t,e,n){function i(t,e,n){var i=this._targetInfoList=[],r={},a=o(e,t);g(w,function(t,e){(!n||!n.include||m(n.include,e)>=0)&&t(a,i,r)})}function r(t){return t[0]>t[1]&&t.reverse(),t}function o(t,e){return p.parseFinder(t,e,{includeMainTypes:_})}function a(t,e,n,i){var o=n.getAxis(["x","y"][t]),a=r(h.map([0,1],function(t){return e?o.coordToData(o.toLocalCoord(i[t])):o.toGlobalCoord(o.dataToCoord(i[t]))})),s=[];return s[t]=a,s[1-t]=[NaN,NaN],{values:a,xyMinMax:s}}function s(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function l(t,e){var n=u(t),i=u(e),r=[n[0]/i[0],n[1]/i[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}function u(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var c=n(132),h=(c.__DEV__,n(136)),f=n(184),p=n(177),d=n(430),g=h.each,m=h.indexOf,v=h.curry,y=["dataToPoint","pointToData"],_=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],x=i.prototype;x.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=S[t.brushType](0,n,e);t.__rangeOffset={offset:M[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})},x.matchOutputRanges=function(t,e,n){g(t,function(t){var i=this.findTargetInfo(t,e);i&&i!==!0&&h.each(i.coordSyses,function(i){var r=S[t.brushType](1,i,t.range);n(t,r.values,i,e)})},this)},x.setInputRanges=function(t,e){g(t,function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&n!==!0){t.panelId=n.panelId;var i=S[t.brushType](0,n.coordSys,t.coordRange),r=t.__rangeOffset;t.range=r?M[t.brushType](i.values,r.offset,l(i.xyMinMax,r.xyMinMax)):i.values}},this)},x.makePanelOpts=function(t,e){return h.map(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e&&e(n),clipPath:d.makeRectPanelClipPath(i),isTargetByCursor:d.makeRectIsTargetByCursor(i,t,n.coordSysModel),getLinearBrushOtherExtent:d.makeLinearBrushOtherExtent(i)}})},x.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return i===!0||i&&m(i.coordSyses,e.coordinateSystem)>=0},x.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=o(e,t),r=0;r<n.length;r++){var a=n[r],s=t.panelId;if(s){if(a.panelId===s)return a}else for(var r=0;r<b.length;r++)if(b[r](i,a))return a}return!0};var w={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,r=t.gridModels,o=h.createHashMap(),a={},s={};(n||i||r)&&(g(n,function(t){var e=t.axis.grid.model;o.set(e.id,e),a[e.id]=!0}),g(i,function(t){var e=t.axis.grid.model;o.set(e.id,e),s[e.id]=!0}),g(r,function(t){o.set(t.id,t),a[t.id]=!0,s[t.id]=!0}),o.each(function(t){var r=t.coordinateSystem,o=[];g(r.getCartesians(),function(t,e){(m(n,t.getAxis("x").model)>=0||m(i,t.getAxis("y").model)>=0)&&o.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:o[0],coordSyses:o,getPanelRect:C.grid,xAxisDeclared:a[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){g(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:C.geo})})}},b=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,r=t.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],C={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(f.getTransform(t)),e}},S={lineX:v(a,0),lineY:v(a,1),rect:function(t,e,n){var i=e[y[t]]([n[0][0],n[1][0]]),o=e[y[t]]([n[0][1],n[1][1]]),a=[r([i[0],o[0]]),r([i[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n){var i=[[1/0,-(1/0)],[1/0,-(1/0)]],r=h.map(n,function(n){var r=e[y[t]](n);return i[0][0]=Math.min(i[0][0],r[0]),i[1][0]=Math.min(i[1][0],r[1]),i[0][1]=Math.max(i[0][1],r[0]),i[1][1]=Math.max(i[1][1],r[1]),r});return{values:r,xyMinMax:i}}},M={lineX:v(s,0),lineY:v(s,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return h.map(t,function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]})}},E=i;t.exports=E},function(t,e,n){function i(t,e){var n=s(t);u(e,function(e,i){for(var r=n.length-1;r>=0;r--){var o=n[r];if(o[i])break}if(r<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var s=a.getPercentRange();n[0][i]={dataZoomId:i,start:s[0],end:s[1]}}}}),n.push(e)}function r(t){var e=s(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return u(n,function(t,n){for(var r=e.length-1;r>=0;r--){var t=e[r][n];if(t){i[n]=t;break}}}),i}function o(t){t[c]=null}function a(t){return s(t).length}function s(t){var e=t[c];return e||(e=t[c]=[{}]),e}var l=n(136),u=l.each,c="\0_ec_hist_store";e.push=i,e.pop=r,e.clear=o,e.count=a},function(t,e,n){n(540),n(541),n(544),n(545),n(546),n(547),n(548)},function(t,e,n){var i=n(219);i.registerSubTypeDefaulter("dataZoom",function(){return"slider"})},function(t,e,n){function i(t){var e={};return f(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function r(t,e){var n=t._rangePropMode,i=t.get("rangeMode");f([["start","startValue"],["end","endValue"]],function(t,r){var o=null!=e[t[0]],a=null!=e[t[1]];o&&!a?n[r]="percent":!o&&a?n[r]="value":i?n[r]=i[r]:o&&(n[r]="percent")})}var o=n(132),a=(o.__DEV__,n(131)),s=n(136),l=n(135),u=n(177),c=n(542),h=n(543),f=s.each,p=c.eachAxisDim,d=a.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var r=i(t);this.settledOption=r,this.mergeDefaultAndTheme(t,n),this.doInit(r)},mergeOption:function(t){var e=i(t);s.merge(this.option,t,!0),s.merge(this.settledOption,e,!0),this.doInit(e)},doInit:function(t){var e=this.option;l.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),r(this,t);var n=this.settledOption;f([["start","startValue"],["end","endValue"]],function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,n,i,r){var o=this.dependentModels[e.axis][n],a=o.__dzAxisProxy||(o.__dzAxisProxy=new h(e.name,n,this,r));t[e.name+"_"+n]=a},this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();p(function(e){var n=e.axisIndex;t[n]=u.normalizeToArray(t[n])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;p(function(n){null!=t[n.axisIndex]&&(e=!0)},this);var n=t.orient;return null==n&&e?"orient":e?void 0:(null==n&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),n=this.option,i=this.dependentModels;if(t){var r="vertical"===e?"y":"x";i[r+"Axis"].length?(n[r+"AxisIndex"]=[0],t=!1):f(i.singleAxis,function(i){t&&i.get("orient",!0)===e&&(n.singleAxisIndex=[i.componentIndex],t=!1)})}t&&p(function(e){if(t){var i=[],r=this.dependentModels[e.axis];if(r.length&&!i.length)for(var o=0,a=r.length;o<a;o++)"category"===r[o].get("type")&&i.push(o);n[e.axisIndex]=i,i.length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(t){this._isSeriesHasAllAxesTypeOf(t,"value")&&p(function(e){var i=n[e.axisIndex],r=t.get(e.axisIndex),o=t.get(e.axisId),a=t.ecModel.queryComponents({mainType:e.axis,index:r,id:o})[0];r=a.componentIndex,s.indexOf(i,r)<0&&i.push(r)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){!t&&(t=e.name)},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var n=!0;return p(function(i){var r=t.get(i.axisIndex),o=this.dependentModels[i.axis][r];o&&o.get("type")===e||(n=!1)},this),n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var t;return p(function(e){if(null==t){var n=this.get(e.axisIndex);n.length&&(t=this.dependentModels[e.axis][n[0]])}},this),t},eachTargetAxis:function(t,e){var n=this.ecModel;p(function(i){f(this.get(i.axisIndex),function(r){t.call(e,i,r,this,n)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var n=this.getAxisProxy(t,e);return n&&n.getAxisModel()},setRawRange:function(t){var e=this.option,n=this.settledOption;f([["start","startValue"],["end","endValue"]],function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])},this),r(this,t)},setCalculatedRange:function(t){var e=this.option;f(["start","startValue","end","endValue"],function(n){e[n]=t[n]})},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hostedBy(this))return e[n];for(var n in e)if(e.hasOwnProperty(n)&&!e[n].hostedBy(this))return e[n]},getRangePropMode:function(){return this._rangePropMode.slice()}}),g=d;t.exports=g},function(t,e,n){function i(t){return a.indexOf(u,t)>=0}function r(t,e){t=t.slice();var n=a.map(t,s.capitalFirst);e=(e||[]).slice();var i=a.map(e,s.capitalFirst);return function(r,o){a.each(t,function(t,a){for(var s={name:t,capital:n[a]},l=0;l<e.length;l++)s[e[l]]=t+i[l];r.call(o,s)})}}function o(t,e,n){function i(t,e){return a.indexOf(e.nodes,t)>=0}function r(t,i){var r=!1;return e(function(e){a.each(n(t,e)||[],function(t){i.records[e.name][t]&&(r=!0)})}),r}function o(t,i){i.nodes.push(t),e(function(e){a.each(n(t,e)||[],function(t){i.records[e.name][t]=!0})})}return function(n){function a(t){!i(t,s)&&r(t,s)&&(o(t,s),l=!0)}var s={nodes:[],records:{}};if(e(function(t){s.records[t.name]={}}),!n)return s;o(n,s);var l;do l=!1,t(a);while(l);return s}}var a=n(136),s=n(223),l=["x","y","z","radius","angle","single"],u=["cartesian2d","polar","singleAxis"],c=r(l,["axisIndex","axis","index","id"]);e.isCoordSupported=i,e.createNameEach=r,e.eachAxisDim=c,e.createLinkedNodesFinder=o},function(t,e,n){function i(t,e,n){var i=[1/0,-(1/0)];return h(n,function(t){var n=t.getData();n&&h(n.mapDimension(e,!0),function(t){var e=n.getApproximateExtent(t);e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1])})}),i[1]<i[0]&&(i=[NaN,NaN]),r(t,i),i}function r(t,e){var n=t.getAxisModel(),i=n.getMin(!0),r="category"===n.get("type"),o=r&&n.getCategories().length;null!=i&&"dataMin"!==i&&"function"!=typeof i?e[0]=i:r&&(e[0]=o>0?0:NaN);var a=n.getMax(!0);return null!=a&&"dataMax"!==a&&"function"!=typeof a?e[1]=a:r&&(e[1]=o>0?o-1:NaN),n.get("scale",!0)||(e[0]>0&&(e[0]=0),e[1]<0&&(e[1]=0)),
e}function o(t,e){var n=t.getAxisModel(),i=t._percentWindow,r=t._valueWindow;if(i){var o=l.getPixelPrecision(r,[0,500]);o=Math.min(o,20);var a=e||0===i[0]&&100===i[1];n.setRange(a?null:+r[0].toFixed(o),a?null:+r[1].toFixed(o))}}function a(t){var e=t._minMaxSpan={},n=t._dataZoomModel,i=t._dataExtent;h(["min","max"],function(r){var o=n.get(r+"Span"),a=n.get(r+"ValueSpan");null!=a&&(a=t.getAxisModel().axis.scale.parse(a)),null!=a?o=l.linearMap(i[0]+a,i,[0,100],!0):null!=o&&(a=l.linearMap(o,[0,100],i,!0)-i[0]),e[r+"Span"]=o,e[r+"ValueSpan"]=a})}var s=n(136),l=n(222),u=n(542),c=n(423),h=s.each,f=l.asc,p=function(t,e,n,i){this._dimName=t,this._axisIndex=e,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=i,this._dataZoomModel=n};p.prototype={constructor:p,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[],e=this.ecModel;return e.eachSeries(function(n){if(u.isCoordSupported(n.get("coordinateSystem"))){var i=this._dimName,r=e.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(r&&r.componentIndex)&&t.push(n)}},this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,n=this._dimName,i=this.ecModel,r=this.getAxisModel(),o="x"===n||"y"===n;o?(e="gridIndex",t="x"===n?"y":"x"):(e="polarIndex",t="angle"===n?"radius":"angle");var a;return i.eachComponent(t+"Axis",function(t){(t.get(e)||0)===(r.get(e)||0)&&(a=t)}),a},getMinMaxSpan:function(){return s.clone(this._minMaxSpan)},calculateDataWindow:function(t){function e(t,e,n,i,r){var a=r?"Span":"ValueSpan";c(0,t,n,"all",d["min"+a],d["max"+a]);for(var s=0;s<2;s++)e[s]=l.linearMap(t[s],n,i,!0),r&&(e[s]=o.parse(e[s]))}var n,i=this._dataExtent,r=this.getAxisModel(),o=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),s=[0,100],u=[],p=[];h(["start","end"],function(e,r){var c=t[e],h=t[e+"Value"];"percent"===a[r]?(null==c&&(c=s[r]),h=o.parse(l.linearMap(c,s,i))):(n=!0,h=null==h?i[r]:o.parse(h),c=l.linearMap(h,i,s)),p[r]=h,u[r]=c}),f(p),f(u);var d=this._minMaxSpan;return n?e(p,u,i,s,!1):e(u,p,s,i,!0),{valueWindow:p,percentWindow:u}},reset:function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=i(this,this._dimName,e),a(this);var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,o(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,o(this,!0))},filterData:function(t,e){function n(t){return t>=a[0]&&t<=a[1]}if(t===this._dataZoomModel){var i=this._dimName,r=this.getTargetSeriesModels(),o=t.get("filterMode"),a=this._valueWindow;"none"!==o&&h(r,function(t){var e=t.getData(),r=e.mapDimension(i,!0);r.length&&("weakFilter"===o?e.filterSelf(function(t){for(var n,i,o,s=0;s<r.length;s++){var l=e.get(r[s],t),u=!isNaN(l),c=l<a[0],h=l>a[1];if(u&&!c&&!h)return!0;u&&(o=!0),c&&(n=!0),h&&(i=!0)}return o&&n&&i}):h(r,function(i){if("empty"===o)t.setData(e=e.map(i,function(t){return n(t)?t:NaN}));else{var r={};r[i]=a,e.selectRange(r)}}),h(r,function(t){e.setApproximateExtent(a,t)}))})}}};var d=p;t.exports=d},function(t,e,n){var i=n(240),r=i.extend({type:"dataZoom",render:function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},getTargetCoordInfo:function(){function t(t,e,n,i){for(var r,o=0;o<n.length;o++)if(n[o].model===t){r=n[o];break}r||n.push(r={model:t,axisModels:[],coordIndex:i}),r.axisModels.push(e)}var e=this.dataZoomModel,n=this.ecModel,i={};return e.eachTargetAxis(function(e,r){var o=n.getComponent(e.axis,r);if(o){var a=o.getCoordSysModel();a&&t(a,o,i[a.mainType]||(i[a.mainType]=[]),a.componentIndex)}},this),i}});t.exports=r},function(t,e,n){var i=n(541),r=i.extend({type:"dataZoom.select"});t.exports=r},function(t,e,n){var i=n(544),r=i.extend({type:"dataZoom.select"});t.exports=r},function(t,e,n){var i=n(131),r=n(136),o=r.createHashMap,a=r.each;i.registerProcessor({getTargetSeries:function(t){var e=o();return t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,i){var r=i.getAxisProxy(t.name,n);a(r.getTargetSeriesModels(),function(t){e.set(t.uid,t)})})}),e},modifyOutputEnd:!0,overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,i){i.getAxisProxy(t.name,n).reset(i,e)}),t.eachTargetAxis(function(t,n,i){i.getAxisProxy(t.name,n).filterData(i,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy(),n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})})}})},function(t,e,n){var i=n(131),r=n(136),o=n(542);i.registerAction("dataZoom",function(t,e){var n=o.createLinkedNodesFinder(r.bind(e.eachComponent,e,"dataZoom"),o.eachAxisDim,function(t,e){return t.get(e.axisIndex)}),i=[];e.eachComponent({mainType:"dataZoom",query:t},function(t,e){i.push.apply(i,n(t).nodes)}),r.each(i,function(e,n){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})},function(t,e,n){function i(t){this.model=t}var r=n(131),o=n(538),a=n(246),s=n(530),l=a.toolbox.restore;i.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:l.title};var u=i.prototype;u.onclick=function(t,e,n){o.clear(t),e.dispatchAction({type:"restore",from:this.uid})},s.register("restore",i),r.registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var c=i;t.exports=c},function(t,e,n){var i=n(131);n(480),n(551),n(552),i.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),i.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})},function(t,e,n){var i=n(131),r=i.extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});t.exports=r},function(t,e,n){function i(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(_.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new _(n,e,e.ecModel))}return e}function r(t,e){return t.dispatchAction||c.bind(e.dispatchAction,e)}function o(t,e,n,i,r,o,a){var s=n.getOuterSize(),l=s.width,u=s.height;return null!=o&&(t+l+o>i?t-=l+o:t+=o),null!=a&&(e+u+a>r?e-=u+a:e+=a),[t,e]}function a(t,e,n,i,r){var o=n.getOuterSize(),a=o.width,s=o.height;return t=Math.min(t+a,i)-a,e=Math.min(e+s,r)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function s(t,e,n){var i=n[0],r=n[1],o=5,a=0,s=0,l=e.width,u=e.height;switch(t){case"inside":a=e.x+l/2-i/2,s=e.y+u/2-r/2;break;case"top":a=e.x+l/2-i/2,s=e.y-r-o;break;case"bottom":a=e.x+l/2-i/2,s=e.y+u+o;break;case"left":a=e.x-i-o,s=e.y+u/2-r/2;break;case"right":a=e.x+l+o,s=e.y+u/2-r/2}return[a,s]}function l(t){return"center"===t||"middle"===t}var u=n(131),c=n(136),h=n(135),f=n(553),p=n(554),d=n(223),g=n(222),m=n(184),v=n(482),y=n(221),_=n(178),x=n(485),w=n(266),b=n(488),C=n(177),S=C.getTooltipRenderMode,M=c.bind,E=c.each,I=g.parsePercent,T=new m.Rect({shape:{x:-1,y:-1,width:2,height:2}}),P=u.extendComponentView({type:"tooltip",init:function(t,e){if(!h.node){var n=t.getComponent("tooltip"),i=n.get("renderMode");this._renderMode=S(i);var r;"html"===this._renderMode?(r=new f(e.getDom(),e,{appendToBody:n.get("appendToBody",!0)}),this._newLine="<br/>"):(r=new p(e),this._newLine="\n"),this._tooltipContent=r}},render:function(t,e,n){if(!h.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel,e=t.get("triggerOn");x.register("itemTooltip",this._api,M(function(t,n,i){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(n,i):"leave"===t&&this._hide(i))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,n,i){if(i.from!==this.uid&&!h.node){var o=r(i,n);this._ticket="";var a=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var s=T;s.position=[i.x,i.y],s.update(),s.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:s},o)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},o);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var l=v(i,e),u=l.point[0],c=l.point[1];null!=u&&null!=c&&this._tryShow({offsetX:u,offsetY:c,position:i.position,target:l.el},o)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},o))}},manuallyHideTip:function(t,e,n,i){var o=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(r(i,n))},_manuallyAxisShowTip:function(t,e,n,r){var o=r.seriesIndex,a=r.dataIndex,s=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=a&&null!=s){var l=e.getSeriesByIndex(o);if(l){var u=l.getData(),t=i([u.getItemModel(a),l,(l.coordinateSystem||{}).model,t]);if("axis"===t.get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:a,position:r.position}),!0}}},_tryShow:function(t,e){var n=t.target,i=this._tooltipModel;if(i){this._lastX=t.offsetX,this._lastY=t.offsetY;var r=t.dataByCoordSys;r&&r.length?this._showAxisTooltip(r,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=c.bind(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var n=this._ecModel,r=this._tooltipModel,o=[e.offsetX,e.offsetY],a=[],s=[],l=i([e.tooltipOption,r]),u=this._renderMode,h=this._newLine,f={};E(t,function(t){E(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value,r=[];if(e&&null!=i){var o=b.getValueLabel(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt);c.each(t.seriesDataIndices,function(a){var l=n.getSeriesByIndex(a.seriesIndex),h=a.dataIndexInside,p=l&&l.getDataParams(h);if(p.axisDim=t.axisDim,p.axisIndex=t.axisIndex,p.axisType=t.axisType,p.axisId=t.axisId,p.axisValue=w.getAxisRawValue(e.axis,i),p.axisValueLabel=o,p){s.push(p);var d,g=l.formatTooltip(h,!0,null,u);if(c.isObject(g)){d=g.html;var m=g.markers;c.merge(f,m)}else d=g;r.push(d)}});var l=o;"html"!==u?a.push(r.join(h)):a.push((l?d.encodeHTML(l)+h:"")+r.join(h))}})},this),a.reverse(),a=a.join(this._newLine+this._newLine);var p=e.position;this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(l,p,o[0],o[1],this._tooltipContent,s):this._showTooltipContent(l,a,s,Math.random(),o[0],o[1],p,void 0,f)})},_showSeriesItemTooltip:function(t,e,n){var r=this._ecModel,o=e.seriesIndex,a=r.getSeriesByIndex(o),s=e.dataModel||a,l=e.dataIndex,u=e.dataType,h=s.getData(u),f=i([h.getItemModel(l),s,a&&(a.coordinateSystem||{}).model,this._tooltipModel]),p=f.get("trigger");if(null==p||"item"===p){var d,g,m=s.getDataParams(l,u),v=s.formatTooltip(l,!1,u,this._renderMode);c.isObject(v)?(d=v.html,g=v.markers):(d=v,g=null);var y="item_"+s.name+"_"+l;this._showOrMove(f,function(){this._showTooltipContent(f,d,m,y,t.offsetX,t.offsetY,t.position,t.target,g)}),n({type:"showTip",dataIndexInside:l,dataIndex:h.getRawIndex(l),seriesIndex:o,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var i=e.tooltip;if("string"==typeof i){var r=i;i={content:r,formatter:r}}var o=new _(i,this._tooltipModel,this._ecModel),a=o.get("content"),s=Math.random();this._showOrMove(o,function(){this._showTooltipContent(o,a,o.get("formatterParams")||{},s,t.offsetX,t.offsetY,t.position,e)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,n,i,r,o,a,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var u=this._tooltipContent,c=t.get("formatter");a=a||t.get("position");var h=e;if(c&&"string"==typeof c)h=d.formatTpl(c,n,!0);else if("function"==typeof c){var f=M(function(e,i){e===this._ticket&&(u.setContent(i,l,t),this._updatePosition(t,a,r,o,u,n,s))},this);this._ticket=i,h=c(n,i,f)}u.setContent(h,l,t),u.show(t),this._updatePosition(t,a,r,o,u,n,s)}},_updatePosition:function(t,e,n,i,r,u,h){var f=this._api.getWidth(),p=this._api.getHeight();e=e||t.get("position");var d=r.getSize(),g=t.get("align"),m=t.get("verticalAlign"),v=h&&h.getBoundingRect().clone();if(h&&v.applyTransform(h.transform),"function"==typeof e&&(e=e([n,i],u,r.el,v,{viewSize:[f,p],contentSize:d.slice()})),c.isArray(e))n=I(e[0],f),i=I(e[1],p);else if(c.isObject(e)){e.width=d[0],e.height=d[1];var _=y.getLayoutRect(e,{width:f,height:p});n=_.x,i=_.y,g=null,m=null}else if("string"==typeof e&&h){var x=s(e,v,d);n=x[0],i=x[1]}else{var x=o(n,i,r,f,p,g?null:20,m?null:20);n=x[0],i=x[1]}if(g&&(n-=l(g)?d[0]/2:"right"===g?d[0]:0),m&&(i-=l(m)?d[1]/2:"bottom"===m?d[1]:0),t.get("confine")){var x=a(n,i,r,f,p);n=x[0],i=x[1]}r.moveTo(n,i)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&E(e,function(e,i){var r=e.dataByAxis||{},o=t[i]||{},a=o.dataByAxis||[];n&=r.length===a.length,n&&E(r,function(t,e){var i=a[e]||{},r=t.seriesDataIndices||[],o=i.seriesDataIndices||[];n&=t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&r.length===o.length,n&&E(r,function(t,e){var i=o[e];n&=t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})})}),this._lastDataByCoordSys=t,!!n},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){h.node||(this._tooltipContent.dispose(),x.unregister("itemTooltip",e))}});t.exports=P},function(t,e,n){function i(t){var e="cubic-bezier(0.23, 1, 0.32, 1)",n="left "+t+"s "+e+",top "+t+"s "+e;return l.map(m,function(t){return t+"transition:"+n}).join(";")}function r(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont());var r=t.get("lineHeight");null==r&&(r=Math.round(3*n/2)),n&&e.push("line-height:"+r+"px");var o=t.get("textShadowColor"),a=t.get("textShadowBlur")||0,s=t.get("textShadowOffsetX")||0,l=t.get("textShadowOffsetY")||0;return a&&e.push("text-shadow:"+s+"px "+l+"px "+a+"px "+o),d(["decoration","align"],function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)}),e.join(";")}function o(t){var e=[],n=t.get("transitionDuration"),o=t.get("backgroundColor"),a=t.getModel("textStyle"),s=t.get("padding");return n&&e.push(i(n)),o&&(f.canvasSupported?e.push("background-Color:"+o):(e.push("background-Color:#"+u.toHex(o)),e.push("filter:alpha(opacity=70)"))),d(["width","color","radius"],function(n){var i="border-"+n,r=g(i),o=t.get(r);null!=o&&e.push(i+":"+o+("color"===n?"":"px"))}),e.push(r(a)),null!=s&&e.push("padding:"+p.normalizeCssArray(s).join("px ")+"px"),e.join(";")+";"}function a(t,e,n,i,r){var o=e&&e.painter;if(n){var a=o&&o.getViewportRoot();a&&h.transformLocalCoord(t,a,document.body,i,r)}else{t[0]=i,t[1]=r;var s=o&&o.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function s(t,e,n){if(f.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=e.getZr(),o=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],a(this._styleCoord,r,o,e.getWidth()/2,e.getHeight()/2),o?document.body.appendChild(i):t.appendChild(i),this._container=t,this._show=!1,this._hideTimeout;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!s._enterable){var e=r.handler,n=r.painter.getViewportRoot();c.normalizeEvent(n,t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}}var l=n(136),u=n(154),c=n(141),h=n(142),f=n(135),p=n(223),d=l.each,g=p.toCamelCase,m=["","-webkit-","-moz-","-o-"],v="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";s.prototype={constructor:s,_enterable:!0,update:function(t){var e=this._container,n=e.currentStyle||document.defaultView.getComputedStyle(e),i=e.style;"absolute"!==i.position&&"absolute"!==n.position&&(i.position="relative");var r=t.get("alwaysShowContent");r&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[2],e=this._styleCoord[3],n=t*this._zr.getWidth(),i=e*this._zr.getHeight();this.moveTo(n,i)},show:function(t){clearTimeout(this._hideTimeout);var e=this.el,n=this._styleCoord;e.style.cssText=v+o(t)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n=this._styleCoord;a(n,this._zr,this._appendToBody,t,e);var i=this.el.style;i.left=n[0]+"px",i.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(l.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(t+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:t,height:e}}};var y=s;t.exports=y},function(t,e,n){function i(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}function r(t){var e=this._zr=t.getZr();this._styleCoord=[0,0,0,0],i(this._styleCoord,e,t.getWidth()/2,t.getHeight()/2),this._show=!1,this._hideTimeout}var o=n(136),a=n(198),s=n(184);r.prototype={constructor:r,_enterable:!0,update:function(t){var e=t.get("alwaysShowContent");e&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[2],e=this._styleCoord[3],n=t*this._zr.getWidth(),i=e*this._zr.getHeight();this.moveTo(n,i)},show:function(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(t,e,n){this.el&&this._zr.remove(this.el);for(var i={},r=t,o="{marker",l="|}",u=r.indexOf(o);u>=0;){var c=r.indexOf(l),h=r.substr(u+o.length,c-u-o.length);h.indexOf("sub")>-1?i["marker"+h]={textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[h],textOffset:[3,0]}:i["marker"+h]={textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[h]},r=r.substr(c+1),u=r.indexOf("{marker")}var f=n.getModel("textStyle"),p=f.get("fontSize"),d=n.get("textLineHeight");null==d&&(d=Math.round(3*p/2)),this.el=new a({style:s.setTextStyle({},f,{rich:i,text:t,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:d}),z:n.get("z")}),this._zr.add(this.el);var g=this;this.el.on("mouseover",function(){g._enterable&&(clearTimeout(g._hideTimeout),g._show=!0),g._inContent=!0}),this.el.on("mouseout",function(){g._enterable&&g._show&&g.hideLater(g._hideDelay),g._inContent=!1})},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){if(this.el){var n=this._styleCoord;i(n,this._zr,t,e),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(o.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var t=this.getSize();return{width:t[0],height:t[1]}}};var l=r;t.exports=l},function(t,e,n){var i=n(131),r=n(556);n(557),n(560),n(561),n(562),n(563),i.registerPreprocessor(r)},function(t,e,n){function i(t,e){var n=t&&t.brush;if(o.isArray(n)||(n=n?[n]:[]),n.length){var i=[];o.each(n,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))});var s=t&&t.toolbox;o.isArray(s)&&(s=s[0]),s||(s={feature:{}},t.toolbox=[s]);var l=s.feature||(s.feature={}),u=l.brush||(l.brush={}),c=u.type||(u.type=[]);c.push.apply(c,i),r(c),e&&!c.length&&c.push.apply(c,a)}}function r(t){var e={};o.each(t,function(t){e[t]=1}),t.length=0,o.each(e,function(e,n){t.push(n)})}var o=n(136),a=["rect","polygon","keep","clear"];t.exports=i},function(t,e,n){function i(t){t.eachComponent({mainType:"brush"},function(e){var n=e.brushTargetManager=new v(e.option,t);n.setInputRanges(e.areas,t)})}function r(t,e,n,i,r){if(r){var a=t.getZr();if(!a[x]){a[_]||(a[_]=o);var s=m.createOrUpdate(a,_,n,e);s(t,i)}}}function o(t,e){if(!t.isDisposed()){var n=t.getZr();n[x]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[x]=!1}}function a(t,e,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r];if(t[a.brushType](i,n,a.selectors,a))return!0}}function s(t){var e=t.brushSelector;if(f.isString(e)){var n=[];return f.each(g,function(t,i){n[i]=function(n,i,r,o){var a=i.getItemLayout(n);return t[e](a,r,o)}}),n}if(f.isFunction(e)){var i={};return f.each(g,function(t,n){i[n]=e}),i}return e}function l(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(f.isArray(n)?f.indexOf(n,e)<0:e!==n)}function u(t){var e=t.selectors={};return f.each(g[t.brushType],function(n,i){e[i]=function(i){return n(i,e,t)}}),t}function c(t){return new p(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var h=n(131),f=n(136),p=n(158),d=n(558),g=n(559),m=n(243),v=n(537),y=["inBrush","outOfBrush"],_="__ecBrushSelect",x="__ecInBrushSelectEvent",w=h.PRIORITY.VISUAL.BRUSH;h.registerLayout(w,function(t,e,n){t.eachComponent({mainType:"brush"},function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),i(t)}),h.registerVisual(w,function(t,e,n){var i,o,c=[];t.eachComponent({mainType:"brush"},function(e,n){function r(t){return"all"===_||x[t]}function h(t){return!!t.length}function p(t,e){var n=t.coordinateSystem;S|=n.hasAxisBrushed(),r(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(w[e]=1)})}function g(n,i,o){var u=s(n);if(u&&!l(e,i)&&(f.each(M,function(i){u[i.brushType]&&e.brushTargetManager.controlSeries(i,n,t)&&o.push(i),S|=h(o)}),r(i)&&h(o))){var c=n.getData();c.each(function(t){a(u,o,c,t)&&(w[t]=1)})}}var m={brushId:e.id,brushIndex:n,brushName:e.name,areas:f.clone(e.areas),selected:[]};c.push(m);var v=e.option,_=v.brushLink,x=[],w=[],C=[],S=0;n||(i=v.throttleType,o=v.throttleDelay);var M=f.map(e.areas,function(t){return u(f.defaults({boundingRect:b[t.brushType](t)},t))}),E=d.createVisualMappings(e.option,y,function(t){t.mappingMethod="fixed"});f.isArray(_)&&f.each(_,function(t){x[t]=1}),t.eachSeries(function(t,e){var n=C[e]=[];"parallel"===t.subType?p(t,e,n):g(t,e,n)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};m.selected.push(n);var i=s(t),o=C[e],l=t.getData(),u=r(e)?function(t){return w[t]?(n.dataIndex.push(l.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return a(i,o,l,t)?(n.dataIndex.push(l.getRawIndex(t)),"inBrush"):"outOfBrush"};(r(e)?S:h(o))&&d.applyVisual(y,E,l,u)})}),r(e,i,o,c,n)});var b={lineX:f.noop,lineY:f.noop,rect:function(t){return c(t.range)},polygon:function(t){for(var e,n=t.range,i=0,r=n.length;i<r;i++){e=e||[[1/0,-(1/0)],[1/0,-(1/0)]];var o=n[i];o[0]<e[0][0]&&(e[0][0]=o[0]),o[0]>e[0][1]&&(e[0][1]=o[0]),o[1]<e[1][0]&&(e[1][0]=o[1]),o[1]>e[1][1]&&(e[1][1]=o[1])}return e&&c(e)}};e.layoutCovers=i},function(t,e,n){function i(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function r(t,e,n){function i(){var t=function(){};t.prototype.__hidden=t.prototype;var e=new t;return e}var r={};return c(e,function(e){var o=r[e]=i();c(t[e],function(t,i){if(u.isValidType(i)){var r={type:i,visual:t};n&&n(r,e),o[i]=new u(r),"opacity"===i&&(r=l.clone(r),r.type="colorAlpha",o.__hidden.__alphaForOpacity=new u(r))}})}),r}function o(t,e,n){var r;l.each(n,function(t){e.hasOwnProperty(t)&&i(e[t])&&(r=!0)}),r&&l.each(n,function(n){e.hasOwnProperty(n)&&i(e[n])?t[n]=l.clone(e[n]):delete t[n]})}function a(t,e,n,i,r,o){function a(t){return n.getItemVisual(f,t)}function s(t,e){n.setItemVisual(f,t,e)}function c(t,l){f=null==o?t:l;var u=n.getRawDataItem(f);if(!u||u.visualMap!==!1)for(var c=i.call(r,t),p=e[c],d=h[c],g=0,m=d.length;g<m;g++){var v=d[g];p[v]&&p[v].applyVisual(t,a,s)}}var h={};l.each(t,function(t){var n=u.prepareVisualTypes(e[t]);h[t]=n});var f;null==o?n.each(c):n.each([o],c)}function s(t,e,n,i){function r(t,r){function a(t){return r.getItemVisual(l,t)}function s(t,e){r.setItemVisual(l,t,e)}null!=i&&(i=r.getDimension(i));for(var l;null!=(l=t.next());){var u=r.getRawDataItem(l);if(!u||u.visualMap!==!1)for(var c=null!=i?r.get(i,l,!0):l,h=n(c),f=e[h],p=o[h],d=0,g=p.length;d<g;d++){var m=p[d];f[m]&&f[m].applyVisual(c,a,s)}}}var o={};return l.each(t,function(t){var n=u.prepareVisualTypes(e[t]);o[t]=n}),{progress:r}}var l=n(136),u=n(384),c=l.each;e.createVisualMappings=r,e.replaceVisualOption=o,e.applyVisual=a,e.incrementalApplyVisual=s},function(t,e,n){function i(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e){var o=i.range,a=e[t];return r(a,o)}},rect:function(i,o,a){if(i){var s=a.range,l=[i[e[t]],i[e[t]]+i[n[t]]];return l[1]<l[0]&&l.reverse(),r(l[0],s)||r(l[1],s)||r(s[0],l)||r(s[1],l)}}}}function r(t,e){return e[0]<=t&&t<=e[1]}var o=n(279),a=n(158),s=n(184),l=s.linePolygonIntersect,u={lineX:i(0),lineY:i(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&o.contain(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var r=t.x,s=t.y,u=t.width,c=t.height,h=i[0];return!!(o.contain(i,r,s)||o.contain(i,r+u,s)||o.contain(i,r,s+c)||o.contain(i,r+u,s+c)||a.create(t).contain(h[0],h[1])||l(r,s,r+u,s,i)||l(r,s,r,s+c,i)||l(r+u,s,r+u,s+c,i)||l(r,s+c,r+u,s+c,i))||void 0}}},c=u;t.exports=c},function(t,e,n){function i(t,e){return a.merge({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new l(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var r=n(132),o=(r.__DEV__,n(131)),a=n(136),s=n(558),l=n(178),u=["#ddd"],c=o.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var n=this.option;!e&&s.replaceVisualOption(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:u},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(t){t&&(this.areas=a.map(t,function(t){return i(this.option,t)},this))},setBrushOption:function(t){this.brushOption=i(this.option,t),this.brushType=this.brushOption.brushType}}),h=c;t.exports=h},function(t,e,n){function i(t,e,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}var r=n(131),o=n(136),a=n(429),s=n(557),l=s.layoutCovers,u=r.extendComponentView({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new a(e.getZr())).on("brush",o.bind(this._onBrush,this)).mount()},render:function(t){return this.model=t,i.apply(this,arguments)},updateTransform:function(t,e){return l(e),i.apply(this,arguments)},updateView:i,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:o.clone(t),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:o.clone(t),$from:n})}});t.exports=u},function(t,e,n){var i=n(131);i.registerAction({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),i.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),i.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},function(){})},function(t,e,n){function i(t,e,n){this.model=t,this.ecModel=e,this.api=n,this._brushType,this._brushMode}var r=n(136),o=n(530),a=n(246),s=a.toolbox.brush;i.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.clone(s.title)};var l=i.prototype;l.render=l.updateView=function(t,e,n){
var i,o,a;e.eachComponent({mainType:"brush"},function(t){i=t.brushType,o=t.brushOption.brushMode||"single",a|=t.areas.length}),this._brushType=i,this._brushMode=o,r.each(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===o:"clear"===e?a:e===i)?"emphasis":"normal")})},l.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return r.each(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},l.onclick=function(t,e,n){var i=this._brushType,r=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},o.register("brush",i);var u=i;t.exports=u},function(t,e,n){var i=n(136),r=n(131),o=n(184),a=n(221),s=a.getLayoutRect,l=n(223),u=l.windowOpen;r.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),r.extendComponentView({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var r=this.group,a=t.getModel("textStyle"),l=t.getModel("subtextStyle"),c=t.get("textAlign"),h=i.retrieve2(t.get("textBaseline"),t.get("textVerticalAlign")),f=new o.Text({style:o.setTextStyle({},a,{text:t.get("text"),textFill:a.getTextColor()},{disableBox:!0}),z2:10}),p=f.getBoundingRect(),d=t.get("subtext"),g=new o.Text({style:o.setTextStyle({},l,{text:d,textFill:l.getTextColor(),y:p.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),m=t.get("link"),v=t.get("sublink"),y=t.get("triggerEvent",!0);f.silent=!m&&!y,g.silent=!v&&!y,m&&f.on("click",function(){u(m,"_"+t.get("target"))}),v&&g.on("click",function(){u(v,"_"+t.get("subtarget"))}),f.eventData=g.eventData=y?{componentType:"title",componentIndex:t.componentIndex}:null,r.add(f),d&&r.add(g);var _=r.getBoundingRect(),x=t.getBoxLayoutParams();x.width=_.width,x.height=_.height;var w=s(x,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));c||(c=t.get("left")||t.get("right"),"middle"===c&&(c="center"),"right"===c?w.x+=w.width:"center"===c&&(w.x+=w.width/2)),h||(h=t.get("top")||t.get("bottom"),"center"===h&&(h="middle"),"bottom"===h?w.y+=w.height:"middle"===h&&(w.y+=w.height/2),h=h||"top"),r.attr("position",[w.x,w.y]);var b={textAlign:c,textVerticalAlign:h};f.setStyle(b),g.setStyle(b),_=r.getBoundingRect();var C=w.margin,S=t.getItemStyle(["color","opacity"]);S.fill=t.get("backgroundColor");var M=new o.Rect({shape:{x:_.x-C[3],y:_.y-C[0],width:_.width+C[1]+C[3],height:_.height+C[0]+C[2],r:t.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});r.add(M)}}})},function(t,e,n){var i=n(131),r=n(566);n(567),n(568),n(569),n(571),i.registerPreprocessor(r)},function(t,e,n){function i(t){var e=t&&t.timeline;s.isArray(e)||(e=e?[e]:[]),s.each(e,function(t){t&&r(t)})}function r(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),o(t),a(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});a(i,"position")||(i.position=t.controlPosition),"none"!==i.position||a(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}s.each(t.data||[],function(t){s.isObject(t)&&!s.isArray(t)&&(!a(t,"value")&&a(t,"name")&&(t.value=t.name),o(t))})}function o(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},r=i.normal||(i.normal={}),o={normal:1,emphasis:1};s.each(i,function(t,e){o[e]||a(r,e)||(r[e]=t)}),n.label&&!a(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function a(t,e){return t.hasOwnProperty(e)}var s=n(136);t.exports=i},function(t,e,n){var i=n(219);i.registerSubTypeDefaulter("timeline",function(){return"slider"})},function(t,e,n){var i=n(131),r=n(136);i.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline"),r.defaults({currentIndex:n.option.currentIndex},t)}),i.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)})},function(t,e,n){var i=n(136),r=n(570),o=n(237),a=r.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});i.mixin(a,o);var s=a;t.exports=s},function(t,e,n){var i=n(136),r=n(219),o=n(258),a=n(177),s=r.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,n){this._data,this._names,this.mergeDefaultAndTheme(t,n),this._initData()},mergeOption:function(t){s.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],n=t.axisType,r=this._names=[];if("category"===n){var s=[];i.each(e,function(t,e){var n,o=a.getDataItemValue(t);i.isObject(t)?(n=i.clone(t),n.value=e):n=e,s.push(n),i.isString(o)||null!=o&&!isNaN(o)||(o=""),r.push(o+"")}),e=s}var l={category:"ordinal",time:"time"}[n]||"number",u=this._data=new o([{name:"value",type:l}],this);u.initData(e,r)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}}),l=s;t.exports=l},function(t,e,n){function i(t,e){return h.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function r(t,e,n,i){var r=i.style,o=c.createIcon(t.get(e),i||{},new l(n[0],n[1],n[2],n[3]));return r&&o.setStyle(r),o}function o(t,e,n,i,r,o){var a=e.get("color");if(r)r.setColor(a),n.add(r),o&&o.onUpdate(r);else{var l=t.get("symbol");r=g(l,-1,-1,2,2,a),r.setStyle("strokeNoScale",!0),n.add(r),o&&o.onCreate(r)}var u=e.getItemStyle(["color","symbol","symbolSize"]);r.setStyle(u),i=s.merge({rectHover:!0,z2:100},i,!0);var c=t.get("symbolSize");c=c instanceof Array?c.slice():[+c,+c],c[0]/=2,c[1]/=2,i.scale=c;var h=t.get("symbolOffset");if(h){var f=i.position=i.position||[0,0];f[0]+=v.parsePercent(h[0],c[0]),f[1]+=v.parsePercent(h[1],c[1])}var p=t.get("symbolRotate");return i.rotation=(p||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function a(t,e,n,i,r){if(!t.dragging){var o=i.getModel("checkpointStyle"),a=n.dataToCoord(i.getData().get(["value"],e));r||!o.get("animation",!0)?t.attr({position:[a,0]}):(t.stopAnimation(!0),t.animateTo({position:[a,0]},o.get("animationDuration",!0),o.get("animationEasing",!0)))}}var s=n(136),l=n(158),u=n(149),c=n(184),h=n(221),f=n(572),p=n(573),d=n(276),g=d.createSymbol,m=n(266),v=n(222),y=n(223),_=y.encodeHTML,x=s.bind,w=s.each,b=Math.PI,C=f.extend({type:"timeline.slider",init:function(t,e){this.api=e,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(t,e,n,i){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var r=this._layout(t,n),o=this._createGroup("mainGroup"),a=this._createGroup("labelGroup"),s=this._axis=this._createAxis(r,t);t.formatTooltip=function(t){return _(s.scale.getLabel(t))},w(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](r,o,s,t)},this),this._renderAxisLabel(r,a,s,t),this._position(r,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var n=t.get("label.position"),r=t.get("orient"),o=i(t,e);null==n||"auto"===n?n="horizontal"===r?o.y+o.height/2<e.getHeight()/2?"-":"+":o.x+o.width/2<e.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][n]);var a={horizontal:"center",vertical:n>=0||"+"===n?"left":"right"},s={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},l={horizontal:0,vertical:b/2},u="vertical"===r?o.height:o.width,c=t.getModel("controlStyle"),h=c.get("show",!0),f=h?c.get("itemSize"):0,p=h?c.get("itemGap"):0,d=f+p,g=t.get("label.rotate")||0;g=g*b/180;var m,v,y,_,x=c.get("position",!0),w=h&&c.get("showPlayBtn",!0),C=h&&c.get("showPrevBtn",!0),S=h&&c.get("showNextBtn",!0),M=0,E=u;return"left"===x||"bottom"===x?(w&&(m=[0,0],M+=d),C&&(v=[M,0],M+=d),S&&(y=[E-f,0],E-=d)):(w&&(m=[E-f,0],E-=d),C&&(v=[0,0],M+=d),S&&(y=[E-f,0],E-=d)),_=[M,E],t.get("inverse")&&_.reverse(),{viewRect:o,mainLength:u,orient:r,rotation:l[r],labelRotation:g,labelPosOpt:n,labelAlign:t.get("label.align")||a[r],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||s[r],playPosition:m,prevBtnPosition:v,nextBtnPosition:y,axisExtent:_,controlSize:f,controlGap:p}},_position:function(t,e){function n(t){var e=t.position;t.origin=[f[0][0]-e[0],f[1][0]-e[1]]}function i(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function r(t,e,n,i,r){t[i]+=n[i][r]-e[i][r]}var o=this._mainGroup,a=this._labelGroup,s=t.viewRect;if("vertical"===t.orient){var l=u.create(),c=s.x,h=s.y+s.height;u.translate(l,l,[-c,-h]),u.rotate(l,l,-b/2),u.translate(l,l,[c,h]),s=s.clone(),s.applyTransform(l)}var f=i(s),p=i(o.getBoundingRect()),d=i(a.getBoundingRect()),g=o.position,m=a.position;m[0]=g[0]=f[0][0];var v=t.labelPosOpt;if(isNaN(v)){var y="+"===v?0:1;r(g,p,f,1,y),r(m,d,f,1,1-y)}else{var y=v>=0?0:1;r(g,p,f,1,y),m[1]=g[1]+v}o.attr("position",g),a.attr("position",m),o.rotation=a.rotation=t.rotation,n(o),n(a)},_createAxis:function(t,e){var n=e.getData(),i=e.get("axisType"),r=m.createScaleByModel(e,i);r.getTicks=function(){return n.mapArray(["value"],function(t){return t})};var o=n.getDataExtent("value");r.setExtent(o[0],o[1]),r.niceTicks();var a=new p("value",r,t.axisExtent,i);return a.model=e,a},_createGroup:function(t){var e=this["_"+t]=new c.Group;return this.group.add(e),e},_renderAxisLine:function(t,e,n,i){var r=n.getExtent();i.get("lineStyle.show")&&e.add(new c.Line({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:s.extend({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,n,i){var r=i.getData(),a=n.scale.getTicks();w(a,function(t){var a=n.dataToCoord(t),s=r.getItemModel(t),l=s.getModel("itemStyle"),u=s.getModel("emphasis.itemStyle"),h={position:[a,0],onclick:x(this._changeTimeline,this,t)},f=o(s,l,e,h);c.setHoverStyle(f,u.getItemStyle()),s.get("tooltip")?(f.dataIndex=t,f.dataModel=i):f.dataIndex=f.dataModel=null},this)},_renderAxisLabel:function(t,e,n,i){var r=n.getLabelModel();if(r.get("show")){var o=i.getData(),a=n.getViewLabels();w(a,function(i){var r=i.tickValue,a=o.getItemModel(r),s=a.getModel("label"),l=a.getModel("emphasis.label"),u=n.dataToCoord(i.tickValue),h=new c.Text({position:[u,0],rotation:t.labelRotation-t.rotation,onclick:x(this._changeTimeline,this,r),silent:!1});c.setTextStyle(h.style,s,{text:i.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline}),e.add(h),c.setHoverStyle(h,c.setTextStyle({},l))},this)}},_renderControl:function(t,e,n,i){function o(t,n,o,f){if(t){var p={position:t,origin:[a/2,0],rotation:f?-s:0,rectHover:!0,style:l,onclick:o},d=r(i,n,h,p);e.add(d),c.setHoverStyle(d,u)}}var a=t.controlSize,s=t.rotation,l=i.getModel("controlStyle").getItemStyle(),u=i.getModel("emphasis.controlStyle").getItemStyle(),h=[0,-a/2,a,a],f=i.getPlayState(),p=i.get("inverse",!0);o(t.nextBtnPosition,"controlStyle.nextIcon",x(this._changeTimeline,this,p?"-":"+")),o(t.prevBtnPosition,"controlStyle.prevIcon",x(this._changeTimeline,this,p?"+":"-")),o(t.playPosition,"controlStyle."+(f?"stopIcon":"playIcon"),x(this._handlePlayClick,this,!f),!0)},_renderCurrentPointer:function(t,e,n,i){var r=i.getData(),s=i.getCurrentIndex(),l=r.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(t){t.draggable=!0,t.drift=x(u._handlePointerDrag,u),t.ondragend=x(u._handlePointerDragend,u),a(t,s,n,i,!0)},onUpdate:function(t){a(t,s,n,i)}};this._currentPointer=o(l,l,this._mainGroup,{},this._currentPointer,c)},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var n=this._toAxisCoord(t)[0],i=this._axis,r=v.asc(i.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var o=this._findNearestTick(n),a=this.model;(e||o!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){function t(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))}this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(x(t,this),this.model.get("playInterval")))},_toAxisCoord:function(t){var e=this._mainGroup.getLocalTransform();return c.applyTransform(t,e,!0)},_findNearestTick:function(t){var e,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],function(n,o){var a=r.dataToCoord(n),s=Math.abs(a-t);s<i&&(i=s,e=o)}),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}});t.exports=C},function(t,e,n){var i=n(240),r=i.extend({type:"timeline"});t.exports=r},function(t,e,n){var i=n(136),r=n(280),o=function(t,e,n,i){r.call(this,t,e,n),this.type=i||"value",this.model=null};o.prototype={constructor:o,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},i.inherits(o,r);var a=o;t.exports=a},function(t,e,n){var i=n(131);n(575),n(577),i.registerPreprocessor(function(t){t.markPoint=t.markPoint||{}})},function(t,e,n){var i=n(576),r=i.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});t.exports=r},function(t,e,n){function i(t){l.defaultEmphasis(t,"label",["show"])}var r=n(132),o=(r.__DEV__,n(131)),a=n(136),s=n(135),l=n(177),u=n(223),c=n(237),h=u.addCommas,f=u.encodeHTML,p=o.extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},isAnimationEnabled:function(){if(s.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e){this._mergeOption(t,e,!1,!1)},_mergeOption:function(t,e,n,r){var o=this.constructor,s=this.mainType+"Model";n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),l=t[s];return n&&n.data?(l?l._mergeOption(n,e,!0):(r&&i(n),a.each(n.data,function(t){t instanceof Array?(i(t[0]),i(t[1])):i(t)}),l=new o(n,this,e),a.extend(l,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),l.__hostSeries=t),void(t[s]=l)):void(t[s]=null)},this)},formatTooltip:function(t,e,n,i){var r=this.getData(),o=this.getRawValue(t),s=a.isArray(o)?a.map(o,h).join(", "):h(o),l=r.getName(t),u=f(this.name),c="html"===i?"<br/>":"\n";return(null!=o||l)&&(u+=c),l&&(u+=f(l),null!=o&&(u+=" : ")),null!=o&&(u+=f(s)),u},getData:function(){return this._data},setData:function(t){this._data=t}});a.mixin(p,c);var d=p;t.exports=d},function(t,e,n){function i(t,e,n){var i=e.coordinateSystem;t.each(function(r){var o,a=t.getItemModel(r),l=s.parsePercent(a.get("x"),n.getWidth()),u=s.parsePercent(a.get("y"),n.getHeight());if(isNaN(l)||isNaN(u)){if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(i){var c=t.get(i.dimensions[0],r),h=t.get(i.dimensions[1],r);o=i.dataToPoint([c,h])}}else o=[l,u];isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u),t.setItemLayout(r,o)})}function r(t,e,n){var i;i=t?o.map(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return o.defaults({name:t},n)}):[{name:"value",type:"float"}];var r=new l(i,n),a=o.map(n.get("data"),o.curry(u.dataTransform,e));return t&&(a=o.filter(a,o.curry(u.dataFilter,t))),r.initData(a,null,t?u.dimValueGetter:function(t){return t.value}),r}var o=n(136),a=n(285),s=n(222),l=n(258),u=n(578),c=n(579),h=c.extend({type:"markPoint",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markPointModel;e&&(i(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout(e))},this)},renderSeries:function(t,e,n,s){var l=t.coordinateSystem,u=t.id,c=t.getData(),h=this.markerGroupMap,f=h.get(u)||h.set(u,new a),p=r(l,t,e);e.setData(p),i(e.getData(),t,s),p.each(function(t){var n=p.getItemModel(t),i=n.getShallow("symbol"),r=n.getShallow("symbolSize"),a=n.getShallow("symbolRotate"),s=o.isFunction(i),l=o.isFunction(r),u=o.isFunction(a);if(s||l||u){var h=e.getRawValue(t),f=e.getDataParams(t);s&&(i=i(h,f)),l&&(r=r(h,f)),u&&(a=a(h,f))}p.setItemVisual(t,{symbol:i,symbolSize:r,symbolRotate:a,color:n.get("itemStyle.color")||c.getVisual("color")})}),f.updateData(p),this.group.add(f.group),p.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})}),f.__keep=!0,f.group.silent=e.get("silent")||t.get("silent")}});t.exports=h},function(t,e,n){function i(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function r(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function o(t,e,n,i,r,o){var a=[],s=g(e,i),l=s?e.getCalculationInfo("stackResultDimension"):i,u=h(e,l,t),c=e.indicesOfNearest(l,u)[0];a[r]=e.get(n,c),a[o]=e.get(l,c);var f=e.get(i,c),d=p.getPrecision(e.get(i,c));return d=Math.min(d,20),d>=0&&(a[o]=+a[o].toFixed(d)),[a,f]}function a(t,e){var n=t.getData(),i=t.coordinateSystem;if(e&&!r(e)&&!f.isArray(e.coord)&&i){var o=i.dimensions,a=s(e,n,i,t);if(e=f.clone(e),e.type&&y[e.type]&&a.baseAxis&&a.valueAxis){var l=m(o,a.baseAxis.dim),u=m(o,a.valueAxis.dim),c=y[e.type](n,a.baseDataDim,a.valueDataDim,l,u);e.coord=c[0],e.value=c[1]}else{for(var p=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],d=0;d<2;d++)y[p[d]]&&(p[d]=h(n,n.mapDimension(o[d]),p[d]));e.coord=p}}return e}function s(t,e,n,i){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=n.getAxis(l(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim),r.valueDataDim=e.mapDimension(r.valueAxis.dim)),r}function l(t,e){var n=t.getData(),i=n.dimensions;e=n.getDimension(e);for(var r=0;r<i.length;r++){var o=n.getDimensionInfo(i[r]);if(o.name===e)return o.coordDim}}function u(t,e){return!(t&&t.containData&&e.coord&&!i(e))||t.containData(e.coord)}function c(t,e,n,i){return i<2?t.coord&&t.coord[i]:t.value}function h(t,e,n){if("average"===n){var i=0,r=0;return t.each(e,function(t,e){isNaN(t)||(i+=t,r++)}),i/r}return"median"===n?t.getMedian(e):t.getDataExtent(e,!0)["max"===n?1:0]}var f=n(136),p=n(222),d=n(265),g=d.isDimensionStacked,m=f.indexOf,v=f.curry,y={min:v(o,"min"),max:v(o,"max"),average:v(o,"average")};e.dataTransform=a,e.getAxisInfo=s,e.dataFilter=u,e.dimValueGetter=c,e.numCalculate=h},function(t,e,n){var i=n(131),r=n(136),o=i.extendComponentView({type:"marker",init:function(){this.markerGroupMap=r.createHashMap()},render:function(t,e,n){var i=this.markerGroupMap;i.each(function(t){t.__keep=!1});var r=this.type+"Model";e.eachSeries(function(t){var i=t[r];i&&this.renderSeries(t,i,e,n)},this),i.each(function(t){!t.__keep&&this.group.remove(t.group)},this)},renderSeries:function(){}});t.exports=o},function(t,e,n){var i=n(131);n(581),n(582),i.registerPreprocessor(function(t){t.markLine=t.markLine||{}})},function(t,e,n){var i=n(576),r=i.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});t.exports=r},function(t,e,n){function i(t){return!isNaN(t)&&!isFinite(t)}function r(t,e,n,r){var o=1-t,a=r.dimensions[t];return i(e[o])&&i(n[o])&&e[t]===n[t]&&r.getAxis(a).containData(e[t])}function o(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(r(1,n,i,t)||r(0,n,i,t)))return!0}return h.dataFilter(t,e[0])&&h.dataFilter(t,e[1])}function a(t,e,n,r,o){var a,s=r.coordinateSystem,l=t.getItemModel(e),u=c.parsePercent(l.get("x"),o.getWidth()),h=c.parsePercent(l.get("y"),o.getHeight());if(isNaN(u)||isNaN(h)){if(r.getMarkerPosition)a=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var f=s.dimensions,p=t.get(f[0],e),d=t.get(f[1],e);a=s.dataToPoint([p,d])}if("cartesian2d"===s.type){var g=s.getAxis("x"),m=s.getAxis("y"),f=s.dimensions;i(t.get(f[0],e))?a[0]=g.toGlobalCoord(g.getExtent()[n?0:1]):i(t.get(f[1],e))&&(a[1]=m.toGlobalCoord(m.getExtent()[n?0:1]))}isNaN(u)||(a[0]=u),isNaN(h)||(a[1]=h)}else a=[u,h];t.setItemLayout(e,a)}function s(t,e,n){var i;i=t?l.map(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return l.defaults({name:t},n)}):[{name:"value",type:"float"}];var r=new u(i,n),a=new u(i,n),s=new u([],n),c=l.map(n.get("data"),l.curry(m,e,t,n));t&&(c=l.filter(c,l.curry(o,t)));var f=t?h.dimValueGetter:function(t){return t.value};return r.initData(l.map(c,function(t){return t[0]}),null,f),a.initData(l.map(c,function(t){return t[1]}),null,f),s.initData(l.map(c,function(t){return t[2]})),s.hasItemOption=!0,{from:r,to:a,line:s}}var l=n(136),u=n(258),c=n(222),h=n(578),f=n(392),p=n(579),d=n(265),g=d.getStackedDimension,m=function(t,e,n,i){var r=t.getData(),o=i.type;if(!l.isArray(i)&&("min"===o||"max"===o||"average"===o||"median"===o||null!=i.xAxis||null!=i.yAxis)){var a,s;if(null!=i.yAxis||null!=i.xAxis)a=e.getAxis(null!=i.yAxis?"y":"x"),s=l.retrieve(i.yAxis,i.xAxis);else{var u=h.getAxisInfo(i,r,e,t);a=u.valueAxis;var c=g(r,u.valueDataDim);s=h.numCalculate(r,c,o)}var f="x"===a.dim?0:1,p=1-f,d=l.clone(i),m={};d.type=null,d.coord=[],m.coord=[],d.coord[p]=-(1/0),m.coord[p]=1/0;var v=n.get("precision");v>=0&&"number"==typeof s&&(s=+s.toFixed(Math.min(v,20))),d.coord[f]=m.coord[f]=s,i=[d,m,{type:o,valueIndex:i.valueIndex,value:s}]}return i=[h.dataTransform(t,i[0]),h.dataTransform(t,i[1]),l.extend({},i[2])],i[2].type=i[2].type||"",l.merge(i[2],i[0]),l.merge(i[2],i[1]),i},v=p.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markLineModel;if(e){var i=e.getData(),r=e.__from,o=e.__to;r.each(function(e){a(r,e,!0,t,n),a(o,e,!1,t,n)}),i.each(function(t){i.setItemLayout(t,[r.getItemLayout(t),o.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeries:function(t,e,n,i){function r(e,n,r){var o=e.getItemModel(n);a(e,n,r,t,i),e.setItemVisual(n,{symbolRotate:o.get("symbolRotate"),symbolSize:o.get("symbolSize")||_[r?0:1],symbol:o.get("symbol",!0)||y[r?0:1],color:o.get("itemStyle.color")||c.getVisual("color")})}var o=t.coordinateSystem,u=t.id,c=t.getData(),h=this.markerGroupMap,p=h.get(u)||h.set(u,new f);this.group.add(p.group);var d=s(o,t,e),g=d.from,m=d.to,v=d.line;e.__from=g,e.__to=m,e.setData(v);var y=e.get("symbol"),_=e.get("symbolSize");l.isArray(y)||(y=[y,y]),"number"==typeof _&&(_=[_,_]),d.from.each(function(t){r(g,t,!0),r(m,t,!1)}),v.each(function(t){var e=v.getItemModel(t).get("lineStyle.color");v.setItemVisual(t,{color:e||g.getItemVisual(t,"color")}),v.setItemLayout(t,[g.getItemLayout(t),m.getItemLayout(t)]),v.setItemVisual(t,{fromSymbolRotate:g.getItemVisual(t,"symbolRotate"),fromSymbolSize:g.getItemVisual(t,"symbolSize"),fromSymbol:g.getItemVisual(t,"symbol"),toSymbolRotate:m.getItemVisual(t,"symbolRotate"),toSymbolSize:m.getItemVisual(t,"symbolSize"),toSymbol:m.getItemVisual(t,"symbol")})}),p.updateData(v),d.line.eachItemGraphicEl(function(t,n){t.traverse(function(t){t.dataModel=e})}),p.__keep=!0,p.group.silent=e.get("silent")||t.get("silent")}});t.exports=v},function(t,e,n){var i=n(131);n(584),n(585),i.registerPreprocessor(function(t){t.markArea=t.markArea||{}})},function(t,e,n){var i=n(576),r=i.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});t.exports=r},function(t,e,n){function i(t){return!isNaN(t)&&!isFinite(t)}function r(t,e,n,r){var o=1-t;return i(e[o])&&i(n[o])}function o(t,e){var n=e.coord[0],i=e.coord[1];return!("cartesian2d"!==t.type||!n||!i||!r(1,n,i,t)&&!r(0,n,i,t))||(p.dataFilter(t,{coord:n,x:e.x0,y:e.y0})||p.dataFilter(t,{coord:i,x:e.x1,y:e.y1}))}function a(t,e,n,r,o){var a,s=r.coordinateSystem,l=t.getItemModel(e),u=h.parsePercent(l.get(n[0]),o.getWidth()),c=h.parsePercent(l.get(n[1]),o.getHeight());if(isNaN(u)||isNaN(c)){if(r.getMarkerPosition)a=r.getMarkerPosition(t.getValues(n,e));else{var f=t.get(n[0],e),p=t.get(n[1],e),d=[f,p];s.clampData&&s.clampData(d,d),a=s.dataToPoint(d,!0)}if("cartesian2d"===s.type){var g=s.getAxis("x"),m=s.getAxis("y"),f=t.get(n[0],e),p=t.get(n[1],e);i(f)?a[0]=g.toGlobalCoord(g.getExtent()["x0"===n[0]?0:1]):i(p)&&(a[1]=m.toGlobalCoord(m.getExtent()["y0"===n[1]?0:1]))}isNaN(u)||(a[0]=u),isNaN(c)||(a[1]=c)}else a=[u,c];return a}function s(t,e,n){var i,r,a=["x0","y0","x1","y1"];t?(i=l.map(t&&t.dimensions,function(t){var n=e.getData(),i=n.getDimensionInfo(n.mapDimension(t))||{};return l.defaults({name:t},i)}),r=new c(l.map(a,function(t,e){return{name:t,type:i[e%2].type}}),n)):(i=[{name:"value",type:"float"}],r=new c(i,n));var s=l.map(n.get("data"),l.curry(g,e,t,n));t&&(s=l.filter(s,l.curry(o,t)));var u=t?function(t,e,n,i){return t.coord[Math.floor(i/2)][i%2]}:function(t){return t.value};return r.initData(s,null,u),r.hasItemOption=!0,r}var l=n(136),u=n(154),c=n(258),h=n(222),f=n(184),p=n(578),d=n(579),g=function(t,e,n,i){var r=p.dataTransform(t,i[0]),o=p.dataTransform(t,i[1]),a=l.retrieve,s=r.coord,u=o.coord;s[0]=a(s[0],-(1/0)),s[1]=a(s[1],-(1/0)),u[0]=a(u[0],1/0),u[1]=a(u[1],1/0);var c=l.mergeAll([{},r,o]);return c.coord=[r.coord,o.coord],c.x0=r.x,c.y0=r.y,c.x1=o.x,c.y1=o.y,c},m=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];d.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var i=e.getData();i.each(function(e){var r=l.map(m,function(r){return a(i,e,r,t,n)});i.setItemLayout(e,r);var o=i.getItemGraphicEl(e);o.setShape("points",r)})}},this)},renderSeries:function(t,e,n,r){var o=t.coordinateSystem,c=t.id,h=t.getData(),p=this.markerGroupMap,d=p.get(c)||p.set(c,{group:new f.Group});this.group.add(d.group),d.__keep=!0;var g=s(o,t,e);e.setData(g),g.each(function(e){var n=l.map(m,function(n){return a(g,e,n,t,r)}),s=!0;l.each(m,function(t){if(s){var n=g.get(t[0],e),r=g.get(t[1],e);(i(n)||o.getAxis("x").containData(n))&&(i(r)||o.getAxis("y").containData(r))&&(s=!1)}}),g.setItemLayout(e,{points:n,allClipped:s}),g.setItemVisual(e,{color:h.getVisual("color")})}),g.diff(d.__data).add(function(t){var e=g.getItemLayout(t);if(!e.allClipped){var n=new f.Polygon({shape:{points:e.points}});g.setItemGraphicEl(t,n),d.group.add(n)}}).update(function(t,n){var i=d.__data.getItemGraphicEl(n),r=g.getItemLayout(t);r.allClipped?i&&d.group.remove(i):(i?f.updateProps(i,{shape:{points:r.points}},e,t):i=new f.Polygon({shape:{points:r.points}}),g.setItemGraphicEl(t,i),d.group.add(i))}).remove(function(t){var e=d.__data.getItemGraphicEl(t);d.group.remove(e)}).execute(),g.eachItemGraphicEl(function(t,n){var i=g.getItemModel(n),r=i.getModel("label"),o=i.getModel("emphasis.label"),a=g.getItemVisual(n,"color");t.useStyle(l.defaults(i.getModel("itemStyle").getItemStyle(),{fill:u.modifyAlpha(a,.4),stroke:a})),t.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle(),f.setLabelStyle(t.style,t.hoverStyle,r,o,{labelFetcher:e,labelDataIndex:n,defaultText:g.getName(n)||"",isRectText:!0,autoColor:a}),f.setHoverStyle(t,{}),t.dataModel=e}),d.__data=g,d.group.silent=e.get("silent")||t.get("silent")}})},function(t,e,n){n(587),n(592),n(593),n(594)},function(t,e,n){var i=n(131);n(588),n(589),n(590);var r=n(591),o=n(219);i.registerProcessor(i.PRIORITY.PROCESSOR.SERIES_FILTER,r),o.registerSubTypeDefaulter("legend",function(){return"plain"})},function(t,e,n){var i=n(131),r=n(136),o=n(178),a=n(177),s=a.isNameSpecified,l=n(246),u=l.legend.selector,c={all:{type:"all",title:r.clone(u.all)},inverse:{type:"inverse",title:r.clone(u.inverse)}},h=i.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},mergeOption:function(t){h.superCall(this,"mergeOption",t),this._updateSelector(t)},_updateSelector:function(t){var e=t.selector;e===!0&&(e=t.selector=["all","inverse"]),r.isArray(e)&&r.each(e,function(t,n){r.isString(t)&&(t={type:t}),e[n]=r.merge(t,c[t.type])})},optionUpdated:function(){
this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=[],n=[];t.eachRawSeries(function(i){var r=i.name;n.push(r);var o;if(i.legendVisualProvider){var a=i.legendVisualProvider,l=a.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(l)),l.length?e=e.concat(l):o=!0}else o=!0;o&&s(i)&&e.push(i.name)}),this._availableNames=n;var i=this.get("data")||e,a=r.map(i,function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new o(t,this,this.ecModel)},this);this._data=a},getData:function(){return this._data},select:function(t){var e=this.option.selected,n=this.get("selectedMode");if("single"===n){var i=this._data;r.each(i,function(t){e[t.get("name")]=!1})}e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},allSelect:function(){var t=this._data,e=this.option.selected;r.each(t,function(t){e[t.get("name",!0)]=!0})},inverseSelect:function(){var t=this._data,e=this.option.selected;r.each(t,function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]})},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&r.indexOf(this._availableNames,t)>=0},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}}),f=h;t.exports=f},function(t,e,n){function i(t,e,n){var i,r={},a="toggleSelected"===t;return n.eachComponent("legend",function(n){a&&null!=i?n[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),i=n.isSelected(e.name));var s=n.getData();o.each(s,function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);r.hasOwnProperty(e)?r[e]=r[e]&&i:r[e]=i}})}),"allSelect"===t||"inverseSelect"===t?{selected:r}:{name:e.name,selected:r}}var r=n(131),o=n(136);r.registerAction("legendToggleSelect","legendselectchanged",o.curry(i,"toggleSelected")),r.registerAction("legendAllSelect","legendselectall",o.curry(i,"allSelect")),r.registerAction("legendInverseSelect","legendinverseselect",o.curry(i,"inverseSelect")),r.registerAction("legendSelect","legendselected",o.curry(i,"select")),r.registerAction("legendUnSelect","legendunselected",o.curry(i,"unSelect"))},function(t,e,n){function i(t,e,n,i,r,o){var a;return"line"!==e&&e.indexOf("empty")<0?(a=n.getItemStyle(),t.style.stroke=i,o||(a.stroke=r)):a=n.getItemStyle(["borderWidth","borderColor"]),t.setStyle(a)}function r(t,e,n,i){a(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),o(t,e,n,i)}function o(t,e,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function a(t,e,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}var s=n(132),l=(s.__DEV__,n(131)),u=n(136),c=n(276),h=c.createSymbol,f=n(184),p=n(532),d=p.makeBackground,g=n(221),m=u.curry,v=u.each,y=f.Group,_=l.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new y),this._backgroundEl,this.group.add(this._selectorGroup=new y),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var r=t.get("align"),o=t.get("orient");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===o?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(r,t,e,n,a,o,s);var l=t.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},h=t.get("padding"),f=g.getLayoutRect(l,c,h),p=this.layoutInner(t,r,f,i,a,s),m=g.getLayoutRect(u.defaults({width:p.width,height:p.height},l),c,h);this.group.attr("position",[m.x-p.x,m.y-p.y]),this.group.add(this._backgroundEl=d(p,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(t,e,n,i,s,l,c){var h=this.getContentGroup(),f=u.createHashMap(),p=e.get("selectedMode"),d=[];n.eachRawSeries(function(t){!t.get("legendHoverLink")&&d.push(t.id)}),v(e.getData(),function(s,l){var u=s.get("name");if(!this.newlineDisabled&&(""===u||"\n"===u))return void h.add(new y({newline:!0}));var c=n.getSeriesByName(u)[0];if(!f.get(u))if(c){var g=c.getData(),v=g.getVisual("color"),_=g.getVisual("borderColor");"function"==typeof v&&(v=v(c.getDataParams(0))),"function"==typeof _&&(_=_(c.getDataParams(0)));var x=g.getVisual("legendSymbol")||"roundRect",w=g.getVisual("symbol"),b=this._createItem(u,l,s,e,x,w,t,v,_,p);b.on("click",m(r,u,null,i,d)).on("mouseover",m(o,c.name,null,i,d)).on("mouseout",m(a,c.name,null,i,d)),f.set(u,!0)}else n.eachRawSeries(function(n){if(!f.get(u)&&n.legendVisualProvider){var c=n.legendVisualProvider;if(!c.containName(u))return;var h=c.indexOfName(u),g=c.getItemVisual(h,"color"),v=c.getItemVisual(h,"borderColor"),y="roundRect",_=this._createItem(u,l,s,e,y,null,t,g,v,p);_.on("click",m(r,null,u,i,d)).on("mouseover",m(o,null,u,i,d)).on("mouseout",m(a,null,u,i,d)),f.set(u,!0)}},this)},this),s&&this._createSelector(s,e,i,l,c)},_createSelector:function(t,e,n,i,r){function o(t){var i=t.type,r=new f.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});a.add(r);var o=e.getModel("selectorLabel"),s=e.getModel("emphasis.selectorLabel");f.setLabelStyle(r.style,r.hoverStyle={},o,s,{defaultText:t.title,isRectText:!1}),f.setHoverStyle(r)}var a=this.getSelectorGroup();v(t,function(t){o(t)})},_createItem:function(t,e,n,r,o,a,s,l,c,p){var d=r.get("itemWidth"),g=r.get("itemHeight"),m=r.get("inactiveColor"),v=r.get("inactiveBorderColor"),_=r.get("symbolKeepAspect"),x=r.getModel("itemStyle"),w=r.isSelected(t),b=new y,C=n.getModel("textStyle"),S=n.get("icon"),M=n.getModel("tooltip"),E=M.parentModel;o=S||o;var I=h(o,0,0,d,g,w?l:m,null==_||_);if(b.add(i(I,o,x,c,v,w)),!S&&a&&(a!==o||"none"===a)){var T=.8*g;"none"===a&&(a="circle");var P=h(a,(d-T)/2,(g-T)/2,T,T,w?l:m,null==_||_);b.add(i(P,a,x,c,v,w))}var L="left"===s?d+5:-5,D=s,A=r.get("formatter"),k=t;"string"==typeof A&&A?k=A.replace("{name}",null!=t?t:""):"function"==typeof A&&(k=A(t)),b.add(new f.Text({style:f.setTextStyle({},C,{text:k,x:L,y:g/2,textFill:w?C.getTextColor():m,textAlign:D,textVerticalAlign:"middle"})}));var N=new f.Rect({shape:b.getBoundingRect(),invisible:!0,tooltip:M.get("show")?u.extend({content:t,formatter:E.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:r.componentIndex,name:t,$vars:["name"]}},M.option):null});return b.add(N),b.eachChild(function(t){t.silent=!0}),N.silent=!p,this.getContentGroup().add(b),f.setHoverStyle(b),b.__legendDataIndex=e,b},layoutInner:function(t,e,n,i,r,o){var a=this.getContentGroup(),s=this.getSelectorGroup();g.box(t.get("orient"),a,t.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(r){g.box("horizontal",s,t.get("selectorItemGap",!0));var c=s.getBoundingRect(),h=[-c.x,-c.y],f=t.get("selectorButtonGap",!0),p=t.getOrient().index,d=0===p?"width":"height",m=0===p?"height":"width",v=0===p?"y":"x";"end"===o?h[p]+=l[d]+f:u[p]+=c[d]+f,h[1-p]+=l[m]/2-c[m]/2,s.attr("position",h),a.attr("position",u);var y={x:0,y:0};return y[d]=l[d]+f+c[d],y[m]=Math.max(l[m],c[m]),y[v]=Math.min(0,c[v]+h[1-p]),y}return a.attr("position",u),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});t.exports=_},function(t,e){function n(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}t.exports=n},function(t,e,n){function i(t,e,n){var i=t.getOrient(),r=[1,1];r[i.index]=0,a(e,n,{type:"box",ignoreSize:r})}var r=n(588),o=n(221),a=o.mergeLayoutParam,s=o.getLayoutParams,l=r.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,n,r){var o=s(t);l.superCall(this,"init",t,e,n,r),i(this,t,o)},mergeOption:function(t,e){l.superCall(this,"mergeOption",t,e),i(this,this.option,t)}}),u=l;t.exports=u},function(t,e,n){var i=n(136),r=n(184),o=n(221),a=n(590),s=r.Group,l=["width","height"],u=["x","y"],c=a.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){c.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new s),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new s),this._showController},resetInner:function(){c.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,n,o,a,s,l){function u(t,n){var a=t+"DataIndex",s=r.createIcon(e.get("pageIcons",!0)[e.getOrient().name][n],{onclick:i.bind(h._pageGo,h,a,e,o)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});s.name=t,f.add(s)}var h=this;c.superCall(this,"renderInner",t,e,n,o,a,s,l);var f=this._controllerGroup,p=e.get("pageIconSize",!0);i.isArray(p)||(p=[p,p]),u("pagePrev",0);var d=e.getModel("pageTextStyle");f.add(new r.Text({name:"pageText",style:{textFill:d.getTextColor(),font:d.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),u("pageNext",1)},layoutInner:function(t,e,n,r,a,s){var c=this.getSelectorGroup(),h=t.getOrient().index,f=l[h],p=u[h],d=l[1-h],g=u[1-h];a&&o.box("horizontal",c,t.get("selectorItemGap",!0));var m=t.get("selectorButtonGap",!0),v=c.getBoundingRect(),y=[-v.x,-v.y],_=i.clone(n);a&&(_[f]=n[f]-v[f]-m);var x=this._layoutContentAndController(t,r,_,h,f,d,g);if(a){if("end"===s)y[h]+=x[f]+m;else{var w=v[f]+m;y[h]-=w,x[p]-=w}x[f]+=v[f]+m,y[1-h]+=x[g]+x[d]/2-v[d]/2,x[d]=Math.max(x[d],v[d]),x[g]=Math.min(x[g],v[g]+y[1-h]),c.attr("position",y)}return x},_layoutContentAndController:function(t,e,n,a,s,l,u){var c=this.getContentGroup(),h=this._containerGroup,f=this._controllerGroup;o.box(t.get("orient"),c,t.get("itemGap"),a?n.width:null,a?null:n.height),o.box("horizontal",f,t.get("pageButtonItemGap",!0));var p=c.getBoundingRect(),d=f.getBoundingRect(),g=this._showController=p[s]>n[s],m=[-p.x,-p.y];e||(m[a]=c.position[a]);var v=[0,0],y=[-d.x,-d.y],_=i.retrieve2(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(g){var x=t.get("pageButtonPosition",!0);"end"===x?y[a]+=n[s]-d[s]:v[a]+=d[s]+_}y[1-a]+=p[l]/2-d[l]/2,c.attr("position",m),h.attr("position",v),f.attr("position",y);var w={x:0,y:0};if(w[s]=g?n[s]:p[s],w[l]=Math.max(p[l],d[l]),w[u]=Math.min(0,d[u]+y[1-a]),h.__rectSize=n[s],g){var b={x:0,y:0};b[s]=Math.max(n[s]-d[s]-_,0),b[l]=w[l],h.setClipPath(new r.Rect({shape:b})),h.__rectSize=b[s]}else f.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(t);return null!=C.pageIndex&&r.updateProps(c,{position:C.contentPosition},!!g&&t),this._updatePageInfoView(t,C),w},_pageGo:function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(t,e){var n=this._controllerGroup;i.each(["pagePrev","pageNext"],function(i){var r=null!=e[i+"DataIndex"],o=n.childOfName(i);o&&(o.setStyle("fill",r?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),o.cursor=r?"pointer":"default")});var r=n.childOfName("pageText"),o=t.get("pageFormatter"),a=e.pageIndex,s=null!=a?a+1:0,l=e.pageCount;r&&o&&r.setStyle("text",i.isString(o)?o.replace("{current}",s).replace("{total}",l):o({current:s,total:l}))},_getPageInfo:function(t){function e(t){if(t){var e=t.getBoundingRect(),n=e[c]+t.position[a];return{s:n,e:n+e[s],i:t.__legendDataIndex}}}function n(t,e){return t.e>=e&&t.s<=e+o}var i=t.get("scrollDataIndex",!0),r=this.getContentGroup(),o=this._containerGroup.__rectSize,a=t.getOrient().index,s=l[a],c=u[a],h=this._findTargetItemIndex(i),f=r.children(),p=f[h],d=f.length,g=d?1:0,m={contentPosition:r.position.slice(),pageCount:g,pageIndex:g-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!p)return m;var v=e(p);m.contentPosition[a]=-v.s;for(var y=h+1,_=v,x=v,w=null;y<=d;++y)w=e(f[y]),(!w&&x.e>_.s+o||w&&!n(w,_.s))&&(_=x.i>_.i?x:w,_&&(null==m.pageNextDataIndex&&(m.pageNextDataIndex=_.i),++m.pageCount)),x=w;for(var y=h-1,_=v,x=v,w=null;y>=-1;--y)w=e(f[y]),w&&n(x,w.s)||!(_.i<x.i)||(x=_,null==m.pagePrevDataIndex&&(m.pagePrevDataIndex=_.i),++m.pageCount,++m.pageIndex),_=w;return m},_findTargetItemIndex:function(t){if(!this._showController)return 0;var e,n,i=this.getContentGroup();return i.eachChild(function(i,r){var o=i.__legendDataIndex;null==n&&null!=o&&(n=r),o===t&&(e=r)}),null!=e?e:n}}),h=c;t.exports=h},function(t,e,n){var i=n(131);i.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})})},function(t,e,n){n(596),n(599)},function(t,e,n){n(540),n(541),n(544),n(597),n(598),n(547),n(548)},function(t,e,n){var i=n(541),r=i.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),o=r;t.exports=o},function(t,e,n){function i(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function r(t){return"vertical"===t?"ns-resize":"ew-resize"}var o=n(136),a=n(141),s=n(184),l=n(243),u=n(544),c=n(222),h=n(221),f=n(423),p=s.Rect,d=c.linearMap,g=c.asc,m=o.bind,v=o.each,y=7,_=1,x=30,w="horizontal",b="vertical",C=5,S=["line","bar","candlestick","scatter"],M=u.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=e},render:function(t,e,n,i){return M.superApply(this,"render",arguments),l.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),this.dataZoomModel.get("show")===!1?void this.group.removeAll():(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),void this._updateView())},remove:function(){M.superApply(this,"remove",arguments),l.clear(this,"_dispatchZoomAction")},dispose:function(){M.superApply(this,"dispose",arguments),l.clear(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new s.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,n=this._findCoordRect(),i={width:e.getWidth(),height:e.getHeight()},r=this._orient===w?{right:i.width-n.x-n.width,top:i.height-x-y,width:n.width,height:x}:{right:y,top:n.y,width:x,height:n.height},a=h.getLayoutParams(t.option);o.each(["right","top","width","height"],function(t){"ph"===a[t]&&(a[t]=r[t])});var s=h.getLayoutRect(a,i,t.padding);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===b&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),o=this._displayables.barGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n!==w||r?n===w&&r?{scale:a?[-1,1]:[-1,-1]}:n!==b||r?{scale:a?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:a?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:a?[1,1]:[1,-1]});var s=t.getBoundingRect([o]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.barGroup;n.add(new p({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40})),n.add(new p({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:o.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,n=t.series,i=n.getRawData(),r=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=r){var a=i.getDataExtent(r),l=.3*(a[1]-a[0]);a=[a[0]-l,a[1]+l];var u,c=[0,e[1]],h=[0,e[0]],f=[[e[0],0],[0,0]],p=[],g=h[1]/(i.count()-1),m=0,v=Math.round(i.count()/e[0]);i.each([r],function(t,e){if(v>0&&e%v)return void(m+=g);var n=null==t||isNaN(t)||""===t,i=n?0:d(t,a,c,!0);n&&!u&&e?(f.push([f[f.length-1][0],0]),p.push([p[p.length-1][0],0])):!n&&u&&(f.push([m,0]),p.push([m,0])),f.push([m,i]),p.push([m,i]),m+=g,u=n});var y=this.dataZoomModel;this._displayables.barGroup.add(new s.Polygon({shape:{points:f},style:o.defaults({fill:y.get("dataBackgroundColor")},y.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new s.Polyline({shape:{points:p},style:y.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(e!==!1){var n,r=this.ecModel;return t.eachTargetAxis(function(a,s){var l=t.getAxisProxy(a.name,s).getTargetSeriesModels();o.each(l,function(t){if(!(n||e!==!0&&o.indexOf(S,t.get("type"))<0)){var l,u=r.getComponent(a.axis,s).axis,c=i(a.name),h=t.coordinateSystem;null!=c&&h.getOtherAxis&&(l=h.getOtherAxis(u).inverse),c=t.getData().mapDimension(c),n={thisAxis:u,series:t,thisDim:a.name,otherDim:c,otherAxisInverse:l}}},this)},this),n}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],n=t.handleLabels=[],i=this._displayables.barGroup,o=this._size,a=this.dataZoomModel;i.add(t.filler=new p({draggable:!0,cursor:r(this._orient),drift:m(this._onDragMove,this,"all"),ondragstart:m(this._showDataInfo,this,!0),ondragend:m(this._onDragEnd,this),onmouseover:m(this._showDataInfo,this,!0),onmouseout:m(this._showDataInfo,this,!1),style:{fill:a.get("fillerColor"),textPosition:"inside"}})),i.add(new p({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:_,fill:"rgba(0,0,0,0)"}})),v([0,1],function(t){var o=s.createIcon(a.get("handleIcon"),{cursor:r(this._orient),draggable:!0,drift:m(this._onDragMove,this,t),ondragend:m(this._onDragEnd,this),onmouseover:m(this._showDataInfo,this,!0),onmouseout:m(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),l=o.getBoundingRect();this._handleHeight=c.parsePercent(a.get("handleSize"),this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,o.setStyle(a.getModel("handleStyle").getItemStyle());var u=a.get("handleColor");null!=u&&(o.style.fill=u),i.add(e[t]=o);var h=a.textStyleModel;this.group.add(n[t]=new s.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:h.getTextColor(),textFont:h.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[d(t[0],[0,100],e,!0),d(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];f(e,i,r,n.get("zoomLock")?"all":t,null!=o.minSpan?d(o.minSpan,a,r,!0):null,null!=o.maxSpan?d(o.maxSpan,a,r,!0):null);var s=this._range,l=this._range=g([d(i[0],r,a,!0),d(i[1],r,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(t){var e=this._displayables,n=this._handleEnds,i=g(n.slice()),r=this._size;v([0,1],function(t){var i=e.handles[t],o=this._handleHeight;i.attr({scale:[o/2,o/2],position:[n[t],r[1]/2-o/2]})},this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]}),this._updateDataInfo(t)},_updateDataInfo:function(t){function e(t){var e=s.getTransform(i.handles[t].parent,this.group),n=s.transformDirection(0===t?"right":"left",e),l=this._handleWidth/2+C,u=s.applyTransform([f[t]+(0===t?-l:l),this._size[1]/2],e);r[t].setStyle({x:u[0],y:u[1],textVerticalAlign:o===w?"middle":n,textAlign:o===w?n:"center",text:a[t]})}var n=this.dataZoomModel,i=this._displayables,r=i.handleLabels,o=this._orient,a=["",""];if(n.get("showDetail")){var l=n.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,h=t?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();a=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var f=g(this._handleEnds.slice());e.call(this,0),e.call(this,1)},_formatLabel:function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(r,20));return o.isFunction(i)?i(t,a):o.isString(i)?i.replace("{value}",a):a},_showDataInfo:function(t){t=this._dragging||t;var e=this._displayables.handleLabels;e[0].attr("invisible",!t),e[1].attr("invisible",!t)},_onDragMove:function(t,e,n,i){this._dragging=!0,a.stop(i.event);var r=this._displayables.barGroup.getLocalTransform(),o=s.applyTransform([e,n],r,!0),l=this._updateInterval(t,o[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size,n=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,r=(i[0]+i[1])/2,o=this._updateInterval("all",n[0]-r);this._updateView(),o&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;if(v(this.getTargetCoordInfo(),function(e){if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}}),!t){var e=this.api.getWidth(),n=this.api.getHeight();t={x:.2*e,y:.2*n,width:.6*e,height:.6*n}}return t}}),E=M;t.exports=E},function(t,e,n){n(540),n(541),n(544),n(600),n(601),n(547),n(548)},function(t,e,n){var i=n(541),r=i.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});t.exports=r},function(t,e,n){function i(t){return function(e,n,i,r){var o=this._range,s=o.slice(),l=e.axisModels[0];if(l){var u=t(s,l,e,n,i,r);return a(u,s,[0,100],"all"),this._range=s,o[0]!==s[0]||o[1]!==s[1]?s:void 0}}}var r=n(136),o=n(544),a=n(423),s=n(602),l=r.bind,u=o.extend({type:"dataZoom.inside",init:function(t,e){this._range},render:function(t,e,n,i){u.superApply(this,"render",arguments),this._range=t.getPercentRange(),r.each(this.getTargetCoordInfo(),function(e,i){var o=r.map(e,function(t){return s.generateCoordId(t.model)});r.each(e,function(e){var a=e.model,u={};r.each(["pan","zoom","scrollMove"],function(t){u[t]=l(c[t],this,e,i)},this),s.register(n,{coordId:s.generateCoordId(a),allCoordIds:o,containsPoint:function(t,e,n){return a.coordinateSystem.containPoint([e,n])},dataZoomId:t.id,dataZoomModel:t,getRange:u})},this)},this)},dispose:function(){s.unregister(this.api,this.dataZoomModel.id),u.superApply(this,"dispose",arguments),this._range=null}}),c={zoom:function(t,e,n,i){var r=this._range,o=r.slice(),s=t.axisModels[0];if(s){var l=h[e](null,[i.originX,i.originY],s,n,t),u=(l.signal>0?l.pixelStart+l.pixelLength-l.pixel:l.pixel-l.pixelStart)/l.pixelLength*(o[1]-o[0])+o[0],c=Math.max(1/i.scale,0);o[0]=(o[0]-u)*c+u,o[1]=(o[1]-u)*c+u;var f=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return a(0,o,[0,100],0,f.minSpan,f.maxSpan),this._range=o,r[0]!==o[0]||r[1]!==o[1]?o:void 0}},pan:i(function(t,e,n,i,r,o){var a=h[i]([o.oldX,o.oldY],[o.newX,o.newY],e,r,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:i(function(t,e,n,i,r,o){var a=h[i]([0,0],[o.scrollDelta,o.scrollDelta],e,r,n);return a.signal*(t[1]-t[0])*o.scrollDelta})},h={grid:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===o.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=u[1]-u[0],a.pixelStart=u[0],a.signal=o.inverse?-1:1),a},singleAxis:function(t,e,n,i,r){var o=n.axis,a=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===o.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}},f=u;t.exports=f},function(t,e,n){function i(t,e){var n=a(t),i=e.dataZoomId,r=e.coordId;h.each(n,function(t,n){var o=t.dataZoomInfos;o[i]&&h.indexOf(e.allCoordIds,r)<0&&(delete o[i],t.count--)}),l(n);var o=n[r];o||(o=n[r]={coordId:r,dataZoomInfos:{},count:0},o.controller=s(t,o),o.dispatchAction=h.curry(u,t)),!o.dataZoomInfos[i]&&o.count++,o.dataZoomInfos[i]=e;var f=c(o.dataZoomInfos);o.controller.enable(f.controlType,f.opt),o.controller.setPointerChecker(e.containsPoint),p.createOrUpdate(o,"dispatchAction",e.dataZoomModel.get("throttle",!0),"fixRate")}function r(t,e){var n=a(t);h.each(n,function(t){t.controller.dispose();var n=t.dataZoomInfos;n[e]&&(delete n[e],t.count--)}),l(n)}function o(t){return t.type+"\0_"+t.id}function a(t){var e=t.getZr();return e[d]||(e[d]={})}function s(t,e){var n=new f(t.getZr());return h.each(["pan","zoom","scrollMove"],function(t){n.on(t,function(n){var i=[];h.each(e.dataZoomInfos,function(r){if(n.isAvailableBehavior(r.dataZoomModel.option)){var o=(r.getRange||{})[t],a=o&&o(e.controller,n);!r.dataZoomModel.get("disabled",!0)&&a&&i.push({dataZoomId:r.dataZoomId,start:a[0],end:a[1]})}}),i.length&&e.dispatchAction(i)})}),n}function l(t){h.each(t,function(e,n){e.count||(e.controller.dispose(),delete t[n])})}function u(t,e){t.dispatchAction({type:"dataZoom",batch:e})}function c(t){var e,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return h.each(t,function(t){var o=t.dataZoomModel,a=!o.get("disabled",!0)&&(!o.get("zoomLock",!0)||"move");i[n+a]>i[n+e]&&(e=a),r&=o.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}var h=n(136),f=n(354),p=n(243),d="\0_ec_dataZoom_roams";e.register=i,e.unregister=r,e.generateCoordId=o},function(t,e,n){n(604),n(615)},function(t,e,n){var i=n(131),r=n(605);n(606),n(607),n(608),n(611),n(614),i.registerPreprocessor(r)},function(t,e,n){function i(t){var e=t&&t.visualMap;o.isArray(e)||(e=e?[e]:[]),a(e,function(t){if(t){r(t,"splitList")&&!r(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&o.isArray(e)&&a(e,function(t){o.isObject(t)&&(r(t,"start")&&!r(t,"min")&&(t.min=t.start),r(t,"end")&&!r(t,"max")&&(t.max=t.end))})}})}function r(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var o=n(136),a=o.each;t.exports=i},function(t,e,n){var i=n(219);i.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"})},function(t,e,n){function i(t,e,n,i){function r(t){return u[t]}function o(t,e){u[t]=e}for(var a=e.targetVisuals[i],l=s.prepareVisualTypes(a),u={color:t.getData().getVisual("color")},c=0,h=l.length;c<h;c++){var f=l[c],p=a["opacity"===f?"__alphaForOpacity":f];p&&p.applyVisual(n,r,o)}return u.color}var r=n(131),o=n(136),a=n(558),s=n(384),l=r.PRIORITY.VISUAL.COMPONENT;r.registerVisual(l,{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var i=t.pipelineContext;!e.isTargetSeries(t)||i&&i.large||n.push(a.incrementalApplyVisual(e.stateList,e.targetVisuals,o.bind(e.getValueState,e),e.getDataDimension(t.getData())))}),n}}),r.registerVisual(l,{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),r=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var a=e.getVisualMeta(o.bind(i,null,t,e))||{stops:[],outerColors:[]},s=e.getDataDimension(n),l=n.getDimensionInfo(s);null!=l&&(a.dimension=l.index,r.push(a))}}),t.getData().setVisual("visualMeta",r)}})},function(t,e,n){function i(t,e,n){if(n[0]===n[1])return n.slice();for(var i=200,r=(n[1]-n[0])/i,o=n[0],a=[],s=0;s<=i&&o<n[1];s++)a.push(o),o+=r;return a.push(n[1]),a}var r=n(136),o=n(609),a=n(222),s=[20,140],l=o.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){l.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){l.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),(null==t[0]||isNaN(t[0]))&&(t[0]=s[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=s[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):r.isArray(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){o.prototype.completeVisualOption.apply(this,arguments),r.each(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=a.asc((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){
var e=[];return this.eachTargetSeries(function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getVisualMeta:function(t){function e(e,n){o.push({value:e,color:t(e,n)})}for(var n=i(this,"outOfRange",this.getExtent()),r=i(this,"inRange",this.option.range.slice()),o=[],a=0,s=0,l=r.length,u=n.length;s<u&&(!r.length||n[s]<=r[0]);s++)n[s]<r[a]&&e(n[s],"outOfRange");for(var c=1;a<l;a++,c=0)c&&o.length&&e(r[a],"outOfRange"),e(r[a],"inRange");for(var c=1;s<u;s++)(!r.length||r[r.length-1]<n[s])&&(c&&(o.length&&e(o[o.length-1].value,"outOfRange"),c=0),e(n[s],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}}}),u=l;t.exports=u},function(t,e,n){var i=n(131),r=n(136),o=n(135),a=n(610),s=n(384),l=n(558),u=n(177),c=n(222),h=s.mapVisual,f=s.eachVisual,p=r.isArray,d=r.each,g=c.asc,m=c.linearMap,v=r.noop,y=i.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-(1/0),1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,n){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(t,n)},optionUpdated:function(t,e){var n=this.option;o.canvasSupported||(n.realtime=!1),!e&&l.replaceVisualOption(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=r.bind(t,this),this.controllerVisuals=l.createVisualMappings(this.option.controller,e,t),this.targetVisuals=l.createVisualMappings(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=u.normalizeToArray(t),e},eachTargetSeries:function(t,e){r.each(this.getTargetSeriesIndices(),function(n){t.call(e,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},formatValueText:function(t,e,n){function i(t){return t===u[0]?"min":t===u[1]?"max":(+t).toFixed(Math.min(l,20))}var o,a,s=this.option,l=s.precision,u=this.dataBound,c=s.formatter;return n=n||["<",">"],r.isArray(t)&&(t=t.slice(),o=!0),a=e?t:o?[i(t[0]),i(t[1])]:i(t),r.isString(c)?c.replace("{value}",o?a[0]:a).replace("{value2}",o?a[1]:a):r.isFunction(c)?o?c(t[0],t[1]):c(t):o?t[0]===u[0]?n[0]+" "+a[1]:t[1]===u[1]?n[1]+" "+a[0]:a[0]+" - "+a[1]:a},resetExtent:function(){var t=this.option,e=g([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension,n=t.dimensions;if(null!=e||n.length){if(null!=e)return t.getDimension(e);for(var i=t.dimensions,r=i.length-1;r>=0;r--){var o=i[r],a=t.getDimensionInfo(o);if(!a.isCalculationCoord)return o}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){function t(t){p(o.color)&&!t.inRange&&(t.inRange={color:o.color.slice().reverse()}),t.inRange=t.inRange||{color:i.get("gradientColor")},d(this.stateList,function(e){var n=t[e];if(r.isString(n)){var i=a.get(n,"active",g);i?(t[e]={},t[e][n]=i):delete t[e]}},this)}function e(t,e,n){var i=t[e],r=t[n];i&&!r&&(r=t[n]={},d(i,function(t,e){if(s.isValidType(e)){var n=a.get(e,"inactive",g);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}}))}function n(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor");d(this.stateList,function(o){var a=this.itemSize,s=t[o];s||(s=t[o]={color:g?i:[i]}),null==s.symbol&&(s.symbol=e&&r.clone(e)||(g?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=n&&r.clone(n)||(g?a[0]:[a[0],a[0]])),s.symbol=h(s.symbol,function(t){return"none"===t||"square"===t?"roundRect":t});var l=s.symbolSize;if(null!=l){var u=-(1/0);f(l,function(t){t>u&&(u=t)}),s.symbolSize=h(l,function(t){return m(t,[0,u],[0,a[0]],!0)})}},this)}var i=this.ecModel,o=this.option,l={inRange:o.inRange,outOfRange:o.outOfRange},u=o.target||(o.target={}),c=o.controller||(o.controller={});r.merge(u,l),r.merge(c,l);var g=this.isCategory();t.call(this,u),t.call(this,c),e.call(this,u,"inRange","outOfRange"),n.call(this,c)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:v,getValueState:v,getVisualMeta:v}),_=y;t.exports=_},function(t,e,n){var i=n(136),r={get:function(t,e,n){var r=i.clone((o[t]||{})[e]);return n&&i.isArray(r)?r[r.length-1]:r}},o={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},a=r;t.exports=a},function(t,e,n){function i(t,e,n,i){return new p.Polygon({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){h.stop(t.event)},ondragend:i})}function r(t,e){return 0===t?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}function o(t,e,n,i){return t?[[0,-x(e,w(n,0))],[C,0],[0,x(e,w(i-n,0))]]:[[0,0],[5,-5],[5,5]]}function a(t,e,n){var i=b/2,r=t.get("hoverLinkDataSize");return r&&(i=y(r,e,n,!0)/2),i}function s(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function l(t){return"vertical"===t?"ns-resize":"ew-resize"}var u=n(136),c=n(214),h=n(141),f=n(612),p=n(184),d=n(222),g=n(423),m=n(613),v=n(177),y=d.linearMap,_=u.each,x=Math.min,w=Math.max,b=12,C=6,S=f.extend({type:"visualMap.continuous",init:function(){S.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,o=r.get("textGap"),a=r.itemSize,s=this._shapes.barGroup,l=this._applyTransform([a[0]/2,0===n?-o:a[1]+o],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new p.Text({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===c?"middle":u,textAlign:"horizontal"===c?u:"center",text:i,textFont:h.getFont(),textFill:h.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,n=this._shapes,r=e.itemSize,o=this._orient,a=this._useHandle,s=m.getItemAlign(e,this.api,r),c=n.barGroup=this._createBarGroup(s);c.add(n.outOfRange=i()),c.add(n.inRange=i(null,a?l(this._orient):null,u.bind(this._dragHandle,this,"all",!1),u.bind(this._dragHandle,this,"all",!0)));var h=e.textStyleModel.getTextRect("国"),f=w(h.width,h.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(c,0,r,f,o,s),this._createHandle(c,1,r,f,o,s)),this._createIndicator(c,r,f,o),t.add(c)},_createHandle:function(t,e,n,o,a){var s=u.bind(this._dragHandle,this,e,!1),c=u.bind(this._dragHandle,this,e,!0),f=i(r(e,o),l(this._orient),s,c);f.position[0]=n[0],t.add(f);var d=this.visualMapModel.textStyleModel,g=new p.Text({draggable:!0,drift:s,onmousemove:function(t){h.stop(t.event)},ondragend:c,style:{x:0,y:0,text:"",textFont:d.getFont(),textFill:d.getTextColor()}});this.group.add(g);var m=["horizontal"===a?o/2:1.5*o,"horizontal"===a?0===e?-(1.5*o):1.5*o:0===e?-o/2:o/2],v=this._shapes;v.handleThumbs[e]=f,v.handleLabelPoints[e]=m,v.handleLabels[e]=g},_createIndicator:function(t,e,n,r){var o=i([[0,0]],"move");o.position[0]=e[0],o.attr({invisible:!0,silent:!0}),t.add(o);var a=this.visualMapModel.textStyleModel,s=new p.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:a.getFont(),textFill:a.getTextColor()}});this.group.add(s);var l=["horizontal"===r?n/2:C+3,0],u=this._shapes;u.indicator=o,u.indicatorLabel=s,u.indicatorLabelPoint=l},_dragHandle:function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(t,r[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():s(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[y(e[0],n,i,!0),y(e[1],n,i,!0)]},_updateInterval:function(t,e){e=e||0;var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];g(e,i,r,t,0);var o=n.getExtent();this._dataInterval=[y(i[0],r,o,!0),y(i[1],r,o,!0)]},_updateView:function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,r=[0,e.itemSize[1]],o=t?r:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,o,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:a.barColor,opacity:a.opacity}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(o,a)},_createBarVisual:function(t,e,n,i){var r={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,r),a=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(n,a);return{barColor:new c(0,0,0,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},_makeColorGradient:function(t,e){var n=100,i=[],r=(t[1]-t[0])/n;i.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var o=1;o<n;o++){var a=t[0]+r*o;if(a>t[1])break;i.push({color:this.getControllerVisual(a,"color",e),offset:o/n})}return i.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),i},_createBarPoints:function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new p.Group("horizontal"!==e||n?"horizontal"===e&&n?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||n?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,o=n.handleLabels;_([0,1],function(a){var s=r[a];s.setStyle("fill",e.handlesColor[a]),s.position[1]=t[a];var l=p.applyTransform(n.handleLabelPoints[a],p.getTransform(s,this.group));o[a].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[a]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===a?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(t,e,n,i){var r=this.visualMapModel,a=r.getExtent(),s=r.itemSize,l=[0,s[1]],u=y(t,a,l,!0),c=this._shapes,h=c.indicator;if(h){h.position[1]=u,h.attr("invisible",!1),h.setShape("points",o(!!n,i,u,s[1]));var f={convertOpacityToAlpha:!0},d=this.getControllerVisual(t,"color",f);h.setStyle("fill",d);var g=p.applyTransform(c.indicatorLabelPoint,p.getTransform(h,this.group)),m=c.indicatorLabel;m.attr("invisible",!1);var v=this._applyTransform("left",c.barGroup),_=this._orient;m.setStyle({text:(n?n:"")+r.formatValueText(e),textVerticalAlign:"horizontal"===_?v:"middle",textAlign:"horizontal"===_?"center":v,x:g[0],y:g[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);i[1]=x(w(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var r=[0,i[1]],o=n.getExtent();t=x(w(r[0],t),r[1]);var l=a(n,o,r),u=[t-l,t+l],c=y(t,r,o,!0),h=[y(u[0],r,o,!0),y(u[1],r,o,!0)];u[0]<r[0]&&(h[0]=-(1/0)),u[1]>r[1]&&(h[1]=1/0),e&&(h[0]===-(1/0)?this._showIndicator(c,h[1],"< ",l):h[1]===1/0?this._showIndicator(c,h[0],"> ",l):this._showIndicator(c,c,"≈ ",l));var f=this._hoverLinkDataIndices,p=[];(e||s(n))&&(p=this._hoverLinkDataIndices=n.findTargetDataIndices(h));var d=v.compressBatches(f,p);this._dispatchHighDown("downplay",m.makeHighDownBatch(d[0],n)),this._dispatchHighDown("highlight",m.makeHighDownBatch(d[1],n))}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=e.dataIndex){var i=this.ecModel.getSeriesByIndex(e.seriesIndex);if(n.isTargetSeries(i)){var r=i.getData(e.dataType),o=r.get(n.getDataDimension(r),e.dataIndex,!0);isNaN(o)||this._showIndicator(o,o)}}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",m.makeHighDownBatch(t,this.visualMapModel)),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,n,i){var r=p.getTransform(e,i?null:this.group);return p[u.isArray(t)?"applyTransform":"transformDirection"](t,r,n)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}}),M=S;t.exports=M},function(t,e,n){var i=n(131),r=n(136),o=n(184),a=n(223),s=n(221),l=n(384),u=i.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e,this.visualMapModel},render:function(t,e,n,i){return this.visualMapModel=t,t.get("show")===!1?void this.group.removeAll():void this.doRender.apply(this,arguments)},renderBackground:function(t){var e=this.visualMapModel,n=a.normalizeCssArray(e.get("padding")||0),i=t.getBoundingRect();t.add(new o.Rect({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,n){function i(t){return u[t]}function o(t,e){u[t]=e}n=n||{};var a=n.forceState,s=this.visualMapModel,u={};if("symbol"===e&&(u.symbol=s.get("itemSymbol")),"color"===e){var c=s.get("contentColor");u.color=c}var h=s.controllerVisuals[a||s.getValueState(t)],f=l.prepareVisualTypes(h);return r.each(f,function(r){var a=h[r];n.convertOpacityToAlpha&&"opacity"===r&&(r="colorAlpha",a=h.__alphaForOpacity),l.dependsOn(r,e)&&a&&a.applyVisual(t,i,o)}),u[e]},positionGroup:function(t){var e=this.visualMapModel,n=this.api;s.positionElement(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:r.noop});t.exports=u},function(t,e,n){function i(t,e,n){var i=t.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var o={width:e.getWidth(),height:e.getHeight()},a="horizontal"===i.orient?1:0,l=[["left","right","width"],["top","bottom","height"]],u=l[a],c=[0,null,10],h={},f=0;f<3;f++)h[l[1-a][f]]=c[f],h[u[f]]=2===f?n[0]:i[u[f]];var p=[["x","width",3],["y","height",0]][a],d=s(h,o,i.padding);return u[(d.margin[p[2]]||0)+d[p[0]]+.5*d[p[1]]<.5*o[p[1]]?0:1]}function r(t,e){return o.each(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var o=n(136),a=n(221),s=a.getLayoutRect;e.getItemAlign=i,e.makeHighDownBatch=r},function(t,e,n){var i=n(131),r={type:"selectDataRange",event:"dataRangeSelected",update:"update"};i.registerAction(r,function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})})},function(t,e,n){var i=n(131),r=n(605);n(606),n(607),n(616),n(617),n(614),i.registerPreprocessor(r)},function(t,e,n){function i(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var r=n(132),o=(r.__DEV__,n(136)),a=n(609),s=n(384),l=n(610),u=n(222),c=u.reformIntervals,h=a.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(t,e){h.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();f[this._mode].call(this),this._resetSelected(t,e);var i=this.option.categories;this.resetVisual(function(t,e){"categories"===n?(t.mappingMethod="category",t.categories=o.clone(i)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=o.map(this._pieceList,function(t){var t=o.clone(t);return"inRange"!==e&&(t.visual=null),t}))})},completeVisualOption:function(){function t(t,e,n){return t&&t[e]&&(o.isObject(t[e])?t[e].hasOwnProperty(n):t[e]===n)}var e=this.option,n={},i=s.listVisualTypes(),r=this.isCategory();o.each(e.pieces,function(t){o.each(i,function(e){t.hasOwnProperty(e)&&(n[e]=1)})}),o.each(n,function(n,i){var a=0;o.each(this.stateList,function(n){a|=t(e,n,i)||t(e.target,n,i)},this),!a&&o.each(this.stateList,function(t){(e[t]||(e[t]={}))[i]=l.get(i,"inRange"===t?"active":"inactive",r)})},this),a.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var n=this.option,i=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,o.each(i,function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)},this),"single"===n.selectedMode){var a=!1;o.each(i,function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(a?r[n]=!1:a=!0)},this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=o.clone(t)},getValueState:function(t){var e=s.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),function(e,n){var r=s.findPieceIndex(e,this._pieceList);r===t&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-(1/0)&&n[1]===1/0?0:(n[0]+n[1])/2}return e},getVisualMeta:function(t){function e(e,o){var a=r.getRepresentValue({interval:e});o||(o=r.getValueState(a));var s=t(a,o);e[0]===-(1/0)?i[0]=s:e[1]===1/0?i[1]=s:n.push({value:e[0],color:s},{value:e[1],color:s})}if(!this.isCategory()){var n=[],i=[],r=this,a=this._pieceList.slice();if(a.length){var s=a[0].interval[0];s!==-(1/0)&&a.unshift({interval:[-(1/0),s]}),s=a[a.length-1].interval[1],s!==1/0&&a.push({interval:[s,1/0]})}else a.push({interval:[-(1/0),1/0]});var l=-(1/0);return o.each(a,function(t){var n=t.interval;n&&(n[0]>l&&e([l,n[0]],"outOfRange"),e(n.slice()),l=n[1])},this),{stops:n,outerColors:i}}}}),f={splitNumber:function(){var t=this.option,e=this._pieceList,n=Math.min(t.precision,20),i=this.getExtent(),r=t.splitNumber;r=Math.max(parseInt(r,10),1),t.splitNumber=r;for(var a=(i[1]-i[0])/r;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n),t.minOpen&&e.push({interval:[-(1/0),i[0]],close:[0,0]});for(var s=0,l=i[0];s<r;l+=a,s++){var u=s===r-1?i[1]:l+a;e.push({interval:[l,u],close:[1,1]})}t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),c(e),o.each(e,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;o.each(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),i(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;o.each(t.pieces,function(t,n){o.isObject(t)||(t={value:t});var i={text:"",index:n};if(null!=t.label&&(i.text=t.label),t.hasOwnProperty("value")){var r=i.value=t.value;i.interval=[r,r],i.close=[1,1]}else{for(var a=i.interval=[],l=i.close=[0,0],u=[1,0,1],c=[-(1/0),1/0],h=[],f=0;f<2;f++){for(var p=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&null==a[f];d++)a[f]=t[p[d]],l[f]=u[d],h[f]=2===d;null==a[f]&&(a[f]=c[f])}h[0]&&a[1]===1/0&&(l[0]=0),h[1]&&a[0]===-(1/0)&&(l[1]=0),a[0]===a[1]&&l[0]&&l[1]&&(i.value=a[0])}i.visual=s.retrieveVisuals(t),e.push(i)},this),i(t,e),c(e),o.each(e,function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)},this)}},p=h;t.exports=p},function(t,e,n){var i=n(136),r=n(612),o=n(184),a=n(276),s=a.createSymbol,l=n(221),u=n(613),c=r.extend({type:"visualMap.piecewise",doRender:function(){function t(t){var a=t.piece,l=new o.Group;l.onclick=i.bind(this._onItemClick,this,a),this._enableHoverLink(l,t.indexInModelPieceList);var f=n.getRepresentValue(a);if(this._createItemSymbol(l,f,[0,0,h[0],h[1]]),d){var p=this.visualMapModel.getValueState(f);l.add(new o.Text({style:{x:"right"===c?-r:h[0]+r,y:h[1]/2,text:a.text,textVerticalAlign:"middle",textAlign:c,textFont:s,textFill:u,opacity:"outOfRange"===p?.5:1}}))}e.add(l)}var e=this.group;e.removeAll();var n=this.visualMapModel,r=n.get("textGap"),a=n.textStyleModel,s=a.getFont(),u=a.getTextColor(),c=this._getItemAlign(),h=n.itemSize,f=this._getViewData(),p=f.endsText,d=i.retrieve(n.get("showLabel",!0),!p);p&&this._renderEndsText(e,p[0],h,d,c),i.each(f.viewPieceList,t,this),p&&this._renderEndsText(e,p[1],h,d,c),l.box(n.get("orient"),e,n.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(t,e){function n(t){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:t,batch:u.makeHighDownBatch(n.findTargetDataIndices(e),n)})}t.on("mouseover",i.bind(n,this,"highlight")).on("mouseout",i.bind(n,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return u.getItemAlign(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(t,e,n,i,r){if(e){var a=new o.Group,s=this.visualMapModel.textStyleModel;a.add(new o.Text({style:{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?r:"center",text:e,textFont:s.getFont(),textFill:s.getTextColor()}})),t.add(a)}},_getViewData:function(){var t=this.visualMapModel,e=i.map(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),r=t.get("orient"),o=t.get("inverse");return("horizontal"===r?o:!o)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},_createItemSymbol:function(t,e,n){t.add(s(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,n=e.option,r=i.clone(n.selected),o=e.getSelectedMapKey(t);"single"===n.selectedMode?(r[o]=!0,i.each(r,function(t,e){r[e]=e===o})):r[o]=!r[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}}),h=c;t.exports=h},function(t,e,n){n(619);var i=n(133),r=i.registerPainter,o=n(621);r("vml",o)},function(t,e,n){var i=n(135),r=n(138),o=r.applyTransform,a=n(158),s=n(154),l=n(171),u=n(170),c=n(169),h=n(168),f=n(167),p=n(198),d=n(186),g=n(187),m=n(215),v=n(620),y=g.CMD,_=Math.round,x=Math.sqrt,w=Math.abs,b=Math.cos,C=Math.sin,S=Math.max;if(!i.canvasSupported){var M=",",E="progid:DXImageTransform.Microsoft",I=21600,T=I/2,P=1e5,L=1e3,D=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=I+","+I,t.coordorigin="0,0"},A=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},k=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},N=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},O=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},R=function(t,e,n){return(parseFloat(t)||0)*P+(parseFloat(e)||0)*L+n},F=u.parsePercent,z=function(t,e,n){var i=s.parse(e);n=+n,isNaN(n)&&(n=1),i&&(t.color=k(i[0],i[1],i[2]),t.opacity=n*i[3])},B=function(t){var e=s.parse(t);return[k(e[0],e[1],e[2]),e[3]]},V=function(t,e,n){var i=e.fill;if(null!=i)if(i instanceof m){var r,a=0,s=[0,0],l=0,u=1,c=n.getBoundingRect(),h=c.width,f=c.height;if("linear"===i.type){r="gradient";var p=n.transform,d=[i.x*h,i.y*f],g=[i.x2*h,i.y2*f];p&&(o(d,d,p),o(g,g,p));var v=g[0]-d[0],y=g[1]-d[1];a=180*Math.atan2(v,y)/Math.PI,a<0&&(a+=360),a<1e-6&&(a=0)}else{r="gradientradial";var d=[i.x*h,i.y*f],p=n.transform,_=n.scale,x=h,w=f;s=[(d[0]-c.x)/x,(d[1]-c.y)/w],p&&o(d,d,p),x/=_[0]*I,w/=_[1]*I;var b=S(x,w);l=0/b,u=2*i.r/b-l}var C=i.colorStops.slice();C.sort(function(t,e){return t.offset-e.offset});for(var M=C.length,E=[],T=[],P=0;P<M;P++){var L=C[P],D=B(L.color);T.push(L.offset*u+l+" "+D[0]),0!==P&&P!==M-1||E.push(D)}if(M>=2){var A=E[0][0],k=E[1][0],N=E[0][1]*e.opacity,O=E[1][1]*e.opacity;t.type=r,t.method="none",t.focus="100%",t.angle=a,t.color=A,t.color2=k,t.colors=T.join(","),t.opacity=O,t.opacity2=N}"radial"===r&&(t.focusposition=s.join(","))}else z(t,i,e.opacity)},G=function(t,e){e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof m||z(t,e.stroke,e.opacity)},H=function(t,e,n,i){var r="fill"===e,o=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(r||!r&&n.lineWidth)?(t[r?"filled":"stroked"]="true",n[e]instanceof m&&O(t,o),o||(o=v.createNode(e)),r?V(o,n,i):G(o,n),N(t,o)):(t[r?"filled":"stroked"]="false",O(t,o))},j=[[],[],[]],U=function(t,e){var n,i,r,a,s,l,u=y.M,c=y.C,h=y.L,f=y.A,p=y.Q,d=[],g=t.data,m=t.len();for(a=0;a<m;){switch(r=g[a++],i="",n=0,r){case u:i=" m ",n=1,s=g[a++],l=g[a++],j[0][0]=s,j[0][1]=l;break;case h:i=" l ",n=1,s=g[a++],l=g[a++],j[0][0]=s,j[0][1]=l;break;case p:case c:i=" c ",n=3;var v,w,S=g[a++],E=g[a++],P=g[a++],L=g[a++];r===p?(v=P,w=L,P=(P+2*S)/3,L=(L+2*E)/3,S=(s+2*S)/3,E=(l+2*E)/3):(v=g[a++],w=g[a++]),j[0][0]=S,j[0][1]=E,j[1][0]=P,j[1][1]=L,j[2][0]=v,j[2][1]=w,s=v,l=w;break;case f:var D=0,A=0,k=1,N=1,O=0;e&&(D=e[4],A=e[5],k=x(e[0]*e[0]+e[1]*e[1]),N=x(e[2]*e[2]+e[3]*e[3]),O=Math.atan2(-e[1]/N,e[0]/k));var R=g[a++],F=g[a++],z=g[a++],B=g[a++],V=g[a++]+O,G=g[a++]+V+O;a++;var H=g[a++],U=R+b(V)*z,W=F+C(V)*B,S=R+b(G)*z,E=F+C(G)*B,q=H?" wa ":" at ";Math.abs(U-S)<1e-4&&(Math.abs(G-V)>.01?H&&(U+=270/I):Math.abs(W-F)<1e-4?H&&U<R||!H&&U>R?E-=270/I:E+=270/I:H&&W<F||!H&&W>F?S+=270/I:S-=270/I),d.push(q,_(((R-z)*k+D)*I-T),M,_(((F-B)*N+A)*I-T),M,_(((R+z)*k+D)*I-T),M,_(((F+B)*N+A)*I-T),M,_((U*k+D)*I-T),M,_((W*N+A)*I-T),M,_((S*k+D)*I-T),M,_((E*N+A)*I-T)),s=S,l=E;break;case y.R:var Y=j[0],X=j[1];Y[0]=g[a++],Y[1]=g[a++],X[0]=Y[0]+g[a++],X[1]=Y[1]+g[a++],e&&(o(Y,Y,e),o(X,X,e)),Y[0]=_(Y[0]*I-T),X[0]=_(X[0]*I-T),Y[1]=_(Y[1]*I-T),X[1]=_(X[1]*I-T),d.push(" m ",Y[0],M,Y[1]," l ",X[0],M,Y[1]," l ",X[0],M,X[1]," l ",Y[0],M,X[1]);break;case y.Z:d.push(" x ")}if(n>0){d.push(i);for(var Z=0;Z<n;Z++){var J=j[Z];e&&o(J,J,e),d.push(_(J[0]*I-T),M,_(J[1]*I-T),Z<n-1?M:"")}}}return d.join("")};d.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=v.createNode("shape"),D(n),this._vmlEl=n),H(n,"fill",e,this),H(n,"stroke",e,this);var i=this.transform,r=null!=i,o=n.getElementsByTagName("stroke")[0];if(o){var a=e.lineWidth;if(r&&!e.strokeNoScale){var s=i[0]*i[3]-i[1]*i[2];a*=x(w(s))}o.weight=a+"px"}var l=this.path||(this.path=new g);this.__dirtyPath&&(l.beginPath(),l.subPixelOptimize=!1,this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),n.path=U(l,this.transform),n.style.zIndex=R(this.zlevel,this.z,this.z2),N(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},d.prototype.onRemove=function(t){O(t,this._vmlEl),this.removeRectText(t)},d.prototype.onAdd=function(t){N(t,this._vmlEl),this.appendRectText(t)};var W=function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()};f.prototype.brushVML=function(t){var e,n,i=this.style,r=i.image;if(W(r)){var a=r.src;if(a===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var s=r.runtimeStyle,l=s.width,u=s.height;s.width="auto",s.height="auto",e=r.width,n=r.height,s.width=l,s.height=u,this._imageSrc=a,this._imageWidth=e,this._imageHeight=n}r=a}else r===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(r){var c=i.x||0,h=i.y||0,f=i.width,p=i.height,d=i.sWidth,g=i.sHeight,m=i.sx||0,y=i.sy||0,w=d&&g,b=this._vmlEl;b||(b=v.doc.createElement("div"),D(b),this._vmlEl=b);var C,I=b.style,T=!1,P=1,L=1;if(this.transform&&(C=this.transform,P=x(C[0]*C[0]+C[1]*C[1]),L=x(C[2]*C[2]+C[3]*C[3]),T=C[1]||C[2]),T){var A=[c,h],k=[c+f,h],O=[c,h+p],F=[c+f,h+p];o(A,A,C),o(k,k,C),o(O,O,C),o(F,F,C);var z=S(A[0],k[0],O[0],F[0]),B=S(A[1],k[1],O[1],F[1]),V=[];V.push("M11=",C[0]/P,M,"M12=",C[2]/L,M,"M21=",C[1]/P,M,"M22=",C[3]/L,M,"Dx=",_(c*P+C[4]),M,"Dy=",_(h*L+C[5])),I.padding="0 "+_(z)+"px "+_(B)+"px 0",I.filter=E+".Matrix("+V.join("")+", SizingMethod=clip)"}else C&&(c=c*P+C[4],h=h*L+C[5]),I.filter="",I.left=_(c)+"px",I.top=_(h)+"px";var G=this._imageEl,H=this._cropEl;G||(G=v.doc.createElement("div"),this._imageEl=G);var j=G.style;if(w){if(e&&n)j.width=_(P*e*f/d)+"px",j.height=_(L*n*p/g)+"px";else{var U=new Image,q=this;U.onload=function(){U.onload=null,e=U.width,n=U.height,j.width=_(P*e*f/d)+"px",j.height=_(L*n*p/g)+"px",q._imageWidth=e,q._imageHeight=n,q._imageSrc=r},U.src=r}H||(H=v.doc.createElement("div"),H.style.overflow="hidden",this._cropEl=H);var Y=H.style;Y.width=_((f+m*f/d)*P),Y.height=_((p+y*p/g)*L),Y.filter=E+".Matrix(Dx="+-m*f/d*P+",Dy="+-y*p/g*L+")",H.parentNode||b.appendChild(H),G.parentNode!==H&&H.appendChild(G)}else j.width=_(P*f)+"px",j.height=_(L*p)+"px",b.appendChild(G),H&&H.parentNode&&(b.removeChild(H),this._cropEl=null);var X="",Z=i.opacity;Z<1&&(X+=".Alpha(opacity="+_(100*Z)+") "),X+=E+".AlphaImageLoader(src="+r+", SizingMethod=scale)",j.filter=X,b.style.zIndex=R(this.zlevel,this.z,this.z2),N(t,b),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},f.prototype.onRemove=function(t){O(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},f.prototype.onAdd=function(t){N(t,this._vmlEl),this.appendRectText(t)};var q,Y="normal",X={},Z=0,J=100,K=document.createElement("div"),$=function(t){var e=X[t];if(!e){Z>J&&(Z=0,X={});var n,i=K.style;try{i.font=t,
n=i.fontFamily.split(",")[0]}catch(t){}e={style:i.fontStyle||Y,variant:i.fontVariant||Y,weight:i.fontWeight||Y,size:0|parseFloat(i.fontSize||12),family:n||"Microsoft YaHei"},X[t]=e,Z++}return e};l.$override("measureText",function(t,e){var n=v.doc;q||(q=n.createElement("div"),q.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",v.doc.body.appendChild(q));try{q.style.font=e}catch(t){}return q.innerHTML="",q.appendChild(n.createTextNode(t)),{width:q.offsetWidth}});for(var Q=new a,tt=function(t,e,n,i){var r=this.style;this.__dirty&&u.normalizeTextStyle(r,!0);var a=r.text;if(null!=a&&(a+=""),a){if(r.rich){var s=l.parseRichText(a,r);a=[];for(var c=0;c<s.lines.length;c++){for(var h=s.lines[c].tokens,f=[],p=0;p<h.length;p++)f.push(h[p].text);a.push(f.join(""))}a=a.join("\n")}var d,g,m=r.textAlign,y=r.textVerticalAlign,x=$(r.font),w=x.style+" "+x.variant+" "+x.weight+" "+x.size+'px "'+x.family+'"';n=n||l.getBoundingRect(a,w,m,y,r.textPadding,r.textLineHeight);var b=this.transform;if(b&&!i&&(Q.copy(e),Q.applyTransform(b),e=Q),i)d=e.x,g=e.y;else{var C=r.textPosition;if(C instanceof Array)d=e.x+F(C[0],e.width),g=e.y+F(C[1],e.height),m=m||"left";else{var S=this.calculateTextPosition?this.calculateTextPosition({},r,e):l.calculateTextPosition({},r,e);d=S.x,g=S.y,m=m||S.textAlign,y=y||S.textVerticalAlign}}d=l.adjustTextX(d,n.width,m),g=l.adjustTextY(g,n.height,y),g+=n.height/2;var E,I,T,P=v.createNode,L=this._textVmlEl;L?(T=L.firstChild,E=T.nextSibling,I=E.nextSibling):(L=P("line"),E=P("path"),I=P("textpath"),T=P("skew"),I.style["v-text-align"]="left",D(L),E.textpathok=!0,I.on=!0,L.from="0 0",L.to="1000 0.05",N(L,T),N(L,E),N(L,I),this._textVmlEl=L);var k=[d,g],O=L.style;b&&i?(o(k,k,b),T.on=!0,T.matrix=b[0].toFixed(3)+M+b[2].toFixed(3)+M+b[1].toFixed(3)+M+b[3].toFixed(3)+",0,0",T.offset=(_(k[0])||0)+","+(_(k[1])||0),T.origin="0 0",O.left="0px",O.top="0px"):(T.on=!1,O.left=_(d)+"px",O.top=_(g)+"px"),I.string=A(a);try{I.style.font=w}catch(t){}H(L,"fill",{fill:r.textFill,opacity:r.opacity},this),H(L,"stroke",{stroke:r.textStroke,opacity:r.opacity,lineDash:r.lineDash||null},this),L.style.zIndex=R(this.zlevel,this.z,this.z2),N(t,L)}},et=function(t){O(t,this._textVmlEl),this._textVmlEl=null},nt=function(t){N(t,this._textVmlEl)},it=[c,h,f,d,p],rt=0;rt<it.length;rt++){var ot=it[rt].prototype;ot.drawRectText=tt,ot.removeRectText=et,ot.appendRectText=nt}p.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},p.prototype.onRemove=function(t){this.removeRectText(t)},p.prototype.onAdd=function(t){this.appendRectText(t)}}},function(t,e,n){function i(t){return o(t)}function r(){if(!u&&c){u=!0;var t=c.styleSheets;t.length<31?c.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}var o,a=n(135),s="urn:schemas-microsoft-com:vml",l="undefined"==typeof window?null:window,u=!1,c=l&&l.document;if(c&&!a.canvasSupported)try{!c.namespaces.zrvml&&c.namespaces.add("zrvml",s),o=function(t){return c.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){o=function(t){return c.createElement("<"+t+' xmlns="'+s+'" class="zrvml">')}}e.doc=c,e.createNode=i,e.initVML=r},function(t,e,n){function i(t){return parseInt(t,10)}function r(t,e){s.initVML(),this.root=t,this.storage=e;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var r=e.delFromStorage,o=e.addToStorage;e.delFromStorage=function(t){r.call(e,t),t&&t.onRemove&&t.onRemove(i)},e.addToStorage=function(t){t.onAdd&&t.onAdd(i),o.call(e,t)},this._firstPaint=!0}function o(t){return function(){a('In IE8.0 VML mode painter not support method "'+t+'"')}}var a=n(156),s=n(620),l=n(136),u=l.each;r.prototype={constructor:r,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var i=t[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(e),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(e),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,e),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){var t=null==t?this._getWidth():t,e=null==e?this._getHeight():e;if(this._width!==t||this._height!==e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||i(e.width))-i(e.paddingLeft)-i(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||i(e.height))-i(e.paddingTop)-i(e.paddingBottom)|0}},u(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){r.prototype[t]=o(t)});var c=r;t.exports=c},function(t,e,n){n(623);var i=n(133),r=i.registerPainter,o=n(625);r("svg",o)},function(t,e,n){function i(t){return I(1e4*t)/1e4}function r(t){return t<k&&t>-k}function o(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==E}function a(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==E}function s(t,e){e&&l(t,"transform","matrix("+M.call(e,",")+")")}function l(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&t.setAttribute(e,n)}function u(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function c(t,e,n,i){if(o(e,n)){var r=n?e.textFill:e.fill;r="transparent"===r?E:r,l(t,"fill",r),l(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else l(t,"fill",E);if(a(e,n)){var s=n?e.textStroke:e.stroke;s="transparent"===s?E:s,l(t,"stroke",s);var u=n?e.textStrokeWidth:e.lineWidth,c=!n&&e.strokeNoScale?i.getLineScale():1;l(t,"stroke-width",u/c),l(t,"paint-order",n?"stroke":"fill"),l(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity);var h=e.lineDash;h?(l(t,"stroke-dasharray",e.lineDash.join(",")),l(t,"stroke-dashoffset",I(e.lineDashOffset||0))):l(t,"stroke-dasharray",""),e.lineCap&&l(t,"stroke-linecap",e.lineCap),e.lineJoin&&l(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&l(t,"stroke-miterlimit",e.miterLimit)}else l(t,"stroke",E)}function h(t){for(var e=[],n=t.data,o=t.len(),a=0;a<o;){var s=n[a++],l="",u=0;switch(s){case S.M:l="M",u=2;break;case S.L:l="L",u=2;break;case S.Q:l="Q",u=4;break;case S.C:l="C",u=6;break;case S.A:var c=n[a++],h=n[a++],f=n[a++],p=n[a++],d=n[a++],g=n[a++],m=n[a++],v=n[a++],y=Math.abs(g),_=r(y-D)||(v?g>=D:-g>=D),x=g>0?g%D:g%D+D,w=!1;w=!!_||!r(y)&&x>=L==!!v;var b=i(c+f*P(d)),C=i(h+p*T(d));_&&(g=v?D-1e-4:-D+1e-4,w=!0,9===a&&e.push("M",b,C));var M=i(c+f*P(d+g)),E=i(h+p*T(d+g));e.push("A",i(f),i(p),I(m*A),+w,+v,M,E);break;case S.Z:l="Z";break;case S.R:var M=i(n[a++]),E=i(n[a++]),k=i(n[a++]),N=i(n[a++]);e.push("M",M,E,"L",M+k,E,"L",M+k,E+N,"L",M,E+N,"L",M,E)}l&&e.push(l);for(var O=0;O<u;O++)e.push(i(n[a++]))}return e.join(" ")}function f(t,e,n,i,r,o,a){x.identity(B),e&&n&&x.copy(B,n);var l=i.textRotation;if(r&&l){var u=i.textOrigin;"center"===u?(o=r.width/2+r.x,a=r.height/2+r.y):u&&(o=u[0]+r.x,a=u[1]+r.y),B[4]-=o,B[5]-=a,x.rotate(B,B,l),B[4]+=o,B[5]+=a}s(t,B)}function p(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function d(t,e,n,i){l(t,"dominant-baseline","middle"),l(t,"text-anchor",V[e]),l(t,"x",n),l(t,"y",i)}function g(t){t&&t.__textSvgEl&&(t.__textSvgEl.parentNode&&t.__textSvgEl.parentNode.removeChild(t.__textSvgEl),t.__textSvgEl=null,t.__tspanList=[],t.__text=null)}var m=n(624),v=m.createElement,y=n(187),_=n(158),x=n(149),w=n(171),b=n(170),C=n(198),S=y.CMD,M=Array.prototype.join,E="none",I=Math.round,T=Math.sin,P=Math.cos,L=Math.PI,D=2*Math.PI,A=180/L,k=1e-4,N={};N.brush=function(t){var e=t.style,n=t.__svgEl;n||(n=v("path"),t.__svgEl=n),t.path||t.createPathProxy();var i=t.path;if(t.__dirtyPath){i.beginPath(),i.subPixelOptimize=!1,t.buildPath(i,t.shape),t.__dirtyPath=!1;var r=h(i);r.indexOf("NaN")<0&&l(n,"d",r)}c(n,e,!1,t),s(n,t.transform),null!=e.text?G(t,t.getBoundingRect()):g(t)};var O={};O.brush=function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement){var i=n.src;n=i}if(n){var r=e.x||0,o=e.y||0,a=e.width,c=e.height,h=t.__svgEl;h||(h=v("image"),t.__svgEl=h),n!==t.__imageSrc&&(u(h,"href",n),t.__imageSrc=n),l(h,"width",a),l(h,"height",c),l(h,"x",r),l(h,"y",o),s(h,t.transform),null!=e.text?G(t,t.getBoundingRect()):g(t)}};var R={},F=new _,z={},B=[],V={left:"start",right:"end",center:"middle",middle:"middle"},G=function(t,e){var n=t.style,i=t.transform,r=t instanceof C||n.transformText;t.__dirty&&b.normalizeTextStyle(n,!0);var o=n.text;if(null!=o&&(o+=""),b.needDrawText(o,n)){null==o&&(o=""),!r&&i&&(F.copy(e),F.applyTransform(i),e=F);var a=t.__textSvgEl;a||(a=v("text"),t.__textSvgEl=a);var s=a.style,l=n.font||w.DEFAULT_FONT,u=a.__computedFont;l!==a.__styleFont&&(s.font=a.__styleFont=l,u=a.__computedFont=s.font);var h=n.textPadding,g=n.textLineHeight,m=t.__textCotentBlock;m&&!t.__dirtyText||(m=t.__textCotentBlock=w.parsePlainText(o,u,h,g,n.truncate));var y=m.outerHeight,_=m.lineHeight;b.getBoxPosition(z,t,n,e);var x=z.baseX,S=z.baseY,M=z.textAlign||"left",E=z.textVerticalAlign;f(a,r,i,n,e,x,S);var I=w.adjustTextY(S,y,E),T=x,P=I;h&&(T=p(x,M,h),P+=h[0]),P+=_/2,c(a,n,!0,t);var L=m.canCacheByTextString,D=t.__tspanList||(t.__tspanList=[]),A=D.length;if(L&&t.__canCacheByTextString&&t.__text===o){if(t.__dirtyText&&A)for(var k=0;k<A;++k)d(D[k],M,T,P+k*_)}else{t.__text=o,t.__canCacheByTextString=L;for(var N=m.lines,O=N.length,k=0;k<O;k++){var R=D[k],B=N[k];R?R.__zrText!==B&&(R.innerHTML="",R.appendChild(document.createTextNode(B))):(R=D[k]=v("tspan"),a.appendChild(R),R.appendChild(document.createTextNode(B))),d(R,M,T,P+k*_)}if(A>O){for(;k<A;k++)a.removeChild(D[k]);D.length=O}}}};R.drawRectText=G,R.brush=function(t){var e=t.style;null!=e.text?G(t,!1):g(t)},e.path=N,e.image=O,e.text=R},function(t,e){function n(t){return document.createElementNS(i,t)}var i="http://www.w3.org/2000/svg";e.createElement=n},function(t,e,n){function i(t){return parseInt(t,10)}function r(t){return t instanceof m?S:t instanceof v?M:t instanceof y?E:S}function o(t,e){return e&&t&&e.parentNode!==t}function a(t,e,n){if(o(t,e)&&n){var i=n.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function s(t,e){if(o(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function l(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function u(t){return t.__textSvgEl}function c(t){return t.__svgEl}function h(t){return function(){g('In SVG mode painter not support method "'+t+'"')}}var f=n(624),p=f.createElement,d=n(136),g=n(156),m=n(186),v=n(167),y=n(198),_=n(626),x=n(627),w=n(629),b=n(630),C=n(623),S=C.path,M=C.image,E=C.text,I=function(t,e,n,i){this.root=t,this.storage=e,this._opts=n=d.extend({},n||{});var r=p("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1"),r.setAttribute("baseProfile","full"),r.style.cssText="user-select:none;position:absolute;left:0;top:0;";var o=p("g");r.appendChild(o);var a=p("g");r.appendChild(a),this.gradientManager=new x(i,a),this.clipPathManager=new w(i,a),this.shadowManager=new b(i,a);var s=document.createElement("div");s.style.cssText="overflow:hidden;position:relative",this._svgDom=r,this._svgRoot=a,this._backgroundRoot=o,this._viewport=s,t.appendChild(s),s.appendChild(r),this.resize(n.width,n.height),this._visibleList=[]};I.prototype={constructor:I,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=p("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0),e.style.fill=t,this._backgroundRoot.appendChild(e),this._backgroundNode=e},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n=this._svgRoot,i=this._visibleList,o=t.length,h=[];for(e=0;e<o;e++){var f=t[e],p=r(f),d=c(f)||u(f);f.invisible||(f.__dirty&&(p&&p.brush(f),this.clipPathManager.update(f),f.style&&(this.gradientManager.update(f.style.fill),this.gradientManager.update(f.style.stroke),this.shadowManager.update(d,f)),f.__dirty=!1),h.push(f))}var g,m=_(i,h);for(e=0;e<m.length;e++){var v=m[e];if(v.removed)for(var y=0;y<v.count;y++){var f=i[v.indices[y]],d=c(f),x=u(f);l(n,d),l(n,x)}}for(e=0;e<m.length;e++){var v=m[e];if(v.added)for(var y=0;y<v.count;y++){var f=h[v.indices[y]],d=c(f),x=u(f);g?a(n,d,g):s(n,d),d?a(n,x,d):g?a(n,x,g):s(n,x),a(n,x,d),g=x||d||g,this.gradientManager.addWithoutUpdate(d||x,f),this.shadowManager.addWithoutUpdate(d||x,f),this.clipPathManager.markUsed(f)}else if(!v.removed)for(var y=0;y<v.count;y++){var f=h[v.indices[y]],d=c(f),x=u(f),d=c(f),x=u(f);this.gradientManager.markUsed(f),this.gradientManager.addWithoutUpdate(d||x,f),this.shadowManager.markUsed(f),this.shadowManager.addWithoutUpdate(d||x,f),this.clipPathManager.markUsed(f),x&&a(n,x,d),g=d||x||g}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=h},_getDefs:function(t){var e=this._svgDom,n=e.getElementsByTagName("defs");if(0===n.length){if(t){var n=e.insertBefore(p("defs"),e.firstChild);return n.contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;i>=0;--i)if(e[i]===t)return!0;return!1}),n}return null}return n[0]},resize:function(t,e){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var r=n.style;r.width=t+"px",r.height=e+"px";var o=this._svgDom;o.setAttribute("width",t),o.setAttribute("height",e)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var s=this.root,l=document.defaultView.getComputedStyle(s);return(s[r]||i(l[n])||i(s.style[n]))-(i(l[o])||0)-(i(l[a])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){this.refresh();var t=encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"));return"data:image/svg+xml;charset=UTF-8,"+t}},d.each(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(t){I.prototype[t]=h(t)});var T=I;t.exports=T},function(t,e){function n(){}function i(t,e,n,i){for(var r=0,o=e.length,a=0,s=0;r<o;r++){var l=e[r];if(l.removed){for(var u=[],c=s;c<s+l.count;c++)u.push(c);l.indices=u,s+=l.count}else{for(var u=[],c=a;c<a+l.count;c++)u.push(c);l.indices=u,a+=l.count,l.added||(s+=l.count)}}return e}function r(t){return{newPos:t.newPos,components:t.components.slice(0)}}function o(t,e,n){return a.diff(t,e,n)}n.prototype={diff:function(t,e,n){function o(){for(var n=-1*u;n<=u;n+=2){var o,c=h[n-1],f=h[n+1],p=(f?f.newPos:0)-n;c&&(h[n-1]=void 0);var d=c&&c.newPos+1<s,g=f&&0<=p&&p<l;if(d||g){if(!d||g&&c.newPos<f.newPos?(o=r(f),a.pushComponent(o.components,void 0,!0)):(o=c,o.newPos++,a.pushComponent(o.components,!0,void 0)),p=a.extractCommon(o,e,t,n),o.newPos+1>=s&&p+1>=l)return i(a,o.components,e,t);h[n]=o}else h[n]=void 0}u++}n||(n=function(t,e){return t===e}),this.equals=n;var a=this;t=t.slice(),e=e.slice();var s=e.length,l=t.length,u=1,c=s+l,h=[{newPos:-1,components:[]}],f=this.extractCommon(h[0],e,t,0);if(h[0].newPos+1>=s&&f+1>=l){for(var p=[],d=0;d<e.length;d++)p.push(d);return[{indices:p,count:e.length}]}for(;u<=c;){var g=o();if(g)return g}},pushComponent:function(t,e,n){var i=t[t.length-1];i&&i.added===e&&i.removed===n?t[t.length-1]={count:i.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,i){for(var r=e.length,o=n.length,a=t.newPos,s=a-i,l=0;a+1<r&&s+1<o&&this.equals(e[a+1],n[s+1]);)a++,s++,l++;return l&&t.components.push({count:l}),t.newPos=a,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var a=new n;t.exports=o},function(t,e,n){function i(t,e){r.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}var r=n(628),o=n(136),a=n(156),s=n(154);o.inherits(i,r),i.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;o.each(["fill","stroke"],function(i){if(e.style[i]&&("linear"===e.style[i].type||"radial"===e.style[i].type)){var r,o=e.style[i],a=n.getDefs(!0);o._dom?(r=o._dom,a.contains(o._dom)||n.addDom(r)):r=n.add(o),n.markUsed(e);var s=r.getAttribute("id");t.setAttribute(i,"url(#"+s+")")}})}},i.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return a("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},i.prototype.update=function(t){var e=this;r.prototype.update.call(this,t,function(){var n=t.type,i=t._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))})},i.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return void a("Illegal gradient type.");e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,r=n.length;i<r;++i){var o=this.createElement("stop");o.setAttribute("offset",100*n[i].offset+"%");var l=n[i].color;if(l.indexOf("rgba")>-1){var u=s.parse(l)[3],c=s.toHex(l);o.setAttribute("stop-color","#"+c),o.setAttribute("stop-opacity",u)}else o.setAttribute("stop-color",n[i].color);e.appendChild(o)}t._dom=e},i.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&r.prototype.markUsed.call(this,e._dom),e=t.style.stroke,e&&e._dom&&r.prototype.markUsed.call(this,e._dom)}};var l=i;t.exports=l},function(t,e,n){function i(t,e,n,i,r){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=r||"_dom",this.nextId=0}var r=n(624),o=r.createElement,a=n(136),s=n(186),l=n(167),u=n(198),c=n(623),h=c.path,f=c.image,p=c.text,d="0",g="1";i.prototype.createElement=o,i.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?(n=e.insertBefore(this.createElement("defs"),e.firstChild),n.contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;i>=0;--i)if(e[i]===t)return!0;return!1}),n):null:n[0]},i.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var i=this.add(t);i&&(t[this._domName]=i)}}},i.prototype.addDom=function(t){var e=this.getDefs(!0);e.appendChild(t)},i.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},i.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return a.each(this._tagNames,function(n){var i=t.getElementsByTagName(n);e=e.concat([].slice.call(i))}),e},i.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;a.each(t,function(t){t[e._markLabel]=d})},i.prototype.markUsed=function(t){t&&(t[this._markLabel]=g)},i.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;a.each(e,function(e){e[n._markLabel]!==g&&t.removeChild(e)})}},i.prototype.getSvgProxy=function(t){return t instanceof s?h:t instanceof l?f:t instanceof u?p:h},i.prototype.getTextSvgElement=function(t){return t.__textSvgEl},i.prototype.getSvgElement=function(t){return t.__svgEl};var m=i;t.exports=m},function(t,e,n){function i(t,e){r.call(this,t,e,"clipPath","__clippath_in_use__")}var r=n(628),o=n(136),a=n(149);o.inherits(i,r),i.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},i.prototype.updateDom=function(t,e,n){if(e&&e.length>0){var i,r,o=this.getDefs(!0),s=e[0],l=n?"_textDom":"_dom";s[l]?(r=s[l].getAttribute("id"),i=s[l],o.contains(i)||o.appendChild(i)):(r="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,i=this.createElement("clipPath"),i.setAttribute("id",r),o.appendChild(i),s[l]=i);var u=this.getSvgProxy(s);if(s.transform&&s.parent.invTransform&&!n){var c=Array.prototype.slice.call(s.transform);a.mul(s.transform,s.parent.invTransform,s.transform),u.brush(s),s.transform=c}else u.brush(s);var h=this.getSvgElement(s);i.innerHTML="",i.appendChild(h.cloneNode()),t.setAttribute("clip-path","url(#"+r+")"),e.length>1&&this.updateDom(i,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},i.prototype.markUsed=function(t){var e=this;t.__clipPaths&&o.each(t.__clipPaths,function(t){t._dom&&r.prototype.markUsed.call(e,t._dom),t._textDom&&r.prototype.markUsed.call(e,t._textDom)})};var s=i;t.exports=s},function(t,e,n){function i(t,e){o.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function r(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}var o=n(628),a=n(136);a.inherits(i,o),i.prototype.addWithoutUpdate=function(t,e){if(e&&r(e.style)){var n;if(e._shadowDom){n=e._shadowDom;var i=this.getDefs(!0);i.contains(e._shadowDom)||this.addDom(n)}else n=this.add(e);this.markUsed(e);var o=n.getAttribute("id");t.style.filter="url(#"+o+")"}},i.prototype.add=function(t){var e=this.createElement("filter");return t._shadowDomId=t._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+t._shadowDomId),this.updateDom(t,e),this.addDom(e),e},i.prototype.update=function(t,e){var n=e.style;if(r(n)){var i=this;o.prototype.update.call(this,e,function(){i.updateDom(e,e._shadowDom)})}else this.remove(t,e)},i.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(t),t.style.filter="")},i.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,r,o,a,s=t.style,l=t.scale?t.scale[0]||1:1,u=t.scale?t.scale[1]||1:1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)i=s.shadowOffsetX||0,r=s.shadowOffsetY||0,o=s.shadowBlur,a=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);i=s.textShadowOffsetX||0,r=s.textShadowOffsetY||0,o=s.textShadowBlur,a=s.textShadowColor}n.setAttribute("dx",i/l),n.setAttribute("dy",r/u),n.setAttribute("flood-color",a);var c=o/2/l,h=o/2/u,f=c+" "+h;n.setAttribute("stdDeviation",f),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(o/2*200)+"%"),e.setAttribute("height",Math.ceil(o/2*200)+"%"),e.appendChild(n),t._shadowDom=e},i.prototype.markUsed=function(t){t._shadowDom&&o.prototype.markUsed.call(this,t._shadowDom)};var s=i;t.exports=s},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.options={dataOrUrl:"",pixelRange:15,enabled:!0,style:[{num:1,size:48,color:"#e6a23cbb"}],img:""},this.options=Object.assign(this.options,e),this.viewer=e.viewer,this.dataSources=null,this.clustericon={},this.options.dataOrUrl&&""!=this.options.dataOrUrl&&this.loadjson()}return i(t,[{key:"loadjson",value:function(){var t=this;(new Cesium.GeoJsonDataSource).load(t.options.dataOrUrl).then(function(e){t.showcluster(e)})}},{key:"showcluster",value:function(t){function e(){Cesium.defined(a)?(a(),a=void 0):a=n.dataSources.clustering.clusterEvent.addEventListener(function(t,e){e.billboard.show=!0,e.billboard.id=e.label.id,e.billboard.eyeOffset=new Cesium.Cartesian3(0,0,-10),e.billboard.disableDepthTestDistance=Number.POSITIVE_INFINITY,e.billboard.verticalOrigin=Cesium.VerticalOrigin.CENTER;for(var i=-1,r=0;r<n.options.style.length;r++)t.length>n.options.style[r].num&&(i=r);if(i==-1?e.billboard.image=n.options.img:e.billboard.image=n.drawImage(n.options.style[i].size,n.options.style[i].color),i!==-1){if(e.label.show=!0,e.label.style=Cesium.LabelStyle.FILL,e.label.fillColor=Cesium.Color.WHITE,e.label.font="normal 16px MicroSoft YaHei",e.label.outlineWidth=4,e.label.horizontalOrigin=Cesium.HorizontalOrigin.CENTER,e.label.verticalOrigin=Cesium.VerticalOrigin.CENTER,e.label.disableDepthTestDistance=Number.POSITIVE_INFINITY,e.label.pixelOffset=new Cesium.Cartesian2(0,0),e.label.eyeOffset=new Cesium.Cartesian3(0,0,-10),n.options.style[i].textstyle)for(var o in n.options.style[i].textstyle)e.label[o]=n.options.style[i].textstyle[o]}else e.label.show=!1});var t=n.dataSources.clustering.pixelRange;n.dataSources.clustering.pixelRange=0,n.dataSources.clustering.pixelRange=t}var n=this;this.dataSources=t,this.viewer.dataSources.add(this.dataSources);var i=this.options.pixelRange,r=1,o=this.options.enabled;this.dataSources.clustering.enabled=o,this.dataSources.clustering.pixelRange=i,this.dataSources.clustering.minimumClusterSize=r;var a;e()}},{key:"drawImage",value:function(t,e){if(this.clustericon[t+"_"+e])return this.clustericon[t+"_"+e];var n=document.createElement("canvas");n.height=t,n.width=t;var i=n.getContext("2d");i.beginPath(),i.arc(t/2,t/2,t/2,0,2*Math.PI,!0),i.fillStyle=e,i.closePath(),i.fill();var r=n.toDataURL();return this.clustericon[t+"_"+e]=r,r}},{key:"remove",value:function(){this.viewer.dataSources.remove(this.dataSources),this.dataSources=null,this.clustericon={}}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(){n(this,t)}return i(t,null,[{key:"greeting",value:function(){var t="%c",e="color:#00a1ff;font-weight:bolder;font-size:22px;font-family:'Microsoft YaHei',微软雅黑,'MicrosoftJhengHei',华文细黑,STHeiti,MingLiu ",n="color:#00a1ff;font-size:8px;font-family:'Microsoft YaHei',微软雅黑,'MicrosoftJhengHei',华文细黑,STHeiti,MingLiu ",i="欢迎使用CTMap SDK",r="版本号：1.1.0414",o="编译日期：2020-4-14 16:39:53",a="授权信息：授权-永久使用此软件当前版本。";console.info(t+i,e),console.info(t+r,n),console.info(t+o,n),console.info(t+a,n)}}]),t}();e.default=r},function(t,e){"use strict";function n(t,e){t=t||{},this._tilingScheme=t.tilingScheme||new Cesium.GeographicTilingScheme,this._color=t.color||new Cesium.Color(1,1,1,.4),this._tileWidth=t.tileWidth||256,this._tileHeight=t.tileHeight||256,this._ready=!0,this._sexagesimal=t.sexagesimal||!1,this._numLines=t.numLines||50,this._scene=e,this._labels=new Cesium.LabelCollection,e.primitives.add(this._labels),this._polylines=new Cesium.PolylineCollection,e.primitives.add(this._polylines),this._ellipsoid=e.globe.ellipsoid;var n=document.createElement("canvas");n.width=256,n.height=256,this._canvas=n;var i=this;e.camera.moveEnd.addEventListener(function(){i._show&&(i._polylines.removeAll(),i._labels.removeAll(),i._currentExtent=null,i._drawGrid(i._getExtentView()))}),e.imageryLayers.addImageryProvider(this)}function i(t){return t<.01?2:t<.1?1:0}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(t){return!1}}(),o=Object.defineProperties;r&&o||(o=function(t){return t}),o(n.prototype,{url:{get:function(){}},proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return 18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),n.prototype.makeLabel=function(t,e,n,i,r){this._labels.add({position:this._ellipsoid.cartographicToCartesian(new Cesium.Cartographic(t,e,10)),text:n,font:"16px Helvetica",style:Cesium.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium.Color.AZURE,outlineColor:Cesium.Color.BLACK,outlineWidth:2,pixelOffset:new Cesium.Cartesian2(5,i?18:-18),eyeOffset:Cesium.Cartesian3.ZERO,horizontalOrigin:Cesium.HorizontalOrigin.LEFT,verticalOrigin:i?Cesium.VerticalOrigin.BOTTOM:Cesium.VerticalOrigin.TOP,scale:1})},n.prototype._drawGrid=function(t){if(!this._currentExtent||!this._currentExtent.equals(t)){this._currentExtent=t,this._polylines.removeAll(),this._labels.removeAll();var e,n=(this._canvasSize,0),r=0;for(e=0;e<a.length&&n<(t.north-t.south)/10;e++)n=a[e];for(e=0;e<a.length&&r<(t.east-t.west)/10;e++)r=a[e];var o=(t.west<0?Math.ceil(t.west/r):Math.floor(t.west/r))*r,s=(t.south<0?Math.ceil(t.south/n):Math.floor(t.south/n))*n,l=(t.east<0?Math.ceil(t.east/n):Math.floor(t.east/n))*n,u=(t.north<0?Math.ceil(t.north/r):Math.floor(t.north/r))*r;o=Math.max(o-2*r,-Math.PI),l=Math.min(l+2*r,Math.PI),s=Math.max(s-2*n,-Math.PI/2),u=Math.min(u+2*r,Math.PI/2);var c,h,f=this._ellipsoid,p=Cesium.Math.toRadians(1),d=s+Math.floor((u-s)/n/2)*n;for(h=o;h<l;h+=r){var g=[];for(c=s;c<u;c+=p)g.push(new Cesium.Cartographic(h,c));g.push(new Cesium.Cartographic(h,u)),this._polylines.add({positions:f.cartographicArrayToCartesianArray(g),width:1});var m=Cesium.Math.toDegrees(h);this.makeLabel(h,d,this._sexagesimal?this._decToSex(m):m.toFixed(i(r)),!1)}var v=o+Math.floor((l-o)/r/2)*r;for(c=s;c<u;c+=n){var g=[];for(h=o;h<l;h+=p)g.push(new Cesium.Cartographic(h,c));g.push(new Cesium.Cartographic(l,c)),this._polylines.add({positions:f.cartographicArrayToCartesianArray(g),width:1});var y=Cesium.Math.toDegrees(c);this.makeLabel(v,c,this._sexagesimal?this._decToSex(y):y.toFixed(i(n)),!0)}}},n.prototype.requestImage=function(t,e,n){
return this._show&&this._drawGrid(this._getExtentView()),this._canvas},n.prototype.setVisible=function(t){this._show=t,t?(this._currentExtent=null,this._drawGrid(this._getExtentView())):(this._polylines.removeAll(),this._labels.removeAll())},n.prototype.isVisible=function(){return this._show},n.prototype._decToSex=function(t){var e=Math.floor(t),n=(60*(Math.abs(t)-e)).toFixed(2);return"60.00"==n&&(e+=1,n="0.00"),[e,":",n].join("")},n.prototype._getExtentView=function(){for(var t=this._scene.camera,e=this._scene.canvas,n=[t.pickEllipsoid(new Cesium.Cartesian2(0,0),this._ellipsoid),t.pickEllipsoid(new Cesium.Cartesian2(e.width,0),this._ellipsoid),t.pickEllipsoid(new Cesium.Cartesian2(0,e.height),this._ellipsoid),t.pickEllipsoid(new Cesium.Cartesian2(e.width,e.height),this._ellipsoid)],i=0;i<4;i++)if(void 0===n[i])return Cesium.Rectangle.MAX_VALUE;return Cesium.Rectangle.fromCartographicArray(this._ellipsoid.cartesianArrayToCartographicArray(n))};var a=[Cesium.Math.toRadians(.05),Cesium.Math.toRadians(.1),Cesium.Math.toRadians(.2),Cesium.Math.toRadians(.5),Cesium.Math.toRadians(1),Cesium.Math.toRadians(2),Cesium.Math.toRadians(5),Cesium.Math.toRadians(10)];e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){if(l=t.viewer,o=i(),a=t.normalMapUrl,r=t.DegreesArrayHeights&&t.DegreesArrayHeights.length>=3?t.DegreesArrayHeights:[116.04437,30.10932,-100,116.04537,30.10932,-120,116.04537,30.11032,-100,116.04437,30.11032,-120,116.04437,30.10932,-100],s=t.extrudedHeight?e(r,t.startH||0,t.extrudedHeight):e(r,t.startH||0),t.fillcolor||(u=n(o,a,t)),t.ClassificationPrimitive){var c=new Cesium.ClassificationPrimitive({geometryInstances:new Cesium.GeometryInstance({geometry:s,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(t.fillcolor||Cesium.Color.WHITE.withAlpha(1)),show:new Cesium.ShowGeometryInstanceAttribute(!0)}}),classificationType:Cesium.ClassificationType.CESIUM_3D_TILE,appearance:u});u?this.primitive=l.scene.primitives.add(new Cesium.Primitive(c)):(console.log(u),this.primitive=new Cesium.PrimitiveCollection,l.scene.primitives.add(this.primitive),this.primitive.add(c))}else this.primitive=l.scene.primitives.add(new Cesium.Primitive({allowPicking:!1,geometryInstances:new Cesium.GeometryInstance({geometry:s}),appearance:u,asynchronous:!1}))}function e(t,e,n){return n||e?new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArrayHeights(t)),height:e||0,extrudedHeight:n?n:0}):new Cesium.PolygonGeometry({polygonHierarchy:new Cesium.PolygonHierarchy(Cesium.Cartesian3.fromDegreesArrayHeights(t)),perPositionHeight:!0})}function n(t,e,n){return new Cesium.EllipsoidSurfaceAppearance({material:new Cesium.Material({fabric:{type:"Water",uniforms:{baseWaterColor:new Cesium.Color.fromCssColorString(n.waterColor||"#006ab4").withAlpha(.5),normalMap:e,frequency:400,animationSpeed:.02,amplitude:5}}}),fragmentShaderSource:t})}function i(){return"\n            varying vec3 v_positionMC;\n            varying vec3 v_positionEC;\n            varying vec2 v_st;\n            void main()\n            {\n                czm_materialInput materialInput;\n                vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n                #ifdef FACE_FORWARD\n                    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n                #endif\n                materialInput.s = v_st.s;\n                materialInput.st = v_st;\n                materialInput.str = vec3(v_st, 0.0);\n                materialInput.normalEC = normalEC;\n                materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n                vec3 positionToEyeEC = -v_positionEC;\n                materialInput.positionToEyeEC = positionToEyeEC;\n                czm_material material = czm_getMaterial(materialInput);\n                #ifdef FLAT\n                    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n                #else\n                    gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n                #endif\n                gl_FragColor.a=0.7;\n            }\n"}var r,o,a,s,l,u=null;return t.prototype.remove=function(){null!=this.primitive&&(l.scene.primitives.remove(this.primitive),this.primitive=null)},t.prototype.updateDegreesPosition=function(t,n){null!=this.primitive&&(l.scene.primitives.remove(this.primitive),t&&t.length<3||(s=e(t,n?n:0),this.primitive=l.scene.primitives.add(new Cesium.Primitive({allowPicking:!1,geometryInstances:new Cesium.GeometryInstance({geometry:s}),appearance:u,asynchronous:!1}))))},t}();e.default=n}]);